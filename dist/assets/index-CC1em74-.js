function sv(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in r)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(r,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const E of f.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&a(E)}).observe(document,{childList:!0,subtree:!0});function t(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=t(c);fetch(c.href,f)}})();var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var U0={exports:{}},Zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function av(){if(v2)return Zc;v2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,c,f){var E=null;if(f!==void 0&&(E=""+f),c.key!==void 0&&(E=""+c.key),"key"in c){f={};for(var w in c)w!=="key"&&(f[w]=c[w])}else f=c;return c=f.ref,{$$typeof:r,type:a,key:E,ref:c!==void 0?c:null,props:f}}return Zc.Fragment=e,Zc.jsx=t,Zc.jsxs=t,Zc}var T2;function ov(){return T2||(T2=1,U0.exports=av()),U0.exports}var b=ov(),V0={exports:{}},pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function lv(){if(C2)return pt;C2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),E=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),M=Symbol.iterator;function V(Y){return Y===null||typeof Y!="object"?null:(Y=M&&Y[M]||Y["@@iterator"],typeof Y=="function"?Y:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,ie={};function te(Y,xe,Me){this.props=Y,this.context=xe,this.refs=ie,this.updater=Me||F}te.prototype.isReactComponent={},te.prototype.setState=function(Y,xe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,xe,"setState")},te.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function ue(){}ue.prototype=te.prototype;function ye(Y,xe,Me){this.props=Y,this.context=xe,this.refs=ie,this.updater=Me||F}var se=ye.prototype=new ue;se.constructor=ye,K(se,te.prototype),se.isPureReactComponent=!0;var De=Array.isArray,Ue={H:null,A:null,T:null,S:null},Se=Object.prototype.hasOwnProperty;function z(Y,xe,Me,je,Be,it){return Me=it.ref,{$$typeof:r,type:Y,key:xe,ref:Me!==void 0?Me:null,props:it}}function H(Y,xe){return z(Y.type,xe,void 0,void 0,void 0,Y.props)}function P(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===r}function W(Y){var xe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Me){return xe[Me]})}var J=/\/+/g;function Q(Y,xe){return typeof Y=="object"&&Y!==null&&Y.key!=null?W(""+Y.key):xe.toString(36)}function q(){}function ht(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(q,q):(Y.status="pending",Y.then(function(xe){Y.status==="pending"&&(Y.status="fulfilled",Y.value=xe)},function(xe){Y.status==="pending"&&(Y.status="rejected",Y.reason=xe)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function fe(Y,xe,Me,je,Be){var it=typeof Y;(it==="undefined"||it==="boolean")&&(Y=null);var Ie=!1;if(Y===null)Ie=!0;else switch(it){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(Y.$$typeof){case r:case e:Ie=!0;break;case I:return Ie=Y._init,fe(Ie(Y._payload),xe,Me,je,Be)}}if(Ie)return Be=Be(Y),Ie=je===""?"."+Q(Y,0):je,De(Be)?(Me="",Ie!=null&&(Me=Ie.replace(J,"$&/")+"/"),fe(Be,xe,Me,"",function(Ht){return Ht})):Be!=null&&(P(Be)&&(Be=H(Be,Me+(Be.key==null||Y&&Y.key===Be.key?"":(""+Be.key).replace(J,"$&/")+"/")+Ie)),xe.push(Be)),1;Ie=0;var sn=je===""?".":je+":";if(De(Y))for(var Qe=0;Qe<Y.length;Qe++)je=Y[Qe],it=sn+Q(je,Qe),Ie+=fe(je,xe,Me,it,Be);else if(Qe=V(Y),typeof Qe=="function")for(Y=Qe.call(Y),Qe=0;!(je=Y.next()).done;)je=je.value,it=sn+Q(je,Qe++),Ie+=fe(je,xe,Me,it,Be);else if(it==="object"){if(typeof Y.then=="function")return fe(ht(Y),xe,Me,je,Be);throw xe=String(Y),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function be(Y,xe,Me){if(Y==null)return Y;var je=[],Be=0;return fe(Y,je,"","",function(it){return xe.call(Me,it,Be++)}),je}function ke(Y){if(Y._status===-1){var xe=Y._result;xe=xe(),xe.then(function(Me){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Me)},function(Me){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Me)}),Y._status===-1&&(Y._status=0,Y._result=xe)}if(Y._status===1)return Y._result.default;throw Y._result}var Ve=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function Te(){}return pt.Children={map:be,forEach:function(Y,xe,Me){be(Y,function(){xe.apply(this,arguments)},Me)},count:function(Y){var xe=0;return be(Y,function(){xe++}),xe},toArray:function(Y){return be(Y,function(xe){return xe})||[]},only:function(Y){if(!P(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},pt.Component=te,pt.Fragment=t,pt.Profiler=c,pt.PureComponent=ye,pt.StrictMode=a,pt.Suspense=T,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue,pt.act=function(){throw Error("act(...) is not supported in production builds of React.")},pt.cache=function(Y){return function(){return Y.apply(null,arguments)}},pt.cloneElement=function(Y,xe,Me){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var je=K({},Y.props),Be=Y.key,it=void 0;if(xe!=null)for(Ie in xe.ref!==void 0&&(it=void 0),xe.key!==void 0&&(Be=""+xe.key),xe)!Se.call(xe,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&xe.ref===void 0||(je[Ie]=xe[Ie]);var Ie=arguments.length-2;if(Ie===1)je.children=Me;else if(1<Ie){for(var sn=Array(Ie),Qe=0;Qe<Ie;Qe++)sn[Qe]=arguments[Qe+2];je.children=sn}return z(Y.type,Be,void 0,void 0,it,je)},pt.createContext=function(Y){return Y={$$typeof:E,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:f,_context:Y},Y},pt.createElement=function(Y,xe,Me){var je,Be={},it=null;if(xe!=null)for(je in xe.key!==void 0&&(it=""+xe.key),xe)Se.call(xe,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(Be[je]=xe[je]);var Ie=arguments.length-2;if(Ie===1)Be.children=Me;else if(1<Ie){for(var sn=Array(Ie),Qe=0;Qe<Ie;Qe++)sn[Qe]=arguments[Qe+2];Be.children=sn}if(Y&&Y.defaultProps)for(je in Ie=Y.defaultProps,Ie)Be[je]===void 0&&(Be[je]=Ie[je]);return z(Y,it,void 0,void 0,null,Be)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(Y){return{$$typeof:w,render:Y}},pt.isValidElement=P,pt.lazy=function(Y){return{$$typeof:I,_payload:{_status:-1,_result:Y},_init:ke}},pt.memo=function(Y,xe){return{$$typeof:_,type:Y,compare:xe===void 0?null:xe}},pt.startTransition=function(Y){var xe=Ue.T,Me={};Ue.T=Me;try{var je=Y(),Be=Ue.S;Be!==null&&Be(Me,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Te,Ve)}catch(it){Ve(it)}finally{Ue.T=xe}},pt.unstable_useCacheRefresh=function(){return Ue.H.useCacheRefresh()},pt.use=function(Y){return Ue.H.use(Y)},pt.useActionState=function(Y,xe,Me){return Ue.H.useActionState(Y,xe,Me)},pt.useCallback=function(Y,xe){return Ue.H.useCallback(Y,xe)},pt.useContext=function(Y){return Ue.H.useContext(Y)},pt.useDebugValue=function(){},pt.useDeferredValue=function(Y,xe){return Ue.H.useDeferredValue(Y,xe)},pt.useEffect=function(Y,xe){return Ue.H.useEffect(Y,xe)},pt.useId=function(){return Ue.H.useId()},pt.useImperativeHandle=function(Y,xe,Me){return Ue.H.useImperativeHandle(Y,xe,Me)},pt.useInsertionEffect=function(Y,xe){return Ue.H.useInsertionEffect(Y,xe)},pt.useLayoutEffect=function(Y,xe){return Ue.H.useLayoutEffect(Y,xe)},pt.useMemo=function(Y,xe){return Ue.H.useMemo(Y,xe)},pt.useOptimistic=function(Y,xe){return Ue.H.useOptimistic(Y,xe)},pt.useReducer=function(Y,xe,Me){return Ue.H.useReducer(Y,xe,Me)},pt.useRef=function(Y){return Ue.H.useRef(Y)},pt.useState=function(Y){return Ue.H.useState(Y)},pt.useSyncExternalStore=function(Y,xe,Me){return Ue.H.useSyncExternalStore(Y,xe,Me)},pt.useTransition=function(){return Ue.H.useTransition()},pt.version="19.0.0",pt}var S2;function M1(){return S2||(S2=1,V0.exports=lv()),V0.exports}var ee=M1();const oo=O1(ee);var j0={exports:{}},Jc={},F0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function cv(){return b2||(b2=1,function(r){function e(be,ke){var Ve=be.length;be.push(ke);e:for(;0<Ve;){var Te=Ve-1>>>1,Y=be[Te];if(0<c(Y,ke))be[Te]=ke,be[Ve]=Y,Ve=Te;else break e}}function t(be){return be.length===0?null:be[0]}function a(be){if(be.length===0)return null;var ke=be[0],Ve=be.pop();if(Ve!==ke){be[0]=Ve;e:for(var Te=0,Y=be.length,xe=Y>>>1;Te<xe;){var Me=2*(Te+1)-1,je=be[Me],Be=Me+1,it=be[Be];if(0>c(je,Ve))Be<Y&&0>c(it,je)?(be[Te]=it,be[Be]=Ve,Te=Be):(be[Te]=je,be[Me]=Ve,Te=Me);else if(Be<Y&&0>c(it,Ve))be[Te]=it,be[Be]=Ve,Te=Be;else break e}}return ke}function c(be,ke){var Ve=be.sortIndex-ke.sortIndex;return Ve!==0?Ve:be.id-ke.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var E=Date,w=E.now();r.unstable_now=function(){return E.now()-w}}var T=[],_=[],I=1,M=null,V=3,F=!1,K=!1,ie=!1,te=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function se(be){for(var ke=t(_);ke!==null;){if(ke.callback===null)a(_);else if(ke.startTime<=be)a(_),ke.sortIndex=ke.expirationTime,e(T,ke);else break;ke=t(_)}}function De(be){if(ie=!1,se(be),!K)if(t(T)!==null)K=!0,ht();else{var ke=t(_);ke!==null&&fe(De,ke.startTime-be)}}var Ue=!1,Se=-1,z=5,H=-1;function P(){return!(r.unstable_now()-H<z)}function W(){if(Ue){var be=r.unstable_now();H=be;var ke=!0;try{e:{K=!1,ie&&(ie=!1,ue(Se),Se=-1),F=!0;var Ve=V;try{t:{for(se(be),M=t(T);M!==null&&!(M.expirationTime>be&&P());){var Te=M.callback;if(typeof Te=="function"){M.callback=null,V=M.priorityLevel;var Y=Te(M.expirationTime<=be);if(be=r.unstable_now(),typeof Y=="function"){M.callback=Y,se(be),ke=!0;break t}M===t(T)&&a(T),se(be)}else a(T);M=t(T)}if(M!==null)ke=!0;else{var xe=t(_);xe!==null&&fe(De,xe.startTime-be),ke=!1}}break e}finally{M=null,V=Ve,F=!1}ke=void 0}}finally{ke?J():Ue=!1}}}var J;if(typeof ye=="function")J=function(){ye(W)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,q=Q.port2;Q.port1.onmessage=W,J=function(){q.postMessage(null)}}else J=function(){te(W,0)};function ht(){Ue||(Ue=!0,J())}function fe(be,ke){Se=te(function(){be(r.unstable_now())},ke)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(be){be.callback=null},r.unstable_continueExecution=function(){K||F||(K=!0,ht())},r.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<be?Math.floor(1e3/be):5},r.unstable_getCurrentPriorityLevel=function(){return V},r.unstable_getFirstCallbackNode=function(){return t(T)},r.unstable_next=function(be){switch(V){case 1:case 2:case 3:var ke=3;break;default:ke=V}var Ve=V;V=ke;try{return be()}finally{V=Ve}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(be,ke){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var Ve=V;V=be;try{return ke()}finally{V=Ve}},r.unstable_scheduleCallback=function(be,ke,Ve){var Te=r.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?Te+Ve:Te):Ve=Te,be){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Ve+Y,be={id:I++,callback:ke,priorityLevel:be,startTime:Ve,expirationTime:Y,sortIndex:-1},Ve>Te?(be.sortIndex=Ve,e(_,be),t(T)===null&&be===t(_)&&(ie?(ue(Se),Se=-1):ie=!0,fe(De,Ve-Te))):(be.sortIndex=Y,e(T,be),K||F||(K=!0,ht())),be},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(be){var ke=V;return function(){var Ve=V;V=ke;try{return be.apply(this,arguments)}finally{V=Ve}}}}(z0)),z0}var I2;function uv(){return I2||(I2=1,F0.exports=cv()),F0.exports}var H0={exports:{}},Bi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function hv(){if(N2)return Bi;N2=1;var r=M1();function e(T){var _="https://react.dev/errors/"+T;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)_+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+T+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(T,_,I){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:T,containerInfo:_,implementation:I}}var E=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(T,_){if(T==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Bi.createPortal=function(T,_){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return f(T,_,null,I)},Bi.flushSync=function(T){var _=E.T,I=a.p;try{if(E.T=null,a.p=2,T)return T()}finally{E.T=_,a.p=I,a.d.f()}},Bi.preconnect=function(T,_){typeof T=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(T,_))},Bi.prefetchDNS=function(T){typeof T=="string"&&a.d.D(T)},Bi.preinit=function(T,_){if(typeof T=="string"&&_&&typeof _.as=="string"){var I=_.as,M=w(I,_.crossOrigin),V=typeof _.integrity=="string"?_.integrity:void 0,F=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;I==="style"?a.d.S(T,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:M,integrity:V,fetchPriority:F}):I==="script"&&a.d.X(T,{crossOrigin:M,integrity:V,fetchPriority:F,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Bi.preinitModule=function(T,_){if(typeof T=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var I=w(_.as,_.crossOrigin);a.d.M(T,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(T)},Bi.preload=function(T,_){if(typeof T=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var I=_.as,M=w(I,_.crossOrigin);a.d.L(T,I,{crossOrigin:M,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Bi.preloadModule=function(T,_){if(typeof T=="string")if(_){var I=w(_.as,_.crossOrigin);a.d.m(T,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(T)},Bi.requestFormReset=function(T){a.d.r(T)},Bi.unstable_batchedUpdates=function(T,_){return T(_)},Bi.useFormState=function(T,_,I){return E.H.useFormState(T,_,I)},Bi.useFormStatus=function(){return E.H.useHostTransitionStatus()},Bi.version="19.0.0",Bi}var R2;function fv(){if(R2)return H0.exports;R2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),H0.exports=hv(),H0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function dv(){if(D2)return Jc;D2=1;var r=uv(),e=M1(),t=fv();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var f=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),F=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),De=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function Se(n){return n===null||typeof n!="object"?null:(n=Ue&&n[Ue]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function H(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case T:return"Fragment";case w:return"Portal";case I:return"Profiler";case _:return"StrictMode";case ie:return"Suspense";case te:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case F:return(n.displayName||"Context")+".Provider";case V:return(n._context.displayName||"Context")+".Consumer";case K:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ue:return s=n.displayName||null,s!==null?s:H(n.type)||"Memo";case ye:s=n._payload,n=n._init;try{return H(n(s))}catch{}}return null}var P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=Object.assign,J,Q;function q(n){if(J===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);J=s&&s[1]||"",Q=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+n+Q}var ht=!1;function fe(n,s){if(!n||ht)return"";ht=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(Ee){var de=Ee}Reflect.construct(n,[],Re)}else{try{Re.call()}catch(Ee){de=Ee}n.call(Re.prototype)}}else{try{throw Error()}catch(Ee){de=Ee}(Re=n())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(Ee){if(Ee&&de&&typeof Ee.stack=="string")return[Ee.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=g.DetermineComponentFrameRoot(),D=v[0],B=v[1];if(D&&B){var X=D.split(`
`),re=B.split(`
`);for(x=g=0;g<X.length&&!X[g].includes("DetermineComponentFrameRoot");)g++;for(;x<re.length&&!re[x].includes("DetermineComponentFrameRoot");)x++;if(g===X.length||x===re.length)for(g=X.length-1,x=re.length-1;1<=g&&0<=x&&X[g]!==re[x];)x--;for(;1<=g&&0<=x;g--,x--)if(X[g]!==re[x]){if(g!==1||x!==1)do if(g--,x--,0>x||X[g]!==re[x]){var _e=`
`+X[g].replace(" at new "," at ");return n.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",n.displayName)),_e}while(1<=g&&0<=x);break}}}finally{ht=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?q(u):""}function be(n){switch(n.tag){case 26:case 27:case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return n=fe(n.type,!1),n;case 11:return n=fe(n.type.render,!1),n;case 1:return n=fe(n.type,!0),n;default:return""}}function ke(n){try{var s="";do s+=be(n),n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Ve(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function Te(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Y(n){if(Ve(n)!==n)throw Error(a(188))}function xe(n){var s=n.alternate;if(!s){if(s=Ve(n),s===null)throw Error(a(188));return s!==n?null:n}for(var u=n,g=s;;){var x=u.return;if(x===null)break;var v=x.alternate;if(v===null){if(g=x.return,g!==null){u=g;continue}break}if(x.child===v.child){for(v=x.child;v;){if(v===u)return Y(x),n;if(v===g)return Y(x),s;v=v.sibling}throw Error(a(188))}if(u.return!==g.return)u=x,g=v;else{for(var D=!1,B=x.child;B;){if(B===u){D=!0,u=x,g=v;break}if(B===g){D=!0,g=x,u=v;break}B=B.sibling}if(!D){for(B=v.child;B;){if(B===u){D=!0,u=v,g=x;break}if(B===g){D=!0,g=v,u=x;break}B=B.sibling}if(!D)throw Error(a(189))}}if(u.alternate!==g)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?n:s}function Me(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=Me(n),s!==null)return s;n=n.sibling}return null}var je=Array.isArray,Be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},Ie=[],sn=-1;function Qe(n){return{current:n}}function Ht(n){0>sn||(n.current=Ie[sn],Ie[sn]=null,sn--)}function xt(n,s){sn++,Ie[sn]=n.current,n.current=s}var Bt=Qe(null),xi=Qe(null),ft=Qe(null),zi=Qe(null);function si(n,s){switch(xt(ft,s),xt(xi,n),xt(Bt,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?Jp(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=Jp(n),s=$p(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ht(Bt),xt(Bt,s)}function Hi(){Ht(Bt),Ht(xi),Ht(ft)}function In(n){n.memoizedState!==null&&xt(zi,n);var s=Bt.current,u=$p(s,n.type);s!==u&&(xt(xi,n),xt(Bt,u))}function jt(n){xi.current===n&&(Ht(Bt),Ht(xi)),zi.current===n&&(Ht(zi),Yc._currentValue=it)}var yt=Object.prototype.hasOwnProperty,Nr=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,va=r.unstable_shouldYield,Ta=r.unstable_requestPaint,vn=r.unstable_now,Ca=r.unstable_getCurrentPriorityLevel,Kt=r.unstable_ImmediatePriority,Hn=r.unstable_UserBlockingPriority,di=r.unstable_NormalPriority,Kn=r.unstable_LowPriority,Sa=r.unstable_IdlePriority,ba=r.log,Ps=r.unstable_setDisableYieldValue,$t=null,Le=null;function mn(n){if(Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot($t,n,void 0,(n.current.flags&128)===128)}catch{}}function wt(n){if(typeof ba=="function"&&Ps(n),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode($t,n)}catch{}}var vt=Math.clz32?Math.clz32:wo,Zr=Math.log,Ia=Math.LN2;function wo(n){return n>>>=0,n===0?32:31-(Zr(n)/Ia|0)|0}var mt=128,Ri=4194304;function er(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Gi(n,s){var u=n.pendingLanes;if(u===0)return 0;var g=0,x=n.suspendedLanes,v=n.pingedLanes,D=n.warmLanes;n=n.finishedLanes!==0;var B=u&134217727;return B!==0?(u=B&~x,u!==0?g=er(u):(v&=B,v!==0?g=er(v):n||(D=B&~D,D!==0&&(g=er(D))))):(B=u&~x,B!==0?g=er(B):v!==0?g=er(v):n||(D=u&~D,D!==0&&(g=er(D)))),g===0?0:s!==0&&s!==g&&(s&x)===0&&(x=g&-g,D=s&-s,x>=D||x===32&&(D&4194176)!==0)?s:g}function Zn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function fs(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(){var n=mt;return mt<<=1,(mt&4194176)===0&&(mt=128),n}function qi(){var n=Ri;return Ri<<=1,(Ri&62914560)===0&&(Ri=4194304),n}function Jr(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Gt(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nl(n,s,u,g,x,v){var D=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var B=n.entanglements,X=n.expirationTimes,re=n.hiddenUpdates;for(u=D&~u;0<u;){var _e=31-vt(u),Re=1<<_e;B[_e]=0,X[_e]=-1;var de=re[_e];if(de!==null)for(re[_e]=null,_e=0;_e<de.length;_e++){var Ee=de[_e];Ee!==null&&(Ee.lane&=-536870913)}u&=~Re}g!==0&&Di(n,g,0),v!==0&&x===0&&n.tag!==0&&(n.suspendedLanes|=v&~(D&~s))}function Di(n,s,u){n.pendingLanes|=s,n.suspendedLanes&=~s;var g=31-vt(s);n.entangledLanes|=s,n.entanglements[g]=n.entanglements[g]|1073741824|u&4194218}function Rr(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var g=31-vt(u),x=1<<g;x&s|n[g]&s&&(n[g]|=s),u&=~x}}function ai(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Dr(){var n=Be.p;return n!==0?n:(n=window.event,n===void 0?32:y2(n.type))}function Gn(n,s){var u=Be.p;try{return Be.p=n,s()}finally{Be.p=u}}var He=Math.random().toString(36).slice(2),pn="__reactFiber$"+He,Nn="__reactProps$"+He,Tn="__reactContainer$"+He,tr="__reactEvents$"+He,$r="__reactListeners$"+He,Yi="__reactHandles$"+He,Oi="__reactResources$"+He,ds="__reactMarker$"+He;function ks(n){delete n[pn],delete n[Nn],delete n[tr],delete n[$r],delete n[Yi]}function kn(n){var s=n[pn];if(s)return s;for(var u=n.parentNode;u;){if(s=u[Tn]||u[pn]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=n2(n);n!==null;){if(u=n[pn])return u;n=n2(n)}return s}n=u,u=n.parentNode}return null}function yn(n){if(n=n[pn]||n[Tn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ft(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function es(n){var s=n[Oi];return s||(s=n[Oi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function qt(n){n[ds]=!0}var Bs=new Set,Ae={};function Xi(n,s){Ct(n,s),Ct(n+"Capture",s)}function Ct(n,s){for(Ae[n]=s,n=0;n<s.length;n++)Bs.add(s[n])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),It={},St={};function Et(n){return yt.call(St,n)?!0:yt.call(It,n)?!1:uc.test(n)?St[n]=!0:(It[n]=!0,!1)}function Or(n,s,u){if(Et(s))if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+u)}}function Mr(n,s,u){if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+u)}}function Mi(n,s,u,g){if(g===null)n.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(s,u,""+g)}}function Lt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mr(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hc(n){var s=mr(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),g=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return x.call(this)},set:function(D){g=""+D,v.call(this,D)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(D){g=""+D},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function en(n){n._valueTracker||(n._valueTracker=hc(n))}function nr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return n&&(g=mr(n)?n.checked?"true":"false":n.value),n=g,n!==u?(s.setValue(n),!0):!1}function Na(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Li=/[\n"\\]/g;function at(n){return n.replace(Li,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function En(n,s,u,g,x,v,D,B){n.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?n.type=D:n.removeAttribute("type"),s!=null?D==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Lt(s)):n.value!==""+Lt(s)&&(n.value=""+Lt(s)):D!=="submit"&&D!=="reset"||n.removeAttribute("value"),s!=null?j(n,D,Lt(s)):u!=null?j(n,D,Lt(u)):g!=null&&n.removeAttribute("value"),x==null&&v!=null&&(n.defaultChecked=!!v),x!=null&&(n.checked=x&&typeof x!="function"&&typeof x!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?n.name=""+Lt(B):n.removeAttribute("name")}function le(n,s,u,g,x,v,D,B){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;u=u!=null?""+Lt(u):"",s=s!=null?""+Lt(s):u,B||s===n.value||(n.value=s),n.defaultValue=s}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=B?n.checked:!!g,n.defaultChecked=!!g,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(n.name=D)}function j(n,s,u){s==="number"&&Na(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function Fe(n,s,u,g){if(n=n.options,s){s={};for(var x=0;x<u.length;x++)s["$"+u[x]]=!0;for(u=0;u<n.length;u++)x=s.hasOwnProperty("$"+n[u].value),n[u].selected!==x&&(n[u].selected=x),x&&g&&(n[u].defaultSelected=!0)}else{for(u=""+Lt(u),s=null,x=0;x<n.length;x++){if(n[x].value===u){n[x].selected=!0,g&&(n[x].defaultSelected=!0);return}s!==null||n[x].disabled||(s=n[x])}s!==null&&(s.selected=!0)}}function fn(n,s,u){if(s!=null&&(s=""+Lt(s),s!==n.value&&(n.value=s),u==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=u!=null?""+Lt(u):""}function qn(n,s,u,g){if(s==null){if(g!=null){if(u!=null)throw Error(a(92));if(je(g)){if(1<g.length)throw Error(a(93));g=g[0]}u=g}u==null&&(u=""),s=u}u=Lt(s),n.defaultValue=u,g=n.textContent,g===u&&g!==""&&g!==null&&(n.value=g)}function ir(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gi(n,s,u){var g=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":g?n.setProperty(s,u):typeof u!="number"||u===0||vo.has(s)?s==="float"?n.cssFloat=u:n[s]=(""+u).trim():n[s]=u+"px"}function Ze(n,s,u){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var x in s)g=s[x],s.hasOwnProperty(x)&&u[x]!==g&&gi(n,x,g)}else for(var v in s)s.hasOwnProperty(v)&&gi(n,v,s[v])}function tn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var il=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(n){return fc.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var _i=null;function gs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ts=null,an=null;function Wi(n){var s=yn(n);if(s&&(n=s.stateNode)){var u=n[Nn]||null;e:switch(n=s.stateNode,s.type){case"input":if(En(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+at(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==n&&g.form===n.form){var x=g[Nn]||null;if(!x)throw Error(a(90));En(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<u.length;s++)g=u[s],g.form===n.form&&nr(g)}break e;case"textarea":fn(n,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Fe(n,!!u.multiple,s,!1)}}}var sr=!1;function et(n,s,u){if(sr)return n(s,u);sr=!0;try{var g=n(s);return g}finally{if(sr=!1,(ts!==null||an!==null)&&(xh(),ts&&(s=ts,n=an,an=ts=null,Wi(s),n)))for(s=0;s<n.length;s++)Wi(n[s])}}function Us(n,s){var u=n.stateNode;if(u===null)return null;var g=u[Nn]||null;if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(a(231,s,typeof u));return u}var nt=!1;if(Jn)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){nt=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{nt=!1}var Lr=null,Pr=null,kr=null;function pr(){if(kr)return kr;var n,s=Pr,u=s.length,g,x="value"in Lr?Lr.value:Lr.textContent,v=x.length;for(n=0;n<u&&s[n]===x[n];n++);var D=u-n;for(g=1;g<=D&&s[u-g]===x[v-g];g++);return kr=x.slice(n,1<g?1-g:void 0)}function Br(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Pi(){return!0}function ns(){return!1}function Cn(n){function s(u,g,x,v,D){this._reactName=u,this._targetInst=x,this.type=g,this.nativeEvent=v,this.target=D,this.currentTarget=null;for(var B in n)n.hasOwnProperty(B)&&(u=n[B],this[B]=u?u(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Pi:ns,this.isPropagationStopped=ns,this}return W(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),s}var zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=Cn(zt),yr=W({},zt,{view:0,detail:0}),oi=Cn(yr),Vs,js,Er,Fs=W({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Er&&(Er&&n.type==="mousemove"?(Vs=n.screenX-Er.screenX,js=n.screenY-Er.screenY):js=Vs=0,Er=n),Vs)},movementY:function(n){return"movementY"in n?n.movementY:js}}),ar=Cn(Fs),rl=W({},Fs,{dataTransfer:0}),Yt=Cn(rl),ms=W({},yr,{relatedTarget:0}),is=Cn(ms),or=W({},zt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ra=Cn(or),ge=W({},zt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ct=Cn(ge),Yn=W({},zt,{data:0}),ps=Cn(Yn),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},al={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function To(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=al[n])?!!s[n]:!1}function rs(){return To}var Sn=W({},yr,{key:function(n){if(n.key){var s=ys[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Br(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rs,charCode:function(n){return n.type==="keypress"?Br(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Br(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Es=Cn(Sn),cn=W({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xs=Cn(cn),Ai=W({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rs}),Xt=Cn(Ai),Je=W({},zt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ol=Cn(Je),Zt=W({},Fs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),lr=Cn(Zt),Bn=W({},zt,{newState:0,oldState:0}),ll=Cn(Bn),Qi=[9,13,27,32],cr=Jn&&"CompositionEvent"in window,y=null;Jn&&"documentMode"in document&&(y=document.documentMode);var S=Jn&&"TextEvent"in window&&!y,R=Jn&&(!cr||y&&8<y&&11>=y),U=" ",oe=!1;function me(n,s){switch(n){case"keyup":return Qi.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ze(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Nt=!1;function _n(n,s){switch(n){case"compositionend":return ze(s);case"keypress":return s.which!==32?null:(oe=!0,U);case"textInput":return n=s.data,n===U&&oe?null:n;default:return null}}function Rt(n,s){if(Nt)return n==="compositionend"||!cr&&me(n,s)?(n=pr(),kr=Pr=Lr=null,Nt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return R&&s.locale!=="ko"?null:s.data;default:return null}}var un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!un[n.type]:s==="textarea"}function Un(n,s,u,g){ts?an?an.push(g):an=[g]:ts=g,s=Th(s,"onChange"),0<s.length&&(u=new Ur("onChange","change",null,u,g),n.push({event:u,listeners:s}))}var $n=null,Xn=null;function Co(n){Xp(n,0)}function Da(n){var s=Ft(n);if(nr(s))return n}function Fu(n,s){if(n==="change")return s}var dc=!1;if(Jn){var ur;if(Jn){var gc="oninput"in document;if(!gc){var cl=document.createElement("div");cl.setAttribute("oninput","return;"),gc=typeof cl.oninput=="function"}ur=gc}else ur=!1;dc=ur&&(!document.documentMode||9<document.documentMode)}function Oa(){$n&&($n.detachEvent("onpropertychange",Dt),Xn=$n=null)}function Dt(n){if(n.propertyName==="value"&&Da(Xn)){var s=[];Un(s,Xn,n,gs(n)),et(Co,s)}}function ul(n,s,u){n==="focusin"?(Oa(),$n=s,Xn=u,$n.attachEvent("onpropertychange",Dt)):n==="focusout"&&Oa()}function O(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Da(Xn)}function i(n,s){if(n==="click")return Da(s)}function o(n,s){if(n==="input"||n==="change")return Da(s)}function l(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function d(n,s){if(h(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var x=u[g];if(!yt.call(s,x)||!h(n[x],s[x]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function p(n,s){var u=m(n);n=0;for(var g;u;){if(u.nodeType===3){if(g=n+u.textContent.length,n<=s&&g>=s)return{node:u,offset:s-n};n=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=m(u)}}function A(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?A(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function C(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Na(n.document);s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Na(n.document)}return s}function N(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function L(n,s){var u=C(s);s=n.focusedElem;var g=n.selectionRange;if(u!==s&&s&&s.ownerDocument&&A(s.ownerDocument.documentElement,s)){if(g!==null&&N(s)){if(n=g.start,u=g.end,u===void 0&&(u=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(u,s.value.length);else if(u=(n=s.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var x=s.textContent.length,v=Math.min(g.start,x);g=g.end===void 0?v:Math.min(g.end,x),!u.extend&&v>g&&(x=g,g=v,v=x),x=p(s,v);var D=p(s,g);x&&D&&(u.rangeCount!==1||u.anchorNode!==x.node||u.anchorOffset!==x.offset||u.focusNode!==D.node||u.focusOffset!==D.offset)&&(n=n.createRange(),n.setStart(x.node,x.offset),u.removeAllRanges(),v>g?(u.addRange(n),u.extend(D.node,D.offset)):(n.setEnd(D.node,D.offset),u.addRange(n)))}}for(n=[],u=s;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)u=n[s],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var k=Jn&&"documentMode"in document&&11>=document.documentMode,G=null,Z=null,$=null,ce=!1;function pe(n,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ce||G==null||G!==Na(g)||(g=G,"selectionStart"in g&&N(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),$&&d($,g)||($=g,g=Th(Z,"onSelect"),0<g.length&&(s=new Ur("onSelect","select",null,s,u),n.push({event:s,listeners:g}),s.target=G)))}function Oe(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var Pe={animationend:Oe("Animation","AnimationEnd"),animationiteration:Oe("Animation","AnimationIteration"),animationstart:Oe("Animation","AnimationStart"),transitionrun:Oe("Transition","TransitionRun"),transitionstart:Oe("Transition","TransitionStart"),transitioncancel:Oe("Transition","TransitionCancel"),transitionend:Oe("Transition","TransitionEnd")},Ne={},_t={};Jn&&(_t=document.createElement("div").style,"AnimationEvent"in window||(delete Pe.animationend.animation,delete Pe.animationiteration.animation,delete Pe.animationstart.animation),"TransitionEvent"in window||delete Pe.transitionend.transition);function rt(n){if(Ne[n])return Ne[n];if(!Pe[n])return n;var s=Pe[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in _t)return Ne[n]=s[u];return n}var wi=rt("animationend"),hr=rt("animationiteration"),vi=rt("animationstart"),nn=rt("transitionrun"),li=rt("transitionstart"),Ki=rt("transitioncancel"),zs=rt("transitionend"),Hs=new Map,zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function xr(n,s){Hs.set(n,s),Xi(s,[n])}var Vr=[],hl=0,td=0;function Hu(){for(var n=hl,s=td=hl=0;s<n;){var u=Vr[s];Vr[s++]=null;var g=Vr[s];Vr[s++]=null;var x=Vr[s];Vr[s++]=null;var v=Vr[s];if(Vr[s++]=null,g!==null&&x!==null){var D=g.pending;D===null?x.next=x:(x.next=D.next,D.next=x),g.pending=x}v!==0&&Vg(u,x,v)}}function Gu(n,s,u,g){Vr[hl++]=n,Vr[hl++]=s,Vr[hl++]=u,Vr[hl++]=g,td|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function nd(n,s,u,g){return Gu(n,s,u,g),qu(n)}function Ma(n,s){return Gu(n,null,null,s),qu(n)}function Vg(n,s,u){n.lanes|=u;var g=n.alternate;g!==null&&(g.lanes|=u);for(var x=!1,v=n.return;v!==null;)v.childLanes|=u,g=v.alternate,g!==null&&(g.childLanes|=u),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(x=!0)),n=v,v=v.return;x&&s!==null&&n.tag===3&&(v=n.stateNode,x=31-vt(u),v=v.hiddenUpdates,n=v[x],n===null?v[x]=[s]:n.push(s),s.lane=u|536870912)}function qu(n){if(50<Vc)throw Vc=0,l0=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var fl={},jg=new WeakMap;function jr(n,s){if(typeof n=="object"&&n!==null){var u=jg.get(n);return u!==void 0?u:(s={value:n,source:s,stack:ke(s)},jg.set(n,s),s)}return{value:n,source:s,stack:ke(s)}}var dl=[],gl=0,Yu=null,Xu=0,Fr=[],zr=0,So=null,Gs=1,qs="";function bo(n,s){dl[gl++]=Xu,dl[gl++]=Yu,Yu=n,Xu=s}function Fg(n,s,u){Fr[zr++]=Gs,Fr[zr++]=qs,Fr[zr++]=So,So=n;var g=Gs;n=qs;var x=32-vt(g)-1;g&=~(1<<x),u+=1;var v=32-vt(s)+x;if(30<v){var D=x-x%5;v=(g&(1<<D)-1).toString(32),g>>=D,x-=D,Gs=1<<32-vt(s)+x|u<<x|g,qs=v+n}else Gs=1<<v|u<<x|g,qs=n}function id(n){n.return!==null&&(bo(n,1),Fg(n,1,0))}function rd(n){for(;n===Yu;)Yu=dl[--gl],dl[gl]=null,Xu=dl[--gl],dl[gl]=null;for(;n===So;)So=Fr[--zr],Fr[zr]=null,qs=Fr[--zr],Fr[zr]=null,Gs=Fr[--zr],Fr[zr]=null}var Zi=null,Ti=null,Wt=!1,ss=null,_s=!1,sd=Error(a(519));function Io(n){var s=Error(a(418,""));throw yc(jr(s,n)),sd}function zg(n){var s=n.stateNode,u=n.type,g=n.memoizedProps;switch(s[pn]=n,s[Nn]=g,u){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(u=0;u<Fc.length;u++)Pt(Fc[u],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":Pt("invalid",s),le(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),en(s);break;case"select":Pt("invalid",s);break;case"textarea":Pt("invalid",s),qn(s,g.value,g.defaultValue,g.children),en(s)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||g.suppressHydrationWarning===!0||Zp(s.textContent,u)?(g.popover!=null&&(Pt("beforetoggle",s),Pt("toggle",s)),g.onScroll!=null&&Pt("scroll",s),g.onScrollEnd!=null&&Pt("scrollend",s),g.onClick!=null&&(s.onclick=Ch),s=!0):s=!1,s||Io(n)}function Hg(n){for(Zi=n.return;Zi;)switch(Zi.tag){case 3:case 27:_s=!0;return;case 5:case 13:_s=!1;return;default:Zi=Zi.return}}function mc(n){if(n!==Zi)return!1;if(!Wt)return Hg(n),Wt=!0,!1;var s=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||C0(n.type,n.memoizedProps)),u=!u),u&&(s=!0),s&&Ti&&Io(n),Hg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(s===0){Ti=os(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;n=n.nextSibling}Ti=null}}else Ti=Zi?os(n.stateNode.nextSibling):null;return!0}function pc(){Ti=Zi=null,Wt=!1}function yc(n){ss===null?ss=[n]:ss.push(n)}var Ec=Error(a(460)),Gg=Error(a(474)),ad={then:function(){}};function qg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Wu(){}function Yg(n,s,u){switch(u=n[u],u===void 0?n.push(s):u!==s&&(s.then(Wu,Wu),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Ec?Error(a(483)):n;default:if(typeof s.status=="string")s.then(Wu,Wu);else{if(n=dn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(g){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=g}},function(g){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Ec?Error(a(483)):n}throw xc=s,Ec}}var xc=null;function Xg(){if(xc===null)throw Error(a(459));var n=xc;return xc=null,n}var ml=null,_c=0;function Qu(n){var s=_c;return _c+=1,ml===null&&(ml=[]),Yg(ml,n,s)}function Ac(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Ku(n,s){throw s.$$typeof===f?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Wg(n){var s=n._init;return s(n._payload)}function Qg(n){function s(ae,ne){if(n){var he=ae.deletions;he===null?(ae.deletions=[ne],ae.flags|=16):he.push(ne)}}function u(ae,ne){if(!n)return null;for(;ne!==null;)s(ae,ne),ne=ne.sibling;return null}function g(ae){for(var ne=new Map;ae!==null;)ae.key!==null?ne.set(ae.key,ae):ne.set(ae.index,ae),ae=ae.sibling;return ne}function x(ae,ne){return ae=qa(ae,ne),ae.index=0,ae.sibling=null,ae}function v(ae,ne,he){return ae.index=he,n?(he=ae.alternate,he!==null?(he=he.index,he<ne?(ae.flags|=33554434,ne):he):(ae.flags|=33554434,ne)):(ae.flags|=1048576,ne)}function D(ae){return n&&ae.alternate===null&&(ae.flags|=33554434),ae}function B(ae,ne,he,we){return ne===null||ne.tag!==6?(ne=e0(he,ae.mode,we),ne.return=ae,ne):(ne=x(ne,he),ne.return=ae,ne)}function X(ae,ne,he,we){var We=he.type;return We===T?_e(ae,ne,he.props.children,we,he.key):ne!==null&&(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===ye&&Wg(We)===ne.type)?(ne=x(ne,he.props),Ac(ne,he),ne.return=ae,ne):(ne=gh(he.type,he.key,he.props,null,ae.mode,we),Ac(ne,he),ne.return=ae,ne)}function re(ae,ne,he,we){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?(ne=t0(he,ae.mode,we),ne.return=ae,ne):(ne=x(ne,he.children||[]),ne.return=ae,ne)}function _e(ae,ne,he,we,We){return ne===null||ne.tag!==7?(ne=Uo(he,ae.mode,we,We),ne.return=ae,ne):(ne=x(ne,he),ne.return=ae,ne)}function Re(ae,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=e0(""+ne,ae.mode,he),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case E:return he=gh(ne.type,ne.key,ne.props,null,ae.mode,he),Ac(he,ne),he.return=ae,he;case w:return ne=t0(ne,ae.mode,he),ne.return=ae,ne;case ye:var we=ne._init;return ne=we(ne._payload),Re(ae,ne,he)}if(je(ne)||Se(ne))return ne=Uo(ne,ae.mode,he,null),ne.return=ae,ne;if(typeof ne.then=="function")return Re(ae,Qu(ne),he);if(ne.$$typeof===F)return Re(ae,hh(ae,ne),he);Ku(ae,ne)}return null}function de(ae,ne,he,we){var We=ne!==null?ne.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return We!==null?null:B(ae,ne,""+he,we);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case E:return he.key===We?X(ae,ne,he,we):null;case w:return he.key===We?re(ae,ne,he,we):null;case ye:return We=he._init,he=We(he._payload),de(ae,ne,he,we)}if(je(he)||Se(he))return We!==null?null:_e(ae,ne,he,we,null);if(typeof he.then=="function")return de(ae,ne,Qu(he),we);if(he.$$typeof===F)return de(ae,ne,hh(ae,he),we);Ku(ae,he)}return null}function Ee(ae,ne,he,we,We){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ae=ae.get(he)||null,B(ne,ae,""+we,We);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case E:return ae=ae.get(we.key===null?he:we.key)||null,X(ne,ae,we,We);case w:return ae=ae.get(we.key===null?he:we.key)||null,re(ne,ae,we,We);case ye:var Tt=we._init;return we=Tt(we._payload),Ee(ae,ne,he,we,We)}if(je(we)||Se(we))return ae=ae.get(he)||null,_e(ne,ae,we,We,null);if(typeof we.then=="function")return Ee(ae,ne,he,Qu(we),We);if(we.$$typeof===F)return Ee(ae,ne,he,hh(ne,we),We);Ku(ne,we)}return null}function Ke(ae,ne,he,we){for(var We=null,Tt=null,$e=ne,st=ne=0,yi=null;$e!==null&&st<he.length;st++){$e.index>st?(yi=$e,$e=null):yi=$e.sibling;var Qt=de(ae,$e,he[st],we);if(Qt===null){$e===null&&($e=yi);break}n&&$e&&Qt.alternate===null&&s(ae,$e),ne=v(Qt,ne,st),Tt===null?We=Qt:Tt.sibling=Qt,Tt=Qt,$e=yi}if(st===he.length)return u(ae,$e),Wt&&bo(ae,st),We;if($e===null){for(;st<he.length;st++)$e=Re(ae,he[st],we),$e!==null&&(ne=v($e,ne,st),Tt===null?We=$e:Tt.sibling=$e,Tt=$e);return Wt&&bo(ae,st),We}for($e=g($e);st<he.length;st++)yi=Ee($e,ae,st,he[st],we),yi!==null&&(n&&yi.alternate!==null&&$e.delete(yi.key===null?st:yi.key),ne=v(yi,ne,st),Tt===null?We=yi:Tt.sibling=yi,Tt=yi);return n&&$e.forEach(function(Ja){return s(ae,Ja)}),Wt&&bo(ae,st),We}function dt(ae,ne,he,we){if(he==null)throw Error(a(151));for(var We=null,Tt=null,$e=ne,st=ne=0,yi=null,Qt=he.next();$e!==null&&!Qt.done;st++,Qt=he.next()){$e.index>st?(yi=$e,$e=null):yi=$e.sibling;var Ja=de(ae,$e,Qt.value,we);if(Ja===null){$e===null&&($e=yi);break}n&&$e&&Ja.alternate===null&&s(ae,$e),ne=v(Ja,ne,st),Tt===null?We=Ja:Tt.sibling=Ja,Tt=Ja,$e=yi}if(Qt.done)return u(ae,$e),Wt&&bo(ae,st),We;if($e===null){for(;!Qt.done;st++,Qt=he.next())Qt=Re(ae,Qt.value,we),Qt!==null&&(ne=v(Qt,ne,st),Tt===null?We=Qt:Tt.sibling=Qt,Tt=Qt);return Wt&&bo(ae,st),We}for($e=g($e);!Qt.done;st++,Qt=he.next())Qt=Ee($e,ae,st,Qt.value,we),Qt!==null&&(n&&Qt.alternate!==null&&$e.delete(Qt.key===null?st:Qt.key),ne=v(Qt,ne,st),Tt===null?We=Qt:Tt.sibling=Qt,Tt=Qt);return n&&$e.forEach(function(rv){return s(ae,rv)}),Wt&&bo(ae,st),We}function Fn(ae,ne,he,we){if(typeof he=="object"&&he!==null&&he.type===T&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case E:e:{for(var We=he.key;ne!==null;){if(ne.key===We){if(We=he.type,We===T){if(ne.tag===7){u(ae,ne.sibling),we=x(ne,he.props.children),we.return=ae,ae=we;break e}}else if(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===ye&&Wg(We)===ne.type){u(ae,ne.sibling),we=x(ne,he.props),Ac(we,he),we.return=ae,ae=we;break e}u(ae,ne);break}else s(ae,ne);ne=ne.sibling}he.type===T?(we=Uo(he.props.children,ae.mode,we,he.key),we.return=ae,ae=we):(we=gh(he.type,he.key,he.props,null,ae.mode,we),Ac(we,he),we.return=ae,ae=we)}return D(ae);case w:e:{for(We=he.key;ne!==null;){if(ne.key===We)if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){u(ae,ne.sibling),we=x(ne,he.children||[]),we.return=ae,ae=we;break e}else{u(ae,ne);break}else s(ae,ne);ne=ne.sibling}we=t0(he,ae.mode,we),we.return=ae,ae=we}return D(ae);case ye:return We=he._init,he=We(he._payload),Fn(ae,ne,he,we)}if(je(he))return Ke(ae,ne,he,we);if(Se(he)){if(We=Se(he),typeof We!="function")throw Error(a(150));return he=We.call(he),dt(ae,ne,he,we)}if(typeof he.then=="function")return Fn(ae,ne,Qu(he),we);if(he.$$typeof===F)return Fn(ae,ne,hh(ae,he),we);Ku(ae,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,ne!==null&&ne.tag===6?(u(ae,ne.sibling),we=x(ne,he),we.return=ae,ae=we):(u(ae,ne),we=e0(he,ae.mode,we),we.return=ae,ae=we),D(ae)):u(ae,ne)}return function(ae,ne,he,we){try{_c=0;var We=Fn(ae,ne,he,we);return ml=null,We}catch($e){if($e===Ec)throw $e;var Tt=Yr(29,$e,null,ae.mode);return Tt.lanes=we,Tt.return=ae,Tt}finally{}}}var No=Qg(!0),Kg=Qg(!1),pl=Qe(null),Zu=Qe(0);function Zg(n,s){n=na,xt(Zu,n),xt(pl,s),na=n|s.baseLanes}function od(){xt(Zu,na),xt(pl,pl.current)}function ld(){na=Zu.current,Ht(pl),Ht(Zu)}var Hr=Qe(null),As=null;function La(n){var s=n.alternate;xt(ci,ci.current&1),xt(Hr,n),As===null&&(s===null||pl.current!==null||s.memoizedState!==null)&&(As=n)}function Jg(n){if(n.tag===22){if(xt(ci,ci.current),xt(Hr,n),As===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(As=n)}}else Pa()}function Pa(){xt(ci,ci.current),xt(Hr,Hr.current)}function Ys(n){Ht(Hr),As===n&&(As=null),Ht(ci)}var ci=Qe(0);function Ju(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var qA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(u,g){n.push(g)}};this.abort=function(){s.aborted=!0,n.forEach(function(u){return u()})}},YA=r.unstable_scheduleCallback,XA=r.unstable_NormalPriority,ui={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cd(){return{controller:new qA,data:new Map,refCount:0}}function wc(n){n.refCount--,n.refCount===0&&YA(XA,function(){n.controller.abort()})}var vc=null,ud=0,yl=0,El=null;function WA(n,s){if(vc===null){var u=vc=[];ud=0,yl=p0(),El={status:"pending",value:void 0,then:function(g){u.push(g)}}}return ud++,s.then($g,$g),s}function $g(){if(--ud===0&&vc!==null){El!==null&&(El.status="fulfilled");var n=vc;vc=null,yl=0,El=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function QA(n,s){var u=[],g={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return n.then(function(){g.status="fulfilled",g.value=s;for(var x=0;x<u.length;x++)(0,u[x])(s)},function(x){for(g.status="rejected",g.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),g}var em=P.S;P.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&WA(n,s),em!==null&&em(n,s)};var Ro=Qe(null);function hd(){var n=Ro.current;return n!==null?n:dn.pooledCache}function $u(n,s){s===null?xt(Ro,Ro.current):xt(Ro,s.pool)}function tm(){var n=hd();return n===null?null:{parent:ui._currentValue,pool:n}}var ka=0,At=null,on=null,ei=null,eh=!1,xl=!1,Do=!1,th=0,Tc=0,_l=null,KA=0;function Wn(){throw Error(a(321))}function fd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!h(n[u],s[u]))return!1;return!0}function dd(n,s,u,g,x,v){return ka=v,At=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=n===null||n.memoizedState===null?Oo:Ba,Do=!1,v=u(g,x),Do=!1,xl&&(v=im(s,u,g,x)),nm(n),v}function nm(n){P.H=ws;var s=on!==null&&on.next!==null;if(ka=0,ei=on=At=null,eh=!1,Tc=0,_l=null,s)throw Error(a(300));n===null||mi||(n=n.dependencies,n!==null&&uh(n)&&(mi=!0))}function im(n,s,u,g){At=n;var x=0;do{if(xl&&(_l=null),Tc=0,xl=!1,25<=x)throw Error(a(301));if(x+=1,ei=on=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}P.H=Mo,v=s(u,g)}while(xl);return v}function ZA(){var n=P.H,s=n.useState()[0];return s=typeof s.then=="function"?Cc(s):s,n=n.useState()[0],(on!==null?on.memoizedState:null)!==n&&(At.flags|=1024),s}function gd(){var n=th!==0;return th=0,n}function md(n,s,u){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~u}function pd(n){if(eh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}eh=!1}ka=0,ei=on=At=null,xl=!1,Tc=th=0,_l=null}function fr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?At.memoizedState=ei=n:ei=ei.next=n,ei}function ti(){if(on===null){var n=At.alternate;n=n!==null?n.memoizedState:null}else n=on.next;var s=ei===null?At.memoizedState:ei.next;if(s!==null)ei=s,on=n;else{if(n===null)throw At.alternate===null?Error(a(467)):Error(a(310));on=n,n={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},ei===null?At.memoizedState=ei=n:ei=ei.next=n}return ei}var nh;nh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Cc(n){var s=Tc;return Tc+=1,_l===null&&(_l=[]),n=Yg(_l,n,s),s=At,(ei===null?s.memoizedState:ei.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Oo:Ba),n}function ih(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Cc(n);if(n.$$typeof===F)return ki(n)}throw Error(a(438,String(n)))}function yd(n){var s=null,u=At.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var g=At.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=nh(),At.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(n),g=0;g<n;g++)u[g]=De;return s.index++,u}function Xs(n,s){return typeof s=="function"?s(n):s}function rh(n){var s=ti();return Ed(s,on,n)}function Ed(n,s,u){var g=n.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=u;var x=n.baseQueue,v=g.pending;if(v!==null){if(x!==null){var D=x.next;x.next=v.next,v.next=D}s.baseQueue=x=v,g.pending=null}if(v=n.baseState,x===null)n.memoizedState=v;else{s=x.next;var B=D=null,X=null,re=s,_e=!1;do{var Re=re.lane&-536870913;if(Re!==re.lane?(Ut&Re)===Re:(ka&Re)===Re){var de=re.revertLane;if(de===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),Re===yl&&(_e=!0);else if((ka&de)===de){re=re.next,de===yl&&(_e=!0);continue}else Re={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},X===null?(B=X=Re,D=v):X=X.next=Re,At.lanes|=de,Ya|=de;Re=re.action,Do&&u(v,Re),v=re.hasEagerState?re.eagerState:u(v,Re)}else de={lane:Re,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},X===null?(B=X=de,D=v):X=X.next=de,At.lanes|=Re,Ya|=Re;re=re.next}while(re!==null&&re!==s);if(X===null?D=v:X.next=B,!h(v,n.memoizedState)&&(mi=!0,_e&&(u=El,u!==null)))throw u;n.memoizedState=v,n.baseState=D,n.baseQueue=X,g.lastRenderedState=v}return x===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function xd(n){var s=ti(),u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=n;var g=u.dispatch,x=u.pending,v=s.memoizedState;if(x!==null){u.pending=null;var D=x=x.next;do v=n(v,D.action),D=D.next;while(D!==x);h(v,s.memoizedState)||(mi=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),u.lastRenderedState=v}return[v,g]}function rm(n,s,u){var g=At,x=ti(),v=Wt;if(v){if(u===void 0)throw Error(a(407));u=u()}else u=s();var D=!h((on||x).memoizedState,u);if(D&&(x.memoizedState=u,mi=!0),x=x.queue,wd(om.bind(null,g,x,n),[n]),x.getSnapshot!==s||D||ei!==null&&ei.memoizedState.tag&1){if(g.flags|=2048,Al(9,am.bind(null,g,x,u,s),{destroy:void 0},null),dn===null)throw Error(a(349));v||(ka&60)!==0||sm(g,s,u)}return u}function sm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=At.updateQueue,s===null?(s=nh(),At.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function am(n,s,u,g){s.value=u,s.getSnapshot=g,lm(s)&&cm(n)}function om(n,s,u){return u(function(){lm(s)&&cm(n)})}function lm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!h(n,u)}catch{return!0}}function cm(n){var s=Ma(n,2);s!==null&&Ji(s,n,2)}function _d(n){var s=fr();if(typeof n=="function"){var u=n;if(n=u(),Do){wt(!0);try{u()}finally{wt(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:n},s}function um(n,s,u,g){return n.baseState=u,Ed(n,on,typeof g=="function"?g:Xs)}function JA(n,s,u,g,x){if(oh(n))throw Error(a(485));if(n=s.action,n!==null){var v={payload:x,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){v.listeners.push(D)}};P.T!==null?u(!0):v.isTransition=!1,g(v),u=s.pending,u===null?(v.next=s.pending=v,hm(s,v)):(v.next=u.next,s.pending=u.next=v)}}function hm(n,s){var u=s.action,g=s.payload,x=n.state;if(s.isTransition){var v=P.T,D={};P.T=D;try{var B=u(x,g),X=P.S;X!==null&&X(D,B),fm(n,s,B)}catch(re){Ad(n,s,re)}finally{P.T=v}}else try{v=u(x,g),fm(n,s,v)}catch(re){Ad(n,s,re)}}function fm(n,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){dm(n,s,g)},function(g){return Ad(n,s,g)}):dm(n,s,u)}function dm(n,s,u){s.status="fulfilled",s.value=u,gm(s),n.state=u,s=n.pending,s!==null&&(u=s.next,u===s?n.pending=null:(u=u.next,s.next=u,hm(n,u)))}function Ad(n,s,u){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=u,gm(s),s=s.next;while(s!==g)}n.action=null}function gm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function mm(n,s){return s}function pm(n,s){if(Wt){var u=dn.formState;if(u!==null){e:{var g=At;if(Wt){if(Ti){t:{for(var x=Ti,v=_s;x.nodeType!==8;){if(!v){x=null;break t}if(x=os(x.nextSibling),x===null){x=null;break t}}v=x.data,x=v==="F!"||v==="F"?x:null}if(x){Ti=os(x.nextSibling),g=x.data==="F!";break e}}Io(g)}g=!1}g&&(s=u[0])}}return u=fr(),u.memoizedState=u.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mm,lastRenderedState:s},u.queue=g,u=Lm.bind(null,At,g),g.dispatch=u,g=_d(!1),v=bd.bind(null,At,!1,g.queue),g=fr(),x={state:s,dispatch:null,action:n,pending:null},g.queue=x,u=JA.bind(null,At,x,v,u),x.dispatch=u,g.memoizedState=n,[s,u,!1]}function ym(n){var s=ti();return Em(s,on,n)}function Em(n,s,u){s=Ed(n,s,mm)[0],n=rh(Xs)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Cc(s):s;var g=ti(),x=g.queue,v=x.dispatch;return u!==g.memoizedState&&(At.flags|=2048,Al(9,$A.bind(null,x,u),{destroy:void 0},null)),[s,v,n]}function $A(n,s){n.action=s}function xm(n){var s=ti(),u=on;if(u!==null)return Em(s,u,n);ti(),s=s.memoizedState,u=ti();var g=u.queue.dispatch;return u.memoizedState=n,[s,g,!1]}function Al(n,s,u,g){return n={tag:n,create:s,inst:u,deps:g,next:null},s=At.updateQueue,s===null&&(s=nh(),At.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=n.next=n:(g=u.next,u.next=n,n.next=g,s.lastEffect=n),n}function _m(){return ti().memoizedState}function sh(n,s,u,g){var x=fr();At.flags|=n,x.memoizedState=Al(1|s,u,{destroy:void 0},g===void 0?null:g)}function ah(n,s,u,g){var x=ti();g=g===void 0?null:g;var v=x.memoizedState.inst;on!==null&&g!==null&&fd(g,on.memoizedState.deps)?x.memoizedState=Al(s,u,v,g):(At.flags|=n,x.memoizedState=Al(1|s,u,v,g))}function Am(n,s){sh(8390656,8,n,s)}function wd(n,s){ah(2048,8,n,s)}function wm(n,s){return ah(4,2,n,s)}function vm(n,s){return ah(4,4,n,s)}function Tm(n,s){if(typeof s=="function"){n=n();var u=s(n);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cm(n,s,u){u=u!=null?u.concat([n]):null,ah(4,4,Tm.bind(null,s,n),u)}function vd(){}function Sm(n,s){var u=ti();s=s===void 0?null:s;var g=u.memoizedState;return s!==null&&fd(s,g[1])?g[0]:(u.memoizedState=[n,s],n)}function bm(n,s){var u=ti();s=s===void 0?null:s;var g=u.memoizedState;if(s!==null&&fd(s,g[1]))return g[0];if(g=n(),Do){wt(!0);try{n()}finally{wt(!1)}}return u.memoizedState=[g,s],g}function Td(n,s,u){return u===void 0||(ka&1073741824)!==0?n.memoizedState=s:(n.memoizedState=u,n=Np(),At.lanes|=n,Ya|=n,u)}function Im(n,s,u,g){return h(u,s)?u:pl.current!==null?(n=Td(n,u,g),h(n,s)||(mi=!0),n):(ka&42)===0?(mi=!0,n.memoizedState=u):(n=Np(),At.lanes|=n,Ya|=n,s)}function Nm(n,s,u,g,x){var v=Be.p;Be.p=v!==0&&8>v?v:8;var D=P.T,B={};P.T=B,bd(n,!1,s,u);try{var X=x(),re=P.S;if(re!==null&&re(B,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var _e=QA(X,g);Sc(n,s,_e,vr(n))}else Sc(n,s,g,vr(n))}catch(Re){Sc(n,s,{then:function(){},status:"rejected",reason:Re},vr())}finally{Be.p=v,P.T=D}}function ew(){}function Cd(n,s,u,g){if(n.tag!==5)throw Error(a(476));var x=Rm(n).queue;Nm(n,x,s,it,u===null?ew:function(){return Dm(n),u(g)})}function Rm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:it},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:u},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Dm(n){var s=Rm(n).next.queue;Sc(n,s,{},vr())}function Sd(){return ki(Yc)}function Om(){return ti().memoizedState}function Mm(){return ti().memoizedState}function tw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var u=vr();n=ja(u);var g=Fa(s,n,u);g!==null&&(Ji(g,s,u),Nc(g,s,u)),s={cache:cd()},n.payload=s;return}s=s.return}}function nw(n,s,u){var g=vr();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},oh(n)?Pm(s,u):(u=nd(n,s,u,g),u!==null&&(Ji(u,n,g),km(u,s,g)))}function Lm(n,s,u){var g=vr();Sc(n,s,u,g)}function Sc(n,s,u,g){var x={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(oh(n))Pm(s,x);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var D=s.lastRenderedState,B=v(D,u);if(x.hasEagerState=!0,x.eagerState=B,h(B,D))return Gu(n,s,x,0),dn===null&&Hu(),!1}catch{}finally{}if(u=nd(n,s,x,g),u!==null)return Ji(u,n,g),km(u,s,g),!0}return!1}function bd(n,s,u,g){if(g={lane:2,revertLane:p0(),action:g,hasEagerState:!1,eagerState:null,next:null},oh(n)){if(s)throw Error(a(479))}else s=nd(n,u,g,2),s!==null&&Ji(s,n,2)}function oh(n){var s=n.alternate;return n===At||s!==null&&s===At}function Pm(n,s){xl=eh=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function km(n,s,u){if((u&4194176)!==0){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,Rr(n,u)}}var ws={readContext:ki,use:ih,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useLayoutEffect:Wn,useInsertionEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useSyncExternalStore:Wn,useId:Wn};ws.useCacheRefresh=Wn,ws.useMemoCache=Wn,ws.useHostTransitionStatus=Wn,ws.useFormState=Wn,ws.useActionState=Wn,ws.useOptimistic=Wn;var Oo={readContext:ki,use:ih,useCallback:function(n,s){return fr().memoizedState=[n,s===void 0?null:s],n},useContext:ki,useEffect:Am,useImperativeHandle:function(n,s,u){u=u!=null?u.concat([n]):null,sh(4194308,4,Tm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return sh(4194308,4,n,s)},useInsertionEffect:function(n,s){sh(4,2,n,s)},useMemo:function(n,s){var u=fr();s=s===void 0?null:s;var g=n();if(Do){wt(!0);try{n()}finally{wt(!1)}}return u.memoizedState=[g,s],g},useReducer:function(n,s,u){var g=fr();if(u!==void 0){var x=u(s);if(Do){wt(!0);try{u(s)}finally{wt(!1)}}}else x=s;return g.memoizedState=g.baseState=x,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:x},g.queue=n,n=n.dispatch=nw.bind(null,At,n),[g.memoizedState,n]},useRef:function(n){var s=fr();return n={current:n},s.memoizedState=n},useState:function(n){n=_d(n);var s=n.queue,u=Lm.bind(null,At,s);return s.dispatch=u,[n.memoizedState,u]},useDebugValue:vd,useDeferredValue:function(n,s){var u=fr();return Td(u,n,s)},useTransition:function(){var n=_d(!1);return n=Nm.bind(null,At,n.queue,!0,!1),fr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,u){var g=At,x=fr();if(Wt){if(u===void 0)throw Error(a(407));u=u()}else{if(u=s(),dn===null)throw Error(a(349));(Ut&60)!==0||sm(g,s,u)}x.memoizedState=u;var v={value:u,getSnapshot:s};return x.queue=v,Am(om.bind(null,g,v,n),[n]),g.flags|=2048,Al(9,am.bind(null,g,v,u,s),{destroy:void 0},null),u},useId:function(){var n=fr(),s=dn.identifierPrefix;if(Wt){var u=qs,g=Gs;u=(g&~(1<<32-vt(g)-1)).toString(32)+u,s=":"+s+"R"+u,u=th++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=KA++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return fr().memoizedState=tw.bind(null,At)}};Oo.useMemoCache=yd,Oo.useHostTransitionStatus=Sd,Oo.useFormState=pm,Oo.useActionState=pm,Oo.useOptimistic=function(n){var s=fr();s.memoizedState=s.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=bd.bind(null,At,!0,u),u.dispatch=s,[n,s]};var Ba={readContext:ki,use:ih,useCallback:Sm,useContext:ki,useEffect:wd,useImperativeHandle:Cm,useInsertionEffect:wm,useLayoutEffect:vm,useMemo:bm,useReducer:rh,useRef:_m,useState:function(){return rh(Xs)},useDebugValue:vd,useDeferredValue:function(n,s){var u=ti();return Im(u,on.memoizedState,n,s)},useTransition:function(){var n=rh(Xs)[0],s=ti().memoizedState;return[typeof n=="boolean"?n:Cc(n),s]},useSyncExternalStore:rm,useId:Om};Ba.useCacheRefresh=Mm,Ba.useMemoCache=yd,Ba.useHostTransitionStatus=Sd,Ba.useFormState=ym,Ba.useActionState=ym,Ba.useOptimistic=function(n,s){var u=ti();return um(u,on,n,s)};var Mo={readContext:ki,use:ih,useCallback:Sm,useContext:ki,useEffect:wd,useImperativeHandle:Cm,useInsertionEffect:wm,useLayoutEffect:vm,useMemo:bm,useReducer:xd,useRef:_m,useState:function(){return xd(Xs)},useDebugValue:vd,useDeferredValue:function(n,s){var u=ti();return on===null?Td(u,n,s):Im(u,on.memoizedState,n,s)},useTransition:function(){var n=xd(Xs)[0],s=ti().memoizedState;return[typeof n=="boolean"?n:Cc(n),s]},useSyncExternalStore:rm,useId:Om};Mo.useCacheRefresh=Mm,Mo.useMemoCache=yd,Mo.useHostTransitionStatus=Sd,Mo.useFormState=xm,Mo.useActionState=xm,Mo.useOptimistic=function(n,s){var u=ti();return on!==null?um(u,on,n,s):(u.baseState=n,[n,u.queue.dispatch])};function Id(n,s,u,g){s=n.memoizedState,u=u(g,s),u=u==null?s:W({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Nd={isMounted:function(n){return(n=n._reactInternals)?Ve(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var g=vr(),x=ja(g);x.payload=s,u!=null&&(x.callback=u),s=Fa(n,x,g),s!==null&&(Ji(s,n,g),Nc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var g=vr(),x=ja(g);x.tag=1,x.payload=s,u!=null&&(x.callback=u),s=Fa(n,x,g),s!==null&&(Ji(s,n,g),Nc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=vr(),g=ja(u);g.tag=2,s!=null&&(g.callback=s),s=Fa(n,g,u),s!==null&&(Ji(s,n,u),Nc(s,n,u))}};function Bm(n,s,u,g,x,v,D){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,v,D):s.prototype&&s.prototype.isPureReactComponent?!d(u,g)||!d(x,v):!0}function Um(n,s,u,g){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==n&&Nd.enqueueReplaceState(s,s.state,null)}function Lo(n,s){var u=s;if("ref"in s){u={};for(var g in s)g!=="ref"&&(u[g]=s[g])}if(n=n.defaultProps){u===s&&(u=W({},u));for(var x in n)u[x]===void 0&&(u[x]=n[x])}return u}var lh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Vm(n){lh(n)}function jm(n){console.error(n)}function Fm(n){lh(n)}function ch(n,s){try{var u=n.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function zm(n,s,u){try{var g=n.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Rd(n,s,u){return u=ja(u),u.tag=3,u.payload={element:null},u.callback=function(){ch(n,s)},u}function Hm(n){return n=ja(n),n.tag=3,n}function Gm(n,s,u,g){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var v=g.value;n.payload=function(){return x(v)},n.callback=function(){zm(s,u,g)}}var D=u.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(n.callback=function(){zm(s,u,g),typeof x!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var B=g.stack;this.componentDidCatch(g.value,{componentStack:B!==null?B:""})})}function iw(n,s,u,g,x){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=u.alternate,s!==null&&Ic(s,u,x,!0),u=Hr.current,u!==null){switch(u.tag){case 13:return As===null?h0():u.alternate===null&&jn===0&&(jn=3),u.flags&=-257,u.flags|=65536,u.lanes=x,g===ad?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([g]):s.add(g),d0(n,g,x)),!1;case 22:return u.flags|=65536,g===ad?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([g]):u.add(g)),d0(n,g,x)),!1}throw Error(a(435,u.tag))}return d0(n,g,x),h0(),!1}if(Wt)return s=Hr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,g!==sd&&(n=Error(a(422),{cause:g}),yc(jr(n,u)))):(g!==sd&&(s=Error(a(423),{cause:g}),yc(jr(s,u))),n=n.current.alternate,n.flags|=65536,x&=-x,n.lanes|=x,g=jr(g,u),x=Rd(n.stateNode,g,x),qd(n,x),jn!==4&&(jn=2)),!1;var v=Error(a(520),{cause:g});if(v=jr(v,u),Bc===null?Bc=[v]:Bc.push(v),jn!==4&&(jn=2),s===null)return!0;g=jr(g,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,n=x&-x,u.lanes|=n,n=Rd(u.stateNode,g,n),qd(u,n),!1;case 1:if(s=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Xa===null||!Xa.has(v))))return u.flags|=65536,x&=-x,u.lanes|=x,x=Hm(x),Gm(x,n,u,g),qd(u,x),!1}u=u.return}while(u!==null);return!1}var qm=Error(a(461)),mi=!1;function Ci(n,s,u,g){s.child=n===null?Kg(s,null,u,g):No(s,n.child,u,g)}function Ym(n,s,u,g,x){u=u.render;var v=s.ref;if("ref"in g){var D={};for(var B in g)B!=="ref"&&(D[B]=g[B])}else D=g;return ko(s),g=dd(n,s,u,D,v,x),B=gd(),n!==null&&!mi?(md(n,s,x),Ws(n,s,x)):(Wt&&B&&id(s),s.flags|=1,Ci(n,s,g,x),s.child)}function Xm(n,s,u,g,x){if(n===null){var v=u.type;return typeof v=="function"&&!$d(v)&&v.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=v,Wm(n,s,v,g,x)):(n=gh(u.type,null,g,s,s.mode,x),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!Vd(n,x)){var D=v.memoizedProps;if(u=u.compare,u=u!==null?u:d,u(D,g)&&n.ref===s.ref)return Ws(n,s,x)}return s.flags|=1,n=qa(v,g),n.ref=s.ref,n.return=s,s.child=n}function Wm(n,s,u,g,x){if(n!==null){var v=n.memoizedProps;if(d(v,g)&&n.ref===s.ref)if(mi=!1,s.pendingProps=g=v,Vd(n,x))(n.flags&131072)!==0&&(mi=!0);else return s.lanes=n.lanes,Ws(n,s,x)}return Dd(n,s,u,g,x)}function Qm(n,s,u){var g=s.pendingProps,x=g.children,v=(s.stateNode._pendingVisibility&2)!==0,D=n!==null?n.memoizedState:null;if(bc(n,s),g.mode==="hidden"||v){if((s.flags&128)!==0){if(g=D!==null?D.baseLanes|u:u,n!==null){for(x=s.child=n.child,v=0;x!==null;)v=v|x.lanes|x.childLanes,x=x.sibling;s.childLanes=v&~g}else s.childLanes=0,s.child=null;return Km(n,s,g,u)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&$u(s,D!==null?D.cachePool:null),D!==null?Zg(s,D):od(),Jg(s);else return s.lanes=s.childLanes=536870912,Km(n,s,D!==null?D.baseLanes|u:u,u)}else D!==null?($u(s,D.cachePool),Zg(s,D),Pa(),s.memoizedState=null):(n!==null&&$u(s,null),od(),Pa());return Ci(n,s,x,u),s.child}function Km(n,s,u,g){var x=hd();return x=x===null?null:{parent:ui._currentValue,pool:x},s.memoizedState={baseLanes:u,cachePool:x},n!==null&&$u(s,null),od(),Jg(s),n!==null&&Ic(n,s,g,!0),null}function bc(n,s){var u=s.ref;if(u===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(a(284));(n===null||n.ref!==u)&&(s.flags|=2097664)}}function Dd(n,s,u,g,x){return ko(s),u=dd(n,s,u,g,void 0,x),g=gd(),n!==null&&!mi?(md(n,s,x),Ws(n,s,x)):(Wt&&g&&id(s),s.flags|=1,Ci(n,s,u,x),s.child)}function Zm(n,s,u,g,x,v){return ko(s),s.updateQueue=null,u=im(s,g,u,x),nm(n),g=gd(),n!==null&&!mi?(md(n,s,v),Ws(n,s,v)):(Wt&&g&&id(s),s.flags|=1,Ci(n,s,u,v),s.child)}function Jm(n,s,u,g,x){if(ko(s),s.stateNode===null){var v=fl,D=u.contextType;typeof D=="object"&&D!==null&&(v=ki(D)),v=new u(g,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Nd,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=g,v.state=s.memoizedState,v.refs={},Hd(s),D=u.contextType,v.context=typeof D=="object"&&D!==null?ki(D):fl,v.state=s.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(Id(s,u,D,g),v.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(D=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),D!==v.state&&Nd.enqueueReplaceState(v,v.state,null),Dc(s,g,v,x),Rc(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(n===null){v=s.stateNode;var B=s.memoizedProps,X=Lo(u,B);v.props=X;var re=v.context,_e=u.contextType;D=fl,typeof _e=="object"&&_e!==null&&(D=ki(_e));var Re=u.getDerivedStateFromProps;_e=typeof Re=="function"||typeof v.getSnapshotBeforeUpdate=="function",B=s.pendingProps!==B,_e||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(B||re!==D)&&Um(s,v,g,D),Va=!1;var de=s.memoizedState;v.state=de,Dc(s,g,v,x),Rc(),re=s.memoizedState,B||de!==re||Va?(typeof Re=="function"&&(Id(s,u,Re,g),re=s.memoizedState),(X=Va||Bm(s,u,X,g,de,re,D))?(_e||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=re),v.props=g,v.state=re,v.context=D,g=X):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{v=s.stateNode,Gd(n,s),D=s.memoizedProps,_e=Lo(u,D),v.props=_e,Re=s.pendingProps,de=v.context,re=u.contextType,X=fl,typeof re=="object"&&re!==null&&(X=ki(re)),B=u.getDerivedStateFromProps,(re=typeof B=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D!==Re||de!==X)&&Um(s,v,g,X),Va=!1,de=s.memoizedState,v.state=de,Dc(s,g,v,x),Rc();var Ee=s.memoizedState;D!==Re||de!==Ee||Va||n!==null&&n.dependencies!==null&&uh(n.dependencies)?(typeof B=="function"&&(Id(s,u,B,g),Ee=s.memoizedState),(_e=Va||Bm(s,u,_e,g,de,Ee,X)||n!==null&&n.dependencies!==null&&uh(n.dependencies))?(re||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(g,Ee,X),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(g,Ee,X)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||D===n.memoizedProps&&de===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&de===n.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Ee),v.props=g,v.state=Ee,v.context=X,g=_e):(typeof v.componentDidUpdate!="function"||D===n.memoizedProps&&de===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&de===n.memoizedState||(s.flags|=1024),g=!1)}return v=g,bc(n,s),g=(s.flags&128)!==0,v||g?(v=s.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&g?(s.child=No(s,n.child,null,x),s.child=No(s,null,u,x)):Ci(n,s,u,x),s.memoizedState=v.state,n=s.child):n=Ws(n,s,x),n}function $m(n,s,u,g){return pc(),s.flags|=256,Ci(n,s,u,g),s.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Md(n){return{baseLanes:n,cachePool:tm()}}function Ld(n,s,u){return n=n!==null?n.childLanes&~u:0,s&&(n|=Xr),n}function ep(n,s,u){var g=s.pendingProps,x=!1,v=(s.flags&128)!==0,D;if((D=v)||(D=n!==null&&n.memoizedState===null?!1:(ci.current&2)!==0),D&&(x=!0,s.flags&=-129),D=(s.flags&32)!==0,s.flags&=-33,n===null){if(Wt){if(x?La(s):Pa(),Wt){var B=Ti,X;if(X=B){e:{for(X=B,B=_s;X.nodeType!==8;){if(!B){B=null;break e}if(X=os(X.nextSibling),X===null){B=null;break e}}B=X}B!==null?(s.memoizedState={dehydrated:B,treeContext:So!==null?{id:Gs,overflow:qs}:null,retryLane:536870912},X=Yr(18,null,null,0),X.stateNode=B,X.return=s,s.child=X,Zi=s,Ti=null,X=!0):X=!1}X||Io(s)}if(B=s.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return B.data==="$!"?s.lanes=16:s.lanes=536870912,null;Ys(s)}return B=g.children,g=g.fallback,x?(Pa(),x=s.mode,B=kd({mode:"hidden",children:B},x),g=Uo(g,x,u,null),B.return=s,g.return=s,B.sibling=g,s.child=B,x=s.child,x.memoizedState=Md(u),x.childLanes=Ld(n,D,u),s.memoizedState=Od,g):(La(s),Pd(s,B))}if(X=n.memoizedState,X!==null&&(B=X.dehydrated,B!==null)){if(v)s.flags&256?(La(s),s.flags&=-257,s=Bd(n,s,u)):s.memoizedState!==null?(Pa(),s.child=n.child,s.flags|=128,s=null):(Pa(),x=g.fallback,B=s.mode,g=kd({mode:"visible",children:g.children},B),x=Uo(x,B,u,null),x.flags|=2,g.return=s,x.return=s,g.sibling=x,s.child=g,No(s,n.child,null,u),g=s.child,g.memoizedState=Md(u),g.childLanes=Ld(n,D,u),s.memoizedState=Od,s=x);else if(La(s),B.data==="$!"){if(D=B.nextSibling&&B.nextSibling.dataset,D)var re=D.dgst;D=re,g=Error(a(419)),g.stack="",g.digest=D,yc({value:g,source:null,stack:null}),s=Bd(n,s,u)}else if(mi||Ic(n,s,u,!1),D=(u&n.childLanes)!==0,mi||D){if(D=dn,D!==null){if(g=u&-u,(g&42)!==0)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=(g&(D.suspendedLanes|u))!==0?0:g,g!==0&&g!==X.retryLane)throw X.retryLane=g,Ma(n,g),Ji(D,n,g),qm}B.data==="$?"||h0(),s=Bd(n,s,u)}else B.data==="$?"?(s.flags|=128,s.child=n.child,s=Ew.bind(null,n),B._reactRetry=s,s=null):(n=X.treeContext,Ti=os(B.nextSibling),Zi=s,Wt=!0,ss=null,_s=!1,n!==null&&(Fr[zr++]=Gs,Fr[zr++]=qs,Fr[zr++]=So,Gs=n.id,qs=n.overflow,So=s),s=Pd(s,g.children),s.flags|=4096);return s}return x?(Pa(),x=g.fallback,B=s.mode,X=n.child,re=X.sibling,g=qa(X,{mode:"hidden",children:g.children}),g.subtreeFlags=X.subtreeFlags&31457280,re!==null?x=qa(re,x):(x=Uo(x,B,u,null),x.flags|=2),x.return=s,g.return=s,g.sibling=x,s.child=g,g=x,x=s.child,B=n.child.memoizedState,B===null?B=Md(u):(X=B.cachePool,X!==null?(re=ui._currentValue,X=X.parent!==re?{parent:re,pool:re}:X):X=tm(),B={baseLanes:B.baseLanes|u,cachePool:X}),x.memoizedState=B,x.childLanes=Ld(n,D,u),s.memoizedState=Od,g):(La(s),u=n.child,n=u.sibling,u=qa(u,{mode:"visible",children:g.children}),u.return=s,u.sibling=null,n!==null&&(D=s.deletions,D===null?(s.deletions=[n],s.flags|=16):D.push(n)),s.child=u,s.memoizedState=null,u)}function Pd(n,s){return s=kd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function kd(n,s){return Sp(n,s,0,null)}function Bd(n,s,u){return No(s,n.child,null,u),n=Pd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function tp(n,s,u){n.lanes|=s;var g=n.alternate;g!==null&&(g.lanes|=s),Fd(n.return,s,u)}function Ud(n,s,u,g,x){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:x}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=g,v.tail=u,v.tailMode=x)}function np(n,s,u){var g=s.pendingProps,x=g.revealOrder,v=g.tail;if(Ci(n,s,g.children,u),g=ci.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tp(n,u,s);else if(n.tag===19)tp(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(xt(ci,g),x){case"forwards":for(u=s.child,x=null;u!==null;)n=u.alternate,n!==null&&Ju(n)===null&&(x=u),u=u.sibling;u=x,u===null?(x=s.child,s.child=null):(x=u.sibling,u.sibling=null),Ud(s,!1,x,u,v);break;case"backwards":for(u=null,x=s.child,s.child=null;x!==null;){if(n=x.alternate,n!==null&&Ju(n)===null){s.child=x;break}n=x.sibling,x.sibling=u,u=x,x=n}Ud(s,!0,u,null,v);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ws(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),Ya|=s.lanes,(u&s.childLanes)===0)if(n!==null){if(Ic(n,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,u=qa(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=qa(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function Vd(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&uh(n)))}function rw(n,s,u){switch(s.tag){case 3:si(s,s.stateNode.containerInfo),Ua(s,ui,n.memoizedState.cache),pc();break;case 27:case 5:In(s);break;case 4:si(s,s.stateNode.containerInfo);break;case 10:Ua(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(La(s),s.flags|=128,null):(u&s.child.childLanes)!==0?ep(n,s,u):(La(s),n=Ws(n,s,u),n!==null?n.sibling:null);La(s);break;case 19:var x=(n.flags&128)!==0;if(g=(u&s.childLanes)!==0,g||(Ic(n,s,u,!1),g=(u&s.childLanes)!==0),x){if(g)return np(n,s,u);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),xt(ci,ci.current),g)break;return null;case 22:case 23:return s.lanes=0,Qm(n,s,u);case 24:Ua(s,ui,n.memoizedState.cache)}return Ws(n,s,u)}function ip(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps)mi=!0;else{if(!Vd(n,u)&&(s.flags&128)===0)return mi=!1,rw(n,s,u);mi=(n.flags&131072)!==0}else mi=!1,Wt&&(s.flags&1048576)!==0&&Fg(s,Xu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var g=s.elementType,x=g._init;if(g=x(g._payload),s.type=g,typeof g=="function")$d(g)?(n=Lo(g,n),s.tag=1,s=Jm(null,s,g,n,u)):(s.tag=0,s=Dd(null,s,g,n,u));else{if(g!=null){if(x=g.$$typeof,x===K){s.tag=11,s=Ym(null,s,g,n,u);break e}else if(x===ue){s.tag=14,s=Xm(null,s,g,n,u);break e}}throw s=H(g)||g,Error(a(306,s,""))}}return s;case 0:return Dd(n,s,s.type,s.pendingProps,u);case 1:return g=s.type,x=Lo(g,s.pendingProps),Jm(n,s,g,x,u);case 3:e:{if(si(s,s.stateNode.containerInfo),n===null)throw Error(a(387));var v=s.pendingProps;x=s.memoizedState,g=x.element,Gd(n,s),Dc(s,v,null,u);var D=s.memoizedState;if(v=D.cache,Ua(s,ui,v),v!==x.cache&&zd(s,[ui],u,!0),Rc(),v=D.element,x.isDehydrated)if(x={element:v,isDehydrated:!1,cache:D.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=$m(n,s,v,u);break e}else if(v!==g){g=jr(Error(a(424)),s),yc(g),s=$m(n,s,v,u);break e}else for(Ti=os(s.stateNode.containerInfo.firstChild),Zi=s,Wt=!0,ss=null,_s=!0,u=Kg(s,null,v,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(pc(),v===g){s=Ws(n,s,u);break e}Ci(n,s,v,u)}s=s.child}return s;case 26:return bc(n,s),n===null?(u=a2(s.type,null,s.pendingProps,null))?s.memoizedState=u:Wt||(u=s.type,n=s.pendingProps,g=Sh(ft.current).createElement(u),g[pn]=s,g[Nn]=n,Si(g,u,n),qt(g),s.stateNode=g):s.memoizedState=a2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return In(s),n===null&&Wt&&(g=s.stateNode=i2(s.type,s.pendingProps,ft.current),Zi=s,_s=!0,Ti=os(g.firstChild)),g=s.pendingProps.children,n!==null||Wt?Ci(n,s,g,u):s.child=No(s,null,g,u),bc(n,s),s.child;case 5:return n===null&&Wt&&((x=g=Ti)&&(g=Lw(g,s.type,s.pendingProps,_s),g!==null?(s.stateNode=g,Zi=s,Ti=os(g.firstChild),_s=!1,x=!0):x=!1),x||Io(s)),In(s),x=s.type,v=s.pendingProps,D=n!==null?n.memoizedProps:null,g=v.children,C0(x,v)?g=null:D!==null&&C0(x,D)&&(s.flags|=32),s.memoizedState!==null&&(x=dd(n,s,ZA,null,null,u),Yc._currentValue=x),bc(n,s),Ci(n,s,g,u),s.child;case 6:return n===null&&Wt&&((n=u=Ti)&&(u=Pw(u,s.pendingProps,_s),u!==null?(s.stateNode=u,Zi=s,Ti=null,n=!0):n=!1),n||Io(s)),null;case 13:return ep(n,s,u);case 4:return si(s,s.stateNode.containerInfo),g=s.pendingProps,n===null?s.child=No(s,null,g,u):Ci(n,s,g,u),s.child;case 11:return Ym(n,s,s.type,s.pendingProps,u);case 7:return Ci(n,s,s.pendingProps,u),s.child;case 8:return Ci(n,s,s.pendingProps.children,u),s.child;case 12:return Ci(n,s,s.pendingProps.children,u),s.child;case 10:return g=s.pendingProps,Ua(s,s.type,g.value),Ci(n,s,g.children,u),s.child;case 9:return x=s.type._context,g=s.pendingProps.children,ko(s),x=ki(x),g=g(x),s.flags|=1,Ci(n,s,g,u),s.child;case 14:return Xm(n,s,s.type,s.pendingProps,u);case 15:return Wm(n,s,s.type,s.pendingProps,u);case 19:return np(n,s,u);case 22:return Qm(n,s,u);case 24:return ko(s),g=ki(ui),n===null?(x=hd(),x===null&&(x=dn,v=cd(),x.pooledCache=v,v.refCount++,v!==null&&(x.pooledCacheLanes|=u),x=v),s.memoizedState={parent:g,cache:x},Hd(s),Ua(s,ui,x)):((n.lanes&u)!==0&&(Gd(n,s),Dc(s,null,null,u),Rc()),x=n.memoizedState,v=s.memoizedState,x.parent!==g?(x={parent:g,cache:g},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),Ua(s,ui,g)):(g=v.cache,Ua(s,ui,g),g!==x.cache&&zd(s,[ui],u,!0))),Ci(n,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}var jd=Qe(null),Po=null,Qs=null;function Ua(n,s,u){xt(jd,s._currentValue),s._currentValue=u}function Ks(n){n._currentValue=jd.current,Ht(jd)}function Fd(n,s,u){for(;n!==null;){var g=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),n===u)break;n=n.return}}function zd(n,s,u,g){var x=n.child;for(x!==null&&(x.return=n);x!==null;){var v=x.dependencies;if(v!==null){var D=x.child;v=v.firstContext;e:for(;v!==null;){var B=v;v=x;for(var X=0;X<s.length;X++)if(B.context===s[X]){v.lanes|=u,B=v.alternate,B!==null&&(B.lanes|=u),Fd(v.return,u,n),g||(D=null);break e}v=B.next}}else if(x.tag===18){if(D=x.return,D===null)throw Error(a(341));D.lanes|=u,v=D.alternate,v!==null&&(v.lanes|=u),Fd(D,u,n),D=null}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===n){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}}function Ic(n,s,u,g){n=null;for(var x=s,v=!1;x!==null;){if(!v){if((x.flags&524288)!==0)v=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var D=x.alternate;if(D===null)throw Error(a(387));if(D=D.memoizedProps,D!==null){var B=x.type;h(x.pendingProps.value,D.value)||(n!==null?n.push(B):n=[B])}}else if(x===zi.current){if(D=x.alternate,D===null)throw Error(a(387));D.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(n!==null?n.push(Yc):n=[Yc])}x=x.return}n!==null&&zd(s,n,u,g),s.flags|=262144}function uh(n){for(n=n.firstContext;n!==null;){if(!h(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ko(n){Po=n,Qs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ki(n){return rp(Po,n)}function hh(n,s){return Po===null&&ko(n),rp(n,s)}function rp(n,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Qs===null){if(n===null)throw Error(a(308));Qs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Qs=Qs.next=s;return u}var Va=!1;function Hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ja(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Fa(n,s,u){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,(Dn&2)!==0){var x=g.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),g.pending=s,s=qu(n),Vg(n,null,u),s}return Gu(n,g,s,u),qu(n)}function Nc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194176)!==0)){var g=s.lanes;g&=n.pendingLanes,u|=g,s.lanes=u,Rr(n,u)}}function qd(n,s){var u=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var x=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var D={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?x=v=D:v=v.next=D,u=u.next}while(u!==null);v===null?x=v=s:v=v.next=s}else x=v=s;u={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:v,shared:g.shared,callbacks:g.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}var Yd=!1;function Rc(){if(Yd){var n=El;if(n!==null)throw n}}function Dc(n,s,u,g){Yd=!1;var x=n.updateQueue;Va=!1;var v=x.firstBaseUpdate,D=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var X=B,re=X.next;X.next=null,D===null?v=re:D.next=re,D=X;var _e=n.alternate;_e!==null&&(_e=_e.updateQueue,B=_e.lastBaseUpdate,B!==D&&(B===null?_e.firstBaseUpdate=re:B.next=re,_e.lastBaseUpdate=X))}if(v!==null){var Re=x.baseState;D=0,_e=re=X=null,B=v;do{var de=B.lane&-536870913,Ee=de!==B.lane;if(Ee?(Ut&de)===de:(g&de)===de){de!==0&&de===yl&&(Yd=!0),_e!==null&&(_e=_e.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ke=n,dt=B;de=s;var Fn=u;switch(dt.tag){case 1:if(Ke=dt.payload,typeof Ke=="function"){Re=Ke.call(Fn,Re,de);break e}Re=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=dt.payload,de=typeof Ke=="function"?Ke.call(Fn,Re,de):Ke,de==null)break e;Re=W({},Re,de);break e;case 2:Va=!0}}de=B.callback,de!==null&&(n.flags|=64,Ee&&(n.flags|=8192),Ee=x.callbacks,Ee===null?x.callbacks=[de]:Ee.push(de))}else Ee={lane:de,tag:B.tag,payload:B.payload,callback:B.callback,next:null},_e===null?(re=_e=Ee,X=Re):_e=_e.next=Ee,D|=de;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;Ee=B,B=Ee.next,Ee.next=null,x.lastBaseUpdate=Ee,x.shared.pending=null}}while(!0);_e===null&&(X=Re),x.baseState=X,x.firstBaseUpdate=re,x.lastBaseUpdate=_e,v===null&&(x.shared.lanes=0),Ya|=D,n.lanes=D,n.memoizedState=Re}}function sp(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function ap(n,s){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)sp(u[n],s)}function Oc(n,s){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var x=g.next;u=x;do{if((u.tag&n)===n){g=void 0;var v=u.create,D=u.inst;g=v(),D.destroy=g}u=u.next}while(u!==x)}}catch(B){hn(s,s.return,B)}}function za(n,s,u){try{var g=s.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var v=x.next;g=v;do{if((g.tag&n)===n){var D=g.inst,B=D.destroy;if(B!==void 0){D.destroy=void 0,x=s;var X=u;try{B()}catch(re){hn(x,X,re)}}}g=g.next}while(g!==v)}}catch(re){hn(s,s.return,re)}}function op(n){var s=n.updateQueue;if(s!==null){var u=n.stateNode;try{ap(s,u)}catch(g){hn(n,n.return,g)}}}function lp(n,s,u){u.props=Lo(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(g){hn(n,s,g)}}function Bo(n,s){try{var u=n.ref;if(u!==null){var g=n.stateNode;switch(n.tag){case 26:case 27:case 5:var x=g;break;default:x=g}typeof u=="function"?n.refCleanup=u(x):u.current=x}}catch(v){hn(n,s,v)}}function _r(n,s){var u=n.ref,g=n.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(x){hn(n,s,x)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){hn(n,s,x)}else u.current=null}function cp(n){var s=n.type,u=n.memoizedProps,g=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(x){hn(n,n.return,x)}}function up(n,s,u){try{var g=n.stateNode;Nw(g,n.type,u,s),g[Nn]=s}catch(x){hn(n,n.return,x)}}function hp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Xd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wd(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Ch));else if(g!==4&&g!==27&&(n=n.child,n!==null))for(Wd(n,s,u),n=n.sibling;n!==null;)Wd(n,s,u),n=n.sibling}function fh(n,s,u){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(g!==4&&g!==27&&(n=n.child,n!==null))for(fh(n,s,u),n=n.sibling;n!==null;)fh(n,s,u),n=n.sibling}var Zs=!1,Vn=!1,Qd=!1,fp=typeof WeakSet=="function"?WeakSet:Set,pi=null,dp=!1;function sw(n,s){if(n=n.containerInfo,v0=Oh,n=C(n),N(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var x=g.anchorOffset,v=g.focusNode;g=g.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var D=0,B=-1,X=-1,re=0,_e=0,Re=n,de=null;t:for(;;){for(var Ee;Re!==u||x!==0&&Re.nodeType!==3||(B=D+x),Re!==v||g!==0&&Re.nodeType!==3||(X=D+g),Re.nodeType===3&&(D+=Re.nodeValue.length),(Ee=Re.firstChild)!==null;)de=Re,Re=Ee;for(;;){if(Re===n)break t;if(de===u&&++re===x&&(B=D),de===v&&++_e===g&&(X=D),(Ee=Re.nextSibling)!==null)break;Re=de,de=Re.parentNode}Re=Ee}u=B===-1||X===-1?null:{start:B,end:X}}else u=null}u=u||{start:0,end:0}}else u=null;for(T0={focusedElem:n,selectionRange:u},Oh=!1,pi=s;pi!==null;)if(s=pi,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pi=n;else for(;pi!==null;){switch(s=pi,v=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,u=s,x=v.memoizedProps,v=v.memoizedState,g=u.stateNode;try{var Ke=Lo(u.type,x,u.elementType===u.type);n=g.getSnapshotBeforeUpdate(Ke,v),g.__reactInternalSnapshotBeforeUpdate=n}catch(dt){hn(u,u.return,dt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,u=n.nodeType,u===9)I0(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":I0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,pi=n;break}pi=s.return}return Ke=dp,dp=!1,Ke}function gp(n,s,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:$s(n,u),g&4&&Oc(5,u);break;case 1:if($s(n,u),g&4)if(n=u.stateNode,s===null)try{n.componentDidMount()}catch(B){hn(u,u.return,B)}else{var x=Lo(u.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(x,s,n.__reactInternalSnapshotBeforeUpdate)}catch(B){hn(u,u.return,B)}}g&64&&op(u),g&512&&Bo(u,u.return);break;case 3:if($s(n,u),g&64&&(g=u.updateQueue,g!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{ap(g,n)}catch(B){hn(u,u.return,B)}}break;case 26:$s(n,u),g&512&&Bo(u,u.return);break;case 27:case 5:$s(n,u),s===null&&g&4&&cp(u),g&512&&Bo(u,u.return);break;case 12:$s(n,u);break;case 13:$s(n,u),g&4&&yp(n,u);break;case 22:if(x=u.memoizedState!==null||Zs,!x){s=s!==null&&s.memoizedState!==null||Vn;var v=Zs,D=Vn;Zs=x,(Vn=s)&&!D?Ha(n,u,(u.subtreeFlags&8772)!==0):$s(n,u),Zs=v,Vn=D}g&512&&(u.memoizedProps.mode==="manual"?Bo(u,u.return):_r(u,u.return));break;default:$s(n,u)}}function mp(n){var s=n.alternate;s!==null&&(n.alternate=null,mp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ks(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ni=null,Ar=!1;function Js(n,s,u){for(u=u.child;u!==null;)pp(n,s,u),u=u.sibling}function pp(n,s,u){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount($t,u)}catch{}switch(u.tag){case 26:Vn||_r(u,s),Js(n,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Vn||_r(u,s);var g=ni,x=Ar;for(ni=u.stateNode,Js(n,s,u),u=u.stateNode,s=u.attributes;s.length;)u.removeAttributeNode(s[0]);ks(u),ni=g,Ar=x;break;case 5:Vn||_r(u,s);case 6:x=ni;var v=Ar;if(ni=null,Js(n,s,u),ni=x,Ar=v,ni!==null)if(Ar)try{n=ni,g=u.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)}catch(D){hn(u,s,D)}else try{ni.removeChild(u.stateNode)}catch(D){hn(u,s,D)}break;case 18:ni!==null&&(Ar?(s=ni,u=u.stateNode,s.nodeType===8?b0(s.parentNode,u):s.nodeType===1&&b0(s,u),Kc(s)):b0(ni,u.stateNode));break;case 4:g=ni,x=Ar,ni=u.stateNode.containerInfo,Ar=!0,Js(n,s,u),ni=g,Ar=x;break;case 0:case 11:case 14:case 15:Vn||za(2,u,s),Vn||za(4,u,s),Js(n,s,u);break;case 1:Vn||(_r(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"&&lp(u,s,g)),Js(n,s,u);break;case 21:Js(n,s,u);break;case 22:Vn||_r(u,s),Vn=(g=Vn)||u.memoizedState!==null,Js(n,s,u),Vn=g;break;default:Js(n,s,u)}}function yp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Kc(n)}catch(u){hn(s,s.return,u)}}function aw(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new fp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new fp),s;default:throw Error(a(435,n.tag))}}function Kd(n,s){var u=aw(n);s.forEach(function(g){var x=xw.bind(null,n,g);u.has(g)||(u.add(g),g.then(x,x))})}function Gr(n,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var x=u[g],v=n,D=s,B=D;e:for(;B!==null;){switch(B.tag){case 27:case 5:ni=B.stateNode,Ar=!1;break e;case 3:ni=B.stateNode.containerInfo,Ar=!0;break e;case 4:ni=B.stateNode.containerInfo,Ar=!0;break e}B=B.return}if(ni===null)throw Error(a(160));pp(v,D,x),ni=null,Ar=!1,v=x.alternate,v!==null&&(v.return=null),x.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ep(s,n),s=s.sibling}var as=null;function Ep(n,s){var u=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gr(s,n),qr(n),g&4&&(za(3,n,n.return),Oc(3,n),za(5,n,n.return));break;case 1:Gr(s,n),qr(n),g&512&&(Vn||u===null||_r(u,u.return)),g&64&&Zs&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var x=as;if(Gr(s,n),qr(n),g&512&&(Vn||u===null||_r(u,u.return)),g&4){var v=u!==null?u.memoizedState:null;if(g=n.memoizedState,u===null)if(g===null)if(n.stateNode===null){e:{g=n.type,u=n.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":v=x.getElementsByTagName("title")[0],(!v||v[ds]||v[pn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=x.createElement(g),x.head.insertBefore(v,x.querySelector("head > title"))),Si(v,g,u),v[pn]=n,qt(v),g=v;break e;case"link":var D=c2("link","href",x).get(g+(u.href||""));if(D){for(var B=0;B<D.length;B++)if(v=D[B],v.getAttribute("href")===(u.href==null?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){D.splice(B,1);break t}}v=x.createElement(g),Si(v,g,u),x.head.appendChild(v);break;case"meta":if(D=c2("meta","content",x).get(g+(u.content||""))){for(B=0;B<D.length;B++)if(v=D[B],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){D.splice(B,1);break t}}v=x.createElement(g),Si(v,g,u),x.head.appendChild(v);break;default:throw Error(a(468,g))}v[pn]=n,qt(v),g=v}n.stateNode=g}else u2(x,n.type,n.stateNode);else n.stateNode=l2(x,g,n.memoizedProps);else v!==g?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,g===null?u2(x,n.type,n.stateNode):l2(x,g,n.memoizedProps)):g===null&&n.stateNode!==null&&up(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(g&4&&n.alternate===null){x=n.stateNode,v=n.memoizedProps;try{for(var X=x.firstChild;X;){var re=X.nextSibling,_e=X.nodeName;X[ds]||_e==="HEAD"||_e==="BODY"||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&X.rel.toLowerCase()==="stylesheet"||x.removeChild(X),X=re}for(var Re=n.type,de=x.attributes;de.length;)x.removeAttributeNode(de[0]);Si(x,Re,v),x[pn]=n,x[Nn]=v}catch(Ke){hn(n,n.return,Ke)}}case 5:if(Gr(s,n),qr(n),g&512&&(Vn||u===null||_r(u,u.return)),n.flags&32){x=n.stateNode;try{ir(x,"")}catch(Ke){hn(n,n.return,Ke)}}g&4&&n.stateNode!=null&&(x=n.memoizedProps,up(n,x,u!==null?u.memoizedProps:x)),g&1024&&(Qd=!0);break;case 6:if(Gr(s,n),qr(n),g&4){if(n.stateNode===null)throw Error(a(162));g=n.memoizedProps,u=n.stateNode;try{u.nodeValue=g}catch(Ke){hn(n,n.return,Ke)}}break;case 3:if(Nh=null,x=as,as=bh(s.containerInfo),Gr(s,n),as=x,qr(n),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Kc(s.containerInfo)}catch(Ke){hn(n,n.return,Ke)}Qd&&(Qd=!1,xp(n));break;case 4:g=as,as=bh(n.stateNode.containerInfo),Gr(s,n),qr(n),as=g;break;case 12:Gr(s,n),qr(n);break;case 13:Gr(s,n),qr(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(s0=vn()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Kd(n,g)));break;case 22:if(g&512&&(Vn||u===null||_r(u,u.return)),X=n.memoizedState!==null,re=u!==null&&u.memoizedState!==null,_e=Zs,Re=Vn,Zs=_e||X,Vn=Re||re,Gr(s,n),Vn=Re,Zs=_e,qr(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,g&8192&&(s._visibility=X?s._visibility&-2:s._visibility|1,X&&(s=Zs||Vn,u===null||re||s||wl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(u=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(u===null){re=u=s;try{if(x=re.stateNode,X)v=x.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{D=re.stateNode,B=re.memoizedProps.style;var Ee=B!=null&&B.hasOwnProperty("display")?B.display:null;D.style.display=Ee==null||typeof Ee=="boolean"?"":(""+Ee).trim()}}catch(Ke){hn(re,re.return,Ke)}}}else if(s.tag===6){if(u===null){re=s;try{re.stateNode.nodeValue=X?"":re.memoizedProps}catch(Ke){hn(re,re.return,Ke)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=n.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Kd(n,u))));break;case 19:Gr(s,n),qr(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,Kd(n,g)));break;case 21:break;default:Gr(s,n),qr(n)}}function qr(n){var s=n.flags;if(s&2){try{if(n.tag!==27){e:{for(var u=n.return;u!==null;){if(hp(u)){var g=u;break e}u=u.return}throw Error(a(160))}switch(g.tag){case 27:var x=g.stateNode,v=Xd(n);fh(n,v,x);break;case 5:var D=g.stateNode;g.flags&32&&(ir(D,""),g.flags&=-33);var B=Xd(n);fh(n,B,D);break;case 3:case 4:var X=g.stateNode.containerInfo,re=Xd(n);Wd(n,re,X);break;default:throw Error(a(161))}}}catch(_e){hn(n,n.return,_e)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function xp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;xp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function $s(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gp(n,s.alternate,s),s=s.sibling}function wl(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:za(4,s,s.return),wl(s);break;case 1:_r(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&lp(s,s.return,u),wl(s);break;case 26:case 27:case 5:_r(s,s.return),wl(s);break;case 22:_r(s,s.return),s.memoizedState===null&&wl(s);break;default:wl(s)}n=n.sibling}}function Ha(n,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,x=n,v=s,D=v.flags;switch(v.tag){case 0:case 11:case 15:Ha(x,v,u),Oc(4,v);break;case 1:if(Ha(x,v,u),g=v,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(re){hn(g,g.return,re)}if(g=v,x=g.updateQueue,x!==null){var B=g.stateNode;try{var X=x.shared.hiddenCallbacks;if(X!==null)for(x.shared.hiddenCallbacks=null,x=0;x<X.length;x++)sp(X[x],B)}catch(re){hn(g,g.return,re)}}u&&D&64&&op(v),Bo(v,v.return);break;case 26:case 27:case 5:Ha(x,v,u),u&&g===null&&D&4&&cp(v),Bo(v,v.return);break;case 12:Ha(x,v,u);break;case 13:Ha(x,v,u),u&&D&4&&yp(x,v);break;case 22:v.memoizedState===null&&Ha(x,v,u),Bo(v,v.return);break;default:Ha(x,v,u)}s=s.sibling}}function Zd(n,s){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&wc(u))}function Jd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wc(n))}function Ga(n,s,u,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_p(n,s,u,g),s=s.sibling}function _p(n,s,u,g){var x=s.flags;switch(s.tag){case 0:case 11:case 15:Ga(n,s,u,g),x&2048&&Oc(9,s);break;case 3:Ga(n,s,u,g),x&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wc(n)));break;case 12:if(x&2048){Ga(n,s,u,g),n=s.stateNode;try{var v=s.memoizedProps,D=v.id,B=v.onPostCommit;typeof B=="function"&&B(D,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){hn(s,s.return,X)}}else Ga(n,s,u,g);break;case 23:break;case 22:v=s.stateNode,s.memoizedState!==null?v._visibility&4?Ga(n,s,u,g):Mc(n,s):v._visibility&4?Ga(n,s,u,g):(v._visibility|=4,vl(n,s,u,g,(s.subtreeFlags&10256)!==0)),x&2048&&Zd(s.alternate,s);break;case 24:Ga(n,s,u,g),x&2048&&Jd(s.alternate,s);break;default:Ga(n,s,u,g)}}function vl(n,s,u,g,x){for(x=x&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=n,D=s,B=u,X=g,re=D.flags;switch(D.tag){case 0:case 11:case 15:vl(v,D,B,X,x),Oc(8,D);break;case 23:break;case 22:var _e=D.stateNode;D.memoizedState!==null?_e._visibility&4?vl(v,D,B,X,x):Mc(v,D):(_e._visibility|=4,vl(v,D,B,X,x)),x&&re&2048&&Zd(D.alternate,D);break;case 24:vl(v,D,B,X,x),x&&re&2048&&Jd(D.alternate,D);break;default:vl(v,D,B,X,x)}s=s.sibling}}function Mc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=n,g=s,x=g.flags;switch(g.tag){case 22:Mc(u,g),x&2048&&Zd(g.alternate,g);break;case 24:Mc(u,g),x&2048&&Jd(g.alternate,g);break;default:Mc(u,g)}s=s.sibling}}var Lc=8192;function Tl(n){if(n.subtreeFlags&Lc)for(n=n.child;n!==null;)Ap(n),n=n.sibling}function Ap(n){switch(n.tag){case 26:Tl(n),n.flags&Lc&&n.memoizedState!==null&&Ww(as,n.memoizedState,n.memoizedProps);break;case 5:Tl(n);break;case 3:case 4:var s=as;as=bh(n.stateNode.containerInfo),Tl(n),as=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Lc,Lc=16777216,Tl(n),Lc=s):Tl(n));break;default:Tl(n)}}function wp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Pc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];pi=g,Tp(g,n)}wp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vp(n),n=n.sibling}function vp(n){switch(n.tag){case 0:case 11:case 15:Pc(n),n.flags&2048&&za(9,n,n.return);break;case 3:Pc(n);break;case 12:Pc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,dh(n)):Pc(n);break;default:Pc(n)}}function dh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];pi=g,Tp(g,n)}wp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:za(8,s,s.return),dh(s);break;case 22:u=s.stateNode,u._visibility&4&&(u._visibility&=-5,dh(s));break;default:dh(s)}n=n.sibling}}function Tp(n,s){for(;pi!==null;){var u=pi;switch(u.tag){case 0:case 11:case 15:za(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:wc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,pi=g;else e:for(u=n;pi!==null;){g=pi;var x=g.sibling,v=g.return;if(mp(g),g===u){pi=null;break e}if(x!==null){x.return=v,pi=x;break e}pi=v}}}function ow(n,s,u,g){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(n,s,u,g){return new ow(n,s,u,g)}function $d(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qa(n,s){var u=n.alternate;return u===null?(u=Yr(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function Cp(n,s){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,s=u.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function gh(n,s,u,g,x,v){var D=0;if(g=n,typeof n=="function")$d(n)&&(D=1);else if(typeof n=="string")D=Yw(n,u,Bt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case T:return Uo(u.children,x,v,s);case _:D=8,x|=24;break;case I:return n=Yr(12,u,s,x|2),n.elementType=I,n.lanes=v,n;case ie:return n=Yr(13,u,s,x),n.elementType=ie,n.lanes=v,n;case te:return n=Yr(19,u,s,x),n.elementType=te,n.lanes=v,n;case se:return Sp(u,x,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:case F:D=10;break e;case V:D=9;break e;case K:D=11;break e;case ue:D=14;break e;case ye:D=16,g=null;break e}D=29,u=Error(a(130,n===null?"null":typeof n,"")),g=null}return s=Yr(D,u,s,x),s.elementType=n,s.type=g,s.lanes=v,s}function Uo(n,s,u,g){return n=Yr(7,n,g,s),n.lanes=u,n}function Sp(n,s,u,g){n=Yr(22,n,g,s),n.elementType=se,n.lanes=u;var x={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=x._current;if(v===null)throw Error(a(456));if((x._pendingVisibility&2)===0){var D=Ma(v,2);D!==null&&(x._pendingVisibility|=2,Ji(D,v,2))}},attach:function(){var v=x._current;if(v===null)throw Error(a(456));if((x._pendingVisibility&2)!==0){var D=Ma(v,2);D!==null&&(x._pendingVisibility&=-3,Ji(D,v,2))}}};return n.stateNode=x,n}function e0(n,s,u){return n=Yr(6,n,null,s),n.lanes=u,n}function t0(n,s,u){return s=Yr(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function ea(n){n.flags|=4}function bp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!h2(s)){if(s=Hr.current,s!==null&&((Ut&4194176)===Ut?As!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||s!==As))throw xc=ad,Gg;n.flags|=8192}}function mh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?qi():536870912,n.lanes|=s,Sl|=s)}function kc(n,s){if(!Wt)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Rn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,g=0;if(s)for(var x=n.child;x!==null;)u|=x.lanes|x.childLanes,g|=x.subtreeFlags&31457280,g|=x.flags&31457280,x.return=n,x=x.sibling;else for(x=n.child;x!==null;)u|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=n,x=x.sibling;return n.subtreeFlags|=g,n.childLanes=u,s}function lw(n,s,u){var g=s.pendingProps;switch(rd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(s),null;case 1:return Rn(s),null;case 3:return u=s.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),Ks(ui),Hi(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(mc(s)?ea(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ss!==null&&(c0(ss),ss=null))),Rn(s),null;case 26:return u=s.memoizedState,n===null?(ea(s),u!==null?(Rn(s),bp(s,u)):(Rn(s),s.flags&=-16777217)):u?u!==n.memoizedState?(ea(s),Rn(s),bp(s,u)):(Rn(s),s.flags&=-16777217):(n.memoizedProps!==g&&ea(s),Rn(s),s.flags&=-16777217),null;case 27:jt(s),u=ft.current;var x=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==g&&ea(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Rn(s),null}n=Bt.current,mc(s)?zg(s):(n=i2(x,g,u),s.stateNode=n,ea(s))}return Rn(s),null;case 5:if(jt(s),u=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==g&&ea(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Rn(s),null}if(n=Bt.current,mc(s))zg(s);else{switch(x=Sh(ft.current),n){case 1:n=x.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=x.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?x.createElement("select",{is:g.is}):x.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?x.createElement(u,{is:g.is}):x.createElement(u)}}n[pn]=s,n[Nn]=g;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)n.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=n;e:switch(Si(n,u,g),u){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ea(s)}}return Rn(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==g&&ea(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(n=ft.current,mc(s)){if(n=s.stateNode,u=s.memoizedProps,g=null,x=Zi,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}n[pn]=s,n=!!(n.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||Zp(n.nodeValue,u)),n||Io(s)}else n=Sh(n).createTextNode(g),n[pn]=s,s.stateNode=n}return Rn(s),null;case 13:if(g=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(x=mc(s),g!==null&&g.dehydrated!==null){if(n===null){if(!x)throw Error(a(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(a(317));x[pn]=s}else pc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Rn(s),x=!1}else ss!==null&&(c0(ss),ss=null),x=!0;if(!x)return s.flags&256?(Ys(s),s):(Ys(s),null)}if(Ys(s),(s.flags&128)!==0)return s.lanes=u,s;if(u=g!==null,n=n!==null&&n.memoizedState!==null,u){g=s.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool);var v=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(v=g.memoizedState.cachePool.pool),v!==x&&(g.flags|=2048)}return u!==n&&u&&(s.child.flags|=8192),mh(s,s.updateQueue),Rn(s),null;case 4:return Hi(),n===null&&_0(s.stateNode.containerInfo),Rn(s),null;case 10:return Ks(s.type),Rn(s),null;case 19:if(Ht(ci),x=s.memoizedState,x===null)return Rn(s),null;if(g=(s.flags&128)!==0,v=x.rendering,v===null)if(g)kc(x,!1);else{if(jn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Ju(n),v!==null){for(s.flags|=128,kc(x,!1),n=v.updateQueue,s.updateQueue=n,mh(s,n),s.subtreeFlags=0,n=u,u=s.child;u!==null;)Cp(u,n),u=u.sibling;return xt(ci,ci.current&1|2),s.child}n=n.sibling}x.tail!==null&&vn()>ph&&(s.flags|=128,g=!0,kc(x,!1),s.lanes=4194304)}else{if(!g)if(n=Ju(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,mh(s,n),kc(x,!0),x.tail===null&&x.tailMode==="hidden"&&!v.alternate&&!Wt)return Rn(s),null}else 2*vn()-x.renderingStartTime>ph&&u!==536870912&&(s.flags|=128,g=!0,kc(x,!1),s.lanes=4194304);x.isBackwards?(v.sibling=s.child,s.child=v):(n=x.last,n!==null?n.sibling=v:s.child=v,x.last=v)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=vn(),s.sibling=null,n=ci.current,xt(ci,g?n&1|2:n&1),s):(Rn(s),null);case 22:case 23:return Ys(s),ld(),g=s.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(u&536870912)!==0&&(s.flags&128)===0&&(Rn(s),s.subtreeFlags&6&&(s.flags|=8192)):Rn(s),u=s.updateQueue,u!==null&&mh(s,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==u&&(s.flags|=2048),n!==null&&Ht(Ro),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ks(ui),Rn(s),null;case 25:return null}throw Error(a(156,s.tag))}function cw(n,s){switch(rd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ks(ui),Hi(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return jt(s),null;case 13:if(Ys(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));pc()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ht(ci),null;case 4:return Hi(),null;case 10:return Ks(s.type),null;case 22:case 23:return Ys(s),ld(),n!==null&&Ht(Ro),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ks(ui),null;case 25:return null;default:return null}}function Ip(n,s){switch(rd(s),s.tag){case 3:Ks(ui),Hi();break;case 26:case 27:case 5:jt(s);break;case 4:Hi();break;case 13:Ys(s);break;case 19:Ht(ci);break;case 10:Ks(s.type);break;case 22:case 23:Ys(s),ld(),n!==null&&Ht(Ro);break;case 24:Ks(ui)}}var uw={getCacheForType:function(n){var s=ki(ui),u=s.data.get(n);return u===void 0&&(u=n(),s.data.set(n,u)),u}},hw=typeof WeakMap=="function"?WeakMap:Map,Dn=0,dn=null,bt=null,Ut=0,gn=0,wr=null,ta=!1,Cl=!1,n0=!1,na=0,jn=0,Ya=0,Vo=0,i0=0,Xr=0,Sl=0,Bc=null,vs=null,r0=!1,s0=0,ph=1/0,yh=null,Xa=null,Eh=!1,jo=null,Uc=0,a0=0,o0=null,Vc=0,l0=null;function vr(){if((Dn&2)!==0&&Ut!==0)return Ut&-Ut;if(P.T!==null){var n=yl;return n!==0?n:p0()}return Dr()}function Np(){Xr===0&&(Xr=(Ut&536870912)===0||Wt?Pn():536870912);var n=Hr.current;return n!==null&&(n.flags|=32),Xr}function Ji(n,s,u){(n===dn&&gn===2||n.cancelPendingCommit!==null)&&(bl(n,0),ia(n,Ut,Xr,!1)),Gt(n,u),((Dn&2)===0||n!==dn)&&(n===dn&&((Dn&2)===0&&(Vo|=u),jn===4&&ia(n,Ut,Xr,!1)),Ts(n))}function Rp(n,s,u){if((Dn&6)!==0)throw Error(a(327));var g=!u&&(s&60)===0&&(s&n.expiredLanes)===0||Zn(n,s),x=g?gw(n,s):f0(n,s,!0),v=g;do{if(x===0){Cl&&!g&&ia(n,s,0,!1);break}else if(x===6)ia(n,s,0,!ta);else{if(u=n.current.alternate,v&&!fw(u)){x=f0(n,s,!1),v=!1;continue}if(x===2){if(v=s,n.errorRecoveryDisabledLanes&v)var D=0;else D=n.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){s=D;e:{var B=n;x=Bc;var X=B.current.memoizedState.isDehydrated;if(X&&(bl(B,D).flags|=256),D=f0(B,D,!1),D!==2){if(n0&&!X){B.errorRecoveryDisabledLanes|=v,Vo|=v,x=4;break e}v=vs,vs=x,v!==null&&c0(v)}x=D}if(v=!1,x!==2)continue}}if(x===1){bl(n,0),ia(n,s,0,!0);break}e:{switch(g=n,x){case 0:case 1:throw Error(a(345));case 4:if((s&4194176)===s){ia(g,s,Xr,!ta);break e}break;case 2:vs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(g.finishedWork=u,g.finishedLanes=s,(s&62914560)===s&&(v=s0+300-vn(),10<v)){if(ia(g,s,Xr,!ta),Gi(g,0)!==0)break e;g.timeoutHandle=e2(Dp.bind(null,g,u,vs,yh,r0,s,Xr,Vo,Sl,ta,2,-0,0),v);break e}Dp(g,u,vs,yh,r0,s,Xr,Vo,Sl,ta,0,-0,0)}}break}while(!0);Ts(n)}function c0(n){vs===null?vs=n:vs.push.apply(vs,n)}function Dp(n,s,u,g,x,v,D,B,X,re,_e,Re,de){var Ee=s.subtreeFlags;if((Ee&8192||(Ee&16785408)===16785408)&&(qc={stylesheets:null,count:0,unsuspend:Xw},Ap(s),s=Qw(),s!==null)){n.cancelPendingCommit=s(Up.bind(null,n,u,g,x,D,B,X,1,Re,de)),ia(n,v,D,!re);return}Up(n,u,g,x,D,B,X,_e,Re,de)}function fw(n){for(var s=n;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var x=u[g],v=x.getSnapshot;x=x.value;try{if(!h(v(),x))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ia(n,s,u,g){s&=~i0,s&=~Vo,n.suspendedLanes|=s,n.pingedLanes&=~s,g&&(n.warmLanes|=s),g=n.expirationTimes;for(var x=s;0<x;){var v=31-vt(x),D=1<<v;g[v]=-1,x&=~D}u!==0&&Di(n,u,s)}function xh(){return(Dn&6)===0?(jc(0),!1):!0}function u0(){if(bt!==null){if(gn===0)var n=bt.return;else n=bt,Qs=Po=null,pd(n),ml=null,_c=0,n=bt;for(;n!==null;)Ip(n.alternate,n),n=n.return;bt=null}}function bl(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,Dw(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),u0(),dn=n,bt=u=qa(n.current,null),Ut=s,gn=0,wr=null,ta=!1,Cl=Zn(n,s),n0=!1,Sl=Xr=i0=Vo=Ya=jn=0,vs=Bc=null,r0=!1,(s&8)!==0&&(s|=s&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=s;0<g;){var x=31-vt(g),v=1<<x;s|=n[x],g&=~v}return na=s,Hu(),u}function Op(n,s){At=null,P.H=ws,s===Ec?(s=Xg(),gn=3):s===Gg?(s=Xg(),gn=4):gn=s===qm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wr=s,bt===null&&(jn=1,ch(n,jr(s,n.current)))}function Mp(){var n=P.H;return P.H=ws,n===null?ws:n}function Lp(){var n=P.A;return P.A=uw,n}function h0(){jn=4,ta||(Ut&4194176)!==Ut&&Hr.current!==null||(Cl=!0),(Ya&134217727)===0&&(Vo&134217727)===0||dn===null||ia(dn,Ut,Xr,!1)}function f0(n,s,u){var g=Dn;Dn|=2;var x=Mp(),v=Lp();(dn!==n||Ut!==s)&&(yh=null,bl(n,s)),s=!1;var D=jn;e:do try{if(gn!==0&&bt!==null){var B=bt,X=wr;switch(gn){case 8:u0(),D=6;break e;case 3:case 2:case 6:Hr.current===null&&(s=!0);var re=gn;if(gn=0,wr=null,Il(n,B,X,re),u&&Cl){D=0;break e}break;default:re=gn,gn=0,wr=null,Il(n,B,X,re)}}dw(),D=jn;break}catch(_e){Op(n,_e)}while(!0);return s&&n.shellSuspendCounter++,Qs=Po=null,Dn=g,P.H=x,P.A=v,bt===null&&(dn=null,Ut=0,Hu()),D}function dw(){for(;bt!==null;)Pp(bt)}function gw(n,s){var u=Dn;Dn|=2;var g=Mp(),x=Lp();dn!==n||Ut!==s?(yh=null,ph=vn()+500,bl(n,s)):Cl=Zn(n,s);e:do try{if(gn!==0&&bt!==null){s=bt;var v=wr;t:switch(gn){case 1:gn=0,wr=null,Il(n,s,v,1);break;case 2:if(qg(v)){gn=0,wr=null,kp(s);break}s=function(){gn===2&&dn===n&&(gn=7),Ts(n)},v.then(s,s);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:qg(v)?(gn=0,wr=null,kp(s)):(gn=0,wr=null,Il(n,s,v,7));break;case 5:var D=null;switch(bt.tag){case 26:D=bt.memoizedState;case 5:case 27:var B=bt;if(!D||h2(D)){gn=0,wr=null;var X=B.sibling;if(X!==null)bt=X;else{var re=B.return;re!==null?(bt=re,_h(re)):bt=null}break t}}gn=0,wr=null,Il(n,s,v,5);break;case 6:gn=0,wr=null,Il(n,s,v,6);break;case 8:u0(),jn=6;break e;default:throw Error(a(462))}}mw();break}catch(_e){Op(n,_e)}while(!0);return Qs=Po=null,P.H=g,P.A=x,Dn=u,bt!==null?0:(dn=null,Ut=0,Hu(),jn)}function mw(){for(;bt!==null&&!va();)Pp(bt)}function Pp(n){var s=ip(n.alternate,n,na);n.memoizedProps=n.pendingProps,s===null?_h(n):bt=s}function kp(n){var s=n,u=s.alternate;switch(s.tag){case 15:case 0:s=Zm(u,s,s.pendingProps,s.type,void 0,Ut);break;case 11:s=Zm(u,s,s.pendingProps,s.type.render,s.ref,Ut);break;case 5:pd(s);default:Ip(u,s),s=bt=Cp(s,na),s=ip(u,s,na)}n.memoizedProps=n.pendingProps,s===null?_h(n):bt=s}function Il(n,s,u,g){Qs=Po=null,pd(s),ml=null,_c=0;var x=s.return;try{if(iw(n,x,s,u,Ut)){jn=1,ch(n,jr(u,n.current)),bt=null;return}}catch(v){if(x!==null)throw bt=x,v;jn=1,ch(n,jr(u,n.current)),bt=null;return}s.flags&32768?(Wt||g===1?n=!0:Cl||(Ut&536870912)!==0?n=!1:(ta=n=!0,(g===2||g===3||g===6)&&(g=Hr.current,g!==null&&g.tag===13&&(g.flags|=16384))),Bp(s,n)):_h(s)}function _h(n){var s=n;do{if((s.flags&32768)!==0){Bp(s,ta);return}n=s.return;var u=lw(s.alternate,s,na);if(u!==null){bt=u;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=n}while(s!==null);jn===0&&(jn=5)}function Bp(n,s){do{var u=cw(n.alternate,n);if(u!==null){u.flags&=32767,bt=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(n=n.sibling,n!==null)){bt=n;return}bt=n=u}while(n!==null);jn=6,bt=null}function Up(n,s,u,g,x,v,D,B,X,re){var _e=P.T,Re=Be.p;try{Be.p=2,P.T=null,pw(n,s,u,g,Re,x,v,D,B,X,re)}finally{P.T=_e,Be.p=Re}}function pw(n,s,u,g,x,v,D,B){do Nl();while(jo!==null);if((Dn&6)!==0)throw Error(a(327));var X=n.finishedWork;if(g=n.finishedLanes,X===null)return null;if(n.finishedWork=null,n.finishedLanes=0,X===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var re=X.lanes|X.childLanes;if(re|=td,nl(n,g,re,v,D,B),n===dn&&(bt=dn=null,Ut=0),(X.subtreeFlags&10256)===0&&(X.flags&10256)===0||Eh||(Eh=!0,a0=re,o0=u,_w(di,function(){return Nl(),null})),u=(X.flags&15990)!==0,(X.subtreeFlags&15990)!==0||u?(u=P.T,P.T=null,v=Be.p,Be.p=2,D=Dn,Dn|=4,sw(n,X),Ep(X,n),L(T0,n.containerInfo),Oh=!!v0,T0=v0=null,n.current=X,gp(n,X.alternate,X),Ta(),Dn=D,Be.p=v,P.T=u):n.current=X,Eh?(Eh=!1,jo=n,Uc=g):Vp(n,re),re=n.pendingLanes,re===0&&(Xa=null),mn(X.stateNode),Ts(n),s!==null)for(x=n.onRecoverableError,X=0;X<s.length;X++)re=s[X],x(re.value,{componentStack:re.stack});return(Uc&3)!==0&&Nl(),re=n.pendingLanes,(g&4194218)!==0&&(re&42)!==0?n===l0?Vc++:(Vc=0,l0=n):Vc=0,jc(0),null}function Vp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,wc(s)))}function Nl(){if(jo!==null){var n=jo,s=a0;a0=0;var u=ai(Uc),g=P.T,x=Be.p;try{if(Be.p=32>u?32:u,P.T=null,jo===null)var v=!1;else{u=o0,o0=null;var D=jo,B=Uc;if(jo=null,Uc=0,(Dn&6)!==0)throw Error(a(331));var X=Dn;if(Dn|=4,vp(D.current),_p(D,D.current,B,u),Dn=X,jc(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot($t,D)}catch{}v=!0}return v}finally{Be.p=x,P.T=g,Vp(n,s)}}return!1}function jp(n,s,u){s=jr(u,s),s=Rd(n.stateNode,s,2),n=Fa(n,s,2),n!==null&&(Gt(n,2),Ts(n))}function hn(n,s,u){if(n.tag===3)jp(n,n,u);else for(;s!==null;){if(s.tag===3){jp(s,n,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Xa===null||!Xa.has(g))){n=jr(u,n),u=Hm(2),g=Fa(s,u,2),g!==null&&(Gm(u,g,s,n),Gt(g,2),Ts(g));break}}s=s.return}}function d0(n,s,u){var g=n.pingCache;if(g===null){g=n.pingCache=new hw;var x=new Set;g.set(s,x)}else x=g.get(s),x===void 0&&(x=new Set,g.set(s,x));x.has(u)||(n0=!0,x.add(u),n=yw.bind(null,n,s,u),s.then(n,n))}function yw(n,s,u){var g=n.pingCache;g!==null&&g.delete(s),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,dn===n&&(Ut&u)===u&&(jn===4||jn===3&&(Ut&62914560)===Ut&&300>vn()-s0?(Dn&2)===0&&bl(n,0):i0|=u,Sl===Ut&&(Sl=0)),Ts(n)}function Fp(n,s){s===0&&(s=qi()),n=Ma(n,s),n!==null&&(Gt(n,s),Ts(n))}function Ew(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Fp(n,u)}function xw(n,s){var u=0;switch(n.tag){case 13:var g=n.stateNode,x=n.memoizedState;x!==null&&(u=x.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),Fp(n,u)}function _w(n,s){return Nr(n,s)}var Ah=null,Rl=null,g0=!1,wh=!1,m0=!1,Fo=0;function Ts(n){n!==Rl&&n.next===null&&(Rl===null?Ah=Rl=n:Rl=Rl.next=n),wh=!0,g0||(g0=!0,ww(Aw))}function jc(n,s){if(!m0&&wh){m0=!0;do for(var u=!1,g=Ah;g!==null;){if(n!==0){var x=g.pendingLanes;if(x===0)var v=0;else{var D=g.suspendedLanes,B=g.pingedLanes;v=(1<<31-vt(42|n)+1)-1,v&=x&~(D&~B),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(u=!0,Gp(g,v))}else v=Ut,v=Gi(g,g===dn?v:0),(v&3)===0||Zn(g,v)||(u=!0,Gp(g,v));g=g.next}while(u);m0=!1}}function Aw(){wh=g0=!1;var n=0;Fo!==0&&(Rw()&&(n=Fo),Fo=0);for(var s=vn(),u=null,g=Ah;g!==null;){var x=g.next,v=zp(g,s);v===0?(g.next=null,u===null?Ah=x:u.next=x,x===null&&(Rl=u)):(u=g,(n!==0||(v&3)!==0)&&(wh=!0)),g=x}jc(n)}function zp(n,s){for(var u=n.suspendedLanes,g=n.pingedLanes,x=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var D=31-vt(v),B=1<<D,X=x[D];X===-1?((B&u)===0||(B&g)!==0)&&(x[D]=fs(B,s)):X<=s&&(n.expiredLanes|=B),v&=~B}if(s=dn,u=Ut,u=Gi(n,n===s?u:0),g=n.callbackNode,u===0||n===s&&gn===2||n.cancelPendingCommit!==null)return g!==null&&g!==null&&Ge(g),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||Zn(n,u)){if(s=u&-u,s===n.callbackPriority)return s;switch(g!==null&&Ge(g),ai(u)){case 2:case 8:u=Hn;break;case 32:u=di;break;case 268435456:u=Sa;break;default:u=di}return g=Hp.bind(null,n),u=Nr(u,g),n.callbackPriority=s,n.callbackNode=u,s}return g!==null&&g!==null&&Ge(g),n.callbackPriority=2,n.callbackNode=null,2}function Hp(n,s){var u=n.callbackNode;if(Nl()&&n.callbackNode!==u)return null;var g=Ut;return g=Gi(n,n===dn?g:0),g===0?null:(Rp(n,g,s),zp(n,vn()),n.callbackNode!=null&&n.callbackNode===u?Hp.bind(null,n):null)}function Gp(n,s){if(Nl())return null;Rp(n,s,!0)}function ww(n){Ow(function(){(Dn&6)!==0?Nr(Kt,n):n()})}function p0(){return Fo===0&&(Fo=Pn()),Fo}function qp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:rr(""+n)}function Yp(n,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,n.id&&u.setAttribute("form",n.id),s.parentNode.insertBefore(u,s),n=new FormData(n),u.parentNode.removeChild(u),n}function vw(n,s,u,g,x){if(s==="submit"&&u&&u.stateNode===x){var v=qp((x[Nn]||null).action),D=g.submitter;D&&(s=(s=D[Nn]||null)?qp(s.formAction):D.getAttribute("formAction"),s!==null&&(v=s,D=null));var B=new Ur("action","action",null,g,x);n.push({event:B,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Fo!==0){var X=D?Yp(x,D):new FormData(x);Cd(u,{pending:!0,data:X,method:x.method,action:v},null,X)}}else typeof v=="function"&&(B.preventDefault(),X=D?Yp(x,D):new FormData(x),Cd(u,{pending:!0,data:X,method:x.method,action:v},v,X))},currentTarget:x}]})}}for(var y0=0;y0<zu.length;y0++){var E0=zu[y0],Tw=E0.toLowerCase(),Cw=E0[0].toUpperCase()+E0.slice(1);xr(Tw,"on"+Cw)}xr(wi,"onAnimationEnd"),xr(hr,"onAnimationIteration"),xr(vi,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(nn,"onTransitionRun"),xr(li,"onTransitionStart"),xr(Ki,"onTransitionCancel"),xr(zs,"onTransitionEnd"),Ct("onMouseEnter",["mouseout","mouseover"]),Ct("onMouseLeave",["mouseout","mouseover"]),Ct("onPointerEnter",["pointerout","pointerover"]),Ct("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fc));function Xp(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var g=n[u],x=g.event;g=g.listeners;e:{var v=void 0;if(s)for(var D=g.length-1;0<=D;D--){var B=g[D],X=B.instance,re=B.currentTarget;if(B=B.listener,X!==v&&x.isPropagationStopped())break e;v=B,x.currentTarget=re;try{v(x)}catch(_e){lh(_e)}x.currentTarget=null,v=X}else for(D=0;D<g.length;D++){if(B=g[D],X=B.instance,re=B.currentTarget,B=B.listener,X!==v&&x.isPropagationStopped())break e;v=B,x.currentTarget=re;try{v(x)}catch(_e){lh(_e)}x.currentTarget=null,v=X}}}}function Pt(n,s){var u=s[tr];u===void 0&&(u=s[tr]=new Set);var g=n+"__bubble";u.has(g)||(Wp(s,n,2,!1),u.add(g))}function x0(n,s,u){var g=0;s&&(g|=4),Wp(u,n,g,s)}var vh="_reactListening"+Math.random().toString(36).slice(2);function _0(n){if(!n[vh]){n[vh]=!0,Bs.forEach(function(u){u!=="selectionchange"&&(Sw.has(u)||x0(u,!1,n),x0(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[vh]||(s[vh]=!0,x0("selectionchange",!1,s))}}function Wp(n,s,u,g){switch(y2(s)){case 2:var x=Jw;break;case 8:x=$w;break;default:x=M0}u=x.bind(null,s,u,n),x=void 0,!nt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),g?x!==void 0?n.addEventListener(s,u,{capture:!0,passive:x}):n.addEventListener(s,u,!0):x!==void 0?n.addEventListener(s,u,{passive:x}):n.addEventListener(s,u,!1)}function A0(n,s,u,g,x){var v=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var B=g.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(D===4)for(D=g.return;D!==null;){var X=D.tag;if((X===3||X===4)&&(X=D.stateNode.containerInfo,X===x||X.nodeType===8&&X.parentNode===x))return;D=D.return}for(;B!==null;){if(D=kn(B),D===null)return;if(X=D.tag,X===5||X===6||X===26||X===27){g=v=D;continue e}B=B.parentNode}}g=g.return}et(function(){var re=v,_e=gs(u),Re=[];e:{var de=Hs.get(n);if(de!==void 0){var Ee=Ur,Ke=n;switch(n){case"keypress":if(Br(u)===0)break e;case"keydown":case"keyup":Ee=Es;break;case"focusin":Ke="focus",Ee=is;break;case"focusout":Ke="blur",Ee=is;break;case"beforeblur":case"afterblur":Ee=is;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=Xt;break;case wi:case hr:case vi:Ee=Ra;break;case zs:Ee=ol;break;case"scroll":case"scrollend":Ee=oi;break;case"wheel":Ee=lr;break;case"copy":case"cut":case"paste":Ee=ct;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=xs;break;case"toggle":case"beforetoggle":Ee=ll}var dt=(s&4)!==0,Fn=!dt&&(n==="scroll"||n==="scrollend"),ae=dt?de!==null?de+"Capture":null:de;dt=[];for(var ne=re,he;ne!==null;){var we=ne;if(he=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||he===null||ae===null||(we=Us(ne,ae),we!=null&&dt.push(zc(ne,we,he))),Fn)break;ne=ne.return}0<dt.length&&(de=new Ee(de,Ke,null,u,_e),Re.push({event:de,listeners:dt}))}}if((s&7)===0){e:{if(de=n==="mouseover"||n==="pointerover",Ee=n==="mouseout"||n==="pointerout",de&&u!==_i&&(Ke=u.relatedTarget||u.fromElement)&&(kn(Ke)||Ke[Tn]))break e;if((Ee||de)&&(de=_e.window===_e?_e:(de=_e.ownerDocument)?de.defaultView||de.parentWindow:window,Ee?(Ke=u.relatedTarget||u.toElement,Ee=re,Ke=Ke?kn(Ke):null,Ke!==null&&(Fn=Ve(Ke),dt=Ke.tag,Ke!==Fn||dt!==5&&dt!==27&&dt!==6)&&(Ke=null)):(Ee=null,Ke=re),Ee!==Ke)){if(dt=ar,we="onMouseLeave",ae="onMouseEnter",ne="mouse",(n==="pointerout"||n==="pointerover")&&(dt=xs,we="onPointerLeave",ae="onPointerEnter",ne="pointer"),Fn=Ee==null?de:Ft(Ee),he=Ke==null?de:Ft(Ke),de=new dt(we,ne+"leave",Ee,u,_e),de.target=Fn,de.relatedTarget=he,we=null,kn(_e)===re&&(dt=new dt(ae,ne+"enter",Ke,u,_e),dt.target=he,dt.relatedTarget=Fn,we=dt),Fn=we,Ee&&Ke)t:{for(dt=Ee,ae=Ke,ne=0,he=dt;he;he=Dl(he))ne++;for(he=0,we=ae;we;we=Dl(we))he++;for(;0<ne-he;)dt=Dl(dt),ne--;for(;0<he-ne;)ae=Dl(ae),he--;for(;ne--;){if(dt===ae||ae!==null&&dt===ae.alternate)break t;dt=Dl(dt),ae=Dl(ae)}dt=null}else dt=null;Ee!==null&&Qp(Re,de,Ee,dt,!1),Ke!==null&&Fn!==null&&Qp(Re,Fn,Ke,dt,!0)}}e:{if(de=re?Ft(re):window,Ee=de.nodeName&&de.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&de.type==="file")var We=Fu;else if(bn(de))if(dc)We=o;else{We=O;var Tt=ul}else Ee=de.nodeName,!Ee||Ee.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?re&&tn(re.elementType)&&(We=Fu):We=i;if(We&&(We=We(n,re))){Un(Re,We,u,_e);break e}Tt&&Tt(n,de,re),n==="focusout"&&re&&de.type==="number"&&re.memoizedProps.value!=null&&j(de,"number",de.value)}switch(Tt=re?Ft(re):window,n){case"focusin":(bn(Tt)||Tt.contentEditable==="true")&&(G=Tt,Z=re,$=null);break;case"focusout":$=Z=G=null;break;case"mousedown":ce=!0;break;case"contextmenu":case"mouseup":case"dragend":ce=!1,pe(Re,u,_e);break;case"selectionchange":if(k)break;case"keydown":case"keyup":pe(Re,u,_e)}var $e;if(cr)e:{switch(n){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Nt?me(n,u)&&(st="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(st="onCompositionStart");st&&(R&&u.locale!=="ko"&&(Nt||st!=="onCompositionStart"?st==="onCompositionEnd"&&Nt&&($e=pr()):(Lr=_e,Pr="value"in Lr?Lr.value:Lr.textContent,Nt=!0)),Tt=Th(re,st),0<Tt.length&&(st=new ps(st,n,null,u,_e),Re.push({event:st,listeners:Tt}),$e?st.data=$e:($e=ze(u),$e!==null&&(st.data=$e)))),($e=S?_n(n,u):Rt(n,u))&&(st=Th(re,"onBeforeInput"),0<st.length&&(Tt=new ps("onBeforeInput","beforeinput",null,u,_e),Re.push({event:Tt,listeners:st}),Tt.data=$e)),vw(Re,n,re,u,_e)}Xp(Re,s)})}function zc(n,s,u){return{instance:n,listener:s,currentTarget:u}}function Th(n,s){for(var u=s+"Capture",g=[];n!==null;){var x=n,v=x.stateNode;x=x.tag,x!==5&&x!==26&&x!==27||v===null||(x=Us(n,u),x!=null&&g.unshift(zc(n,x,v)),x=Us(n,s),x!=null&&g.push(zc(n,x,v))),n=n.return}return g}function Dl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Qp(n,s,u,g,x){for(var v=s._reactName,D=[];u!==null&&u!==g;){var B=u,X=B.alternate,re=B.stateNode;if(B=B.tag,X!==null&&X===g)break;B!==5&&B!==26&&B!==27||re===null||(X=re,x?(re=Us(u,v),re!=null&&D.unshift(zc(u,re,X))):x||(re=Us(u,v),re!=null&&D.push(zc(u,re,X)))),u=u.return}D.length!==0&&n.push({event:s,listeners:D})}var bw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function Kp(n){return(typeof n=="string"?n:""+n).replace(bw,`
`).replace(Iw,"")}function Zp(n,s){return s=Kp(s),Kp(n)===s}function Ch(){}function ln(n,s,u,g,x,v){switch(u){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||ir(n,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&ir(n,""+g);break;case"className":Mr(n,"class",g);break;case"tabIndex":Mr(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(n,u,g);break;case"style":Ze(n,g,v);break;case"data":if(s!=="object"){Mr(n,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||u!=="href")){n.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=rr(""+g),n.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(s!=="input"&&ln(n,s,"name",x.name,x,null),ln(n,s,"formEncType",x.formEncType,x,null),ln(n,s,"formMethod",x.formMethod,x,null),ln(n,s,"formTarget",x.formTarget,x,null)):(ln(n,s,"encType",x.encType,x,null),ln(n,s,"method",x.method,x,null),ln(n,s,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(u);break}g=rr(""+g),n.setAttribute(u,g);break;case"onClick":g!=null&&(n.onclick=Ch);break;case"onScroll":g!=null&&Pt("scroll",n);break;case"onScrollEnd":g!=null&&Pt("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(x.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}u=rr(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""+g):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":g===!0?n.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(u,g):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(u,g):n.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(u):n.setAttribute(u,g);break;case"popover":Pt("beforetoggle",n),Pt("toggle",n),Or(n,"popover",g);break;case"xlinkActuate":Mi(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Mi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Mi(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Mi(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Mi(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Mi(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Mi(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Mi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Mi(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Or(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=il.get(u)||u,Or(n,u,g))}}function w0(n,s,u,g,x,v){switch(u){case"style":Ze(n,g,v);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(u=g.__html,u!=null){if(x.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"children":typeof g=="string"?ir(n,g):(typeof g=="number"||typeof g=="bigint")&&ir(n,""+g);break;case"onScroll":g!=null&&Pt("scroll",n);break;case"onScrollEnd":g!=null&&Pt("scrollend",n);break;case"onClick":g!=null&&(n.onclick=Ch);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ae.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),s=u.slice(2,x?u.length-7:void 0),v=n[Nn]||null,v=v!=null?v[u]:null,typeof v=="function"&&n.removeEventListener(s,v,x),typeof g=="function")){typeof v!="function"&&v!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(s,g,x);break e}u in n?n[u]=g:g===!0?n.setAttribute(u,""):Or(n,u,g)}}}function Si(n,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",n),Pt("load",n);var g=!1,x=!1,v;for(v in u)if(u.hasOwnProperty(v)){var D=u[v];if(D!=null)switch(v){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ln(n,s,v,D,u,null)}}x&&ln(n,s,"srcSet",u.srcSet,u,null),g&&ln(n,s,"src",u.src,u,null);return;case"input":Pt("invalid",n);var B=v=D=x=null,X=null,re=null;for(g in u)if(u.hasOwnProperty(g)){var _e=u[g];if(_e!=null)switch(g){case"name":x=_e;break;case"type":D=_e;break;case"checked":X=_e;break;case"defaultChecked":re=_e;break;case"value":v=_e;break;case"defaultValue":B=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(a(137,s));break;default:ln(n,s,g,_e,u,null)}}le(n,v,B,X,re,D,x,!1),en(n);return;case"select":Pt("invalid",n),g=D=v=null;for(x in u)if(u.hasOwnProperty(x)&&(B=u[x],B!=null))switch(x){case"value":v=B;break;case"defaultValue":D=B;break;case"multiple":g=B;default:ln(n,s,x,B,u,null)}s=v,u=D,n.multiple=!!g,s!=null?Fe(n,!!g,s,!1):u!=null&&Fe(n,!!g,u,!0);return;case"textarea":Pt("invalid",n),v=x=g=null;for(D in u)if(u.hasOwnProperty(D)&&(B=u[D],B!=null))switch(D){case"value":g=B;break;case"defaultValue":x=B;break;case"children":v=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(a(91));break;default:ln(n,s,D,B,u,null)}qn(n,g,x,v),en(n);return;case"option":for(X in u)if(u.hasOwnProperty(X)&&(g=u[X],g!=null))switch(X){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ln(n,s,X,g,u,null)}return;case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":Pt("load",n);break;case"video":case"audio":for(g=0;g<Fc.length;g++)Pt(Fc[g],n);break;case"image":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"embed":case"source":case"link":Pt("error",n),Pt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in u)if(u.hasOwnProperty(re)&&(g=u[re],g!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ln(n,s,re,g,u,null)}return;default:if(tn(s)){for(_e in u)u.hasOwnProperty(_e)&&(g=u[_e],g!==void 0&&w0(n,s,_e,g,u,void 0));return}}for(B in u)u.hasOwnProperty(B)&&(g=u[B],g!=null&&ln(n,s,B,g,u,null))}function Nw(n,s,u,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,v=null,D=null,B=null,X=null,re=null,_e=null;for(Ee in u){var Re=u[Ee];if(u.hasOwnProperty(Ee)&&Re!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":X=Re;default:g.hasOwnProperty(Ee)||ln(n,s,Ee,null,g,Re)}}for(var de in g){var Ee=g[de];if(Re=u[de],g.hasOwnProperty(de)&&(Ee!=null||Re!=null))switch(de){case"type":v=Ee;break;case"name":x=Ee;break;case"checked":re=Ee;break;case"defaultChecked":_e=Ee;break;case"value":D=Ee;break;case"defaultValue":B=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,s));break;default:Ee!==Re&&ln(n,s,de,Ee,g,Re)}}En(n,D,B,X,re,_e,v,x);return;case"select":Ee=D=B=de=null;for(v in u)if(X=u[v],u.hasOwnProperty(v)&&X!=null)switch(v){case"value":break;case"multiple":Ee=X;default:g.hasOwnProperty(v)||ln(n,s,v,null,g,X)}for(x in g)if(v=g[x],X=u[x],g.hasOwnProperty(x)&&(v!=null||X!=null))switch(x){case"value":de=v;break;case"defaultValue":B=v;break;case"multiple":D=v;default:v!==X&&ln(n,s,x,v,g,X)}s=B,u=D,g=Ee,de!=null?Fe(n,!!u,de,!1):!!g!=!!u&&(s!=null?Fe(n,!!u,s,!0):Fe(n,!!u,u?[]:"",!1));return;case"textarea":Ee=de=null;for(B in u)if(x=u[B],u.hasOwnProperty(B)&&x!=null&&!g.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:ln(n,s,B,null,g,x)}for(D in g)if(x=g[D],v=u[D],g.hasOwnProperty(D)&&(x!=null||v!=null))switch(D){case"value":de=x;break;case"defaultValue":Ee=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:x!==v&&ln(n,s,D,x,g,v)}fn(n,de,Ee);return;case"option":for(var Ke in u)if(de=u[Ke],u.hasOwnProperty(Ke)&&de!=null&&!g.hasOwnProperty(Ke))switch(Ke){case"selected":n.selected=!1;break;default:ln(n,s,Ke,null,g,de)}for(X in g)if(de=g[X],Ee=u[X],g.hasOwnProperty(X)&&de!==Ee&&(de!=null||Ee!=null))switch(X){case"selected":n.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:ln(n,s,X,de,g,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in u)de=u[dt],u.hasOwnProperty(dt)&&de!=null&&!g.hasOwnProperty(dt)&&ln(n,s,dt,null,g,de);for(re in g)if(de=g[re],Ee=u[re],g.hasOwnProperty(re)&&de!==Ee&&(de!=null||Ee!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(137,s));break;default:ln(n,s,re,de,g,Ee)}return;default:if(tn(s)){for(var Fn in u)de=u[Fn],u.hasOwnProperty(Fn)&&de!==void 0&&!g.hasOwnProperty(Fn)&&w0(n,s,Fn,void 0,g,de);for(_e in g)de=g[_e],Ee=u[_e],!g.hasOwnProperty(_e)||de===Ee||de===void 0&&Ee===void 0||w0(n,s,_e,de,g,Ee);return}}for(var ae in u)de=u[ae],u.hasOwnProperty(ae)&&de!=null&&!g.hasOwnProperty(ae)&&ln(n,s,ae,null,g,de);for(Re in g)de=g[Re],Ee=u[Re],!g.hasOwnProperty(Re)||de===Ee||de==null&&Ee==null||ln(n,s,Re,de,g,Ee)}var v0=null,T0=null;function Sh(n){return n.nodeType===9?n:n.ownerDocument}function Jp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $p(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function C0(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var S0=null;function Rw(){var n=window.event;return n&&n.type==="popstate"?n===S0?!1:(S0=n,!0):(S0=null,!1)}var e2=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,t2=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof t2<"u"?function(n){return t2.resolve(null).then(n).catch(Mw)}:e2;function Mw(n){setTimeout(function(){throw n})}function b0(n,s){var u=s,g=0;do{var x=u.nextSibling;if(n.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"){if(g===0){n.removeChild(x),Kc(s);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=x}while(u);Kc(s)}function I0(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":I0(u),ks(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function Lw(n,s,u,g){for(;n.nodeType===1;){var x=u;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[ds])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==x.rel||n.getAttribute("href")!==(x.href==null?null:x.href)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||n.getAttribute("title")!==(x.title==null?null:x.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(x.src==null?null:x.src)||n.getAttribute("type")!==(x.type==null?null:x.type)||n.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=x.name==null?null:""+x.name;if(x.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=os(n.nextSibling),n===null)break}return null}function Pw(n,s,u){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=os(n.nextSibling),n===null))return null;return n}function os(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function n2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}function i2(n,s,u){switch(s=Sh(u),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var Wr=new Map,r2=new Set;function bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var ra=Be.d;Be.d={f:kw,r:Bw,D:Uw,C:Vw,L:jw,m:Fw,X:Hw,S:zw,M:Gw};function kw(){var n=ra.f(),s=xh();return n||s}function Bw(n){var s=yn(n);s!==null&&s.tag===5&&s.type==="form"?Dm(s):ra.r(n)}var Ol=typeof document>"u"?null:document;function s2(n,s,u){var g=Ol;if(g&&typeof s=="string"&&s){var x=at(s);x='link[rel="'+n+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),r2.has(x)||(r2.add(x),n={rel:n,crossOrigin:u,href:s},g.querySelector(x)===null&&(s=g.createElement("link"),Si(s,"link",n),qt(s),g.head.appendChild(s)))}}function Uw(n){ra.D(n),s2("dns-prefetch",n,null)}function Vw(n,s){ra.C(n,s),s2("preconnect",n,s)}function jw(n,s,u){ra.L(n,s,u);var g=Ol;if(g&&n&&s){var x='link[rel="preload"][as="'+at(s)+'"]';s==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+at(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+at(u.imageSizes)+'"]')):x+='[href="'+at(n)+'"]';var v=x;switch(s){case"style":v=Ml(n);break;case"script":v=Ll(n)}Wr.has(v)||(n=W({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:n,as:s},u),Wr.set(v,n),g.querySelector(x)!==null||s==="style"&&g.querySelector(Hc(v))||s==="script"&&g.querySelector(Gc(v))||(s=g.createElement("link"),Si(s,"link",n),qt(s),g.head.appendChild(s)))}}function Fw(n,s){ra.m(n,s);var u=Ol;if(u&&n){var g=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+at(g)+'"][href="'+at(n)+'"]',v=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ll(n)}if(!Wr.has(v)&&(n=W({rel:"modulepreload",href:n},s),Wr.set(v,n),u.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Gc(v)))return}g=u.createElement("link"),Si(g,"link",n),qt(g),u.head.appendChild(g)}}}function zw(n,s,u){ra.S(n,s,u);var g=Ol;if(g&&n){var x=es(g).hoistableStyles,v=Ml(n);s=s||"default";var D=x.get(v);if(!D){var B={loading:0,preload:null};if(D=g.querySelector(Hc(v)))B.loading=5;else{n=W({rel:"stylesheet",href:n,"data-precedence":s},u),(u=Wr.get(v))&&N0(n,u);var X=D=g.createElement("link");qt(X),Si(X,"link",n),X._p=new Promise(function(re,_e){X.onload=re,X.onerror=_e}),X.addEventListener("load",function(){B.loading|=1}),X.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Ih(D,s,g)}D={type:"stylesheet",instance:D,count:1,state:B},x.set(v,D)}}}function Hw(n,s){ra.X(n,s);var u=Ol;if(u&&n){var g=es(u).hoistableScripts,x=Ll(n),v=g.get(x);v||(v=u.querySelector(Gc(x)),v||(n=W({src:n,async:!0},s),(s=Wr.get(x))&&R0(n,s),v=u.createElement("script"),qt(v),Si(v,"link",n),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(x,v))}}function Gw(n,s){ra.M(n,s);var u=Ol;if(u&&n){var g=es(u).hoistableScripts,x=Ll(n),v=g.get(x);v||(v=u.querySelector(Gc(x)),v||(n=W({src:n,async:!0,type:"module"},s),(s=Wr.get(x))&&R0(n,s),v=u.createElement("script"),qt(v),Si(v,"link",n),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(x,v))}}function a2(n,s,u,g){var x=(x=ft.current)?bh(x):null;if(!x)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Ml(u.href),u=es(x).hoistableStyles,g=u.get(s),g||(g={type:"style",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Ml(u.href);var v=es(x).hoistableStyles,D=v.get(n);if(D||(x=x.ownerDocument||x,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,D),(v=x.querySelector(Hc(n)))&&!v._p&&(D.instance=v,D.state.loading=5),Wr.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Wr.set(n,u),v||qw(x,n,u,D.state))),s&&g===null)throw Error(a(528,""));return D}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ll(u),u=es(x).hoistableScripts,g=u.get(s),g||(g={type:"script",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Ml(n){return'href="'+at(n)+'"'}function Hc(n){return'link[rel="stylesheet"]['+n+"]"}function o2(n){return W({},n,{"data-precedence":n.precedence,precedence:null})}function qw(n,s,u,g){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=n.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Si(s,"link",u),qt(s),n.head.appendChild(s))}function Ll(n){return'[src="'+at(n)+'"]'}function Gc(n){return"script[async]"+n}function l2(n,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var g=n.querySelector('style[data-href~="'+at(u.href)+'"]');if(g)return s.instance=g,qt(g),g;var x=W({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),qt(g),Si(g,"style",x),Ih(g,u.precedence,n),s.instance=g;case"stylesheet":x=Ml(u.href);var v=n.querySelector(Hc(x));if(v)return s.state.loading|=4,s.instance=v,qt(v),v;g=o2(u),(x=Wr.get(x))&&N0(g,x),v=(n.ownerDocument||n).createElement("link"),qt(v);var D=v;return D._p=new Promise(function(B,X){D.onload=B,D.onerror=X}),Si(v,"link",g),s.state.loading|=4,Ih(v,u.precedence,n),s.instance=v;case"script":return v=Ll(u.src),(x=n.querySelector(Gc(v)))?(s.instance=x,qt(x),x):(g=u,(x=Wr.get(v))&&(g=W({},u),R0(g,x)),n=n.ownerDocument||n,x=n.createElement("script"),qt(x),Si(x,"link",g),n.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,Ih(g,u.precedence,n));return s.instance}function Ih(n,s,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,v=x,D=0;D<g.length;D++){var B=g[D];if(B.dataset.precedence===s)v=B;else if(v!==x)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(n,s.firstChild))}function N0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function R0(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Nh=null;function c2(n,s,u){if(Nh===null){var g=new Map,x=Nh=new Map;x.set(u,g)}else x=Nh,g=x.get(u),g||(g=new Map,x.set(u,g));if(g.has(n))return g;for(g.set(n,null),u=u.getElementsByTagName(n),x=0;x<u.length;x++){var v=u[x];if(!(v[ds]||v[pn]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var D=v.getAttribute(s)||"";D=n+D;var B=g.get(D);B?B.push(v):g.set(D,[v])}}return g}function u2(n,s,u){n=n.ownerDocument||n,n.head.insertBefore(u,s==="title"?n.querySelector("head > title"):null)}function Yw(n,s,u){if(u===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function h2(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var qc=null;function Xw(){}function Ww(n,s,u){if(qc===null)throw Error(a(475));var g=qc;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var x=Ml(u.href),v=n.querySelector(Hc(x));if(v){n=v._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=Rh.bind(g),n.then(g,g)),s.state.loading|=4,s.instance=v,qt(v);return}v=n.ownerDocument||n,u=o2(u),(x=Wr.get(x))&&N0(u,x),v=v.createElement("link"),qt(v);var D=v;D._p=new Promise(function(B,X){D.onload=B,D.onerror=X}),Si(v,"link",u),s.instance=v}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(g.count++,s=Rh.bind(g),n.addEventListener("load",s),n.addEventListener("error",s))}}function Qw(){if(qc===null)throw Error(a(475));var n=qc;return n.stylesheets&&n.count===0&&D0(n,n.stylesheets),0<n.count?function(s){var u=setTimeout(function(){if(n.stylesheets&&D0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Rh(){if(this.count--,this.count===0){if(this.stylesheets)D0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Dh=null;function D0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Dh=new Map,s.forEach(Kw,n),Dh=null,Rh.call(n))}function Kw(n,s){if(!(s.state.loading&4)){var u=Dh.get(n);if(u)var g=u.get(null);else{u=new Map,Dh.set(n,u);for(var x=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<x.length;v++){var D=x[v];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(u.set(D.dataset.precedence,D),g=D)}g&&u.set(null,g)}x=s.instance,D=x.getAttribute("data-precedence"),v=u.get(D)||g,v===g&&u.set(null,x),u.set(D,x),this.count++,g=Rh.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),v?v.parentNode.insertBefore(x,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(x,n.firstChild)),s.state.loading|=4}}var Yc={$$typeof:F,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function Zw(n,s,u,g,x,v,D,B){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=v,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function f2(n,s,u,g,x,v,D,B,X,re,_e,Re){return n=new Zw(n,s,u,D,B,X,re,Re),s=1,v===!0&&(s|=24),v=Yr(3,null,null,s),n.current=v,v.stateNode=n,s=cd(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:g,isDehydrated:u,cache:s},Hd(v),n}function d2(n){return n?(n=fl,n):fl}function g2(n,s,u,g,x,v){x=d2(x),g.context===null?g.context=x:g.pendingContext=x,g=ja(s),g.payload={element:u},v=v===void 0?null:v,v!==null&&(g.callback=v),u=Fa(n,g,s),u!==null&&(Ji(u,n,s),Nc(u,n,s))}function m2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function O0(n,s){m2(n,s),(n=n.alternate)&&m2(n,s)}function p2(n){if(n.tag===13){var s=Ma(n,67108864);s!==null&&Ji(s,n,67108864),O0(n,67108864)}}var Oh=!0;function Jw(n,s,u,g){var x=P.T;P.T=null;var v=Be.p;try{Be.p=2,M0(n,s,u,g)}finally{Be.p=v,P.T=x}}function $w(n,s,u,g){var x=P.T;P.T=null;var v=Be.p;try{Be.p=8,M0(n,s,u,g)}finally{Be.p=v,P.T=x}}function M0(n,s,u,g){if(Oh){var x=L0(g);if(x===null)A0(n,s,g,Mh,u),E2(n,g);else if(tv(x,n,s,u,g))g.stopPropagation();else if(E2(n,g),s&4&&-1<ev.indexOf(n)){for(;x!==null;){var v=yn(x);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var D=er(v.pendingLanes);if(D!==0){var B=v;for(B.pendingLanes|=2,B.entangledLanes|=2;D;){var X=1<<31-vt(D);B.entanglements[1]|=X,D&=~X}Ts(v),(Dn&6)===0&&(ph=vn()+500,jc(0))}}break;case 13:B=Ma(v,2),B!==null&&Ji(B,v,2),xh(),O0(v,2)}if(v=L0(g),v===null&&A0(n,s,g,Mh,u),v===x)break;x=v}x!==null&&g.stopPropagation()}else A0(n,s,g,null,u)}}function L0(n){return n=gs(n),P0(n)}var Mh=null;function P0(n){if(Mh=null,n=kn(n),n!==null){var s=Ve(n);if(s===null)n=null;else{var u=s.tag;if(u===13){if(n=Te(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Mh=n,null}function y2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case Kt:return 2;case Hn:return 8;case di:case Kn:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var k0=!1,Wa=null,Qa=null,Ka=null,Xc=new Map,Wc=new Map,Za=[],ev="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function E2(n,s){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Xc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(s.pointerId)}}function Qc(n,s,u,g,x,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:v,targetContainers:[x]},s!==null&&(s=yn(s),s!==null&&p2(s)),n):(n.eventSystemFlags|=g,s=n.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),n)}function tv(n,s,u,g,x){switch(s){case"focusin":return Wa=Qc(Wa,n,s,u,g,x),!0;case"dragenter":return Qa=Qc(Qa,n,s,u,g,x),!0;case"mouseover":return Ka=Qc(Ka,n,s,u,g,x),!0;case"pointerover":var v=x.pointerId;return Xc.set(v,Qc(Xc.get(v)||null,n,s,u,g,x)),!0;case"gotpointercapture":return v=x.pointerId,Wc.set(v,Qc(Wc.get(v)||null,n,s,u,g,x)),!0}return!1}function x2(n){var s=kn(n.target);if(s!==null){var u=Ve(s);if(u!==null){if(s=u.tag,s===13){if(s=Te(u),s!==null){n.blockedOn=s,Gn(n.priority,function(){if(u.tag===13){var g=vr(),x=Ma(u,g);x!==null&&Ji(x,u,g),O0(u,g)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=L0(n.nativeEvent);if(u===null){u=n.nativeEvent;var g=new u.constructor(u.type,u);_i=g,u.target.dispatchEvent(g),_i=null}else return s=yn(u),s!==null&&p2(s),n.blockedOn=u,!1;s.shift()}return!0}function _2(n,s,u){Lh(n)&&u.delete(s)}function nv(){k0=!1,Wa!==null&&Lh(Wa)&&(Wa=null),Qa!==null&&Lh(Qa)&&(Qa=null),Ka!==null&&Lh(Ka)&&(Ka=null),Xc.forEach(_2),Wc.forEach(_2)}function Ph(n,s){n.blockedOn===s&&(n.blockedOn=null,k0||(k0=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,nv)))}var kh=null;function A2(n){kh!==n&&(kh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){kh===n&&(kh=null);for(var s=0;s<n.length;s+=3){var u=n[s],g=n[s+1],x=n[s+2];if(typeof g!="function"){if(P0(g||u)===null)continue;break}var v=yn(u);v!==null&&(n.splice(s,3),s-=3,Cd(v,{pending:!0,data:x,method:u.method,action:g},g,x))}}))}function Kc(n){function s(X){return Ph(X,n)}Wa!==null&&Ph(Wa,n),Qa!==null&&Ph(Qa,n),Ka!==null&&Ph(Ka,n),Xc.forEach(s),Wc.forEach(s);for(var u=0;u<Za.length;u++){var g=Za[u];g.blockedOn===n&&(g.blockedOn=null)}for(;0<Za.length&&(u=Za[0],u.blockedOn===null);)x2(u),u.blockedOn===null&&Za.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var x=u[g],v=u[g+1],D=x[Nn]||null;if(typeof v=="function")D||A2(u);else if(D){var B=null;if(v&&v.hasAttribute("formAction")){if(x=v,D=v[Nn]||null)B=D.formAction;else if(P0(x)!==null)continue}else B=D.action;typeof B=="function"?u[g+1]=B:(u.splice(g,3),g-=3),A2(u)}}}function B0(n){this._internalRoot=n}Bh.prototype.render=B0.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var u=s.current,g=vr();g2(u,g,n,s,null,null)},Bh.prototype.unmount=B0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&Nl(),g2(n.current,2,null,n,null,null),xh(),s[Tn]=null}};function Bh(n){this._internalRoot=n}Bh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Dr();n={blockedOn:null,target:n,priority:s};for(var u=0;u<Za.length&&s!==0&&s<Za[u].priority;u++);Za.splice(u,0,n),u===0&&x2(n)}};var w2=e.version;if(w2!=="19.0.0")throw Error(a(527,w2,"19.0.0"));Be.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=xe(s),n=n!==null?Me(n):null,n=n===null?null:n.stateNode,n};var iv={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:kn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{$t=Uh.inject(iv),Le=Uh}catch{}}return Jc.createRoot=function(n,s){if(!c(n))throw Error(a(299));var u=!1,g="",x=Vm,v=jm,D=Fm,B=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(B=s.unstable_transitionCallbacks)),s=f2(n,1,!1,null,null,u,g,x,v,D,B,null),n[Tn]=s.current,_0(n.nodeType===8?n.parentNode:n),new B0(s)},Jc.hydrateRoot=function(n,s,u){if(!c(n))throw Error(a(299));var g=!1,x="",v=Vm,D=jm,B=Fm,X=null,re=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(X=u.unstable_transitionCallbacks),u.formState!==void 0&&(re=u.formState)),s=f2(n,1,!0,s,u??null,g,x,v,D,B,X,re),s.context=d2(null),u=s.current,g=vr(),x=ja(g),x.callback=null,Fa(u,x,g),s.current.lanes=g,Gt(s,g),Ts(s),n[Tn]=s.current,_0(n),new Bh(s)},Jc.version="19.0.0",Jc}var O2;function gv(){if(O2)return j0.exports;O2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),j0.exports=dv(),j0.exports}var mv=gv();const pv=O1(mv);var $c={},M2;function yv(){if(M2)return $c;M2=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.parse=E,$c.serialize=_;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,c=Object.prototype.toString,f=(()=>{const V=function(){};return V.prototype=Object.create(null),V})();function E(V,F){const K=new f,ie=V.length;if(ie<2)return K;const te=(F==null?void 0:F.decode)||I;let ue=0;do{const ye=V.indexOf("=",ue);if(ye===-1)break;const se=V.indexOf(";",ue),De=se===-1?ie:se;if(ye>De){ue=V.lastIndexOf(";",ye-1)+1;continue}const Ue=w(V,ue,ye),Se=T(V,ye,Ue),z=V.slice(Ue,Se);if(K[z]===void 0){let H=w(V,ye+1,De),P=T(V,De,H);const W=te(V.slice(H,P));K[z]=W}ue=De+1}while(ue<ie);return K}function w(V,F,K){do{const ie=V.charCodeAt(F);if(ie!==32&&ie!==9)return F}while(++F<K);return K}function T(V,F,K){for(;F>K;){const ie=V.charCodeAt(--F);if(ie!==32&&ie!==9)return F+1}return K}function _(V,F,K){const ie=(K==null?void 0:K.encode)||encodeURIComponent;if(!r.test(V))throw new TypeError(`argument name is invalid: ${V}`);const te=ie(F);if(!e.test(te))throw new TypeError(`argument val is invalid: ${F}`);let ue=V+"="+te;if(!K)return ue;if(K.maxAge!==void 0){if(!Number.isInteger(K.maxAge))throw new TypeError(`option maxAge is invalid: ${K.maxAge}`);ue+="; Max-Age="+K.maxAge}if(K.domain){if(!t.test(K.domain))throw new TypeError(`option domain is invalid: ${K.domain}`);ue+="; Domain="+K.domain}if(K.path){if(!a.test(K.path))throw new TypeError(`option path is invalid: ${K.path}`);ue+="; Path="+K.path}if(K.expires){if(!M(K.expires)||!Number.isFinite(K.expires.valueOf()))throw new TypeError(`option expires is invalid: ${K.expires}`);ue+="; Expires="+K.expires.toUTCString()}if(K.httpOnly&&(ue+="; HttpOnly"),K.secure&&(ue+="; Secure"),K.partitioned&&(ue+="; Partitioned"),K.priority)switch(typeof K.priority=="string"?K.priority.toLowerCase():void 0){case"low":ue+="; Priority=Low";break;case"medium":ue+="; Priority=Medium";break;case"high":ue+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${K.priority}`)}if(K.sameSite)switch(typeof K.sameSite=="string"?K.sameSite.toLowerCase():K.sameSite){case!0:case"strict":ue+="; SameSite=Strict";break;case"lax":ue+="; SameSite=Lax";break;case"none":ue+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${K.sameSite}`)}return ue}function I(V){if(V.indexOf("%")===-1)return V;try{return decodeURIComponent(V)}catch{return V}}function M(V){return c.call(V)==="[object Date]"}return $c}yv();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var L2="popstate";function Ev(r={}){function e(a,c){let{pathname:f,search:E,hash:w}=a.location;return i1("",{pathname:f,search:E,hash:w},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function t(a,c){return typeof c=="string"?c:gu(c)}return _v(e,t,null,r)}function On(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Os(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xv(){return Math.random().toString(36).substring(2,10)}function P2(r,e){return{usr:r.state,key:r.key,idx:e}}function i1(r,e,t=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?tc(e):e,state:t,key:e&&e.key||a||xv()}}function gu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function tc(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function _v(r,e,t,a={}){let{window:c=document.defaultView,v5Compat:f=!1}=a,E=c.history,w="POP",T=null,_=I();_==null&&(_=0,E.replaceState({...E.state,idx:_},""));function I(){return(E.state||{idx:null}).idx}function M(){w="POP";let te=I(),ue=te==null?null:te-_;_=te,T&&T({action:w,location:ie.location,delta:ue})}function V(te,ue){w="PUSH";let ye=i1(ie.location,te,ue);_=I()+1;let se=P2(ye,_),De=ie.createHref(ye);try{E.pushState(se,"",De)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;c.location.assign(De)}f&&T&&T({action:w,location:ie.location,delta:1})}function F(te,ue){w="REPLACE";let ye=i1(ie.location,te,ue);_=I();let se=P2(ye,_),De=ie.createHref(ye);E.replaceState(se,"",De),f&&T&&T({action:w,location:ie.location,delta:0})}function K(te){let ue=c.location.origin!=="null"?c.location.origin:c.location.href,ye=typeof te=="string"?te:gu(te);return ye=ye.replace(/ $/,"%20"),On(ue,`No window.location.(origin|href) available to create URL for href: ${ye}`),new URL(ye,ue)}let ie={get action(){return w},get location(){return r(c,E)},listen(te){if(T)throw new Error("A history only accepts one active listener");return c.addEventListener(L2,M),T=te,()=>{c.removeEventListener(L2,M),T=null}},createHref(te){return e(c,te)},createURL:K,encodeLocation(te){let ue=K(te);return{pathname:ue.pathname,search:ue.search,hash:ue.hash}},push:V,replace:F,go(te){return E.go(te)}};return ie}function OE(r,e,t="/"){return Av(r,e,t,!1)}function Av(r,e,t,a){let c=typeof e=="string"?tc(e):e,f=go(c.pathname||"/",t);if(f==null)return null;let E=ME(r);wv(E);let w=null;for(let T=0;w==null&&T<E.length;++T){let _=Mv(f);w=Dv(E[T],_,a)}return w}function ME(r,e=[],t=[],a=""){let c=(f,E,w)=>{let T={relativePath:w===void 0?f.path||"":w,caseSensitive:f.caseSensitive===!0,childrenIndex:E,route:f};T.relativePath.startsWith("/")&&(On(T.relativePath.startsWith(a),`Absolute route path "${T.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(a.length));let _=ca([a,T.relativePath]),I=t.concat(T);f.children&&f.children.length>0&&(On(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),ME(f.children,e,I,_)),!(f.path==null&&!f.index)&&e.push({path:_,score:Nv(_,f.index),routesMeta:I})};return r.forEach((f,E)=>{var w;if(f.path===""||!((w=f.path)!=null&&w.includes("?")))c(f,E);else for(let T of LE(f.path))c(f,E,T)}),e}function LE(r){let e=r.split("/");if(e.length===0)return[];let[t,...a]=e,c=t.endsWith("?"),f=t.replace(/\?$/,"");if(a.length===0)return c?[f,""]:[f];let E=LE(a.join("/")),w=[];return w.push(...E.map(T=>T===""?f:[f,T].join("/"))),c&&w.push(...E),w.map(T=>r.startsWith("/")&&T===""?"/":T)}function wv(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Rv(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var vv=/^:[\w-]+$/,Tv=3,Cv=2,Sv=1,bv=10,Iv=-2,k2=r=>r==="*";function Nv(r,e){let t=r.split("/"),a=t.length;return t.some(k2)&&(a+=Iv),e&&(a+=Cv),t.filter(c=>!k2(c)).reduce((c,f)=>c+(vv.test(f)?Tv:f===""?Sv:bv),a)}function Rv(r,e){return r.length===e.length&&r.slice(0,-1).every((a,c)=>a===e[c])?r[r.length-1]-e[e.length-1]:0}function Dv(r,e,t=!1){let{routesMeta:a}=r,c={},f="/",E=[];for(let w=0;w<a.length;++w){let T=a[w],_=w===a.length-1,I=f==="/"?e:e.slice(f.length)||"/",M=of({path:T.relativePath,caseSensitive:T.caseSensitive,end:_},I),V=T.route;if(!M&&_&&t&&!a[a.length-1].route.index&&(M=of({path:T.relativePath,caseSensitive:T.caseSensitive,end:!1},I)),!M)return null;Object.assign(c,M.params),E.push({params:c,pathname:ca([f,M.pathname]),pathnameBase:Bv(ca([f,M.pathnameBase])),route:V}),M.pathnameBase!=="/"&&(f=ca([f,M.pathnameBase]))}return E}function of(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,a]=Ov(r.path,r.caseSensitive,r.end),c=e.match(t);if(!c)return null;let f=c[0],E=f.replace(/(.)\/+$/,"$1"),w=c.slice(1);return{params:a.reduce((_,{paramName:I,isOptional:M},V)=>{if(I==="*"){let K=w[V]||"";E=f.slice(0,f.length-K.length).replace(/(.)\/+$/,"$1")}const F=w[V];return M&&!F?_[I]=void 0:_[I]=(F||"").replace(/%2F/g,"/"),_},{}),pathname:f,pathnameBase:E,pattern:r}}function Ov(r,e=!1,t=!0){Os(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,w,T)=>(a.push({paramName:w,isOptional:T!=null}),T?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),a]}function Mv(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Os(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function go(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}function Lv(r,e="/"){let{pathname:t,search:a="",hash:c=""}=typeof r=="string"?tc(r):r;return{pathname:t?t.startsWith("/")?t:Pv(t,e):e,search:Uv(a),hash:Vv(c)}}function Pv(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function G0(r,e,t,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kv(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function PE(r){let e=kv(r);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function kE(r,e,t,a=!1){let c;typeof r=="string"?c=tc(r):(c={...r},On(!c.pathname||!c.pathname.includes("?"),G0("?","pathname","search",c)),On(!c.pathname||!c.pathname.includes("#"),G0("#","pathname","hash",c)),On(!c.search||!c.search.includes("#"),G0("#","search","hash",c)));let f=r===""||c.pathname==="",E=f?"/":c.pathname,w;if(E==null)w=t;else{let M=e.length-1;if(!a&&E.startsWith("..")){let V=E.split("/");for(;V[0]==="..";)V.shift(),M-=1;c.pathname=V.join("/")}w=M>=0?e[M]:"/"}let T=Lv(c,w),_=E&&E!=="/"&&E.endsWith("/"),I=(f||E===".")&&t.endsWith("/");return!T.pathname.endsWith("/")&&(_||I)&&(T.pathname+="/"),T}var ca=r=>r.join("/").replace(/\/\/+/g,"/"),Bv=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Uv=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Vv=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function jv(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var BE=["POST","PUT","PATCH","DELETE"];new Set(BE);var Fv=["GET",...BE];new Set(Fv);var nc=ee.createContext(null);nc.displayName="DataRouter";var Mf=ee.createContext(null);Mf.displayName="DataRouterState";var UE=ee.createContext({isTransitioning:!1});UE.displayName="ViewTransition";var zv=ee.createContext(new Map);zv.displayName="Fetchers";var Hv=ee.createContext(null);Hv.displayName="Await";var Ls=ee.createContext(null);Ls.displayName="Navigation";var Su=ee.createContext(null);Su.displayName="Location";var ya=ee.createContext({outlet:null,matches:[],isDataRoute:!1});ya.displayName="Route";var L1=ee.createContext(null);L1.displayName="RouteError";function Gv(r,{relative:e}={}){On(bu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=ee.useContext(Ls),{hash:c,pathname:f,search:E}=Iu(r,{relative:e}),w=f;return t!=="/"&&(w=f==="/"?t:ca([t,f])),a.createHref({pathname:w,search:E,hash:c})}function bu(){return ee.useContext(Su)!=null}function Ea(){return On(bu(),"useLocation() may be used only in the context of a <Router> component."),ee.useContext(Su).location}var VE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jE(r){ee.useContext(Ls).static||ee.useLayoutEffect(r)}function FE(){let{isDataRoute:r}=ee.useContext(ya);return r?iT():qv()}function qv(){On(bu(),"useNavigate() may be used only in the context of a <Router> component.");let r=ee.useContext(nc),{basename:e,navigator:t}=ee.useContext(Ls),{matches:a}=ee.useContext(ya),{pathname:c}=Ea(),f=JSON.stringify(PE(a)),E=ee.useRef(!1);return jE(()=>{E.current=!0}),ee.useCallback((T,_={})=>{if(Os(E.current,VE),!E.current)return;if(typeof T=="number"){t.go(T);return}let I=kE(T,JSON.parse(f),c,_.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ca([e,I.pathname])),(_.replace?t.replace:t.push)(I,_.state,_)},[e,t,f,c,r])}ee.createContext(null);function Iu(r,{relative:e}={}){let{matches:t}=ee.useContext(ya),{pathname:a}=Ea(),c=JSON.stringify(PE(t));return ee.useMemo(()=>kE(r,JSON.parse(c),a,e==="path"),[r,c,a,e])}function Yv(r,e){return zE(r,e)}function zE(r,e,t,a){var ye;On(bu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c,static:f}=ee.useContext(Ls),{matches:E}=ee.useContext(ya),w=E[E.length-1],T=w?w.params:{},_=w?w.pathname:"/",I=w?w.pathnameBase:"/",M=w&&w.route;{let se=M&&M.path||"";HE(_,!M||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let V=Ea(),F;if(e){let se=typeof e=="string"?tc(e):e;On(I==="/"||((ye=se.pathname)==null?void 0:ye.startsWith(I)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${I}" but pathname "${se.pathname}" was given in the \`location\` prop.`),F=se}else F=V;let K=F.pathname||"/",ie=K;if(I!=="/"){let se=I.replace(/^\//,"").split("/");ie="/"+K.replace(/^\//,"").split("/").slice(se.length).join("/")}let te=!f&&t&&t.matches&&t.matches.length>0?t.matches:OE(r,{pathname:ie});Os(M||te!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Os(te==null||te[te.length-1].route.element!==void 0||te[te.length-1].route.Component!==void 0||te[te.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ue=Zv(te&&te.map(se=>Object.assign({},se,{params:Object.assign({},T,se.params),pathname:ca([I,c.encodeLocation?c.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?I:ca([I,c.encodeLocation?c.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),E,t,a);return e&&ue?ee.createElement(Su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},ue):ue}function Xv(){let r=nT(),e=jv(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},E=null;return console.error("Error handled by React Router default ErrorBoundary:",r),E=ee.createElement(ee.Fragment,null,ee.createElement("p",null,"💿 Hey developer 👋"),ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ee.createElement("code",{style:f},"ErrorBoundary")," or"," ",ee.createElement("code",{style:f},"errorElement")," prop on your route.")),ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?ee.createElement("pre",{style:c},t):null,E)}var Wv=ee.createElement(Xv,null),Qv=class extends ee.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?ee.createElement(ya.Provider,{value:this.props.routeContext},ee.createElement(L1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kv({routeContext:r,match:e,children:t}){let a=ee.useContext(nc);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),ee.createElement(ya.Provider,{value:r},t)}function Zv(r,e=[],t=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let c=r,f=t==null?void 0:t.errors;if(f!=null){let T=c.findIndex(_=>_.route.id&&(f==null?void 0:f[_.route.id])!==void 0);On(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,T+1))}let E=!1,w=-1;if(t)for(let T=0;T<c.length;T++){let _=c[T];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(w=T),_.route.id){let{loaderData:I,errors:M}=t,V=_.route.loader&&!I.hasOwnProperty(_.route.id)&&(!M||M[_.route.id]===void 0);if(_.route.lazy||V){E=!0,w>=0?c=c.slice(0,w+1):c=[c[0]];break}}}return c.reduceRight((T,_,I)=>{let M,V=!1,F=null,K=null;t&&(M=f&&_.route.id?f[_.route.id]:void 0,F=_.route.errorElement||Wv,E&&(w<0&&I===0?(HE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,K=null):w===I&&(V=!0,K=_.route.hydrateFallbackElement||null)));let ie=e.concat(c.slice(0,I+1)),te=()=>{let ue;return M?ue=F:V?ue=K:_.route.Component?ue=ee.createElement(_.route.Component,null):_.route.element?ue=_.route.element:ue=T,ee.createElement(Kv,{match:_,routeContext:{outlet:T,matches:ie,isDataRoute:t!=null},children:ue})};return t&&(_.route.ErrorBoundary||_.route.errorElement||I===0)?ee.createElement(Qv,{location:t.location,revalidation:t.revalidation,component:F,error:M,children:te(),routeContext:{outlet:null,matches:ie,isDataRoute:!0}}):te()},null)}function P1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jv(r){let e=ee.useContext(nc);return On(e,P1(r)),e}function $v(r){let e=ee.useContext(Mf);return On(e,P1(r)),e}function eT(r){let e=ee.useContext(ya);return On(e,P1(r)),e}function k1(r){let e=eT(r),t=e.matches[e.matches.length-1];return On(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function tT(){return k1("useRouteId")}function nT(){var a;let r=ee.useContext(L1),e=$v("useRouteError"),t=k1("useRouteError");return r!==void 0?r:(a=e.errors)==null?void 0:a[t]}function iT(){let{router:r}=Jv("useNavigate"),e=k1("useNavigate"),t=ee.useRef(!1);return jE(()=>{t.current=!0}),ee.useCallback(async(c,f={})=>{Os(t.current,VE),t.current&&(typeof c=="number"?r.navigate(c):await r.navigate(c,{fromRouteId:e,...f}))},[r,e])}var B2={};function HE(r,e,t){!e&&!B2[r]&&(B2[r]=!0,Os(!1,t))}ee.memo(rT);function rT({routes:r,future:e,state:t}){return zE(r,void 0,t,e)}function tu(r){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sT({basename:r="/",children:e=null,location:t,navigationType:a="POP",navigator:c,static:f=!1}){On(!bu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let E=r.replace(/^\/*/,"/"),w=ee.useMemo(()=>({basename:E,navigator:c,static:f,future:{}}),[E,c,f]);typeof t=="string"&&(t=tc(t));let{pathname:T="/",search:_="",hash:I="",state:M=null,key:V="default"}=t,F=ee.useMemo(()=>{let K=go(T,E);return K==null?null:{location:{pathname:K,search:_,hash:I,state:M,key:V},navigationType:a}},[E,T,_,I,M,V,a]);return Os(F!=null,`<Router basename="${E}"> is not able to match the URL "${T}${_}${I}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:ee.createElement(Ls.Provider,{value:w},ee.createElement(Su.Provider,{children:e,value:F}))}function aT({children:r,location:e}){return Yv(r1(r),e)}function r1(r,e=[]){let t=[];return ee.Children.forEach(r,(a,c)=>{if(!ee.isValidElement(a))return;let f=[...e,c];if(a.type===ee.Fragment){t.push.apply(t,r1(a.props.children,f));return}On(a.type===tu,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!a.props.index||!a.props.children,"An index route cannot have child routes.");let E={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(E.children=r1(a.props.children,f)),t.push(E)}),t}var Wh="get",Qh="application/x-www-form-urlencoded";function Lf(r){return r!=null&&typeof r.tagName=="string"}function oT(r){return Lf(r)&&r.tagName.toLowerCase()==="button"}function lT(r){return Lf(r)&&r.tagName.toLowerCase()==="form"}function cT(r){return Lf(r)&&r.tagName.toLowerCase()==="input"}function uT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function hT(r,e){return r.button===0&&(!e||e==="_self")&&!uT(r)}var jh=null;function fT(){if(jh===null)try{new FormData(document.createElement("form"),0),jh=!1}catch{jh=!0}return jh}var dT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function q0(r){return r!=null&&!dT.has(r)?(Os(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qh}"`),null):r}function gT(r,e){let t,a,c,f,E;if(lT(r)){let w=r.getAttribute("action");a=w?go(w,e):null,t=r.getAttribute("method")||Wh,c=q0(r.getAttribute("enctype"))||Qh,f=new FormData(r)}else if(oT(r)||cT(r)&&(r.type==="submit"||r.type==="image")){let w=r.form;if(w==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let T=r.getAttribute("formaction")||w.getAttribute("action");if(a=T?go(T,e):null,t=r.getAttribute("formmethod")||w.getAttribute("method")||Wh,c=q0(r.getAttribute("formenctype"))||q0(w.getAttribute("enctype"))||Qh,f=new FormData(w,r),!fT()){let{name:_,type:I,value:M}=r;if(I==="image"){let V=_?`${_}.`:"";f.append(`${V}x`,"0"),f.append(`${V}y`,"0")}else _&&f.append(_,M)}}else{if(Lf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,a=null,c=Qh,E=r}return f&&c==="text/plain"&&(E=f,f=void 0),{action:a,method:t.toLowerCase(),encType:c,formData:f,body:E}}function B1(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function mT(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function yT(r,e,t){let a=await Promise.all(r.map(async c=>{let f=e.routes[c.route.id];if(f){let E=await mT(f,t);return E.links?E.links():[]}return[]}));return AT(a.flat(1).filter(pT).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function U2(r,e,t,a,c,f){let E=(T,_)=>t[_]?T.route.id!==t[_].route.id:!0,w=(T,_)=>{var I;return t[_].pathname!==T.pathname||((I=t[_].route.path)==null?void 0:I.endsWith("*"))&&t[_].params["*"]!==T.params["*"]};return f==="assets"?e.filter((T,_)=>E(T,_)||w(T,_)):f==="data"?e.filter((T,_)=>{var M;let I=a.routes[T.route.id];if(!I||!I.hasLoader)return!1;if(E(T,_)||w(T,_))return!0;if(T.route.shouldRevalidate){let V=T.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((M=t[0])==null?void 0:M.params)||{},nextUrl:new URL(r,window.origin),nextParams:T.params,defaultShouldRevalidate:!0});if(typeof V=="boolean")return V}return!0}):[]}function ET(r,e,{includeHydrateFallback:t}={}){return xT(r.map(a=>{let c=e.routes[a.route.id];if(!c)return[];let f=[c.module];return c.clientActionModule&&(f=f.concat(c.clientActionModule)),c.clientLoaderModule&&(f=f.concat(c.clientLoaderModule)),t&&c.hydrateFallbackModule&&(f=f.concat(c.hydrateFallbackModule)),c.imports&&(f=f.concat(c.imports)),f}).flat(1))}function xT(r){return[...new Set(r)]}function _T(r){let e={},t=Object.keys(r).sort();for(let a of t)e[a]=r[a];return e}function AT(r,e){let t=new Set;return new Set(e),r.reduce((a,c)=>{let f=JSON.stringify(_T(c));return t.has(f)||(t.add(f),a.push({key:f,link:c})),a},[])}function wT(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function vT(){let r=ee.useContext(nc);return B1(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function TT(){let r=ee.useContext(Mf);return B1(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var U1=ee.createContext(void 0);U1.displayName="FrameworkContext";function GE(){let r=ee.useContext(U1);return B1(r,"You must render this element inside a <HydratedRouter> element"),r}function CT(r,e){let t=ee.useContext(U1),[a,c]=ee.useState(!1),[f,E]=ee.useState(!1),{onFocus:w,onBlur:T,onMouseEnter:_,onMouseLeave:I,onTouchStart:M}=e,V=ee.useRef(null);ee.useEffect(()=>{if(r==="render"&&E(!0),r==="viewport"){let ie=ue=>{ue.forEach(ye=>{E(ye.isIntersecting)})},te=new IntersectionObserver(ie,{threshold:.5});return V.current&&te.observe(V.current),()=>{te.disconnect()}}},[r]),ee.useEffect(()=>{if(a){let ie=setTimeout(()=>{E(!0)},100);return()=>{clearTimeout(ie)}}},[a]);let F=()=>{c(!0)},K=()=>{c(!1),E(!1)};return t?r!=="intent"?[f,V,{}]:[f,V,{onFocus:eu(w,F),onBlur:eu(T,K),onMouseEnter:eu(_,F),onMouseLeave:eu(I,K),onTouchStart:eu(M,F)}]:[!1,V,{}]}function eu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function ST({page:r,...e}){let{router:t}=vT(),a=ee.useMemo(()=>OE(t.routes,r,t.basename),[t.routes,r,t.basename]);return a?ee.createElement(IT,{page:r,matches:a,...e}):null}function bT(r){let{manifest:e,routeModules:t}=GE(),[a,c]=ee.useState([]);return ee.useEffect(()=>{let f=!1;return yT(r,e,t).then(E=>{f||c(E)}),()=>{f=!0}},[r,e,t]),a}function IT({page:r,matches:e,...t}){let a=Ea(),{manifest:c,routeModules:f}=GE(),{loaderData:E,matches:w}=TT(),T=ee.useMemo(()=>U2(r,e,w,c,a,"data"),[r,e,w,c,a]),_=ee.useMemo(()=>U2(r,e,w,c,a,"assets"),[r,e,w,c,a]),I=ee.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let F=new Set,K=!1;if(e.forEach(te=>{var ye;let ue=c.routes[te.route.id];!ue||!ue.hasLoader||(!T.some(se=>se.route.id===te.route.id)&&te.route.id in E&&((ye=f[te.route.id])!=null&&ye.shouldRevalidate)||ue.hasClientLoader?K=!0:F.add(te.route.id))}),F.size===0)return[];let ie=wT(r);return K&&F.size>0&&ie.searchParams.set("_routes",e.filter(te=>F.has(te.route.id)).map(te=>te.route.id).join(",")),[ie.pathname+ie.search]},[E,a,c,T,e,r,f]),M=ee.useMemo(()=>ET(_,c),[_,c]),V=bT(_);return ee.createElement(ee.Fragment,null,I.map(F=>ee.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),M.map(F=>ee.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),V.map(({key:F,link:K})=>ee.createElement("link",{key:F,...K})))}function NT(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var qE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qE&&(window.__reactRouterVersion="7.2.0")}catch{}function RT({basename:r,children:e,window:t}){let a=ee.useRef();a.current==null&&(a.current=Ev({window:t,v5Compat:!0}));let c=a.current,[f,E]=ee.useState({action:c.action,location:c.location}),w=ee.useCallback(T=>{ee.startTransition(()=>E(T))},[E]);return ee.useLayoutEffect(()=>c.listen(w),[c,w]),ee.createElement(sT,{basename:r,children:e,location:f.location,navigationType:f.action,navigator:c})}var YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ro=ee.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:c,reloadDocument:f,replace:E,state:w,target:T,to:_,preventScrollReset:I,viewTransition:M,...V},F){let{basename:K}=ee.useContext(Ls),ie=typeof _=="string"&&YE.test(_),te,ue=!1;if(typeof _=="string"&&ie&&(te=_,qE))try{let P=new URL(window.location.href),W=_.startsWith("//")?new URL(P.protocol+_):new URL(_),J=go(W.pathname,K);W.origin===P.origin&&J!=null?_=J+W.search+W.hash:ue=!0}catch{Os(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ye=Gv(_,{relative:c}),[se,De,Ue]=CT(a,V),Se=LT(_,{replace:E,state:w,target:T,preventScrollReset:I,relative:c,viewTransition:M});function z(P){e&&e(P),P.defaultPrevented||Se(P)}let H=ee.createElement("a",{...V,...Ue,href:te||ye,onClick:ue||f?e:z,ref:NT(F,De),target:T,"data-discover":!ie&&t==="render"?"true":void 0});return se&&!ie?ee.createElement(ee.Fragment,null,H,ee.createElement(ST,{page:ye})):H});ro.displayName="Link";var DT=ee.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:c=!1,style:f,to:E,viewTransition:w,children:T,..._},I){let M=Iu(E,{relative:_.relative}),V=Ea(),F=ee.useContext(Mf),{navigator:K,basename:ie}=ee.useContext(Ls),te=F!=null&&VT(M)&&w===!0,ue=K.encodeLocation?K.encodeLocation(M).pathname:M.pathname,ye=V.pathname,se=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;t||(ye=ye.toLowerCase(),se=se?se.toLowerCase():null,ue=ue.toLowerCase()),se&&ie&&(se=go(se,ie)||se);const De=ue!=="/"&&ue.endsWith("/")?ue.length-1:ue.length;let Ue=ye===ue||!c&&ye.startsWith(ue)&&ye.charAt(De)==="/",Se=se!=null&&(se===ue||!c&&se.startsWith(ue)&&se.charAt(ue.length)==="/"),z={isActive:Ue,isPending:Se,isTransitioning:te},H=Ue?e:void 0,P;typeof a=="function"?P=a(z):P=[a,Ue?"active":null,Se?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let W=typeof f=="function"?f(z):f;return ee.createElement(ro,{..._,"aria-current":H,className:P,ref:I,style:W,to:E,viewTransition:w},typeof T=="function"?T(z):T)});DT.displayName="NavLink";var OT=ee.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:c,state:f,method:E=Wh,action:w,onSubmit:T,relative:_,preventScrollReset:I,viewTransition:M,...V},F)=>{let K=BT(),ie=UT(w,{relative:_}),te=E.toLowerCase()==="get"?"get":"post",ue=typeof w=="string"&&YE.test(w),ye=se=>{if(T&&T(se),se.defaultPrevented)return;se.preventDefault();let De=se.nativeEvent.submitter,Ue=(De==null?void 0:De.getAttribute("formmethod"))||E;K(De||se.currentTarget,{fetcherKey:e,method:Ue,navigate:t,replace:c,state:f,relative:_,preventScrollReset:I,viewTransition:M})};return ee.createElement("form",{ref:F,method:te,action:ie,onSubmit:a?T:ye,...V,"data-discover":!ue&&r==="render"?"true":void 0})});OT.displayName="Form";function MT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(r){let e=ee.useContext(nc);return On(e,MT(r)),e}function LT(r,{target:e,replace:t,state:a,preventScrollReset:c,relative:f,viewTransition:E}={}){let w=FE(),T=Ea(),_=Iu(r,{relative:f});return ee.useCallback(I=>{if(hT(I,e)){I.preventDefault();let M=t!==void 0?t:gu(T)===gu(_);w(r,{replace:M,state:a,preventScrollReset:c,relative:f,viewTransition:E})}},[T,w,_,t,a,e,r,c,f,E])}var PT=0,kT=()=>`__${String(++PT)}__`;function BT(){let{router:r}=XE("useSubmit"),{basename:e}=ee.useContext(Ls),t=tT();return ee.useCallback(async(a,c={})=>{let{action:f,method:E,encType:w,formData:T,body:_}=gT(a,e);if(c.navigate===!1){let I=c.fetcherKey||kT();await r.fetch(I,t,c.action||f,{preventScrollReset:c.preventScrollReset,formData:T,body:_,formMethod:c.method||E,formEncType:c.encType||w,flushSync:c.flushSync})}else await r.navigate(c.action||f,{preventScrollReset:c.preventScrollReset,formData:T,body:_,formMethod:c.method||E,formEncType:c.encType||w,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,e,t])}function UT(r,{relative:e}={}){let{basename:t}=ee.useContext(Ls),a=ee.useContext(ya);On(a,"useFormAction must be used inside a RouteContext");let[c]=a.matches.slice(-1),f={...Iu(r||".",{relative:e})},E=Ea();if(r==null){f.search=E.search;let w=new URLSearchParams(f.search),T=w.getAll("index");if(T.some(I=>I==="")){w.delete("index"),T.filter(M=>M).forEach(M=>w.append("index",M));let I=w.toString();f.search=I?`?${I}`:""}}return(!r||r===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(f.pathname=f.pathname==="/"?t:ca([t,f.pathname])),gu(f)}function VT(r,e={}){let t=ee.useContext(UE);On(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=XE("useViewTransitionState"),c=Iu(r,{relative:e.relative});if(!t.isTransitioning)return!1;let f=go(t.currentLocation.pathname,a)||t.currentLocation.pathname,E=go(t.nextLocation.pathname,a)||t.nextLocation.pathname;return of(c.pathname,E)!=null||of(c.pathname,f)!=null}new TextEncoder;/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WE=(...r)=>r.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=ee.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:c="",children:f,iconNode:E,...w},T)=>ee.createElement("svg",{ref:T,...FT,width:e,height:e,stroke:r,strokeWidth:a?Number(t)*24/Number(e):t,className:WE("lucide",c),...w},[...E.map(([_,I])=>ee.createElement(_,I)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=(r,e)=>{const t=ee.forwardRef(({className:a,...c},f)=>ee.createElement(zT,{ref:f,iconNode:e,className:WE(`lucide-${jT(r)}`,a),...c}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],GT=Ir("ArrowRight",HT);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],QE=Ir("Calendar",qT);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],XT=Ir("ChevronDown",YT);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]],QT=Ir("Dumbbell",WT);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ZT=Ir("Heart",KT);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],V2=Ir("Loader",JT);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],eC=Ir("LogOut",$T);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],nC=Ir("MapPin",tC);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],rC=Ir("Menu",iC);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],aC=Ir("Scan",sC);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],lC=Ir("Search",oC);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],s1=Ir("User",cC);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],KE=Ir("X",uC),hC=()=>{};var j2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(r){const e=[];let t=0;for(let a=0;a<r.length;a++){let c=r.charCodeAt(a);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(c=65536+((c&1023)<<10)+(r.charCodeAt(++a)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},fC=function(r){const e=[];let t=0,a=0;for(;t<r.length;){const c=r[t++];if(c<128)e[a++]=String.fromCharCode(c);else if(c>191&&c<224){const f=r[t++];e[a++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=r[t++],E=r[t++],w=r[t++],T=((c&7)<<18|(f&63)<<12|(E&63)<<6|w&63)-65536;e[a++]=String.fromCharCode(55296+(T>>10)),e[a++]=String.fromCharCode(56320+(T&1023))}else{const f=r[t++],E=r[t++];e[a++]=String.fromCharCode((c&15)<<12|(f&63)<<6|E&63)}}return e.join("")},JE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let c=0;c<r.length;c+=3){const f=r[c],E=c+1<r.length,w=E?r[c+1]:0,T=c+2<r.length,_=T?r[c+2]:0,I=f>>2,M=(f&3)<<4|w>>4;let V=(w&15)<<2|_>>6,F=_&63;T||(F=64,E||(V=64)),a.push(t[I],t[M],t[V],t[F])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ZE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):fC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let c=0;c<r.length;){const f=t[r.charAt(c++)],w=c<r.length?t[r.charAt(c)]:0;++c;const _=c<r.length?t[r.charAt(c)]:64;++c;const M=c<r.length?t[r.charAt(c)]:64;if(++c,f==null||w==null||_==null||M==null)throw new dC;const V=f<<2|w>>4;if(a.push(V),_!==64){const F=w<<4&240|_>>2;if(a.push(F),M!==64){const K=_<<6&192|M;a.push(K)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class dC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gC=function(r){const e=ZE(r);return JE.encodeByteArray(e,!0)},lf=function(r){return gC(r).replace(/\./g,"")},$E=function(r){try{return JE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=()=>mC().__FIREBASE_DEFAULTS__,yC=()=>{if(typeof process>"u"||typeof j2>"u")return;const r=j2.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},EC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&$E(r[1]);return e&&JSON.parse(e)},Pf=()=>{try{return hC()||pC()||yC()||EC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ex=r=>{var e,t;return(t=(e=Pf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},xC=r=>{const e=ex(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},tx=()=>{var r;return(r=Pf())===null||r===void 0?void 0:r.config},nx=r=>{var e;return(e=Pf())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",c=r.iat||0,f=r.sub||r.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const E=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},r);return[lf(JSON.stringify(t)),lf(JSON.stringify(E)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fi())}function vC(){var r;const e=(r=Pf())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function SC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bC(){const r=Fi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function IC(){return!vC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NC(){try{return typeof indexedDB=="object"}catch{return!1}}function RC(){return new Promise((r,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(a);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(a),r(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var f;e(((f=c.error)===null||f===void 0?void 0:f.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="FirebaseError";class xa extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=DC,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},c=`${this.service}/${e}`,f=this.errors[e],E=f?OC(f,a):"Error",w=`${this.serviceName}: ${E} (${c}).`;return new xa(c,w,a)}}function OC(r,e){return r.replace(MC,(t,a)=>{const c=e[a];return c!=null?String(c):`<${a}?>`})}const MC=/\{\$([^}]+)}/g;function LC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function qo(r,e){if(r===e)return!0;const t=Object.keys(r),a=Object.keys(e);for(const c of t){if(!a.includes(c))return!1;const f=r[c],E=e[c];if(F2(f)&&F2(E)){if(!qo(f,E))return!1}else if(f!==E)return!1}for(const c of a)if(!t.includes(c))return!1;return!0}function F2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(r){const e=[];for(const[t,a]of Object.entries(r))Array.isArray(a)?a.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function nu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[c,f]=a.split("=");e[decodeURIComponent(c)]=decodeURIComponent(f)}}),e}function iu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function PC(r,e){const t=new kC(r,e);return t.subscribe.bind(t)}class kC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let c;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");BC(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:a},c.next===void 0&&(c.next=Y0),c.error===void 0&&(c.error=Y0),c.complete===void 0&&(c.complete=Y0);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Y0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(r){return r&&r._delegate?r._delegate:r}class Yo{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new _C;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&a.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),c=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(f){if(c)return null;throw f}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jC(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:c});a.resolve(f)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[f,E]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(f);a===w&&E.resolve(c)}return c}onInit(e,t){var a;const c=this.normalizeInstanceIdentifier(t),f=(a=this.onInitCallbacks.get(c))!==null&&a!==void 0?a:new Set;f.add(e),this.onInitCallbacks.set(c,f);const E=this.instances.get(c);return E&&e(E,c),()=>{f.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const c of a)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:VC(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VC(r){return r===zo?void 0:r}function jC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const zC={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},HC=Ot.INFO,GC={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},qC=(r,e,...t)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),c=GC[e];if(c)console[c](`[${a}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class V1{constructor(e){this.name=e,this._logLevel=HC,this._logHandler=qC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...e),this._logHandler(this,Ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...e),this._logHandler(this,Ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...e),this._logHandler(this,Ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...e),this._logHandler(this,Ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...e),this._logHandler(this,Ot.ERROR,...e)}}const YC=(r,e)=>e.some(t=>r instanceof t);let z2,H2;function XC(){return z2||(z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return H2||(H2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ix=new WeakMap,a1=new WeakMap,rx=new WeakMap,X0=new WeakMap,j1=new WeakMap;function QC(r){const e=new Promise((t,a)=>{const c=()=>{r.removeEventListener("success",f),r.removeEventListener("error",E)},f=()=>{t(lo(r.result)),c()},E=()=>{a(r.error),c()};r.addEventListener("success",f),r.addEventListener("error",E)});return e.then(t=>{t instanceof IDBCursor&&ix.set(t,r)}).catch(()=>{}),j1.set(e,r),e}function KC(r){if(a1.has(r))return;const e=new Promise((t,a)=>{const c=()=>{r.removeEventListener("complete",f),r.removeEventListener("error",E),r.removeEventListener("abort",E)},f=()=>{t(),c()},E=()=>{a(r.error||new DOMException("AbortError","AbortError")),c()};r.addEventListener("complete",f),r.addEventListener("error",E),r.addEventListener("abort",E)});a1.set(r,e)}let o1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return a1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||rx.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ZC(r){o1=r(o1)}function JC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=r.call(W0(this),e,...t);return rx.set(a,e.sort?e.sort():[e]),lo(a)}:WC().includes(r)?function(...e){return r.apply(W0(this),e),lo(ix.get(this))}:function(...e){return lo(r.apply(W0(this),e))}}function $C(r){return typeof r=="function"?JC(r):(r instanceof IDBTransaction&&KC(r),YC(r,XC())?new Proxy(r,o1):r)}function lo(r){if(r instanceof IDBRequest)return QC(r);if(X0.has(r))return X0.get(r);const e=$C(r);return e!==r&&(X0.set(r,e),j1.set(e,r)),e}const W0=r=>j1.get(r);function eS(r,e,{blocked:t,upgrade:a,blocking:c,terminated:f}={}){const E=indexedDB.open(r,e),w=lo(E);return a&&E.addEventListener("upgradeneeded",T=>{a(lo(E.result),T.oldVersion,T.newVersion,lo(E.transaction),T)}),t&&E.addEventListener("blocked",T=>t(T.oldVersion,T.newVersion,T)),w.then(T=>{f&&T.addEventListener("close",()=>f()),c&&T.addEventListener("versionchange",_=>c(_.oldVersion,_.newVersion,_))}).catch(()=>{}),w}const tS=["get","getKey","getAll","getAllKeys","count"],nS=["put","add","delete","clear"],Q0=new Map;function G2(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Q0.get(e))return Q0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,c=nS.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(c||tS.includes(t)))return;const f=async function(E,...w){const T=this.transaction(E,c?"readwrite":"readonly");let _=T.store;return a&&(_=_.index(w.shift())),(await Promise.all([_[t](...w),c&&T.done]))[0]};return Q0.set(e,f),f}ZC(r=>({...r,get:(e,t,a)=>G2(e,t)||r.get(e,t,a),has:(e,t)=>!!G2(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rS(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function rS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const l1="@firebase/app",q2="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new V1("@firebase/app"),sS="@firebase/app-compat",aS="@firebase/analytics-compat",oS="@firebase/analytics",lS="@firebase/app-check-compat",cS="@firebase/app-check",uS="@firebase/auth",hS="@firebase/auth-compat",fS="@firebase/database",dS="@firebase/data-connect",gS="@firebase/database-compat",mS="@firebase/functions",pS="@firebase/functions-compat",yS="@firebase/installations",ES="@firebase/installations-compat",xS="@firebase/messaging",_S="@firebase/messaging-compat",AS="@firebase/performance",wS="@firebase/performance-compat",vS="@firebase/remote-config",TS="@firebase/remote-config-compat",CS="@firebase/storage",SS="@firebase/storage-compat",bS="@firebase/firestore",IS="@firebase/vertexai",NS="@firebase/firestore-compat",RS="firebase",DS="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="[DEFAULT]",OS={[l1]:"fire-core",[sS]:"fire-core-compat",[oS]:"fire-analytics",[aS]:"fire-analytics-compat",[cS]:"fire-app-check",[lS]:"fire-app-check-compat",[uS]:"fire-auth",[hS]:"fire-auth-compat",[fS]:"fire-rtdb",[dS]:"fire-data-connect",[gS]:"fire-rtdb-compat",[mS]:"fire-fn",[pS]:"fire-fn-compat",[yS]:"fire-iid",[ES]:"fire-iid-compat",[xS]:"fire-fcm",[_S]:"fire-fcm-compat",[AS]:"fire-perf",[wS]:"fire-perf-compat",[vS]:"fire-rc",[TS]:"fire-rc-compat",[CS]:"fire-gcs",[SS]:"fire-gcs-compat",[bS]:"fire-fst",[NS]:"fire-fst-compat",[IS]:"fire-vertex","fire-js":"fire-js",[RS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,MS=new Map,u1=new Map;function Y2(r,e){try{r.container.addComponent(e)}catch(t){da.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ql(r){const e=r.name;if(u1.has(e))return da.debug(`There were multiple attempts to register component ${e}.`),!1;u1.set(e,r);for(const t of cf.values())Y2(t,r);for(const t of MS.values())Y2(t,r);return!0}function F1(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Sr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new Nu("app","Firebase",LS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=DS;function sx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const a=Object.assign({name:c1,automaticDataCollectionEnabled:!1},e),c=a.name;if(typeof c!="string"||!c)throw co.create("bad-app-name",{appName:String(c)});if(t||(t=tx()),!t)throw co.create("no-options");const f=cf.get(c);if(f){if(qo(t,f.options)&&qo(a,f.config))return f;throw co.create("duplicate-app",{appName:c})}const E=new FC(c);for(const T of u1.values())E.addComponent(T);const w=new PS(t,a,E);return cf.set(c,w),w}function ax(r=c1){const e=cf.get(r);if(!e&&r===c1&&tx())return sx();if(!e)throw co.create("no-app",{appName:r});return e}function uo(r,e,t){var a;let c=(a=OS[r])!==null&&a!==void 0?a:r;t&&(c+=`-${t}`);const f=c.match(/\s|\//),E=e.match(/\s|\//);if(f||E){const w=[`Unable to register library "${c}" with version "${e}":`];f&&w.push(`library name "${c}" contains illegal characters (whitespace or "/")`),f&&E&&w.push("and"),E&&w.push(`version name "${e}" contains illegal characters (whitespace or "/")`),da.warn(w.join(" "));return}ql(new Yo(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebase-heartbeat-database",BS=1,mu="firebase-heartbeat-store";let K0=null;function ox(){return K0||(K0=eS(kS,BS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(r=>{throw co.create("idb-open",{originalErrorMessage:r.message})})),K0}async function US(r){try{const t=(await ox()).transaction(mu),a=await t.objectStore(mu).get(lx(r));return await t.done,a}catch(e){if(e instanceof xa)da.warn(e.message);else{const t=co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});da.warn(t.message)}}}async function X2(r,e){try{const a=(await ox()).transaction(mu,"readwrite");await a.objectStore(mu).put(e,lx(r)),await a.done}catch(t){if(t instanceof xa)da.warn(t.message);else{const a=co.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});da.warn(a.message)}}}function lx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1024,jS=30;class FS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HS(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=W2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(E=>E.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:c}),this._heartbeatsCache.heartbeats.length>jS){const E=GS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(E,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){da.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=W2(),{heartbeatsToSend:a,unsentEntries:c}=zS(this._heartbeatsCache.heartbeats),f=lf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(t){return da.warn(t),""}}}function W2(){return new Date().toISOString().substring(0,10)}function zS(r,e=VS){const t=[];let a=r.slice();for(const c of r){const f=t.find(E=>E.agent===c.agent);if(f){if(f.dates.push(c.date),Q2(t)>e){f.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),Q2(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class HS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NC()?RC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await US(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return X2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const c=await this.read();return X2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function Q2(r){return lf(JSON.stringify({version:2,heartbeats:r})).length}function GS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let a=1;a<r.length;a++)r[a].date<t&&(t=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(r){ql(new Yo("platform-logger",e=>new iS(e),"PRIVATE")),ql(new Yo("heartbeat",e=>new FS(e),"PRIVATE")),uo(l1,q2,r),uo(l1,q2,"esm2017"),uo("fire-js","")}qS("");function z1(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(r);c<a.length;c++)e.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(r,a[c])&&(t[a[c]]=r[a[c]]);return t}function cx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YS=cx,ux=new Nu("auth","Firebase",cx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new V1("@firebase/auth");function XS(r,...e){uf.logLevel<=Ot.WARN&&uf.warn(`Auth (${ic}): ${r}`,...e)}function Kh(r,...e){uf.logLevel<=Ot.ERROR&&uf.error(`Auth (${ic}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(r,...e){throw G1(r,...e)}function us(r,...e){return G1(r,...e)}function H1(r,e,t){const a=Object.assign(Object.assign({},YS()),{[e]:t});return new Nu("auth","Firebase",a).create(e,{appName:r.name})}function ua(r){return H1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WS(r,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Kr(r,"argument-error"),H1(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function G1(r,...e){if(typeof r!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(t,...a)}return ux.create(r,...e)}function ot(r,e,...t){if(!r)throw G1(e,...t)}function sa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Kh(e),new Error(e)}function ga(r,e){r||sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function QS(){return K2()==="http:"||K2()==="https:"}function K2(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QS()||CC()||"connection"in navigator)?navigator.onLine:!0}function ZS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.shortDelay=e,this.longDelay=t,ga(t>e,"Short delay should be less than long delay!"),this.isMobile=wC()||SC()}get(){return KS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r,e){ga(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Du(3e4,6e4);function _a(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Aa(r,e,t,a,c={}){return fx(r,c,async()=>{let f={},E={};a&&(e==="GET"?E=a:f={body:JSON.stringify(a)});const w=Ru(Object.assign({key:r.config.apiKey},E)).slice(1),T=await r._getAdditionalHeaders();T["Content-Type"]="application/json",r.languageCode&&(T["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:T},f);return TC()||(_.referrerPolicy="no-referrer"),hx.fetch()(dx(r,r.config.apiHost,t,w),_)})}async function fx(r,e,t){r._canInitEmulator=!1;const a=Object.assign(Object.assign({},JS),e);try{const c=new t3(r),f=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const E=await f.json();if("needConfirmation"in E)throw Fh(r,"account-exists-with-different-credential",E);if(f.ok&&!("errorMessage"in E))return E;{const w=f.ok?E.errorMessage:E.error.message,[T,_]=w.split(" : ");if(T==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(r,"credential-already-in-use",E);if(T==="EMAIL_EXISTS")throw Fh(r,"email-already-in-use",E);if(T==="USER_DISABLED")throw Fh(r,"user-disabled",E);const I=a[T]||T.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw H1(r,I,_);Kr(r,I)}}catch(c){if(c instanceof xa)throw c;Kr(r,"network-request-failed",{message:String(c)})}}async function Ou(r,e,t,a,c={}){const f=await Aa(r,e,t,a,c);return"mfaPendingCredential"in f&&Kr(r,"multi-factor-auth-required",{_serverResponse:f}),f}function dx(r,e,t,a){const c=`${e}${t}?${a}`;return r.config.emulator?q1(r.config,c):`${r.config.apiScheme}://${c}`}function e3(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class t3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(us(this.auth,"network-request-failed")),$S.get())})}}function Fh(r,e,t){const a={appName:r.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const c=us(r,e,a);return c.customData._tokenResponse=t,c}function Z2(r){return r!==void 0&&r.enterprise!==void 0}class n3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return e3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function i3(r,e){return Aa(r,"GET","/v2/recaptchaConfig",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(r,e){return Aa(r,"POST","/v1/accounts:delete",e)}async function gx(r,e){return Aa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s3(r,e=!1){const t=$i(r),a=await t.getIdToken(e),c=Y1(a);ot(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const f=typeof c.firebase=="object"?c.firebase:void 0,E=f==null?void 0:f.sign_in_provider;return{claims:c,token:a,authTime:cu(Z0(c.auth_time)),issuedAtTime:cu(Z0(c.iat)),expirationTime:cu(Z0(c.exp)),signInProvider:E||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function Z0(r){return Number(r)*1e3}function Y1(r){const[e,t,a]=r.split(".");if(e===void 0||t===void 0||a===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const c=$E(t);return c?JSON.parse(c):(Kh("Failed to decode base64 JWT payload"),null)}catch(c){return Kh("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function J2(r){const e=Y1(r);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(r,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof xa&&a3(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function a3({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const c=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(r){var e;const t=r.auth,a=await r.getIdToken(),c=await pu(r,gx(t,{idToken:a}));ot(c==null?void 0:c.users.length,t,"internal-error");const f=c.users[0];r._notifyReloadListener(f);const E=!((e=f.providerUserInfo)===null||e===void 0)&&e.length?mx(f.providerUserInfo):[],w=c3(r.providerData,E),T=r.isAnonymous,_=!(r.email&&f.passwordHash)&&!(w!=null&&w.length),I=T?_:!1,M={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:w,metadata:new f1(f.createdAt,f.lastLoginAt),isAnonymous:I};Object.assign(r,M)}async function l3(r){const e=$i(r);await hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c3(r,e){return[...r.filter(a=>!e.some(c=>c.providerId===a.providerId)),...e]}function mx(r){return r.map(e=>{var{providerId:t}=e,a=z1(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(r,e){const t=await fx(r,{},async()=>{const a=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:f}=r.config,E=dx(r,c,"/v1/token",`key=${f}`),w=await r._getAdditionalHeaders();return w["Content-Type"]="application/x-www-form-urlencoded",hx.fetch()(E,{method:"POST",headers:w,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function h3(r,e){return Aa(r,"POST","/v2/accounts:revokeToken",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=J2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:c,expiresIn:f}=await u3(e,t);this.updateTokensAndExpiration(a,c,Number(f))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:c,expirationTime:f}=t,E=new jl;return a&&(ot(typeof a=="string","internal-error",{appName:e}),E.refreshToken=a),c&&(ot(typeof c=="string","internal-error",{appName:e}),E.accessToken=c),f&&(ot(typeof f=="number","internal-error",{appName:e}),E.expirationTime=f),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(r,e){ot(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class aa{constructor(e){var{uid:t,auth:a,stsTokenManager:c}=e,f=z1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new o3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new f1(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const t=await pu(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return s3(this,e)}reload(){return l3(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new aa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await hf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await pu(this,r3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,c,f,E,w,T,_,I;const M=(a=t.displayName)!==null&&a!==void 0?a:void 0,V=(c=t.email)!==null&&c!==void 0?c:void 0,F=(f=t.phoneNumber)!==null&&f!==void 0?f:void 0,K=(E=t.photoURL)!==null&&E!==void 0?E:void 0,ie=(w=t.tenantId)!==null&&w!==void 0?w:void 0,te=(T=t._redirectEventId)!==null&&T!==void 0?T:void 0,ue=(_=t.createdAt)!==null&&_!==void 0?_:void 0,ye=(I=t.lastLoginAt)!==null&&I!==void 0?I:void 0,{uid:se,emailVerified:De,isAnonymous:Ue,providerData:Se,stsTokenManager:z}=t;ot(se&&z,e,"internal-error");const H=jl.fromJSON(this.name,z);ot(typeof se=="string",e,"internal-error"),$a(M,e.name),$a(V,e.name),ot(typeof De=="boolean",e,"internal-error"),ot(typeof Ue=="boolean",e,"internal-error"),$a(F,e.name),$a(K,e.name),$a(ie,e.name),$a(te,e.name),$a(ue,e.name),$a(ye,e.name);const P=new aa({uid:se,auth:e,email:V,emailVerified:De,displayName:M,isAnonymous:Ue,photoURL:K,phoneNumber:F,tenantId:ie,stsTokenManager:H,createdAt:ue,lastLoginAt:ye});return Se&&Array.isArray(Se)&&(P.providerData=Se.map(W=>Object.assign({},W))),te&&(P._redirectEventId=te),P}static async _fromIdTokenResponse(e,t,a=!1){const c=new jl;c.updateFromServerResponse(t);const f=new aa({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:a});return await hf(f),f}static async _fromGetAccountInfoResponse(e,t,a){const c=t.users[0];ot(c.localId!==void 0,"internal-error");const f=c.providerUserInfo!==void 0?mx(c.providerUserInfo):[],E=!(c.email&&c.passwordHash)&&!(f!=null&&f.length),w=new jl;w.updateFromIdToken(a);const T=new aa({uid:c.localId,auth:e,stsTokenManager:w,isAnonymous:E}),_={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new f1(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(f!=null&&f.length)};return Object.assign(T,_),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new Map;function oa(r){ga(r instanceof Function,"Expected a class definition");let e=$2.get(r);return e?(ga(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,$2.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}px.type="NONE";const ey=px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(r,e,t){return`firebase:${r}:${e}:${t}`}class Fl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:c,name:f}=this.auth;this.fullUserKey=Zh(this.userKey,c.apiKey,f),this.fullPersistenceKey=Zh("persistence",c.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?aa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Fl(oa(ey),e,a);const c=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let f=c[0]||oa(ey);const E=Zh(a,e.config.apiKey,e.name);let w=null;for(const _ of t)try{const I=await _._get(E);if(I){const M=aa._fromJSON(e,I);_!==f&&(w=M),f=_;break}}catch{}const T=c.filter(_=>_._shouldAllowMigration);return!f._shouldAllowMigration||!T.length?new Fl(f,e,a):(f=T[0],w&&await f._set(E,w.toJSON()),await Promise.all(t.map(async _=>{if(_!==f)try{await _._remove(E)}catch{}})),new Fl(f,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_x(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wx(e))return"Blackberry";if(vx(e))return"Webos";if(Ex(e))return"Safari";if((e.includes("chrome/")||xx(e))&&!e.includes("edge/"))return"Chrome";if(Ax(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function yx(r=Fi()){return/firefox\//i.test(r)}function Ex(r=Fi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xx(r=Fi()){return/crios\//i.test(r)}function _x(r=Fi()){return/iemobile/i.test(r)}function Ax(r=Fi()){return/android/i.test(r)}function wx(r=Fi()){return/blackberry/i.test(r)}function vx(r=Fi()){return/webos/i.test(r)}function X1(r=Fi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function f3(r=Fi()){var e;return X1(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d3(){return bC()&&document.documentMode===10}function Tx(r=Fi()){return X1(r)||Ax(r)||vx(r)||wx(r)||/windows phone/i.test(r)||_x(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(r,e=[]){let t;switch(r){case"Browser":t=ty(Fi());break;case"Worker":t=`${ty(Fi())}-${r}`;break;default:t=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ic}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=f=>new Promise((E,w)=>{try{const T=e(f);E(T)}catch(T){w(T)}});a.onAbort=t,this.queue.push(a);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(r,e={}){return Aa(r,"GET","/v2/passwordPolicy",_a(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=6;class y3{constructor(e){var t,a,c,f;const E=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=E.minPasswordLength)!==null&&t!==void 0?t:p3,E.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=E.maxPasswordLength),E.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=E.containsLowercaseCharacter),E.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=E.containsUppercaseCharacter),E.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=E.containsNumericCharacter),E.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=E.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(f=e.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,c,f,E,w;const T={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,T),this.validatePasswordCharacterOptions(e,T),T.isValid&&(T.isValid=(t=T.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),T.isValid&&(T.isValid=(a=T.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),T.isValid&&(T.isValid=(c=T.containsLowercaseLetter)!==null&&c!==void 0?c:!0),T.isValid&&(T.isValid=(f=T.containsUppercaseLetter)!==null&&f!==void 0?f:!0),T.isValid&&(T.isValid=(E=T.containsNumericCharacter)!==null&&E!==void 0?E:!0),T.isValid&&(T.isValid=(w=T.containsNonAlphanumericCharacter)!==null&&w!==void 0?w:!0),T}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let c=0;c<e.length;c++)a=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,c,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,t,a,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new g3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ux,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oa(t)),this._initializationPromise=this.queue(async()=>{var a,c;if(!this._deleted&&(this.persistenceManager=await Fl.create(this,e),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gx(this,{idToken:e}),a=await aa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sr(this.app)){const E=this.app.settings.authIdToken;return E?new Promise(w=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(E).then(w,w))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let c=a,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const E=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,w=c==null?void 0:c._redirectEventId,T=await this.tryRedirectSignIn(e);(!E||E===w)&&(T!=null&&T.user)&&(c=T.user,f=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(c)}catch(E){c=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(E))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(ua(this));const t=e?$i(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m3(this),t=new y3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await h3(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oa(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await Fl.create(this,[oa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,c){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let E=!1;const w=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(w,this,"internal-error"),w.then(()=>{E||f(this.currentUser)}),typeof t=="function"){const T=e.addObserver(t,a,c);return()=>{E=!0,T()}}else{const T=e.addObserver(t);return()=>{E=!0,T()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const c=await this._getAppCheckToken();return c&&(t["X-Firebase-AppCheck"]=c),t}async _getAppCheckToken(){var e;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&XS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function wa(r){return $i(r)}class ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=PC(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x3(r){kf=r}function Sx(r){return kf.loadJS(r)}function _3(){return kf.recaptchaEnterpriseScript}function A3(){return kf.gapiScript}function w3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class v3{constructor(){this.enterprise=new T3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class T3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const C3="recaptcha-enterprise",bx="NO_RECAPTCHA";class S3{constructor(e){this.type=C3,this.auth=wa(e)}async verify(e="verify",t=!1){async function a(f){if(!t){if(f.tenantId==null&&f._agentRecaptchaConfig!=null)return f._agentRecaptchaConfig.siteKey;if(f.tenantId!=null&&f._tenantRecaptchaConfigs[f.tenantId]!==void 0)return f._tenantRecaptchaConfigs[f.tenantId].siteKey}return new Promise(async(E,w)=>{i3(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(T=>{if(T.recaptchaKey===void 0)w(new Error("recaptcha Enterprise site key undefined"));else{const _=new n3(T);return f.tenantId==null?f._agentRecaptchaConfig=_:f._tenantRecaptchaConfigs[f.tenantId]=_,E(_.siteKey)}}).catch(T=>{w(T)})})}function c(f,E,w){const T=window.grecaptcha;Z2(T)?T.enterprise.ready(()=>{T.enterprise.execute(f,{action:e}).then(_=>{E(_)}).catch(()=>{E(bx)})}):w(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new v3().execute("siteKey",{action:"verify"}):new Promise((f,E)=>{a(this.auth).then(w=>{if(!t&&Z2(window.grecaptcha))c(w,f,E);else{if(typeof window>"u"){E(new Error("RecaptchaVerifier is only supported in browser"));return}let T=_3();T.length!==0&&(T+=w),Sx(T).then(()=>{c(w,f,E)}).catch(_=>{E(_)})}}).catch(w=>{E(w)})})}}async function iy(r,e,t,a=!1,c=!1){const f=new S3(r);let E;if(c)E=bx;else try{E=await f.verify(t)}catch{E=await f.verify(t,!0)}const w=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in w){const T=w.phoneEnrollmentInfo.phoneNumber,_=w.phoneEnrollmentInfo.recaptchaToken;Object.assign(w,{phoneEnrollmentInfo:{phoneNumber:T,recaptchaToken:_,captchaResponse:E,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in w){const T=w.phoneSignInInfo.recaptchaToken;Object.assign(w,{phoneSignInInfo:{recaptchaToken:T,captchaResponse:E,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return w}return a?Object.assign(w,{captchaResp:E}):Object.assign(w,{captchaResponse:E}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w}async function ff(r,e,t,a,c){var f;if(!((f=r._getRecaptchaConfig())===null||f===void 0)&&f.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=await iy(r,e,t,t==="getOobCode");return a(r,E)}else return a(r,e).catch(async E=>{if(E.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const w=await iy(r,e,t,t==="getOobCode");return a(r,w)}else return Promise.reject(E)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(r,e){const t=F1(r,"auth");if(t.isInitialized()){const c=t.getImmediate(),f=t.getOptions();if(qo(f,e??{}))return c;Kr(c,"already-initialized")}return t.initialize({options:e})}function I3(r,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(oa);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function N3(r,e,t){const a=wa(r);ot(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const c=!1,f=Ix(e),{host:E,port:w}=R3(e),T=w===null?"":`:${w}`,_={url:`${f}//${E}${T}/`},I=Object.freeze({host:E,port:w,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:c})});if(!a._canInitEmulator){ot(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ot(qo(_,a.config.emulator)&&qo(I,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=_,a.emulatorConfig=I,a.settings.appVerificationDisabledForTesting=!0,D3()}function Ix(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function R3(r){const e=Ix(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(a);if(c){const f=c[1];return{host:f,port:ry(a.substr(f.length+1))}}else{const[f,E]=a.split(":");return{host:f,port:ry(E)}}}function ry(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function D3(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sa("not implemented")}_getIdTokenResponse(e){return sa("not implemented")}_linkToIdToken(e,t){return sa("not implemented")}_getReauthenticationResolver(e){return sa("not implemented")}}async function O3(r,e){return Aa(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(r,e){return Ou(r,"POST","/v1/accounts:signInWithPassword",_a(r,e))}async function L3(r,e){return Aa(r,"POST","/v1/accounts:sendOobCode",_a(r,e))}async function P3(r,e){return L3(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(r,e){return Ou(r,"POST","/v1/accounts:signInWithEmailLink",_a(r,e))}async function B3(r,e){return Ou(r,"POST","/v1/accounts:signInWithEmailLink",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends W1{constructor(e,t,a,c=null){super("password",a),this._email=e,this._password=t,this._tenantId=c}static _fromEmailAndPassword(e,t){return new yu(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new yu(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,t,"signInWithPassword",M3);case"emailLink":return k3(e,{email:this._email,oobCode:this._password});default:Kr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,a,"signUpPassword",O3);case"emailLink":return B3(e,{idToken:t,email:this._email,oobCode:this._password});default:Kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(r,e){return Ou(r,"POST","/v1/accounts:signInWithIdp",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="http://localhost";class Xo extends W1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:c}=t,f=z1(t,["providerId","signInMethod"]);if(!a||!c)return null;const E=new Xo(a,c);return E.idToken=f.idToken||void 0,E.accessToken=f.accessToken||void 0,E.secret=f.secret,E.nonce=f.nonce,E.pendingToken=f.pendingToken||null,E}_getIdTokenResponse(e){const t=this.buildRequest();return zl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,zl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zl(e,t)}buildRequest(){const e={requestUri:U3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j3(r){const e=nu(iu(r)).link,t=e?nu(iu(e)).deep_link_id:null,a=nu(iu(r)).deep_link_id;return(a?nu(iu(a)).link:null)||a||t||e||r}class Q1{constructor(e){var t,a,c,f,E,w;const T=nu(iu(e)),_=(t=T.apiKey)!==null&&t!==void 0?t:null,I=(a=T.oobCode)!==null&&a!==void 0?a:null,M=V3((c=T.mode)!==null&&c!==void 0?c:null);ot(_&&I&&M,"argument-error"),this.apiKey=_,this.operation=M,this.code=I,this.continueUrl=(f=T.continueUrl)!==null&&f!==void 0?f:null,this.languageCode=(E=T.languageCode)!==null&&E!==void 0?E:null,this.tenantId=(w=T.tenantId)!==null&&w!==void 0?w:null}static parseLink(e){const t=j3(e);try{return new Q1(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.providerId=rc.PROVIDER_ID}static credential(e,t){return yu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Q1.parseLink(t);return ot(a,"argument-error"),yu._fromEmailAndCode(e,a.code,a.tenantId)}}rc.PROVIDER_ID="password";rc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends K1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Mu{constructor(){super("facebook.com")}static credential(e){return Xo._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xo._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return bs.credential(t,a)}catch{return null}}}bs.GOOGLE_SIGN_IN_METHOD="google.com";bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Mu{constructor(){super("github.com")}static credential(e){return Xo._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Mu{constructor(){super("twitter.com")}static credential(e,t){return Xo._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return io.credential(t,a)}catch{return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com";io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(r,e){return Ou(r,"POST","/v1/accounts:signUp",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,c=!1){const f=await aa._fromIdTokenResponse(e,a,c),E=sy(a);return new Wo({user:f,providerId:E,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const c=sy(a);return new Wo({user:e,providerId:c,_tokenResponse:a,operationType:t})}}function sy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends xa{constructor(e,t,a,c){var f;super(t.code,t.message),this.operationType=a,this.user=c,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:(f=e.tenantId)!==null&&f!==void 0?f:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,c){return new df(e,t,a,c)}}function Nx(r,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(r,f,e,a):f})}async function z3(r,e,t=!1){const a=await pu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Wo._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(r,e,t=!1){const{auth:a}=r;if(Sr(a.app))return Promise.reject(ua(a));const c="reauthenticate";try{const f=await pu(r,Nx(a,c,e,r),t);ot(f.idToken,a,"internal-error");const E=Y1(f.idToken);ot(E,a,"internal-error");const{sub:w}=E;return ot(r.uid===w,a,"user-mismatch"),Wo._forOperation(r,c,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&Kr(a,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(r,e,t=!1){if(Sr(r.app))return Promise.reject(ua(r));const a="signIn",c=await Nx(r,a,e),f=await Wo._fromIdTokenResponse(r,a,c);return t||await r._updateCurrentUser(f.user),f}async function G3(r,e){return Rx(wa(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(r){const e=wa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q3(r,e,t){const a=wa(r);await ff(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",P3)}async function Y3(r,e,t){if(Sr(r.app))return Promise.reject(ua(r));const a=wa(r),E=await ff(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",F3).catch(T=>{throw T.code==="auth/password-does-not-meet-requirements"&&Dx(r),T}),w=await Wo._fromIdTokenResponse(a,"signIn",E);return await a._updateCurrentUser(w.user),w}function X3(r,e,t){return Sr(r.app)?Promise.reject(ua(r)):G3($i(r),rc.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Dx(r),a})}function W3(r,e,t,a){return $i(r).onIdTokenChanged(e,t,a)}function Q3(r,e,t){return $i(r).beforeAuthStateChanged(e,t)}function K3(r,e,t,a){return $i(r).onAuthStateChanged(e,t,a)}function Ox(r){return $i(r).signOut()}const gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=1e3,J3=10;class Lx extends Mx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),c=this.localCache[t];a!==c&&e(t,c,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((E,w,T)=>{this.notifyListeners(E,T)});return}const a=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const E=this.storage.getItem(a);!t&&this.localCache[a]===E||this.notifyListeners(a,E)},f=this.storage.getItem(a);d3()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,J3):c()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},Z3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lx.type="LOCAL";const $3=Lx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px extends Mx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Px.type="SESSION";const kx=Px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const a=new Bf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:c,data:f}=t.data,E=this.handlersMap[c];if(!(E!=null&&E.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:c});const w=Array.from(E).map(async _=>_(t.origin,f)),T=await eb(w);t.ports[0].postMessage({status:"done",eventId:a,eventType:c,response:T})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(r="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let f,E;return new Promise((w,T)=>{const _=Z1("",20);c.port1.start();const I=setTimeout(()=>{T(new Error("unsupported_event"))},a);E={messageChannel:c,onMessage(M){const V=M;if(V.data.eventId===_)switch(V.data.status){case"ack":clearTimeout(I),f=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),w(V.data.response);break;default:clearTimeout(I),clearTimeout(f),T(new Error("invalid_response"));break}}},this.handlers.add(E),c.port1.addEventListener("message",E.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[c.port2])}).finally(()=>{E&&this.removeMessageHandler(E)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){return window}function nb(r){Is().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return typeof Is().WorkerGlobalScope<"u"&&typeof Is().importScripts=="function"}async function ib(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rb(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function sb(){return Bx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebaseLocalStorageDb",ab=1,mf="firebaseLocalStorage",Vx="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uf(r,e){return r.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function ob(){const r=indexedDB.deleteDatabase(Ux);return new Lu(r).toPromise()}function d1(){const r=indexedDB.open(Ux,ab);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(mf,{keyPath:Vx})}catch(c){t(c)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(mf)?e(a):(a.close(),await ob(),e(await d1()))})})}async function ay(r,e,t){const a=Uf(r,!0).put({[Vx]:e,value:t});return new Lu(a).toPromise()}async function lb(r,e){const t=Uf(r,!1).get(e),a=await new Lu(t).toPromise();return a===void 0?null:a.value}function oy(r,e){const t=Uf(r,!0).delete(e);return new Lu(t).toPromise()}const cb=800,ub=3;class jx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await d1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>ub)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(sb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ib(),!this.activeServiceWorker)return;this.sender=new tb(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await d1();return await ay(e,gf,"1"),await oy(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>ay(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>lb(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const f=Uf(c,!1).getAll();return new Lu(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:c,value:f}of e)a.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(f)&&(this.notifyListeners(c,f),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!a.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const c of Array.from(a))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jx.type="LOCAL";const hb=jx;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(r,e){return e?oa(e):(ot(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1 extends W1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fb(r){return Rx(r.auth,new J1(r),r.bypassAuthState)}function db(r){const{auth:e,user:t}=r;return ot(t,e,"internal-error"),H3(t,new J1(r),r.bypassAuthState)}async function gb(r){const{auth:e,user:t}=r;return ot(t,e,"internal-error"),z3(t,new J1(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t,a,c,f=!1){this.auth=e,this.resolver=a,this.user=c,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:c,tenantId:f,error:E,type:w}=e;if(E){this.reject(E);return}const T={auth:this.auth,requestUri:t,sessionId:a,tenantId:f||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(w)(T))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fb;case"linkViaPopup":case"linkViaRedirect":return gb;case"reauthViaPopup":case"reauthViaRedirect":return db;default:Kr(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Du(2e3,1e4);async function pb(r,e,t){if(Sr(r.app))return Promise.reject(us(r,"operation-not-supported-in-this-environment"));const a=wa(r);WS(r,e,K1);const c=Fx(a,t);return new Ho(a,"signInViaPopup",e,c).executeNotNull()}class Ho extends zx{constructor(e,t,a,c,f){super(e,t,c,f),this.provider=a,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=Z1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mb.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="pendingRedirect",Jh=new Map;class Eb extends zx{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const a=await xb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xb(r,e){const t=wb(e),a=Ab(r);if(!await a._isAvailable())return!1;const c=await a._get(t)==="true";return await a._remove(t),c}function _b(r,e){Jh.set(r._key(),e)}function Ab(r){return oa(r._redirectPersistence)}function wb(r){return Zh(yb,r.config.apiKey,r.name)}async function vb(r,e,t=!1){if(Sr(r.app))return Promise.reject(ua(r));const a=wa(r),c=Fx(a,e),E=await new Eb(a,c,t).execute();return E&&!t&&(delete E.user._redirectEventId,await a._persistUserIfCurrent(E.user),await a._setRedirectUser(null,e)),E}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=10*60*1e3;class Cb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!Hx(e)){const c=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(us(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tb&&this.cachedEventUids.clear(),this.cachedEventUids.has(ly(e))}saveEventToCache(e){this.cachedEventUids.add(ly(e)),this.lastProcessedEventTime=Date.now()}}function ly(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Hx({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sb(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hx(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(r,e={}){return Aa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nb=/^https?/;async function Rb(r){if(r.config.emulator)return;const{authorizedDomains:e}=await bb(r);for(const t of e)try{if(Db(t))return}catch{}Kr(r,"unauthorized-domain")}function Db(r){const e=h1(),{protocol:t,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const E=new URL(r);return E.hostname===""&&a===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&E.hostname===a}if(!Nb.test(t))return!1;if(Ib.test(r))return a===r;const c=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Du(3e4,6e4);function cy(){const r=Is().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Mb(r){return new Promise((e,t)=>{var a,c,f;function E(){cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cy(),t(us(r,"network-request-failed"))},timeout:Ob.get()})}if(!((c=(a=Is().gapi)===null||a===void 0?void 0:a.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((f=Is().gapi)===null||f===void 0)&&f.load)E();else{const w=w3("iframefcb");return Is()[w]=()=>{gapi.load?E():t(us(r,"network-request-failed"))},Sx(`${A3()}?onload=${w}`).catch(T=>t(T))}}).catch(e=>{throw $h=null,e})}let $h=null;function Lb(r){return $h=$h||Mb(r),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Du(5e3,15e3),kb="__/auth/iframe",Bb="emulator/auth/iframe",Ub={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jb(r){const e=r.config;ot(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?q1(e,Bb):`https://${r.config.authDomain}/${kb}`,a={apiKey:e.apiKey,appName:r.name,v:ic},c=Vb.get(r.config.apiHost);c&&(a.eid=c);const f=r._getFrameworks();return f.length&&(a.fw=f.join(",")),`${t}?${Ru(a).slice(1)}`}async function Fb(r){const e=await Lb(r),t=Is().gapi;return ot(t,r,"internal-error"),e.open({where:document.body,url:jb(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ub,dontclear:!0},a=>new Promise(async(c,f)=>{await a.restyle({setHideOnLeave:!1});const E=us(r,"network-request-failed"),w=Is().setTimeout(()=>{f(E)},Pb.get());function T(){Is().clearTimeout(w),c(a)}a.ping(T).then(T,()=>{f(E)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hb=500,Gb=600,qb="_blank",Yb="http://localhost";class uy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xb(r,e,t,a=Hb,c=Gb){const f=Math.max((window.screen.availHeight-c)/2,0).toString(),E=Math.max((window.screen.availWidth-a)/2,0).toString();let w="";const T=Object.assign(Object.assign({},zb),{width:a.toString(),height:c.toString(),top:f,left:E}),_=Fi().toLowerCase();t&&(w=xx(_)?qb:t),yx(_)&&(e=e||Yb,T.scrollbars="yes");const I=Object.entries(T).reduce((V,[F,K])=>`${V}${F}=${K},`,"");if(f3(_)&&w!=="_self")return Wb(e||"",w),new uy(null);const M=window.open(e||"",w,I);ot(M,r,"popup-blocked");try{M.focus()}catch{}return new uy(M)}function Wb(r,e){const t=document.createElement("a");t.href=r,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="__/auth/handler",Kb="emulator/auth/handler",Zb=encodeURIComponent("fac");async function hy(r,e,t,a,c,f){ot(r.config.authDomain,r,"auth-domain-config-required"),ot(r.config.apiKey,r,"invalid-api-key");const E={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:a,v:ic,eventId:c};if(e instanceof K1){e.setDefaultLanguage(r.languageCode),E.providerId=e.providerId||"",LC(e.getCustomParameters())||(E.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,M]of Object.entries({}))E[I]=M}if(e instanceof Mu){const I=e.getScopes().filter(M=>M!=="");I.length>0&&(E.scopes=I.join(","))}r.tenantId&&(E.tid=r.tenantId);const w=E;for(const I of Object.keys(w))w[I]===void 0&&delete w[I];const T=await r._getAppCheckToken(),_=T?`#${Zb}=${encodeURIComponent(T)}`:"";return`${Jb(r)}?${Ru(w).slice(1)}${_}`}function Jb({config:r}){return r.emulator?q1(r,Kb):`https://${r.authDomain}/${Qb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="webStorageSupport";class $b{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kx,this._completeRedirectFn=vb,this._overrideRedirectResult=_b}async _openPopup(e,t,a,c){var f;ga((f=this.eventManagers[e._key()])===null||f===void 0?void 0:f.manager,"_initialize() not called before _openPopup()");const E=await hy(e,t,a,h1(),c);return Xb(e,E,Z1())}async _openRedirect(e,t,a,c){await this._originValidation(e);const f=await hy(e,t,a,h1(),c);return nb(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:f}=this.eventManagers[t];return c?Promise.resolve(c):(ga(f,"If manager is not set, promise should be"),f)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await Fb(e),a=new Cb(e);return t.register("authEvent",c=>(ot(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:a.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(J0,{type:J0},c=>{var f;const E=(f=c==null?void 0:c[0])===null||f===void 0?void 0:f[J0];E!==void 0&&t(!!E),Kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Rb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tx()||Ex()||X1()}}const e4=$b;var fy="@firebase/auth",dy="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i4(r){ql(new Yo("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:E,authDomain:w}=a.options;ot(E&&!E.includes(":"),"invalid-api-key",{appName:a.name});const T={apiKey:E,authDomain:w,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cx(r)},_=new E3(a,c,f,T);return I3(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ql(new Yo("auth-internal",e=>{const t=wa(e.getProvider("auth").getImmediate());return(a=>new t4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),uo(fy,dy,n4(r)),uo(fy,dy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=5*60,s4=nx("authIdTokenMaxAge")||r4;let gy=null;const a4=r=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>s4)return;const c=t==null?void 0:t.token;gy!==c&&(gy=c,await fetch(r,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function so(r=ax()){const e=F1(r,"auth");if(e.isInitialized())return e.getImmediate();const t=b3(r,{popupRedirectResolver:e4,persistence:[hb,$3,kx]}),a=nx("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(a,location.origin);if(location.origin===f.origin){const E=a4(f.toString());Q3(t,E,()=>E(t.currentUser)),W3(t,w=>E(w))}}const c=ex("auth");return c&&N3(t,`http://${c}`),t}function o4(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}x3({loadJS(r){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=c=>{const f=us("internal-error");f.customData=c,t(f)},a.type="text/javascript",a.charset="UTF-8",o4().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i4("Browser");var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,Gx;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(z,H){function P(){}P.prototype=H.prototype,z.D=H.prototype,z.prototype=new P,z.prototype.constructor=z,z.C=function(W,J,Q){for(var q=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)q[ht-2]=arguments[ht];return H.prototype[J].apply(W,q)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(z,H,P){P||(P=0);var W=Array(16);if(typeof H=="string")for(var J=0;16>J;++J)W[J]=H.charCodeAt(P++)|H.charCodeAt(P++)<<8|H.charCodeAt(P++)<<16|H.charCodeAt(P++)<<24;else for(J=0;16>J;++J)W[J]=H[P++]|H[P++]<<8|H[P++]<<16|H[P++]<<24;H=z.g[0],P=z.g[1],J=z.g[2];var Q=z.g[3],q=H+(Q^P&(J^Q))+W[0]+3614090360&4294967295;H=P+(q<<7&4294967295|q>>>25),q=Q+(J^H&(P^J))+W[1]+3905402710&4294967295,Q=H+(q<<12&4294967295|q>>>20),q=J+(P^Q&(H^P))+W[2]+606105819&4294967295,J=Q+(q<<17&4294967295|q>>>15),q=P+(H^J&(Q^H))+W[3]+3250441966&4294967295,P=J+(q<<22&4294967295|q>>>10),q=H+(Q^P&(J^Q))+W[4]+4118548399&4294967295,H=P+(q<<7&4294967295|q>>>25),q=Q+(J^H&(P^J))+W[5]+1200080426&4294967295,Q=H+(q<<12&4294967295|q>>>20),q=J+(P^Q&(H^P))+W[6]+2821735955&4294967295,J=Q+(q<<17&4294967295|q>>>15),q=P+(H^J&(Q^H))+W[7]+4249261313&4294967295,P=J+(q<<22&4294967295|q>>>10),q=H+(Q^P&(J^Q))+W[8]+1770035416&4294967295,H=P+(q<<7&4294967295|q>>>25),q=Q+(J^H&(P^J))+W[9]+2336552879&4294967295,Q=H+(q<<12&4294967295|q>>>20),q=J+(P^Q&(H^P))+W[10]+4294925233&4294967295,J=Q+(q<<17&4294967295|q>>>15),q=P+(H^J&(Q^H))+W[11]+2304563134&4294967295,P=J+(q<<22&4294967295|q>>>10),q=H+(Q^P&(J^Q))+W[12]+1804603682&4294967295,H=P+(q<<7&4294967295|q>>>25),q=Q+(J^H&(P^J))+W[13]+4254626195&4294967295,Q=H+(q<<12&4294967295|q>>>20),q=J+(P^Q&(H^P))+W[14]+2792965006&4294967295,J=Q+(q<<17&4294967295|q>>>15),q=P+(H^J&(Q^H))+W[15]+1236535329&4294967295,P=J+(q<<22&4294967295|q>>>10),q=H+(J^Q&(P^J))+W[1]+4129170786&4294967295,H=P+(q<<5&4294967295|q>>>27),q=Q+(P^J&(H^P))+W[6]+3225465664&4294967295,Q=H+(q<<9&4294967295|q>>>23),q=J+(H^P&(Q^H))+W[11]+643717713&4294967295,J=Q+(q<<14&4294967295|q>>>18),q=P+(Q^H&(J^Q))+W[0]+3921069994&4294967295,P=J+(q<<20&4294967295|q>>>12),q=H+(J^Q&(P^J))+W[5]+3593408605&4294967295,H=P+(q<<5&4294967295|q>>>27),q=Q+(P^J&(H^P))+W[10]+38016083&4294967295,Q=H+(q<<9&4294967295|q>>>23),q=J+(H^P&(Q^H))+W[15]+3634488961&4294967295,J=Q+(q<<14&4294967295|q>>>18),q=P+(Q^H&(J^Q))+W[4]+3889429448&4294967295,P=J+(q<<20&4294967295|q>>>12),q=H+(J^Q&(P^J))+W[9]+568446438&4294967295,H=P+(q<<5&4294967295|q>>>27),q=Q+(P^J&(H^P))+W[14]+3275163606&4294967295,Q=H+(q<<9&4294967295|q>>>23),q=J+(H^P&(Q^H))+W[3]+4107603335&4294967295,J=Q+(q<<14&4294967295|q>>>18),q=P+(Q^H&(J^Q))+W[8]+1163531501&4294967295,P=J+(q<<20&4294967295|q>>>12),q=H+(J^Q&(P^J))+W[13]+2850285829&4294967295,H=P+(q<<5&4294967295|q>>>27),q=Q+(P^J&(H^P))+W[2]+4243563512&4294967295,Q=H+(q<<9&4294967295|q>>>23),q=J+(H^P&(Q^H))+W[7]+1735328473&4294967295,J=Q+(q<<14&4294967295|q>>>18),q=P+(Q^H&(J^Q))+W[12]+2368359562&4294967295,P=J+(q<<20&4294967295|q>>>12),q=H+(P^J^Q)+W[5]+4294588738&4294967295,H=P+(q<<4&4294967295|q>>>28),q=Q+(H^P^J)+W[8]+2272392833&4294967295,Q=H+(q<<11&4294967295|q>>>21),q=J+(Q^H^P)+W[11]+1839030562&4294967295,J=Q+(q<<16&4294967295|q>>>16),q=P+(J^Q^H)+W[14]+4259657740&4294967295,P=J+(q<<23&4294967295|q>>>9),q=H+(P^J^Q)+W[1]+2763975236&4294967295,H=P+(q<<4&4294967295|q>>>28),q=Q+(H^P^J)+W[4]+1272893353&4294967295,Q=H+(q<<11&4294967295|q>>>21),q=J+(Q^H^P)+W[7]+4139469664&4294967295,J=Q+(q<<16&4294967295|q>>>16),q=P+(J^Q^H)+W[10]+3200236656&4294967295,P=J+(q<<23&4294967295|q>>>9),q=H+(P^J^Q)+W[13]+681279174&4294967295,H=P+(q<<4&4294967295|q>>>28),q=Q+(H^P^J)+W[0]+3936430074&4294967295,Q=H+(q<<11&4294967295|q>>>21),q=J+(Q^H^P)+W[3]+3572445317&4294967295,J=Q+(q<<16&4294967295|q>>>16),q=P+(J^Q^H)+W[6]+76029189&4294967295,P=J+(q<<23&4294967295|q>>>9),q=H+(P^J^Q)+W[9]+3654602809&4294967295,H=P+(q<<4&4294967295|q>>>28),q=Q+(H^P^J)+W[12]+3873151461&4294967295,Q=H+(q<<11&4294967295|q>>>21),q=J+(Q^H^P)+W[15]+530742520&4294967295,J=Q+(q<<16&4294967295|q>>>16),q=P+(J^Q^H)+W[2]+3299628645&4294967295,P=J+(q<<23&4294967295|q>>>9),q=H+(J^(P|~Q))+W[0]+4096336452&4294967295,H=P+(q<<6&4294967295|q>>>26),q=Q+(P^(H|~J))+W[7]+1126891415&4294967295,Q=H+(q<<10&4294967295|q>>>22),q=J+(H^(Q|~P))+W[14]+2878612391&4294967295,J=Q+(q<<15&4294967295|q>>>17),q=P+(Q^(J|~H))+W[5]+4237533241&4294967295,P=J+(q<<21&4294967295|q>>>11),q=H+(J^(P|~Q))+W[12]+1700485571&4294967295,H=P+(q<<6&4294967295|q>>>26),q=Q+(P^(H|~J))+W[3]+2399980690&4294967295,Q=H+(q<<10&4294967295|q>>>22),q=J+(H^(Q|~P))+W[10]+4293915773&4294967295,J=Q+(q<<15&4294967295|q>>>17),q=P+(Q^(J|~H))+W[1]+2240044497&4294967295,P=J+(q<<21&4294967295|q>>>11),q=H+(J^(P|~Q))+W[8]+1873313359&4294967295,H=P+(q<<6&4294967295|q>>>26),q=Q+(P^(H|~J))+W[15]+4264355552&4294967295,Q=H+(q<<10&4294967295|q>>>22),q=J+(H^(Q|~P))+W[6]+2734768916&4294967295,J=Q+(q<<15&4294967295|q>>>17),q=P+(Q^(J|~H))+W[13]+1309151649&4294967295,P=J+(q<<21&4294967295|q>>>11),q=H+(J^(P|~Q))+W[4]+4149444226&4294967295,H=P+(q<<6&4294967295|q>>>26),q=Q+(P^(H|~J))+W[11]+3174756917&4294967295,Q=H+(q<<10&4294967295|q>>>22),q=J+(H^(Q|~P))+W[2]+718787259&4294967295,J=Q+(q<<15&4294967295|q>>>17),q=P+(Q^(J|~H))+W[9]+3951481745&4294967295,z.g[0]=z.g[0]+H&4294967295,z.g[1]=z.g[1]+(J+(q<<21&4294967295|q>>>11))&4294967295,z.g[2]=z.g[2]+J&4294967295,z.g[3]=z.g[3]+Q&4294967295}a.prototype.u=function(z,H){H===void 0&&(H=z.length);for(var P=H-this.blockSize,W=this.B,J=this.h,Q=0;Q<H;){if(J==0)for(;Q<=P;)c(this,z,Q),Q+=this.blockSize;if(typeof z=="string"){for(;Q<H;)if(W[J++]=z.charCodeAt(Q++),J==this.blockSize){c(this,W),J=0;break}}else for(;Q<H;)if(W[J++]=z[Q++],J==this.blockSize){c(this,W),J=0;break}}this.h=J,this.o+=H},a.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var H=1;H<z.length-8;++H)z[H]=0;var P=8*this.o;for(H=z.length-8;H<z.length;++H)z[H]=P&255,P/=256;for(this.u(z),z=Array(16),H=P=0;4>H;++H)for(var W=0;32>W;W+=8)z[P++]=this.g[H]>>>W&255;return z};function f(z,H){var P=w;return Object.prototype.hasOwnProperty.call(P,z)?P[z]:P[z]=H(z)}function E(z,H){this.h=H;for(var P=[],W=!0,J=z.length-1;0<=J;J--){var Q=z[J]|0;W&&Q==H||(P[J]=Q,W=!1)}this.g=P}var w={};function T(z){return-128<=z&&128>z?f(z,function(H){return new E([H|0],0>H?-1:0)}):new E([z|0],0>z?-1:0)}function _(z){if(isNaN(z)||!isFinite(z))return M;if(0>z)return te(_(-z));for(var H=[],P=1,W=0;z>=P;W++)H[W]=z/P|0,P*=4294967296;return new E(H,0)}function I(z,H){if(z.length==0)throw Error("number format error: empty string");if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(z.charAt(0)=="-")return te(I(z.substring(1),H));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=_(Math.pow(H,8)),W=M,J=0;J<z.length;J+=8){var Q=Math.min(8,z.length-J),q=parseInt(z.substring(J,J+Q),H);8>Q?(Q=_(Math.pow(H,Q)),W=W.j(Q).add(_(q))):(W=W.j(P),W=W.add(_(q)))}return W}var M=T(0),V=T(1),F=T(16777216);r=E.prototype,r.m=function(){if(ie(this))return-te(this).m();for(var z=0,H=1,P=0;P<this.g.length;P++){var W=this.i(P);z+=(0<=W?W:4294967296+W)*H,H*=4294967296}return z},r.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(K(this))return"0";if(ie(this))return"-"+te(this).toString(z);for(var H=_(Math.pow(z,6)),P=this,W="";;){var J=De(P,H).g;P=ue(P,J.j(H));var Q=((0<P.g.length?P.g[0]:P.h)>>>0).toString(z);if(P=J,K(P))return Q+W;for(;6>Q.length;)Q="0"+Q;W=Q+W}},r.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function K(z){if(z.h!=0)return!1;for(var H=0;H<z.g.length;H++)if(z.g[H]!=0)return!1;return!0}function ie(z){return z.h==-1}r.l=function(z){return z=ue(this,z),ie(z)?-1:K(z)?0:1};function te(z){for(var H=z.g.length,P=[],W=0;W<H;W++)P[W]=~z.g[W];return new E(P,~z.h).add(V)}r.abs=function(){return ie(this)?te(this):this},r.add=function(z){for(var H=Math.max(this.g.length,z.g.length),P=[],W=0,J=0;J<=H;J++){var Q=W+(this.i(J)&65535)+(z.i(J)&65535),q=(Q>>>16)+(this.i(J)>>>16)+(z.i(J)>>>16);W=q>>>16,Q&=65535,q&=65535,P[J]=q<<16|Q}return new E(P,P[P.length-1]&-2147483648?-1:0)};function ue(z,H){return z.add(te(H))}r.j=function(z){if(K(this)||K(z))return M;if(ie(this))return ie(z)?te(this).j(te(z)):te(te(this).j(z));if(ie(z))return te(this.j(te(z)));if(0>this.l(F)&&0>z.l(F))return _(this.m()*z.m());for(var H=this.g.length+z.g.length,P=[],W=0;W<2*H;W++)P[W]=0;for(W=0;W<this.g.length;W++)for(var J=0;J<z.g.length;J++){var Q=this.i(W)>>>16,q=this.i(W)&65535,ht=z.i(J)>>>16,fe=z.i(J)&65535;P[2*W+2*J]+=q*fe,ye(P,2*W+2*J),P[2*W+2*J+1]+=Q*fe,ye(P,2*W+2*J+1),P[2*W+2*J+1]+=q*ht,ye(P,2*W+2*J+1),P[2*W+2*J+2]+=Q*ht,ye(P,2*W+2*J+2)}for(W=0;W<H;W++)P[W]=P[2*W+1]<<16|P[2*W];for(W=H;W<2*H;W++)P[W]=0;return new E(P,0)};function ye(z,H){for(;(z[H]&65535)!=z[H];)z[H+1]+=z[H]>>>16,z[H]&=65535,H++}function se(z,H){this.g=z,this.h=H}function De(z,H){if(K(H))throw Error("division by zero");if(K(z))return new se(M,M);if(ie(z))return H=De(te(z),H),new se(te(H.g),te(H.h));if(ie(H))return H=De(z,te(H)),new se(te(H.g),H.h);if(30<z.g.length){if(ie(z)||ie(H))throw Error("slowDivide_ only works with positive integers.");for(var P=V,W=H;0>=W.l(z);)P=Ue(P),W=Ue(W);var J=Se(P,1),Q=Se(W,1);for(W=Se(W,2),P=Se(P,2);!K(W);){var q=Q.add(W);0>=q.l(z)&&(J=J.add(P),Q=q),W=Se(W,1),P=Se(P,1)}return H=ue(z,J.j(H)),new se(J,H)}for(J=M;0<=z.l(H);){for(P=Math.max(1,Math.floor(z.m()/H.m())),W=Math.ceil(Math.log(P)/Math.LN2),W=48>=W?1:Math.pow(2,W-48),Q=_(P),q=Q.j(H);ie(q)||0<q.l(z);)P-=W,Q=_(P),q=Q.j(H);K(Q)&&(Q=V),J=J.add(Q),z=ue(z,q)}return new se(J,z)}r.A=function(z){return De(this,z).h},r.and=function(z){for(var H=Math.max(this.g.length,z.g.length),P=[],W=0;W<H;W++)P[W]=this.i(W)&z.i(W);return new E(P,this.h&z.h)},r.or=function(z){for(var H=Math.max(this.g.length,z.g.length),P=[],W=0;W<H;W++)P[W]=this.i(W)|z.i(W);return new E(P,this.h|z.h)},r.xor=function(z){for(var H=Math.max(this.g.length,z.g.length),P=[],W=0;W<H;W++)P[W]=this.i(W)^z.i(W);return new E(P,this.h^z.h)};function Ue(z){for(var H=z.g.length+1,P=[],W=0;W<H;W++)P[W]=z.i(W)<<1|z.i(W-1)>>>31;return new E(P,z.h)}function Se(z,H){var P=H>>5;H%=32;for(var W=z.g.length-P,J=[],Q=0;Q<W;Q++)J[Q]=0<H?z.i(Q+P)>>>H|z.i(Q+P+1)<<32-H:z.i(Q+P);return new E(J,z.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Gx=a,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.A,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=_,E.fromString=I,ho=E}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qx,ru,Yx,ef,g1,Xx,Wx,Qx;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,S,R){return y==Array.prototype||y==Object.prototype||(y[S]=R.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var S=0;S<y.length;++S){var R=y[S];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var a=t(this);function c(y,S){if(S)e:{var R=a;y=y.split(".");for(var U=0;U<y.length-1;U++){var oe=y[U];if(!(oe in R))break e;R=R[oe]}y=y[y.length-1],U=R[y],S=S(U),S!=U&&S!=null&&e(R,y,{configurable:!0,writable:!0,value:S})}}function f(y,S){y instanceof String&&(y+="");var R=0,U=!1,oe={next:function(){if(!U&&R<y.length){var me=R++;return{value:S(me,y[me]),done:!1}}return U=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}c("Array.prototype.values",function(y){return y||function(){return f(this,function(S,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var E=E||{},w=this||self;function T(y){var S=typeof y;return S=S!="object"?S:y?Array.isArray(y)?"array":S:"null",S=="array"||S=="object"&&typeof y.length=="number"}function _(y){var S=typeof y;return S=="object"&&y!=null||S=="function"}function I(y,S,R){return y.call.apply(y.bind,arguments)}function M(y,S,R){if(!y)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,U),y.apply(S,oe)}}return function(){return y.apply(S,arguments)}}function V(y,S,R){return V=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:M,V.apply(null,arguments)}function F(y,S){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),y.apply(this,U)}}function K(y,S){function R(){}R.prototype=S.prototype,y.aa=S.prototype,y.prototype=new R,y.prototype.constructor=y,y.Qb=function(U,oe,me){for(var ze=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)ze[Nt-2]=arguments[Nt];return S.prototype[oe].apply(U,ze)}}function ie(y){const S=y.length;if(0<S){const R=Array(S);for(let U=0;U<S;U++)R[U]=y[U];return R}return[]}function te(y,S){for(let R=1;R<arguments.length;R++){const U=arguments[R];if(T(U)){const oe=y.length||0,me=U.length||0;y.length=oe+me;for(let ze=0;ze<me;ze++)y[oe+ze]=U[ze]}else y.push(U)}}class ue{constructor(S,R){this.i=S,this.j=R,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function ye(y){return/^[\s\xa0]*$/.test(y)}function se(){var y=w.navigator;return y&&(y=y.userAgent)?y:""}function De(y){return De[" "](y),y}De[" "]=function(){};var Ue=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Se(y,S,R){for(const U in y)S.call(R,y[U],U,y)}function z(y,S){for(const R in y)S.call(void 0,y[R],R,y)}function H(y){const S={};for(const R in y)S[R]=y[R];return S}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(y,S){let R,U;for(let oe=1;oe<arguments.length;oe++){U=arguments[oe];for(R in U)y[R]=U[R];for(let me=0;me<P.length;me++)R=P[me],Object.prototype.hasOwnProperty.call(U,R)&&(y[R]=U[R])}}function J(y){var S=1;y=y.split(":");const R=[];for(;0<S&&y.length;)R.push(y.shift()),S--;return y.length&&R.push(y.join(":")),R}function Q(y){w.setTimeout(()=>{throw y},0)}function q(){var y=Te;let S=null;return y.g&&(S=y.g,y.g=y.g.next,y.g||(y.h=null),S.next=null),S}class ht{constructor(){this.h=this.g=null}add(S,R){const U=fe.get();U.set(S,R),this.h?this.h.next=U:this.g=U,this.h=U}}var fe=new ue(()=>new be,y=>y.reset());class be{constructor(){this.next=this.g=this.h=null}set(S,R){this.h=S,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,Ve=!1,Te=new ht,Y=()=>{const y=w.Promise.resolve(void 0);ke=()=>{y.then(xe)}};var xe=()=>{for(var y;y=q();){try{y.h.call(y.g)}catch(R){Q(R)}var S=fe;S.j(y),100>S.h&&(S.h++,y.next=S.g,S.g=y)}Ve=!1};function Me(){this.s=this.s,this.C=this.C}Me.prototype.s=!1,Me.prototype.ma=function(){this.s||(this.s=!0,this.N())},Me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(y,S){this.type=y,this.g=this.target=S,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var y=!1,S=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const R=()=>{};w.addEventListener("test",R,S),w.removeEventListener("test",R,S)}catch{}return y}();function it(y,S){if(je.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var R=this.type=y.type,U=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=S,S=y.relatedTarget){if(Ue){e:{try{De(S.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(S=null)}}else R=="mouseover"?S=y.fromElement:R=="mouseout"&&(S=y.toElement);this.relatedTarget=S,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Ie[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&it.aa.h.call(this)}}K(it,je);var Ie={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Ht(y,S,R,U,oe){this.listener=y,this.proxy=null,this.src=S,this.type=R,this.capture=!!U,this.ha=oe,this.key=++Qe,this.da=this.fa=!1}function xt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Bt(y){this.src=y,this.g={},this.h=0}Bt.prototype.add=function(y,S,R,U,oe){var me=y.toString();y=this.g[me],y||(y=this.g[me]=[],this.h++);var ze=ft(y,S,U,oe);return-1<ze?(S=y[ze],R||(S.fa=!1)):(S=new Ht(S,this.src,me,!!U,oe),S.fa=R,y.push(S)),S};function xi(y,S){var R=S.type;if(R in y.g){var U=y.g[R],oe=Array.prototype.indexOf.call(U,S,void 0),me;(me=0<=oe)&&Array.prototype.splice.call(U,oe,1),me&&(xt(S),y.g[R].length==0&&(delete y.g[R],y.h--))}}function ft(y,S,R,U){for(var oe=0;oe<y.length;++oe){var me=y[oe];if(!me.da&&me.listener==S&&me.capture==!!R&&me.ha==U)return oe}return-1}var zi="closure_lm_"+(1e6*Math.random()|0),si={};function Hi(y,S,R,U,oe){if(Array.isArray(S)){for(var me=0;me<S.length;me++)Hi(y,S[me],R,U,oe);return null}return R=Ca(R),y&&y[sn]?y.K(S,R,_(U)?!!U.capture:!1,oe):In(y,S,R,!1,U,oe)}function In(y,S,R,U,oe,me){if(!S)throw Error("Invalid event type");var ze=_(oe)?!!oe.capture:!!oe,Nt=Ta(y);if(Nt||(y[zi]=Nt=new Bt(y)),R=Nt.add(S,R,U,ze,me),R.proxy)return R;if(U=jt(),R.proxy=U,U.src=y,U.listener=R,y.addEventListener)Be||(oe=ze),oe===void 0&&(oe=!1),y.addEventListener(S.toString(),U,oe);else if(y.attachEvent)y.attachEvent(Ge(S.toString()),U);else if(y.addListener&&y.removeListener)y.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function jt(){function y(R){return S.call(y.src,y.listener,R)}const S=va;return y}function yt(y,S,R,U,oe){if(Array.isArray(S))for(var me=0;me<S.length;me++)yt(y,S[me],R,U,oe);else U=_(U)?!!U.capture:!!U,R=Ca(R),y&&y[sn]?(y=y.i,S=String(S).toString(),S in y.g&&(me=y.g[S],R=ft(me,R,U,oe),-1<R&&(xt(me[R]),Array.prototype.splice.call(me,R,1),me.length==0&&(delete y.g[S],y.h--)))):y&&(y=Ta(y))&&(S=y.g[S.toString()],y=-1,S&&(y=ft(S,R,U,oe)),(R=-1<y?S[y]:null)&&Nr(R))}function Nr(y){if(typeof y!="number"&&y&&!y.da){var S=y.src;if(S&&S[sn])xi(S.i,y);else{var R=y.type,U=y.proxy;S.removeEventListener?S.removeEventListener(R,U,y.capture):S.detachEvent?S.detachEvent(Ge(R),U):S.addListener&&S.removeListener&&S.removeListener(U),(R=Ta(S))?(xi(R,y),R.h==0&&(R.src=null,S[zi]=null)):xt(y)}}}function Ge(y){return y in si?si[y]:si[y]="on"+y}function va(y,S){if(y.da)y=!0;else{S=new it(S,this);var R=y.listener,U=y.ha||y.src;y.fa&&Nr(y),y=R.call(U,S)}return y}function Ta(y){return y=y[zi],y instanceof Bt?y:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ca(y){return typeof y=="function"?y:(y[vn]||(y[vn]=function(S){return y.handleEvent(S)}),y[vn])}function Kt(){Me.call(this),this.i=new Bt(this),this.M=this,this.F=null}K(Kt,Me),Kt.prototype[sn]=!0,Kt.prototype.removeEventListener=function(y,S,R,U){yt(this,y,S,R,U)};function Hn(y,S){var R,U=y.F;if(U)for(R=[];U;U=U.F)R.push(U);if(y=y.M,U=S.type||S,typeof S=="string")S=new je(S,y);else if(S instanceof je)S.target=S.target||y;else{var oe=S;S=new je(U,y),W(S,oe)}if(oe=!0,R)for(var me=R.length-1;0<=me;me--){var ze=S.g=R[me];oe=di(ze,U,!0,S)&&oe}if(ze=S.g=y,oe=di(ze,U,!0,S)&&oe,oe=di(ze,U,!1,S)&&oe,R)for(me=0;me<R.length;me++)ze=S.g=R[me],oe=di(ze,U,!1,S)&&oe}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var y=this.i,S;for(S in y.g){for(var R=y.g[S],U=0;U<R.length;U++)xt(R[U]);delete y.g[S],y.h--}}this.F=null},Kt.prototype.K=function(y,S,R,U){return this.i.add(String(y),S,!1,R,U)},Kt.prototype.L=function(y,S,R,U){return this.i.add(String(y),S,!0,R,U)};function di(y,S,R,U){if(S=y.i.g[String(S)],!S)return!0;S=S.concat();for(var oe=!0,me=0;me<S.length;++me){var ze=S[me];if(ze&&!ze.da&&ze.capture==R){var Nt=ze.listener,_n=ze.ha||ze.src;ze.fa&&xi(y.i,ze),oe=Nt.call(_n,U)!==!1&&oe}}return oe&&!U.defaultPrevented}function Kn(y,S,R){if(typeof y=="function")R&&(y=V(y,R));else if(y&&typeof y.handleEvent=="function")y=V(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:w.setTimeout(y,S||0)}function Sa(y){y.g=Kn(()=>{y.g=null,y.i&&(y.i=!1,Sa(y))},y.l);const S=y.h;y.h=null,y.m.apply(null,S)}class ba extends Me{constructor(S,R){super(),this.m=S,this.l=R,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Sa(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(y){Me.call(this),this.h=y,this.g={}}K(Ps,Me);var $t=[];function Le(y){Se(y.g,function(S,R){this.g.hasOwnProperty(R)&&Nr(S)},y),y.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),Le(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=w.JSON.stringify,wt=w.JSON.parse,vt=class{stringify(y){return w.JSON.stringify(y,void 0)}parse(y){return w.JSON.parse(y,void 0)}};function Zr(){}Zr.prototype.h=null;function Ia(y){return y.h||(y.h=y.i())}function wo(){}var mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ri(){je.call(this,"d")}K(Ri,je);function er(){je.call(this,"c")}K(er,je);var Gi={},Zn=null;function fs(){return Zn=Zn||new Kt}Gi.La="serverreachability";function Pn(y){je.call(this,Gi.La,y)}K(Pn,je);function qi(y){const S=fs();Hn(S,new Pn(S))}Gi.STAT_EVENT="statevent";function Jr(y,S){je.call(this,Gi.STAT_EVENT,y),this.stat=S}K(Jr,je);function Gt(y){const S=fs();Hn(S,new Jr(S,y))}Gi.Ma="timingevent";function nl(y,S){je.call(this,Gi.Ma,y),this.size=S}K(nl,je);function Di(y,S){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){y()},S)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function ai(y,S,R,U,oe,me){y.info(function(){if(y.g)if(me)for(var ze="",Nt=me.split("&"),_n=0;_n<Nt.length;_n++){var Rt=Nt[_n].split("=");if(1<Rt.length){var un=Rt[0];Rt=Rt[1];var bn=un.split("_");ze=2<=bn.length&&bn[1]=="type"?ze+(un+"="+Rt+"&"):ze+(un+"=redacted&")}}else ze=null;else ze=me;return"XMLHTTP REQ ("+U+") [attempt "+oe+"]: "+S+`
`+R+`
`+ze})}function Dr(y,S,R,U,oe,me,ze){y.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+oe+"]: "+S+`
`+R+`
`+me+" "+ze})}function Gn(y,S,R,U){y.info(function(){return"XMLHTTP TEXT ("+S+"): "+pn(y,R)+(U?" "+U:"")})}function He(y,S){y.info(function(){return"TIMEOUT: "+S})}Rr.prototype.info=function(){};function pn(y,S){if(!y.g)return S;if(!S)return null;try{var R=JSON.parse(S);if(R){for(y=0;y<R.length;y++)if(Array.isArray(R[y])){var U=R[y];if(!(2>U.length)){var oe=U[1];if(Array.isArray(oe)&&!(1>oe.length)){var me=oe[0];if(me!="noop"&&me!="stop"&&me!="close")for(var ze=1;ze<oe.length;ze++)oe[ze]=""}}}}return mn(R)}catch{return S}}var Nn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tr;function $r(){}K($r,Zr),$r.prototype.g=function(){return new XMLHttpRequest},$r.prototype.i=function(){return{}},tr=new $r;function Yi(y,S,R,U){this.j=y,this.i=S,this.l=R,this.R=U||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oi}function Oi(){this.i=null,this.g="",this.h=!1}var ds={},ks={};function kn(y,S,R){y.L=1,y.v=fn(at(S)),y.m=R,y.P=!0,yn(y,null)}function yn(y,S){y.F=Date.now(),qt(y),y.A=at(y.v);var R=y.A,U=y.R;Array.isArray(U)||(U=[String(U)]),an(R.i,"t",U),y.C=0,R=y.j.J,y.h=new Oi,y.g=ol(y.j,R?S:null,!y.m),0<y.O&&(y.M=new ba(V(y.Y,y,y.g),y.O)),S=y.U,R=y.g,U=y.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&($t[0]=oe.toString()),oe=$t);for(var me=0;me<oe.length;me++){var ze=Hi(R,oe[me],U||S.handleEvent,!1,S.h||S);if(!ze)break;S.g[ze.key]=ze}S=y.H?H(y.H):{},y.m?(y.u||(y.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,S)):(y.u="GET",y.g.ea(y.A,y.u,null,S)),qi(),ai(y.i,y.u,y.A,y.l,y.R,y.m)}Yi.prototype.ca=function(y){y=y.target;const S=this.M;S&&ar(y)==3?S.j():this.Y(y)},Yi.prototype.Y=function(y){try{if(y==this.g)e:{const bn=ar(this.g);var S=this.g.Ba();const Un=this.g.Z();if(!(3>bn)&&(bn!=3||this.g&&(this.h.h||this.g.oa()||rl(this.g)))){this.J||bn!=4||S==7||(S==8||0>=Un?qi(3):qi(2)),Ae(this);var R=this.g.Z();this.X=R;t:if(Ft(this)){var U=rl(this.g);y="";var oe=U.length,me=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ct(this),Xi(this);var ze="";break t}this.h.i=new w.TextDecoder}for(S=0;S<oe;S++)this.h.h=!0,y+=this.h.i.decode(U[S],{stream:!(me&&S==oe-1)});U.length=0,this.h.g+=y,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=R==200,Dr(this.i,this.u,this.A,this.l,this.R,bn,R),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,_n=this.g;if((Nt=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ye(Nt)){var Rt=Nt;break t}}Rt=null}if(R=Rt)Gn(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jn(this,R);else{this.o=!1,this.s=3,Gt(12),Ct(this),Xi(this);break e}}if(this.P){R=!0;let $n;for(;!this.J&&this.C<ze.length;)if($n=es(this,ze),$n==ks){bn==4&&(this.s=4,Gt(14),R=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if($n==ds){this.s=4,Gt(15),Gn(this.i,this.l,ze,"[Invalid Chunk]"),R=!1;break}else Gn(this.i,this.l,$n,null),Jn(this,$n);if(Ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bn!=4||ze.length!=0||this.h.h||(this.s=1,Gt(16),R=!1),this.o=this.o&&R,!R)Gn(this.i,this.l,ze,"[Invalid Chunked Response]"),Ct(this),Xi(this);else if(0<ze.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),rs(un),un.M=!0,Gt(11))}}else Gn(this.i,this.l,ze,null),Jn(this,ze);bn==4&&Ct(this),this.o&&!this.J&&(bn==4?cn(this.j,this):(this.o=!1,qt(this)))}else Yt(this.g),R==400&&0<ze.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Ct(this),Xi(this)}}}catch{}finally{}};function Ft(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function es(y,S){var R=y.C,U=S.indexOf(`
`,R);return U==-1?ks:(R=Number(S.substring(R,U)),isNaN(R)?ds:(U+=1,U+R>S.length?ks:(S=S.slice(U,U+R),y.C=U+R,S)))}Yi.prototype.cancel=function(){this.J=!0,Ct(this)};function qt(y){y.S=Date.now()+y.I,Bs(y,y.I)}function Bs(y,S){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Di(V(y.ba,y),S)}function Ae(y){y.B&&(w.clearTimeout(y.B),y.B=null)}Yi.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(He(this.i,this.A),this.L!=2&&(qi(),Gt(17)),Ct(this),this.s=2,Xi(this)):Bs(this,this.S-y)};function Xi(y){y.j.G==0||y.J||cn(y.j,y)}function Ct(y){Ae(y);var S=y.M;S&&typeof S.ma=="function"&&S.ma(),y.M=null,Le(y.U),y.g&&(S=y.g,y.g=null,S.abort(),S.ma())}function Jn(y,S){try{var R=y.j;if(R.G!=0&&(R.g==y||Or(R.h,y))){if(!y.K&&Or(R.h,y)&&R.G==3){try{var U=R.Da.g.parse(S)}catch{U=null}if(Array.isArray(U)&&U.length==3){var oe=U;if(oe[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<y.F)Es(R),Ra(R);else break e;To(R),Gt(18)}}else R.za=oe[1],0<R.za-R.T&&37500>oe[2]&&R.F&&R.v==0&&!R.C&&(R.C=Di(V(R.Za,R),6e3));if(1>=Et(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Ai(R,11)}else if((y.K||R.g==y)&&Es(R),!ye(S))for(oe=R.Da.g.parse(S),S=0;S<oe.length;S++){let Rt=oe[S];if(R.T=Rt[0],Rt=Rt[1],R.G==2)if(Rt[0]=="c"){R.K=Rt[1],R.ia=Rt[2];const un=Rt[3];un!=null&&(R.la=un,R.j.info("VER="+R.la));const bn=Rt[4];bn!=null&&(R.Aa=bn,R.j.info("SVER="+R.Aa));const Un=Rt[5];Un!=null&&typeof Un=="number"&&0<Un&&(U=1.5*Un,R.L=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const $n=y.g;if($n){const Xn=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xn){var me=U.h;me.g||Xn.indexOf("spdy")==-1&&Xn.indexOf("quic")==-1&&Xn.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Mr(me,me.h),me.h=null))}if(U.D){const Co=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(U.ya=Co,Fe(U.I,U.D,Co))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-y.F,R.j.info("Handshake RTT: "+R.R+"ms")),U=R;var ze=y;if(U.qa=Je(U,U.J?U.ia:null,U.W),ze.K){Mi(U.h,ze);var Nt=ze,_n=U.L;_n&&(Nt.I=_n),Nt.B&&(Ae(Nt),qt(Nt)),U.g=ze}else al(U);0<R.i.length&&ct(R)}else Rt[0]!="stop"&&Rt[0]!="close"||Ai(R,7);else R.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Ai(R,7):or(R):Rt[0]!="noop"&&R.l&&R.l.ta(Rt),R.v=0)}}qi(4)}catch{}}var uc=class{constructor(y,S){this.g=y,this.map=S}};function It(y){this.l=y||10,w.PerformanceNavigationTiming?(y=w.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function St(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Et(y){return y.h?1:y.g?y.g.size:0}function Or(y,S){return y.h?y.h==S:y.g?y.g.has(S):!1}function Mr(y,S){y.g?y.g.add(S):y.h=S}function Mi(y,S){y.h&&y.h==S?y.h=null:y.g&&y.g.has(S)&&y.g.delete(S)}It.prototype.cancel=function(){if(this.i=Lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Lt(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let S=y.i;for(const R of y.g.values())S=S.concat(R.D);return S}return ie(y.i)}function mr(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(T(y)){for(var S=[],R=y.length,U=0;U<R;U++)S.push(y[U]);return S}S=[],R=0;for(U in y)S[R++]=y[U];return S}function hc(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(T(y)||typeof y=="string"){var S=[];y=y.length;for(var R=0;R<y;R++)S.push(R);return S}S=[],R=0;for(const U in y)S[R++]=U;return S}}}function en(y,S){if(y.forEach&&typeof y.forEach=="function")y.forEach(S,void 0);else if(T(y)||typeof y=="string")Array.prototype.forEach.call(y,S,void 0);else for(var R=hc(y),U=mr(y),oe=U.length,me=0;me<oe;me++)S.call(void 0,U[me],R&&R[me],y)}var nr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Na(y,S){if(y){y=y.split("&");for(var R=0;R<y.length;R++){var U=y[R].indexOf("="),oe=null;if(0<=U){var me=y[R].substring(0,U);oe=y[R].substring(U+1)}else me=y[R];S(me,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Li(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Li){this.h=y.h,En(this,y.j),this.o=y.o,this.g=y.g,le(this,y.s),this.l=y.l;var S=y.i,R=new rr;R.i=S.i,S.g&&(R.g=new Map(S.g),R.h=S.h),j(this,R),this.m=y.m}else y&&(S=String(y).match(nr))?(this.h=!1,En(this,S[1]||"",!0),this.o=qn(S[2]||""),this.g=qn(S[3]||"",!0),le(this,S[4]),this.l=qn(S[5]||"",!0),j(this,S[6]||"",!0),this.m=qn(S[7]||"")):(this.h=!1,this.i=new rr(null,this.h))}Li.prototype.toString=function(){var y=[],S=this.j;S&&y.push(ir(S,gi,!0),":");var R=this.g;return(R||S=="file")&&(y.push("//"),(S=this.o)&&y.push(ir(S,gi,!0),"@"),y.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&y.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&y.push("/"),y.push(ir(R,R.charAt(0)=="/"?tn:Ze,!0))),(R=this.i.toString())&&y.push("?",R),(R=this.m)&&y.push("#",ir(R,fc)),y.join("")};function at(y){return new Li(y)}function En(y,S,R){y.j=R?qn(S,!0):S,y.j&&(y.j=y.j.replace(/:$/,""))}function le(y,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);y.s=S}else y.s=null}function j(y,S,R){S instanceof rr?(y.i=S,sr(y.i,y.h)):(R||(S=ir(S,il)),y.i=new rr(S,y.h))}function Fe(y,S,R){y.i.set(S,R)}function fn(y){return Fe(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function qn(y,S){return y?S?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ir(y,S,R){return typeof y=="string"?(y=encodeURI(y).replace(S,vo),R&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function vo(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var gi=/[#\/\?@]/g,Ze=/[#\?:]/g,tn=/[#\?]/g,il=/[#\?@]/g,fc=/#/g;function rr(y,S){this.h=this.g=null,this.i=y||null,this.j=!!S}function _i(y){y.g||(y.g=new Map,y.h=0,y.i&&Na(y.i,function(S,R){y.add(decodeURIComponent(S.replace(/\+/g," ")),R)}))}r=rr.prototype,r.add=function(y,S){_i(this),this.i=null,y=Wi(this,y);var R=this.g.get(y);return R||this.g.set(y,R=[]),R.push(S),this.h+=1,this};function gs(y,S){_i(y),S=Wi(y,S),y.g.has(S)&&(y.i=null,y.h-=y.g.get(S).length,y.g.delete(S))}function ts(y,S){return _i(y),S=Wi(y,S),y.g.has(S)}r.forEach=function(y,S){_i(this),this.g.forEach(function(R,U){R.forEach(function(oe){y.call(S,oe,U,this)},this)},this)},r.na=function(){_i(this);const y=Array.from(this.g.values()),S=Array.from(this.g.keys()),R=[];for(let U=0;U<S.length;U++){const oe=y[U];for(let me=0;me<oe.length;me++)R.push(S[U])}return R},r.V=function(y){_i(this);let S=[];if(typeof y=="string")ts(this,y)&&(S=S.concat(this.g.get(Wi(this,y))));else{y=Array.from(this.g.values());for(let R=0;R<y.length;R++)S=S.concat(y[R])}return S},r.set=function(y,S){return _i(this),this.i=null,y=Wi(this,y),ts(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[S]),this.h+=1,this},r.get=function(y,S){return y?(y=this.V(y),0<y.length?String(y[0]):S):S};function an(y,S,R){gs(y,S),0<R.length&&(y.i=null,y.g.set(Wi(y,S),ie(R)),y.h+=R.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],S=Array.from(this.g.keys());for(var R=0;R<S.length;R++){var U=S[R];const me=encodeURIComponent(String(U)),ze=this.V(U);for(U=0;U<ze.length;U++){var oe=me;ze[U]!==""&&(oe+="="+encodeURIComponent(String(ze[U]))),y.push(oe)}}return this.i=y.join("&")};function Wi(y,S){return S=String(S),y.j&&(S=S.toLowerCase()),S}function sr(y,S){S&&!y.j&&(_i(y),y.i=null,y.g.forEach(function(R,U){var oe=U.toLowerCase();U!=oe&&(gs(this,U),an(this,oe,R))},y)),y.j=S}function et(y,S){const R=new Rr;if(w.Image){const U=new Image;U.onload=F(nt,R,"TestLoadImage: loaded",!0,S,U),U.onerror=F(nt,R,"TestLoadImage: error",!1,S,U),U.onabort=F(nt,R,"TestLoadImage: abort",!1,S,U),U.ontimeout=F(nt,R,"TestLoadImage: timeout",!1,S,U),w.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=y}else S(!1)}function Us(y,S){const R=new Rr,U=new AbortController,oe=setTimeout(()=>{U.abort(),nt(R,"TestPingServer: timeout",!1,S)},1e4);fetch(y,{signal:U.signal}).then(me=>{clearTimeout(oe),me.ok?nt(R,"TestPingServer: ok",!0,S):nt(R,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(oe),nt(R,"TestPingServer: error",!1,S)})}function nt(y,S,R,U,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),U(R)}catch{}}function xn(){this.g=new vt}function Lr(y,S,R){const U=R||"";try{en(y,function(oe,me){let ze=oe;_(oe)&&(ze=mn(oe)),S.push(U+me+"="+encodeURIComponent(ze))})}catch(oe){throw S.push(U+"type="+encodeURIComponent("_badmap")),oe}}function Pr(y){this.l=y.Ub||null,this.j=y.eb||!1}K(Pr,Zr),Pr.prototype.g=function(){return new kr(this.l,this.j)},Pr.prototype.i=function(y){return function(){return y}}({});function kr(y,S){Kt.call(this),this.D=y,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(kr,Kt),r=kr.prototype,r.open=function(y,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=S,this.readyState=1,Pi(this)},r.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(S.body=y),(this.D||w).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},r.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pr(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function pr(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}r.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var S=y.value?y.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!y.done}))&&(this.response=this.responseText+=S)}y.done?Br(this):Pi(this),this.readyState==3&&pr(this)}},r.Ra=function(y){this.g&&(this.response=this.responseText=y,Br(this))},r.Qa=function(y){this.g&&(this.response=y,Br(this))},r.ga=function(){this.g&&Br(this)};function Br(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Pi(y)}r.setRequestHeader=function(y,S){this.u.append(y,S)},r.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],S=this.h.entries();for(var R=S.next();!R.done;)R=R.value,y.push(R[0]+": "+R[1]),R=S.next();return y.join(`\r
`)};function Pi(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ns(y){let S="";return Se(y,function(R,U){S+=U,S+=":",S+=R,S+=`\r
`}),S}function Cn(y,S,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=ns(R),typeof y=="string"?R!=null&&encodeURIComponent(String(R)):Fe(y,S,R))}function zt(y){Kt.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(zt,Kt);var Ur=/^https?$/i,yr=["POST","PUT"];r=zt.prototype,r.Ha=function(y){this.J=y},r.ea=function(y,S,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);S=S?S.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tr.g(),this.v=this.o?Ia(this.o):Ia(tr),this.g.onreadystatechange=V(this.Ea,this);try{this.B=!0,this.g.open(S,String(y),!0),this.B=!1}catch(me){oi(this,me);return}if(y=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var oe in U)R.set(oe,U[oe]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const me of U.keys())R.set(me,U.get(me));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(me=>me.toLowerCase()=="content-type"),oe=w.FormData&&y instanceof w.FormData,!(0<=Array.prototype.indexOf.call(yr,S,void 0))||U||oe||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,ze]of R)this.g.setRequestHeader(me,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fs(this),this.u=!0,this.g.send(y),this.u=!1}catch(me){oi(this,me)}};function oi(y,S){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=S,y.m=5,Vs(y),Er(y)}function Vs(y){y.A||(y.A=!0,Hn(y,"complete"),Hn(y,"error"))}r.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Hn(this,"complete"),Hn(this,"abort"),Er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),zt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?js(this):this.bb())},r.bb=function(){js(this)};function js(y){if(y.h&&typeof E<"u"&&(!y.v[1]||ar(y)!=4||y.Z()!=2)){if(y.u&&ar(y)==4)Kn(y.Ea,0,y);else if(Hn(y,"readystatechange"),ar(y)==4){y.h=!1;try{const ze=y.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var R;if(!(R=S)){var U;if(U=ze===0){var oe=String(y.D).match(nr)[1]||null;!oe&&w.self&&w.self.location&&(oe=w.self.location.protocol.slice(0,-1)),U=!Ur.test(oe?oe.toLowerCase():"")}R=U}if(R)Hn(y,"complete"),Hn(y,"success");else{y.m=6;try{var me=2<ar(y)?y.g.statusText:""}catch{me=""}y.l=me+" ["+y.Z()+"]",Vs(y)}}finally{Er(y)}}}}function Er(y,S){if(y.g){Fs(y);const R=y.g,U=y.v[0]?()=>{}:null;y.g=null,y.v=null,S||Hn(y,"ready");try{R.onreadystatechange=U}catch{}}}function Fs(y){y.I&&(w.clearTimeout(y.I),y.I=null)}r.isActive=function(){return!!this.g};function ar(y){return y.g?y.g.readyState:0}r.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(y){if(this.g){var S=this.g.responseText;return y&&S.indexOf(y)==0&&(S=S.substring(y.length)),wt(S)}};function rl(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Yt(y){const S={};y=(y.g&&2<=ar(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<y.length;U++){if(ye(y[U]))continue;var R=J(y[U]);const oe=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const me=S[oe]||[];S[oe]=me,me.push(R)}z(S,function(U){return U.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(y,S,R){return R&&R.internalChannelParams&&R.internalChannelParams[y]||S}function is(y){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ms("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ms("baseRetryDelayMs",5e3,y),this.cb=ms("retryDelaySeedMs",1e4,y),this.Wa=ms("forwardChannelMaxRetries",2,y),this.wa=ms("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new It(y&&y.concurrentRequestLimit),this.Da=new xn,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=is.prototype,r.la=8,r.G=1,r.connect=function(y,S,R,U){Gt(0),this.W=y,this.H=S||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.I=Je(this,null,this.W),ct(this)};function or(y){if(ge(y),y.G==3){var S=y.U++,R=at(y.I);if(Fe(R,"SID",y.K),Fe(R,"RID",S),Fe(R,"TYPE","terminate"),ys(y,R),S=new Yi(y,y.j,S),S.L=2,S.v=fn(at(R)),R=!1,w.navigator&&w.navigator.sendBeacon)try{R=w.navigator.sendBeacon(S.v.toString(),"")}catch{}!R&&w.Image&&(new Image().src=S.v,R=!0),R||(S.g=ol(S.j,null),S.g.ea(S.v)),S.F=Date.now(),qt(S)}Xt(y)}function Ra(y){y.g&&(rs(y),y.g.cancel(),y.g=null)}function ge(y){Ra(y),y.u&&(w.clearTimeout(y.u),y.u=null),Es(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&w.clearTimeout(y.s),y.s=null)}function ct(y){if(!St(y.h)&&!y.s){y.s=!0;var S=y.Ga;ke||Y(),Ve||(ke(),Ve=!0),Te.add(S,y),y.B=0}}function Yn(y,S){return Et(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=S.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Di(V(y.Ga,y,S),xs(y,y.B)),y.B++,!0)}r.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const oe=new Yi(this,this.j,y);let me=this.o;if(this.S&&(me?(me=H(me),W(me,this.S)):me=this.S),this.m!==null||this.O||(oe.H=me,me=null),this.P)e:{for(var S=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(S+=U,4096<S){S=R;break e}if(S===4096||R===this.i.length-1){S=R+1;break e}}S=1e3}else S=1e3;S=sl(this,oe,S),R=at(this.I),Fe(R,"RID",y),Fe(R,"CVER",22),this.D&&Fe(R,"X-HTTP-Session-Id",this.D),ys(this,R),me&&(this.O?S="headers="+encodeURIComponent(String(ns(me)))+"&"+S:this.m&&Cn(R,this.m,me)),Mr(this.h,oe),this.Ua&&Fe(R,"TYPE","init"),this.P?(Fe(R,"$req",S),Fe(R,"SID","null"),oe.T=!0,kn(oe,R,null)):kn(oe,R,S),this.G=2}}else this.G==3&&(y?ps(this,y):this.i.length==0||St(this.h)||ps(this))};function ps(y,S){var R;S?R=S.l:R=y.U++;const U=at(y.I);Fe(U,"SID",y.K),Fe(U,"RID",R),Fe(U,"AID",y.T),ys(y,U),y.m&&y.o&&Cn(U,y.m,y.o),R=new Yi(y,y.j,R,y.B+1),y.m===null&&(R.H=y.o),S&&(y.i=S.D.concat(y.i)),S=sl(y,R,1e3),R.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Mr(y.h,R),kn(R,U,S)}function ys(y,S){y.H&&Se(y.H,function(R,U){Fe(S,U,R)}),y.l&&en({},function(R,U){Fe(S,U,R)})}function sl(y,S,R){R=Math.min(y.i.length,R);var U=y.l?V(y.l.Na,y.l,y):null;e:{var oe=y.i;let me=-1;for(;;){const ze=["count="+R];me==-1?0<R?(me=oe[0].g,ze.push("ofs="+me)):me=0:ze.push("ofs="+me);let Nt=!0;for(let _n=0;_n<R;_n++){let Rt=oe[_n].g;const un=oe[_n].map;if(Rt-=me,0>Rt)me=Math.max(0,oe[_n].g-100),Nt=!1;else try{Lr(un,ze,"req"+Rt+"_")}catch{U&&U(un)}}if(Nt){U=ze.join("&");break e}}}return y=y.i.splice(0,R),S.D=y,U}function al(y){if(!y.g&&!y.u){y.Y=1;var S=y.Fa;ke||Y(),Ve||(ke(),Ve=!0),Te.add(S,y),y.v=0}}function To(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Di(V(y.Fa,y),xs(y,y.v)),y.v++,!0)}r.Fa=function(){if(this.u=null,Sn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Di(V(this.ab,this),y)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Ra(this),Sn(this))};function rs(y){y.A!=null&&(w.clearTimeout(y.A),y.A=null)}function Sn(y){y.g=new Yi(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var S=at(y.qa);Fe(S,"RID","rpc"),Fe(S,"SID",y.K),Fe(S,"AID",y.T),Fe(S,"CI",y.F?"0":"1"),!y.F&&y.ja&&Fe(S,"TO",y.ja),Fe(S,"TYPE","xmlhttp"),ys(y,S),y.m&&y.o&&Cn(S,y.m,y.o),y.L&&(y.g.I=y.L);var R=y.g;y=y.ia,R.L=1,R.v=fn(at(S)),R.m=null,R.P=!0,yn(R,y)}r.Za=function(){this.C!=null&&(this.C=null,Ra(this),To(this),Gt(19))};function Es(y){y.C!=null&&(w.clearTimeout(y.C),y.C=null)}function cn(y,S){var R=null;if(y.g==S){Es(y),rs(y),y.g=null;var U=2}else if(Or(y.h,S))R=S.D,Mi(y.h,S),U=1;else return;if(y.G!=0){if(S.o)if(U==1){R=S.m?S.m.length:0,S=Date.now()-S.F;var oe=y.B;U=fs(),Hn(U,new nl(U,R)),ct(y)}else al(y);else if(oe=S.s,oe==3||oe==0&&0<S.X||!(U==1&&Yn(y,S)||U==2&&To(y)))switch(R&&0<R.length&&(S=y.h,S.i=S.i.concat(R)),oe){case 1:Ai(y,5);break;case 4:Ai(y,10);break;case 3:Ai(y,6);break;default:Ai(y,2)}}}function xs(y,S){let R=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(R*=2),R*S}function Ai(y,S){if(y.j.info("Error code "+S),S==2){var R=V(y.fb,y),U=y.Xa;const oe=!U;U=new Li(U||"//www.google.com/images/cleardot.gif"),w.location&&w.location.protocol=="http"||En(U,"https"),fn(U),oe?et(U.toString(),R):Us(U.toString(),R)}else Gt(2);y.G=0,y.l&&y.l.sa(S),Xt(y),ge(y)}r.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Xt(y){if(y.G=0,y.ka=[],y.l){const S=Lt(y.h);(S.length!=0||y.i.length!=0)&&(te(y.ka,S),te(y.ka,y.i),y.h.i.length=0,ie(y.i),y.i.length=0),y.l.ra()}}function Je(y,S,R){var U=R instanceof Li?at(R):new Li(R);if(U.g!="")S&&(U.g=S+"."+U.g),le(U,U.s);else{var oe=w.location;U=oe.protocol,S=S?S+"."+oe.hostname:oe.hostname,oe=+oe.port;var me=new Li(null);U&&En(me,U),S&&(me.g=S),oe&&le(me,oe),R&&(me.l=R),U=me}return R=y.D,S=y.ya,R&&S&&Fe(U,R,S),Fe(U,"VER",y.la),ys(y,U),U}function ol(y,S,R){if(S&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=y.Ca&&!y.pa?new zt(new Pr({eb:R})):new zt(y.pa),S.Ha(y.J),S}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zt(){}r=Zt.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function lr(){}lr.prototype.g=function(y,S){return new Bn(y,S)};function Bn(y,S){Kt.call(this),this.g=new is(S),this.l=y,this.h=S&&S.messageUrlParams||null,y=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(y?y["X-WebChannel-Content-Type"]=S.messageContentType:y={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(y?y["X-WebChannel-Client-Profile"]=S.va:y={"X-WebChannel-Client-Profile":S.va}),this.g.S=y,(y=S&&S.Sb)&&!ye(y)&&(this.g.m=y),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!ye(S)&&(this.g.D=S,y=this.h,y!==null&&S in y&&(y=this.h,S in y&&delete y[S])),this.j=new cr(this)}K(Bn,Kt),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){or(this.g)},Bn.prototype.o=function(y){var S=this.g;if(typeof y=="string"){var R={};R.__data__=y,y=R}else this.u&&(R={},R.__data__=mn(y),y=R);S.i.push(new uc(S.Ya++,y)),S.G==3&&ct(S)},Bn.prototype.N=function(){this.g.l=null,delete this.j,or(this.g),delete this.g,Bn.aa.N.call(this)};function ll(y){Ri.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var S=y.__sm__;if(S){e:{for(const R in S){y=R;break e}y=void 0}(this.i=y)&&(y=this.i,S=S!==null&&y in S?S[y]:void 0),this.data=S}else this.data=y}K(ll,Ri);function Qi(){er.call(this),this.status=1}K(Qi,er);function cr(y){this.g=y}K(cr,Zt),cr.prototype.ua=function(){Hn(this.g,"a")},cr.prototype.ta=function(y){Hn(this.g,new ll(y))},cr.prototype.sa=function(y){Hn(this.g,new Qi)},cr.prototype.ra=function(){Hn(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,Qx=function(){return new lr},Wx=function(){return fs()},Xx=Gi,g1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,ef=Nn,Tn.COMPLETE="complete",Yx=Tn,wo.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,ru=wo,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,qx=zt}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const py="@firebase/firestore",yy="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new V1("@firebase/firestore");function Pl(){return Qo.logLevel}function qe(r,...e){if(Qo.logLevel<=Ot.DEBUG){const t=e.map($1);Qo.debug(`Firestore (${sc}): ${r}`,...t)}}function ma(r,...e){if(Qo.logLevel<=Ot.ERROR){const t=e.map($1);Qo.error(`Firestore (${sc}): ${r}`,...t)}}function Yl(r,...e){if(Qo.logLevel<=Ot.WARN){const t=e.map($1);Qo.warn(`Firestore (${sc}): ${r}`,...t)}}function $1(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(r="Unexpected state"){const e=`FIRESTORE (${sc}) INTERNAL ASSERTION FAILED: `+r;throw ma(e),new Error(e)}function Jt(r,e){r||lt()}function gt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vi.UNAUTHENTICATED))}shutdown(){}}class c4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class u4{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Jt(this.o===void 0);let a=this.i;const c=T=>this.i!==a?(a=this.i,t(T)):Promise.resolve();let f=new ha;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new ha,e.enqueueRetryable(()=>c(this.currentUser))};const E=()=>{const T=f;e.enqueueRetryable(async()=>{await T.promise,await c(this.currentUser)})},w=T=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit(T=>w(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?w(T):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new ha)}},0),E()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Jt(typeof a.accessToken=="string"),new Kx(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Jt(e===null||typeof e=="string"),new Vi(e)}}class h4{constructor(e,t,a){this.l=e,this.h=t,this.P=a,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class f4{constructor(e,t,a){this.l=e,this.h=t,this.P=a}getToken(){return Promise.resolve(new h4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Sr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Jt(this.o===void 0);const a=f=>{f.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const E=f.token!==this.R;return this.R=f.token,qe("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>a(f))};const c=f=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?c(f):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ey(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jt(typeof t.token=="string"),this.R=t.token,new Ey(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<r;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const c=g4(40);for(let f=0;f<c.length;++f)a.length<20&&c[f]<t&&(a+=e.charAt(c[f]%62))}return a}}function kt(r,e){return r<e?-1:r>e?1:0}function Xl(r,e,t){return r.length===e.length&&r.every((a,c)=>t(a,e[c]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=-62135596800,_y=1e6;class hi{static now(){return hi.fromMillis(Date.now())}static fromDate(e){return hi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*_y);return new hi(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xy)throw new Xe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new hi(0,0))}static max(){return new ut(new hi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class Ss{constructor(e,t,a){t===void 0?t=0:t>e.length&&lt(),a===void 0?a=e.length-t:a>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ss.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ss?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let c=0;c<a;c++){const f=Ss.compareSegments(e.get(c),t.get(c));if(f!==0)return f}return Math.sign(e.length-t.length)}static compareSegments(e,t){const a=Ss.isNumericId(e),c=Ss.isNumericId(t);return a&&!c?-1:!a&&c?1:a&&c?Ss.extractNumericId(e).compare(Ss.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class wn extends Ss{construct(e,t,a){return new wn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Xe(Ce.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(c=>c.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const m4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends Ss{construct(e,t,a){return new Ii(e,t,a)}static isValidIdentifier(e){return m4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new Ii([Ay])}static fromServerFormat(e){const t=[];let a="",c=0;const f=()=>{if(a.length===0)throw new Xe(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let E=!1;for(;c<e.length;){const w=e[c];if(w==="\\"){if(c+1===e.length)throw new Xe(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[c+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new Xe(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=T,c+=2}else w==="`"?(E=!E,c++):w!=="."||E?(a+=w,c++):(f(),c++)}if(f(),E)throw new Xe(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(t)}static emptyPath(){return new Ii([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(wn.fromString(e))}static fromName(e){return new tt(wn.fromString(e).popFirst(5))}static empty(){return new tt(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new wn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=-1;function p4(r,e){const t=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,c=ut.fromTimestamp(a===1e9?new hi(t+1,0):new hi(t,a));return new mo(c,tt.empty(),e)}function y4(r){return new mo(r.readTime,r.key,Eu)}class mo{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new mo(ut.min(),tt.empty(),Eu)}static max(){return new mo(ut.max(),tt.empty(),Eu)}}function E4(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=tt.comparator(r.documentKey,e.documentKey),t!==0?t:kt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(r){if(r.code!==Ce.FAILED_PRECONDITION||r.message!==x4)throw r;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((a,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(a,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,a)=>{t(e)})}static reject(e){return new ve((t,a)=>{a(e)})}static waitFor(e){return new ve((t,a)=>{let c=0,f=0,E=!1;e.forEach(w=>{++c,w.next(()=>{++f,E&&f===c&&t()},T=>a(T))}),E=!0,f===c&&t()})}static or(e){let t=ve.resolve(!1);for(const a of e)t=t.next(c=>c?ve.resolve(c):a());return t}static forEach(e,t){const a=[];return e.forEach((c,f)=>{a.push(t.call(this,c,f))}),this.waitFor(a)}static mapArray(e,t){return new ve((a,c)=>{const f=e.length,E=new Array(f);let w=0;for(let T=0;T<f;T++){const _=T;t(e[_]).next(I=>{E[_]=I,++w,w===f&&a(E)},I=>c(I))}})}static doWhile(e,t){return new ve((a,c)=>{const f=()=>{e()===!0?t().next(()=>{f()},c):a()};f()})}}function A4(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.oe(a),this._e=a=>t.writeSequenceNumber(a))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Vf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function jf(r){return r==null}function pf(r){return r===0&&1/r==-1/0}function w4(r){return typeof r=="number"&&Number.isInteger(r)&&!pf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="";function v4(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=wy(e)),e=T4(r.get(t),e);return wy(e)}function T4(r,e){let t=e;const a=r.length;for(let c=0;c<a;c++){const f=r.charAt(c);switch(f){case"\0":t+="";break;case Jx:t+="";break;default:t+=f}}return t}function wy(r){return r+Jx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Jo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function $x(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(c===0)return t+a.left.size;c<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,t,a,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?a(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,a,c,f){this.key=e,this.value=t,this.color=a??bi.RED,this.left=c??bi.EMPTY,this.right=f??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,c,f){return new bi(e??this.key,t??this.value,a??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let c=this;const f=a(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,a),null):f===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return bi.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1;bi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(e,t,a,c,f){return this}insert(e,t,a){return new bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof fi)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(this.comparator(c,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fi(this.comparator);return t.data=e,t}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new cs([])}unionWith(e){let t=new fi(Ii.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new e_("Invalid base64 string: "+f):f}}(e);return new Ni(t)}static fromUint8Array(e){const t=function(c){let f="";for(let E=0;E<c.length;++E)f+=String.fromCharCode(c[E]);return f}(e);return new Ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let c=0;c<t.length;c++)a[c]=t.charCodeAt(c);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const C4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(r){if(Jt(!!r),typeof r=="string"){let e=0;const t=C4.exec(r);if(Jt(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Qn(r.seconds),nanos:Qn(r.nanos)}}function Qn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function yo(r){return typeof r=="string"?Ni.fromBase64String(r):Ni.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="server_timestamp",n_="__type__",i_="__previous_value__",r_="__local_write_time__";function tg(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[n_])===null||t===void 0?void 0:t.stringValue)===t_}function Ff(r){const e=r.mapValue.fields[i_];return tg(e)?Ff(e):e}function xu(r){const e=po(r.mapValue.fields[r_].timestampValue);return new hi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,t,a,c,f,E,w,T,_){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=c,this.ssl=f,this.forceLongPolling=E,this.autoDetectLongPolling=w,this.longPollingOptions=T,this.useFetchStreams=_}}const yf="(default)";class _u{constructor(e,t){this.projectId=e,this.database=t||yf}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="__type__",b4="__max__",Gh={mapValue:{}},a_="__vector__",Ef="value";function Eo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?tg(r)?4:N4(r)?9007199254740991:I4(r)?10:11:lt()}function Ms(r,e){if(r===e)return!0;const t=Eo(r);if(t!==Eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xu(r).isEqual(xu(e));case 3:return function(c,f){if(typeof c.timestampValue=="string"&&typeof f.timestampValue=="string"&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const E=po(c.timestampValue),w=po(f.timestampValue);return E.seconds===w.seconds&&E.nanos===w.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(c,f){return yo(c.bytesValue).isEqual(yo(f.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(c,f){return Qn(c.geoPointValue.latitude)===Qn(f.geoPointValue.latitude)&&Qn(c.geoPointValue.longitude)===Qn(f.geoPointValue.longitude)}(r,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return Qn(c.integerValue)===Qn(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const E=Qn(c.doubleValue),w=Qn(f.doubleValue);return E===w?pf(E)===pf(w):isNaN(E)&&isNaN(w)}return!1}(r,e);case 9:return Xl(r.arrayValue.values||[],e.arrayValue.values||[],Ms);case 10:case 11:return function(c,f){const E=c.mapValue.fields||{},w=f.mapValue.fields||{};if(vy(E)!==vy(w))return!1;for(const T in E)if(E.hasOwnProperty(T)&&(w[T]===void 0||!Ms(E[T],w[T])))return!1;return!0}(r,e);default:return lt()}}function Au(r,e){return(r.values||[]).find(t=>Ms(t,e))!==void 0}function Wl(r,e){if(r===e)return 0;const t=Eo(r),a=Eo(e);if(t!==a)return kt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(r.booleanValue,e.booleanValue);case 2:return function(f,E){const w=Qn(f.integerValue||f.doubleValue),T=Qn(E.integerValue||E.doubleValue);return w<T?-1:w>T?1:w===T?0:isNaN(w)?isNaN(T)?0:-1:1}(r,e);case 3:return Cy(r.timestampValue,e.timestampValue);case 4:return Cy(xu(r),xu(e));case 5:return kt(r.stringValue,e.stringValue);case 6:return function(f,E){const w=yo(f),T=yo(E);return w.compareTo(T)}(r.bytesValue,e.bytesValue);case 7:return function(f,E){const w=f.split("/"),T=E.split("/");for(let _=0;_<w.length&&_<T.length;_++){const I=kt(w[_],T[_]);if(I!==0)return I}return kt(w.length,T.length)}(r.referenceValue,e.referenceValue);case 8:return function(f,E){const w=kt(Qn(f.latitude),Qn(E.latitude));return w!==0?w:kt(Qn(f.longitude),Qn(E.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Sy(r.arrayValue,e.arrayValue);case 10:return function(f,E){var w,T,_,I;const M=f.fields||{},V=E.fields||{},F=(w=M[Ef])===null||w===void 0?void 0:w.arrayValue,K=(T=V[Ef])===null||T===void 0?void 0:T.arrayValue,ie=kt(((_=F==null?void 0:F.values)===null||_===void 0?void 0:_.length)||0,((I=K==null?void 0:K.values)===null||I===void 0?void 0:I.length)||0);return ie!==0?ie:Sy(F,K)}(r.mapValue,e.mapValue);case 11:return function(f,E){if(f===Gh.mapValue&&E===Gh.mapValue)return 0;if(f===Gh.mapValue)return 1;if(E===Gh.mapValue)return-1;const w=f.fields||{},T=Object.keys(w),_=E.fields||{},I=Object.keys(_);T.sort(),I.sort();for(let M=0;M<T.length&&M<I.length;++M){const V=kt(T[M],I[M]);if(V!==0)return V;const F=Wl(w[T[M]],_[I[M]]);if(F!==0)return F}return kt(T.length,I.length)}(r.mapValue,e.mapValue);default:throw lt()}}function Cy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return kt(r,e);const t=po(r),a=po(e),c=kt(t.seconds,a.seconds);return c!==0?c:kt(t.nanos,a.nanos)}function Sy(r,e){const t=r.values||[],a=e.values||[];for(let c=0;c<t.length&&c<a.length;++c){const f=Wl(t[c],a[c]);if(f)return f}return kt(t.length,a.length)}function Ql(r){return m1(r)}function m1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const a=po(t);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return yo(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return tt.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let a="[",c=!0;for(const f of t.values||[])c?c=!1:a+=",",a+=m1(f);return a+"]"}(r.arrayValue):"mapValue"in r?function(t){const a=Object.keys(t.fields||{}).sort();let c="{",f=!0;for(const E of a)f?f=!1:c+=",",c+=`${E}:${m1(t.fields[E])}`;return c+"}"}(r.mapValue):lt()}function tf(r){switch(Eo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ff(r);return e?16+tf(e):16;case 5:return 2*r.stringValue.length;case 6:return yo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((c,f)=>c+tf(f),0)}(r.arrayValue);case 10:case 11:return function(a){let c=0;return Jo(a.fields,(f,E)=>{c+=f.length+tf(E)}),c}(r.mapValue);default:throw lt()}}function by(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function p1(r){return!!r&&"integerValue"in r}function ng(r){return!!r&&"arrayValue"in r}function Iy(r){return!!r&&"nullValue"in r}function Ny(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nf(r){return!!r&&"mapValue"in r}function I4(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[s_])===null||t===void 0?void 0:t.stringValue)===a_}function uu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Jo(r.mapValue.fields,(t,a)=>e.mapValue.fields[t]=uu(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function N4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===b4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.value=e}static empty(){return new Qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=Ii.emptyPath(),a={},c=[];e.forEach((E,w)=>{if(!t.isImmediateParentOf(w)){const T=this.getFieldsMap(t);this.applyChanges(T,a,c),a={},c=[],t=w.popLast()}E?a[w.lastSegment()]=uu(E):c.push(w.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,a,c)}delete(e){const t=this.field(e.popLast());nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ms(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=t.mapValue.fields[e.get(a)];nf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,a){Jo(t,(c,f)=>e[c]=f);for(const c of a)delete e[c]}clone(){return new Qr(uu(this.value))}}function o_(r){const e=[];return Jo(r.fields,(t,a)=>{const c=new Ii([t]);if(nf(a)){const f=o_(a.mapValue).fields;if(f.length===0)e.push(c);else for(const E of f)e.push(c.child(E))}else e.push(c)}),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,a,c,f,E,w){this.key=e,this.documentType=t,this.version=a,this.readTime=c,this.createTime=f,this.data=E,this.documentState=w}static newInvalidDocument(e){return new ji(e,0,ut.min(),ut.min(),ut.min(),Qr.empty(),0)}static newFoundDocument(e,t,a,c){return new ji(e,1,t,ut.min(),a,c,0)}static newNoDocument(e,t){return new ji(e,2,t,ut.min(),ut.min(),Qr.empty(),0)}static newUnknownDocument(e,t){return new ji(e,3,t,ut.min(),ut.min(),Qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.position=e,this.inclusive=t}}function Ry(r,e,t){let a=0;for(let c=0;c<r.position.length;c++){const f=e[c],E=r.position[c];if(f.field.isKeyField()?a=tt.comparator(tt.fromName(E.referenceValue),t.key):a=Wl(E,t.data.field(f.field)),f.dir==="desc"&&(a*=-1),a!==0)break}return a}function Dy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ms(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t="asc"){this.field=e,this.dir=t}}function R4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{}class ri extends l_{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new O4(e,t,a):t==="array-contains"?new P4(e,a):t==="in"?new k4(e,a):t==="not-in"?new B4(e,a):t==="array-contains-any"?new U4(e,a):new ri(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new M4(e,a):new L4(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wl(t,this.value)):t!==null&&Eo(this.value)===Eo(t)&&this.matchesComparison(Wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends l_{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new hs(e,t)}matches(e){return c_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function c_(r){return r.op==="and"}function u_(r){return D4(r)&&c_(r)}function D4(r){for(const e of r.filters)if(e instanceof hs)return!1;return!0}function y1(r){if(r instanceof ri)return r.field.canonicalString()+r.op.toString()+Ql(r.value);if(u_(r))return r.filters.map(e=>y1(e)).join(",");{const e=r.filters.map(t=>y1(t)).join(",");return`${r.op}(${e})`}}function h_(r,e){return r instanceof ri?function(a,c){return c instanceof ri&&a.op===c.op&&a.field.isEqual(c.field)&&Ms(a.value,c.value)}(r,e):r instanceof hs?function(a,c){return c instanceof hs&&a.op===c.op&&a.filters.length===c.filters.length?a.filters.reduce((f,E,w)=>f&&h_(E,c.filters[w]),!0):!1}(r,e):void lt()}function f_(r){return r instanceof ri?function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`}(r):r instanceof hs?function(t){return t.op.toString()+" {"+t.getFilters().map(f_).join(" ,")+"}"}(r):"Filter"}class O4 extends ri{constructor(e,t,a){super(e,t,a),this.key=tt.fromName(a.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class M4 extends ri{constructor(e,t){super(e,"in",t),this.keys=d_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class L4 extends ri{constructor(e,t){super(e,"not-in",t),this.keys=d_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function d_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>tt.fromName(a.referenceValue))}class P4 extends ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ng(t)&&Au(t.arrayValue,this.value)}}class k4 extends ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}}class B4 extends ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Au(this.value.arrayValue,t)}}class U4 extends ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ng(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Au(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t=null,a=[],c=[],f=null,E=null,w=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=c,this.limit=f,this.startAt=E,this.endAt=w,this.le=null}}function Oy(r,e=null,t=[],a=[],c=null,f=null,E=null){return new V4(r,e,t,a,c,f,E)}function ig(r){const e=gt(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>y1(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(f){return f.field.canonicalString()+f.dir}(a)).join(","),jf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Ql(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Ql(a)).join(",")),e.le=t}return e.le}function rg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!R4(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!h_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Dy(r.startAt,e.startAt)&&Dy(r.endAt,e.endAt)}function E1(r){return tt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t=null,a=[],c=[],f=null,E="F",w=null,T=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=c,this.limit=f,this.limitType=E,this.startAt=w,this.endAt=T,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function j4(r,e,t,a,c,f,E,w){return new Pu(r,e,t,a,c,f,E,w)}function sg(r){return new Pu(r)}function My(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function g_(r){return r.collectionGroup!==null}function hu(r){const e=gt(r);if(e.he===null){e.he=[];const t=new Set;for(const f of e.explicitOrderBy)e.he.push(f),t.add(f.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(E){let w=new fi(Ii.comparator);return E.filters.forEach(T=>{T.getFlattenedFilters().forEach(_=>{_.isInequality()&&(w=w.add(_.field))})}),w})(e).forEach(f=>{t.has(f.canonicalString())||f.isKeyField()||e.he.push(new _f(f,a))}),t.has(Ii.keyField().canonicalString())||e.he.push(new _f(Ii.keyField(),a))}return e.he}function Ns(r){const e=gt(r);return e.Pe||(e.Pe=F4(e,hu(r))),e.Pe}function F4(r,e){if(r.limitType==="F")return Oy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(c=>{const f=c.dir==="desc"?"asc":"desc";return new _f(c.field,f)});const t=r.endAt?new xf(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new xf(r.startAt.position,r.startAt.inclusive):null;return Oy(r.path,r.collectionGroup,e,r.filters,r.limit,t,a)}}function x1(r,e){const t=r.filters.concat([e]);return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function _1(r,e,t){return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function zf(r,e){return rg(Ns(r),Ns(e))&&r.limitType===e.limitType}function m_(r){return`${ig(Ns(r))}|lt:${r.limitType}`}function kl(r){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(c=>f_(c)).join(", ")}]`),jf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(c=>function(E){return`${E.field.canonicalString()} (${E.dir})`}(c)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(c=>Ql(c)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(c=>Ql(c)).join(",")),`Target(${a})`}(Ns(r))}; limitType=${r.limitType})`}function Hf(r,e){return e.isFoundDocument()&&function(a,c){const f=c.key.path;return a.collectionGroup!==null?c.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(f):tt.isDocumentKey(a.path)?a.path.isEqual(f):a.path.isImmediateParentOf(f)}(r,e)&&function(a,c){for(const f of hu(a))if(!f.field.isKeyField()&&c.data.field(f.field)===null)return!1;return!0}(r,e)&&function(a,c){for(const f of a.filters)if(!f.matches(c))return!1;return!0}(r,e)&&function(a,c){return!(a.startAt&&!function(E,w,T){const _=Ry(E,w,T);return E.inclusive?_<=0:_<0}(a.startAt,hu(a),c)||a.endAt&&!function(E,w,T){const _=Ry(E,w,T);return E.inclusive?_>=0:_>0}(a.endAt,hu(a),c))}(r,e)}function z4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function p_(r){return(e,t)=>{let a=!1;for(const c of hu(r)){const f=H4(c,e,t);if(f!==0)return f;a=a||c.field.isKeyField()}return 0}}function H4(r,e,t){const a=r.field.isKeyField()?tt.comparator(e.key,t.key):function(f,E,w){const T=E.data.field(f),_=w.data.field(f);return T!==null&&_!==null?Wl(T,_):lt()}(r.field,e,t);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[c,f]of a)if(this.equalsFn(c,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),c=this.inner[a];if(c===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return a.length===1?delete this.inner[t]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(t,a)=>{for(const[c,f]of a)e(c,f)})}isEmpty(){return $x(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Mn(tt.comparator);function pa(){return G4}const y_=new Mn(tt.comparator);function su(...r){let e=y_;for(const t of r)e=e.insert(t.key,t);return e}function E_(r){let e=y_;return r.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Go(){return fu()}function x_(){return fu()}function fu(){return new $o(r=>r.toString(),(r,e)=>r.isEqual(e))}const q4=new Mn(tt.comparator),Y4=new fi(tt.comparator);function Mt(...r){let e=Y4;for(const t of r)e=e.add(t);return e}const X4=new fi(kt);function W4(){return X4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function __(r){return{integerValue:""+r}}function Q4(r,e){return w4(e)?__(e):ag(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this._=void 0}}function K4(r,e,t){return r instanceof Af?function(c,f){const E={fields:{[n_]:{stringValue:t_},[r_]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&tg(f)&&(f=Ff(f)),f&&(E.fields[i_]=f),{mapValue:E}}(t,e):r instanceof wu?w_(r,e):r instanceof vu?v_(r,e):function(c,f){const E=A_(c,f),w=Ly(E)+Ly(c.Ie);return p1(E)&&p1(c.Ie)?__(w):ag(c.serializer,w)}(r,e)}function Z4(r,e,t){return r instanceof wu?w_(r,e):r instanceof vu?v_(r,e):t}function A_(r,e){return r instanceof wf?function(a){return p1(a)||function(f){return!!f&&"doubleValue"in f}(a)}(e)?e:{integerValue:0}:null}class Af extends Gf{}class wu extends Gf{constructor(e){super(),this.elements=e}}function w_(r,e){const t=T_(e);for(const a of r.elements)t.some(c=>Ms(c,a))||t.push(a);return{arrayValue:{values:t}}}class vu extends Gf{constructor(e){super(),this.elements=e}}function v_(r,e){let t=T_(e);for(const a of r.elements)t=t.filter(c=>!Ms(c,a));return{arrayValue:{values:t}}}class wf extends Gf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ly(r){return Qn(r.integerValue||r.doubleValue)}function T_(r){return ng(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function J4(r,e){return r.field.isEqual(e.field)&&function(a,c){return a instanceof wu&&c instanceof wu||a instanceof vu&&c instanceof vu?Xl(a.elements,c.elements,Ms):a instanceof wf&&c instanceof wf?Ms(a.Ie,c.Ie):a instanceof Af&&c instanceof Af}(r.transform,e.transform)}class $4{constructor(e,t){this.version=e,this.transformResults=t}}class fa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fa}static exists(e){return new fa(void 0,e)}static updateTime(e){return new fa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class qf{}function C_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new b_(r.key,fa.none()):new ku(r.key,r.data,fa.none());{const t=r.data,a=Qr.empty();let c=new fi(Ii.comparator);for(let f of e.fields)if(!c.has(f)){let E=t.field(f);E===null&&f.length>1&&(f=f.popLast(),E=t.field(f)),E===null?a.delete(f):a.set(f,E),c=c.add(f)}return new el(r.key,a,new cs(c.toArray()),fa.none())}}function eI(r,e,t){r instanceof ku?function(c,f,E){const w=c.value.clone(),T=ky(c.fieldTransforms,f,E.transformResults);w.setAll(T),f.convertToFoundDocument(E.version,w).setHasCommittedMutations()}(r,e,t):r instanceof el?function(c,f,E){if(!rf(c.precondition,f))return void f.convertToUnknownDocument(E.version);const w=ky(c.fieldTransforms,f,E.transformResults),T=f.data;T.setAll(S_(c)),T.setAll(w),f.convertToFoundDocument(E.version,T).setHasCommittedMutations()}(r,e,t):function(c,f,E){f.convertToNoDocument(E.version).setHasCommittedMutations()}(0,e,t)}function du(r,e,t,a){return r instanceof ku?function(f,E,w,T){if(!rf(f.precondition,E))return w;const _=f.value.clone(),I=By(f.fieldTransforms,T,E);return _.setAll(I),E.convertToFoundDocument(E.version,_).setHasLocalMutations(),null}(r,e,t,a):r instanceof el?function(f,E,w,T){if(!rf(f.precondition,E))return w;const _=By(f.fieldTransforms,T,E),I=E.data;return I.setAll(S_(f)),I.setAll(_),E.convertToFoundDocument(E.version,I).setHasLocalMutations(),w===null?null:w.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(M=>M.field))}(r,e,t,a):function(f,E,w){return rf(f.precondition,E)?(E.convertToNoDocument(E.version).setHasLocalMutations(),null):w}(r,e,t)}function tI(r,e){let t=null;for(const a of r.fieldTransforms){const c=e.data.field(a.field),f=A_(a.transform,c||null);f!=null&&(t===null&&(t=Qr.empty()),t.set(a.field,f))}return t||null}function Py(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,c){return a===void 0&&c===void 0||!(!a||!c)&&Xl(a,c,(f,E)=>J4(f,E))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ku extends qf{constructor(e,t,a,c=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class el extends qf{constructor(e,t,a,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function S_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=r.data.field(t);e.set(t,a)}}),e}function ky(r,e,t){const a=new Map;Jt(r.length===t.length);for(let c=0;c<t.length;c++){const f=r[c],E=f.transform,w=e.data.field(f.field);a.set(f.field,Z4(E,w,t[c]))}return a}function By(r,e,t){const a=new Map;for(const c of r){const f=c.transform,E=t.data.field(c.field);a.set(c.field,K4(f,E,e))}return a}class b_ extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,a,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&eI(f,e,a[c])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=du(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=du(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=x_();return this.mutations.forEach(c=>{const f=e.get(c.key),E=f.overlayedDocument;let w=this.applyToLocalView(E,f.mutatedFields);w=t.has(c.key)?null:w;const T=C_(E,w);T!==null&&a.set(c.key,T),E.isValidDocument()||E.convertToNoDocument(ut.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mt())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(t,a)=>Py(t,a))&&Xl(this.baseMutations,e.baseMutations,(t,a)=>Py(t,a))}}class og{constructor(e,t,a,c){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=c}static from(e,t,a){Jt(e.mutations.length===a.length);let c=function(){return q4}();const f=e.mutations;for(let E=0;E<f.length;E++)c=c.insert(f[E].key,a[E].version);return new og(e,t,a,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,Vt;function aI(r){switch(r){case Ce.OK:return lt();case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return lt()}}function I_(r){if(r===void 0)return ma("GRPC error has no .code"),Ce.UNKNOWN;switch(r){case ii.OK:return Ce.OK;case ii.CANCELLED:return Ce.CANCELLED;case ii.UNKNOWN:return Ce.UNKNOWN;case ii.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case ii.INTERNAL:return Ce.INTERNAL;case ii.UNAVAILABLE:return Ce.UNAVAILABLE;case ii.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case ii.NOT_FOUND:return Ce.NOT_FOUND;case ii.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case ii.ABORTED:return Ce.ABORTED;case ii.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case ii.DATA_LOSS:return Ce.DATA_LOSS;default:return lt()}}(Vt=ii||(ii={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new ho([4294967295,4294967295],0);function Uy(r){const e=oI().encode(r),t=new Gx;return t.update(e),new Uint8Array(t.digest())}function Vy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new ho([t,a],0),new ho([c,f],0)]}class lg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(a<0)throw new au(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ho.fromNumber(this.Ee)}Ae(e,t,a){let c=e.add(t.multiply(ho.fromNumber(a)));return c.compare(lI)===1&&(c=new ho([c.getBits(0),c.getBits(1)],0)),c.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Uy(e),[a,c]=Vy(t);for(let f=0;f<this.hashCount;f++){const E=this.Ae(a,c,f);if(!this.Re(E))return!1}return!0}static create(e,t,a){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),E=new lg(f,c,t);return a.forEach(w=>E.insert(w)),E}insert(e){if(this.Ee===0)return;const t=Uy(e),[a,c]=Vy(t);for(let f=0;f<this.hashCount;f++){const E=this.Ae(a,c,f);this.Ve(E)}}Ve(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,a,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const c=new Map;return c.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Yf(ut.min(),c,new Mn(kt),pa(),Mt())}}class Bu{constructor(e,t,a,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Bu(a,t,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,a,c){this.me=e,this.removedTargetIds=t,this.key=a,this.fe=c}}class N_{constructor(e,t){this.targetId=e,this.ge=t}}class R_{constructor(e,t,a=Ni.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=c}}class jy{constructor(){this.pe=0,this.ye=Fy(),this.we=Ni.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Mt(),t=Mt(),a=Mt();return this.ye.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:a=a.add(c);break;default:lt()}}),new Bu(this.we,this.be,e,t,a)}Me(){this.Se=!1,this.ye=Fy()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Jt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class cI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=pa(),this.$e=qh(),this.Ke=qh(),this.Ue=new Mn(kt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const a=this.He(t);switch(e.state){case 0:this.Je(t)&&a.Ce(e.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(e.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(t);break;case 3:this.Je(t)&&(a.Le(),a.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),a.Ce(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((a,c)=>{this.Je(c)&&t(c)})}Ze(e){const t=e.targetId,a=e.ge.count,c=this.Xe(t);if(c){const f=c.target;if(E1(f))if(a===0){const E=new tt(f.path);this.ze(t,E,ji.newNoDocument(E,ut.min()))}else Jt(a===1);else{const E=this.et(t);if(E!==a){const w=this.tt(e),T=w?this.nt(w,e,E):1;if(T!==0){this.Ye(t);const _=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,_)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=t;let E,w;try{E=yo(a).toUint8Array()}catch(T){if(T instanceof e_)return Yl("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{w=new lg(E,c,f)}catch(T){return Yl(T instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return w.Ee===0?null:w}nt(e,t,a){return t.ge.count===a-this.st(e,t.targetId)?0:2}st(e,t){const a=this.ke.getRemoteKeysForTarget(t);let c=0;return a.forEach(f=>{const E=this.ke.it(),w=`projects/${E.projectId}/databases/${E.database}/documents/${f.path.canonicalString()}`;e.mightContain(w)||(this.ze(t,f,null),c++)}),c}ot(e){const t=new Map;this.qe.forEach((f,E)=>{const w=this.Xe(E);if(w){if(f.current&&E1(w.target)){const T=new tt(w.target.path);this._t(T).has(E)||this.ut(E,T)||this.ze(E,T,ji.newNoDocument(T,e))}f.ve&&(t.set(E,f.Fe()),f.Me())}});let a=Mt();this.Ke.forEach((f,E)=>{let w=!0;E.forEachWhile(T=>{const _=this.Xe(T);return!_||_.purpose==="TargetPurposeLimboResolution"||(w=!1,!1)}),w&&(a=a.add(f))}),this.Qe.forEach((f,E)=>E.setReadTime(e));const c=new Yf(e,t,this.Ue,this.Qe,a);return this.Qe=pa(),this.$e=qh(),this.Ke=qh(),this.Ue=new Mn(kt),c}Ge(e,t){if(!this.Je(e))return;const a=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,a),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,a){if(!this.Je(e))return;const c=this.He(e);this.ut(e,t)?c.xe(t,1):c.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),a&&(this.Qe=this.Qe.insert(t,a))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new jy,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new fi(kt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new fi(kt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new jy),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function qh(){return new Mn(tt.comparator)}function Fy(){return new Mn(tt.comparator)}const uI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class dI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function A1(r,e){return r.useProto3Json||jf(e)?e:{value:e}}function vf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function gI(r,e){return vf(r,e.toTimestamp())}function Rs(r){return Jt(!!r),ut.fromTimestamp(function(t){const a=po(t);return new hi(a.seconds,a.nanos)}(r))}function cg(r,e){return w1(r,e).canonicalString()}function w1(r,e){const t=function(c){return new wn(["projects",c.projectId,"databases",c.database])}(r).child("documents");return e===void 0?t:t.child(e)}function O_(r){const e=wn.fromString(r);return Jt(B_(e)),e}function v1(r,e){return cg(r.databaseId,e.path)}function $0(r,e){const t=O_(e);if(t.get(1)!==r.databaseId.projectId)throw new Xe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Xe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new tt(L_(t))}function M_(r,e){return cg(r.databaseId,e)}function mI(r){const e=O_(r);return e.length===4?wn.emptyPath():L_(e)}function T1(r){return new wn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function L_(r){return Jt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function zy(r,e,t){return{name:v1(r,e),fields:t.value.mapValue.fields}}function pI(r,e){let t;if("targetChange"in e){e.targetChange;const a=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],f=function(_,I){return _.useProto3Json?(Jt(I===void 0||typeof I=="string"),Ni.fromBase64String(I||"")):(Jt(I===void 0||I instanceof Buffer||I instanceof Uint8Array),Ni.fromUint8Array(I||new Uint8Array))}(r,e.targetChange.resumeToken),E=e.targetChange.cause,w=E&&function(_){const I=_.code===void 0?Ce.UNKNOWN:I_(_.code);return new Xe(I,_.message||"")}(E);t=new R_(a,c,f,w||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const c=$0(r,a.document.name),f=Rs(a.document.updateTime),E=a.document.createTime?Rs(a.document.createTime):ut.min(),w=new Qr({mapValue:{fields:a.document.fields}}),T=ji.newFoundDocument(c,f,E,w),_=a.targetIds||[],I=a.removedTargetIds||[];t=new sf(_,I,T.key,T)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const c=$0(r,a.document),f=a.readTime?Rs(a.readTime):ut.min(),E=ji.newNoDocument(c,f),w=a.removedTargetIds||[];t=new sf([],w,E.key,E)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const c=$0(r,a.document),f=a.removedTargetIds||[];t=new sf([],f,c,null)}else{if(!("filter"in e))return lt();{e.filter;const a=e.filter;a.targetId;const{count:c=0,unchangedNames:f}=a,E=new sI(c,f),w=a.targetId;t=new N_(w,E)}}return t}function yI(r,e){let t;if(e instanceof ku)t={update:zy(r,e.key,e.value)};else if(e instanceof b_)t={delete:v1(r,e.key)};else if(e instanceof el)t={update:zy(r,e.key,e.data),updateMask:SI(e.fieldMask)};else{if(!(e instanceof nI))return lt();t={verify:v1(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(f,E){const w=E.transform;if(w instanceof Af)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof wu)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof vu)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof wf)return{fieldPath:E.field.canonicalString(),increment:w.Ie};throw lt()}(0,a))),e.precondition.isNone||(t.currentDocument=function(c,f){return f.updateTime!==void 0?{updateTime:gI(c,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:lt()}(r,e.precondition)),t}function EI(r,e){return r&&r.length>0?(Jt(e!==void 0),r.map(t=>function(c,f){let E=c.updateTime?Rs(c.updateTime):Rs(f);return E.isEqual(ut.min())&&(E=Rs(f)),new $4(E,c.transformResults||[])}(t,e))):[]}function xI(r,e){return{documents:[M_(r,e.path)]}}function _I(r,e){const t={structuredQuery:{}},a=e.path;let c;e.collectionGroup!==null?(c=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=M_(r,c);const f=function(_){if(_.length!==0)return k_(hs.create(_,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const E=function(_){if(_.length!==0)return _.map(I=>function(V){return{field:Bl(V.field),direction:vI(V.dir)}}(I))}(e.orderBy);E&&(t.structuredQuery.orderBy=E);const w=A1(r,e.limit);return w!==null&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ht:t,parent:c}}function AI(r){let e=mI(r.parent);const t=r.structuredQuery,a=t.from?t.from.length:0;let c=null;if(a>0){Jt(a===1);const I=t.from[0];I.allDescendants?c=I.collectionId:e=e.child(I.collectionId)}let f=[];t.where&&(f=function(M){const V=P_(M);return V instanceof hs&&u_(V)?V.getFilters():[V]}(t.where));let E=[];t.orderBy&&(E=function(M){return M.map(V=>function(K){return new _f(Ul(K.field),function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(V))}(t.orderBy));let w=null;t.limit&&(w=function(M){let V;return V=typeof M=="object"?M.value:M,jf(V)?null:V}(t.limit));let T=null;t.startAt&&(T=function(M){const V=!!M.before,F=M.values||[];return new xf(F,V)}(t.startAt));let _=null;return t.endAt&&(_=function(M){const V=!M.before,F=M.values||[];return new xf(F,V)}(t.endAt)),j4(e,c,E,f,w,"F",T,_)}function wI(r,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Ul(t.unaryFilter.field);return ri.create(a,"==",{doubleValue:NaN});case"IS_NULL":const c=Ul(t.unaryFilter.field);return ri.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Ul(t.unaryFilter.field);return ri.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const E=Ul(t.unaryFilter.field);return ri.create(E,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(r):r.fieldFilter!==void 0?function(t){return ri.create(Ul(t.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return hs.create(t.compositeFilter.filters.map(a=>P_(a)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return lt()}}(t.compositeFilter.op))}(r):lt()}function vI(r){return uI[r]}function TI(r){return hI[r]}function CI(r){return fI[r]}function Bl(r){return{fieldPath:r.canonicalString()}}function Ul(r){return Ii.fromServerFormat(r.fieldPath)}function k_(r){return r instanceof ri?function(t){if(t.op==="=="){if(Ny(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NAN"}};if(Iy(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ny(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NAN"}};if(Iy(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(t.field),op:TI(t.op),value:t.value}}}(r):r instanceof hs?function(t){const a=t.getFilters().map(c=>k_(c));return a.length===1?a[0]:{compositeFilter:{op:CI(t.op),filters:a}}}(r):lt()}function SI(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function B_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,a,c,f=ut.min(),E=ut.min(),w=Ni.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=w,this.expectedCount=T}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.Tt=e}}function II(r){const e=AI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.Tn=new RI}addToCollectionParentIndex(e,t){return this.Tn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(mo.min())}updateCollectionGroup(e,t,a){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class RI{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t]||new fi(wn.comparator),f=!c.has(a);return this.index[t]=c.add(a),f}has(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t];return c&&c.has(a)}getEntries(e){return(this.index[e]||new fi(wn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U_=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(U_,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Kl(0)}static Un(){return new Kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LruGarbageCollector",DI=1048576;function qy([r,e],[t,a]){const c=kt(r,t);return c===0?kt(e,a):c}class OI{constructor(e){this.Hn=e,this.buffer=new fi(qy),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();qy(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MI{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){qe(Gy,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oc(t)?qe(Gy,"Ignoring IndexedDB error during garbage collection: ",t):await ac(t)}await this.er(3e5)})}}class LI{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return ve.resolve(Vf.ae);const a=new OI(t);return this.tr.forEachTarget(e,c=>a.Zn(c.sequenceNumber)).next(()=>this.tr.rr(e,c=>a.Zn(c))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.tr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Hy)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let a,c,f,E,w,T,_;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),c=this.params.maximumSequenceNumbersToCollect):c=M,E=Date.now(),this.nthSequenceNumber(e,c))).next(M=>(a=M,w=Date.now(),this.removeTargets(e,a,t))).next(M=>(f=M,T=Date.now(),this.removeOrphanedDocuments(e,a))).next(M=>(_=Date.now(),Pl()<=Ot.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-I}ms
	Determined least recently used ${c} in `+(w-E)+`ms
	Removed ${f} targets in `+(T-w)+`ms
	Removed ${M} documents in `+(_-T)+`ms
Total Duration: ${_-I}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:M})))}}function PI(r,e){return new LI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.changes=new $o(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ve.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t,a,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=c}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(a=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(a!==null&&du(a.mutation,c,cs.empty(),hi.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Mt()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Mt()){const c=Go();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,a).next(f=>{let E=su();return f.forEach((w,T)=>{E=E.insert(w,T.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const a=Go();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Mt()))}populateOverlays(e,t,a){const c=[];return a.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((E,w)=>{t.set(E,w)})})}computeViews(e,t,a,c){let f=pa();const E=fu(),w=function(){return fu()}();return t.forEach((T,_)=>{const I=a.get(_.key);c.has(_.key)&&(I===void 0||I.mutation instanceof el)?f=f.insert(_.key,_):I!==void 0?(E.set(_.key,I.mutation.getFieldMask()),du(I.mutation,_,I.mutation.getFieldMask(),hi.now())):E.set(_.key,cs.empty())}),this.recalculateAndSaveOverlays(e,f).next(T=>(T.forEach((_,I)=>E.set(_,I)),t.forEach((_,I)=>{var M;return w.set(_,new BI(I,(M=E.get(_))!==null&&M!==void 0?M:null))}),w))}recalculateAndSaveOverlays(e,t){const a=fu();let c=new Mn((E,w)=>E-w),f=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const w of E)w.keys().forEach(T=>{const _=t.get(T);if(_===null)return;let I=a.get(T)||cs.empty();I=w.applyToLocalView(_,I),a.set(T,I);const M=(c.get(w.batchId)||Mt()).add(T);c=c.insert(w.batchId,M)})}).next(()=>{const E=[],w=c.getReverseIterator();for(;w.hasNext();){const T=w.getNext(),_=T.key,I=T.value,M=x_();I.forEach(V=>{if(!f.has(V)){const F=C_(t.get(V),a.get(V));F!==null&&M.set(V,F),f=f.add(V)}}),E.push(this.documentOverlayCache.saveOverlays(e,_,M))}return ve.waitFor(E)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,c){return function(E){return tt.isDocumentKey(E.path)&&E.collectionGroup===null&&E.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,c):this.getDocumentsMatchingCollectionQuery(e,t,a,c)}getNextDocuments(e,t,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,c).next(f=>{const E=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,c-f.size):ve.resolve(Go());let w=Eu,T=f;return E.next(_=>ve.forEach(_,(I,M)=>(w<M.largestBatchId&&(w=M.largestBatchId),f.get(I)?ve.resolve():this.remoteDocumentCache.getEntry(e,I).next(V=>{T=T.insert(I,V)}))).next(()=>this.populateOverlays(e,_,f)).next(()=>this.computeViews(e,T,_,Mt())).next(I=>({batchId:w,changes:E_(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(a=>{let c=su();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,a,c){const f=t.collectionGroup;let E=su();return this.indexManager.getCollectionParents(e,f).next(w=>ve.forEach(w,T=>{const _=function(M,V){return new Pu(V,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)}(t,T.child(f));return this.getDocumentsMatchingCollectionQuery(e,_,a,c).next(I=>{I.forEach((M,V)=>{E=E.insert(M,V)})})}).next(()=>E))}getDocumentsMatchingCollectionQuery(e,t,a,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(E=>(f=E,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,f,c))).next(E=>{f.forEach((T,_)=>{const I=_.getKey();E.get(I)===null&&(E=E.insert(I,ji.newInvalidDocument(I)))});let w=su();return E.forEach((T,_)=>{const I=f.get(T);I!==void 0&&du(I.mutation,_,cs.empty(),hi.now()),Hf(t,_)&&(w=w.insert(T,_))}),w})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ve.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(c){return{id:c.id,version:c.version,createTime:Rs(c.createTime)}}(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(c){return{name:c.name,query:II(c.bundledQuery),readTime:Rs(c.readTime)}}(t)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.overlays=new Mn(tt.comparator),this.Rr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Go();return ve.forEach(t,c=>this.getOverlay(e,c).next(f=>{f!==null&&a.set(c,f)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((c,f)=>{this.Et(e,t,f)}),ve.resolve()}removeOverlaysForBatchId(e,t,a){const c=this.Rr.get(a);return c!==void 0&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.Rr.delete(a)),ve.resolve()}getOverlaysForCollection(e,t,a){const c=Go(),f=t.length+1,E=new tt(t.child("")),w=this.overlays.getIteratorFrom(E);for(;w.hasNext();){const T=w.getNext().value,_=T.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===f&&T.largestBatchId>a&&c.set(T.getKey(),T)}return ve.resolve(c)}getOverlaysForCollectionGroup(e,t,a,c){let f=new Mn((_,I)=>_-I);const E=this.overlays.getIterator();for(;E.hasNext();){const _=E.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>a){let I=f.get(_.largestBatchId);I===null&&(I=Go(),f=f.insert(_.largestBatchId,I)),I.set(_.getKey(),_)}}const w=Go(),T=f.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach((_,I)=>w.set(_,I)),!(w.size()>=c)););return ve.resolve(w)}Et(e,t,a){const c=this.overlays.get(a.key);if(c!==null){const E=this.Rr.get(c.largestBatchId).delete(a.key);this.Rr.set(c.largestBatchId,E)}this.overlays=this.overlays.insert(a.key,new rI(t,a));let f=this.Rr.get(t);f===void 0&&(f=Mt(),this.Rr.set(t,f)),this.Rr.set(t,f.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.sessionToken=Ni.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Vr=new fi(Ei.mr),this.gr=new fi(Ei.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const a=new Ei(e,t);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.wr(new Ei(e,t))}br(e,t){e.forEach(a=>this.removeReference(a,t))}Sr(e){const t=new tt(new wn([])),a=new Ei(t,e),c=new Ei(t,e+1),f=[];return this.gr.forEachInRange([a,c],E=>{this.wr(E),f.push(E.key)}),f}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new tt(new wn([])),a=new Ei(t,e),c=new Ei(t,e+1);let f=Mt();return this.gr.forEachInRange([a,c],E=>{f=f.add(E.key)}),f}containsKey(e){const t=new Ei(e,0),a=this.Vr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Ei{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return tt.comparator(e.key,t.key)||kt(e.Cr,t.Cr)}static pr(e,t){return kt(e.Cr,t.Cr)||tt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new fi(Ei.mr)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,c){const f=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const E=new iI(f,t,a,c);this.mutationQueue.push(E);for(const w of c)this.Mr=this.Mr.add(new Ei(w.key,f)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return ve.resolve(E)}lookupMutationBatch(e,t){return ve.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,c=this.Nr(a),f=c<0?0:c;return ve.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?eg:this.Fr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Ei(t,0),c=new Ei(t,Number.POSITIVE_INFINITY),f=[];return this.Mr.forEachInRange([a,c],E=>{const w=this.Or(E.Cr);f.push(w)}),ve.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new fi(kt);return t.forEach(c=>{const f=new Ei(c,0),E=new Ei(c,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([f,E],w=>{a=a.add(w.Cr)})}),ve.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1;let f=a;tt.isDocumentKey(f)||(f=f.child(""));const E=new Ei(new tt(f),0);let w=new fi(kt);return this.Mr.forEachWhile(T=>{const _=T.key.path;return!!a.isPrefixOf(_)&&(_.length===c&&(w=w.add(T.Cr)),!0)},E),ve.resolve(this.Br(w))}Br(e){const t=[];return e.forEach(a=>{const c=this.Or(a);c!==null&&t.push(c)}),t}removeMutationBatch(e,t){Jt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return ve.forEach(t.mutations,c=>{const f=new Ei(c.key,t.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Mr=a})}qn(e){}containsKey(e,t){const a=new Ei(t,0),c=this.Mr.firstAfterOrEqual(a);return ve.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.kr=e,this.docs=function(){return new Mn(tt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,c=this.docs.get(a),f=c?c.size:0,E=this.kr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:E}),this.size+=E-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ve.resolve(a?a.document.mutableCopy():ji.newInvalidDocument(t))}getEntries(e,t){let a=pa();return t.forEach(c=>{const f=this.docs.get(c);a=a.insert(c,f?f.document.mutableCopy():ji.newInvalidDocument(c))}),ve.resolve(a)}getDocumentsMatchingQuery(e,t,a,c){let f=pa();const E=t.path,w=new tt(E.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(w);for(;T.hasNext();){const{key:_,value:{document:I}}=T.getNext();if(!E.isPrefixOf(_.path))break;_.path.length>E.length+1||E4(y4(I),a)<=0||(c.has(I.key)||Hf(t,I))&&(f=f.insert(I.key,I.mutableCopy()))}return ve.resolve(f)}getAllFromCollectionGroup(e,t,a,c){lt()}qr(e,t){return ve.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new GI(this)}getSize(e){return ve.resolve(this.size)}}class GI extends kI{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((a,c)=>{c.isValidDocument()?t.push(this.Ir.addEntry(e,c)):this.Ir.removeEntry(a)}),ve.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.persistence=e,this.Qr=new $o(t=>ig(t),rg),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.$r=0,this.Kr=new ug,this.targetCount=0,this.Ur=Kl.Kn()}forEachTarget(e,t){return this.Qr.forEach((a,c)=>t(c)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.$r&&(this.$r=t),ve.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.zn(t),ve.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,a){let c=0;const f=[];return this.Qr.forEach((E,w)=>{w.sequenceNumber<=t&&a.get(w.targetId)===null&&(this.Qr.delete(E),f.push(this.removeMatchingKeysForTargetId(e,w.targetId)),c++)}),ve.waitFor(f).next(()=>c)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const a=this.Qr.get(t)||null;return ve.resolve(a)}addMatchingKeys(e,t,a){return this.Kr.yr(t,a),ve.resolve()}removeMatchingKeys(e,t,a){this.Kr.br(t,a);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(E=>{f.push(c.markPotentiallyOrphaned(e,E))}),ve.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Kr.vr(t);return ve.resolve(a)}containsKey(e,t){return ve.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Vf(0),this.zr=!1,this.zr=!0,this.jr=new FI,this.referenceDelegate=e(this),this.Hr=new qI(this),this.indexManager=new NI,this.remoteDocumentCache=function(c){return new HI(c)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new bI(t),this.Yr=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Wr[e.toKey()];return a||(a=new zI(t,this.referenceDelegate),this.Wr[e.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,a){qe("MemoryPersistence","Starting transaction:",e);const c=new YI(this.Gr.next());return this.referenceDelegate.Zr(),a(c).next(f=>this.referenceDelegate.Xr(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}ei(e,t){return ve.or(Object.values(this.Wr).map(a=>()=>a.containsKey(e,t)))}}class YI extends _4{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.ti=new ug,this.ni=null}static ri(e){return new hg(e)}get ii(){if(this.ni)return this.ni;throw lt()}addReference(e,t,a){return this.ti.addReference(a,t),this.ii.delete(a.toString()),ve.resolve()}removeReference(e,t,a){return this.ti.removeReference(a,t),this.ii.add(a.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ve.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(c=>this.ii.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.ii.add(f.toString()))}).next(()=>a.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.ii,a=>{const c=tt.fromPath(a);return this.si(e,c).next(f=>{f||t.removeEntry(c,ut.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(a=>{a?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ve.or([()=>ve.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Tf{constructor(e,t){this.persistence=e,this.oi=new $o(a=>v4(a.path),(a,c)=>a.isEqual(c)),this.garbageCollector=PI(this,t)}static ri(e,t){return new Tf(e,t)}Zr(){}Xr(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(c=>a+c))}sr(e){let t=0;return this.rr(e,a=>{t++}).next(()=>t)}rr(e,t){return ve.forEach(this.oi,(a,c)=>this.ar(e,a,c).next(f=>f?ve.resolve():t(c)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const c=this.persistence.getRemoteDocumentCache(),f=c.newChangeBuffer();return c.qr(e,E=>this.ar(e,E,t).next(w=>{w||(a++,f.removeEntry(E,ut.min()))})).next(()=>f.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,a){return this.oi.set(a,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ve.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tf(e.data.value)),t}ar(e,t,a){return ve.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.oi.get(t);return ve.resolve(c!==void 0&&c>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,a,c){this.targetId=e,this.fromCache=t,this.Hi=a,this.Ji=c}static Yi(e,t){let a=Mt(),c=Mt();for(const f of t.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new fg(e,t.fromCache,a,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return IC()?8:A4(Fi())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,a,c){const f={result:null};return this.rs(e,t).next(E=>{f.result=E}).next(()=>{if(!f.result)return this.ss(e,t,c,a).next(E=>{f.result=E})}).next(()=>{if(f.result)return;const E=new XI;return this._s(e,t,E).next(w=>{if(f.result=w,this.Xi)return this.us(e,t,E,w.size)})}).next(()=>f.result)}us(e,t,a,c){return a.documentReadCount<this.es?(Pl()<=Ot.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ve.resolve()):(Pl()<=Ot.DEBUG&&qe("QueryEngine","Query:",kl(t),"scans",a.documentReadCount,"local documents and returns",c,"documents as results."),a.documentReadCount>this.ts*c?(Pl()<=Ot.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):ve.resolve())}rs(e,t){if(My(t))return ve.resolve(null);let a=Ns(t);return this.indexManager.getIndexType(e,a).next(c=>c===0?null:(t.limit!==null&&c===1&&(t=_1(t,null,"F"),a=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(f=>{const E=Mt(...f);return this.ns.getDocuments(e,E).next(w=>this.indexManager.getMinOffset(e,a).next(T=>{const _=this.cs(t,w);return this.ls(t,_,E,T.readTime)?this.rs(e,_1(t,null,"F")):this.hs(e,_,t,T)}))})))}ss(e,t,a,c){return My(t)||c.isEqual(ut.min())?ve.resolve(null):this.ns.getDocuments(e,a).next(f=>{const E=this.cs(t,f);return this.ls(t,E,a,c)?ve.resolve(null):(Pl()<=Ot.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),kl(t)),this.hs(e,E,t,p4(c,Eu)).next(w=>w))})}cs(e,t){let a=new fi(p_(e));return t.forEach((c,f)=>{Hf(e,f)&&(a=a.add(f))}),a}ls(e,t,a,c){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}_s(e,t,a){return Pl()<=Ot.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",kl(t)),this.ns.getDocumentsMatchingQuery(e,t,mo.min(),a)}hs(e,t,a,c){return this.ns.getDocumentsMatchingQuery(e,a,c).next(f=>(t.forEach(E=>{f=f.insert(E.key,E)}),f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",QI=3e8;class KI{constructor(e,t,a,c){this.persistence=e,this.Ps=t,this.serializer=c,this.Ts=new Mn(kt),this.Is=new $o(f=>ig(f),rg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(a)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function ZI(r,e,t,a){return new KI(r,e,t,a)}async function j_(r,e){const t=gt(r);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let c;return t.mutationQueue.getAllMutationBatches(a).next(f=>(c=f,t.As(e),t.mutationQueue.getAllMutationBatches(a))).next(f=>{const E=[],w=[];let T=Mt();for(const _ of c){E.push(_.batchId);for(const I of _.mutations)T=T.add(I.key)}for(const _ of f){w.push(_.batchId);for(const I of _.mutations)T=T.add(I.key)}return t.localDocuments.getDocuments(a,T).next(_=>({Rs:_,removedBatchIds:E,addedBatchIds:w}))})})}function JI(r,e){const t=gt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),f=t.ds.newChangeBuffer({trackRemovals:!0});return function(w,T,_,I){const M=_.batch,V=M.keys();let F=ve.resolve();return V.forEach(K=>{F=F.next(()=>I.getEntry(T,K)).next(ie=>{const te=_.docVersions.get(K);Jt(te!==null),ie.version.compareTo(te)<0&&(M.applyToRemoteDocument(ie,_),ie.isValidDocument()&&(ie.setReadTime(_.commitVersion),I.addEntry(ie)))})}),F.next(()=>w.mutationQueue.removeMutationBatch(T,M))}(t,a,e,f).next(()=>f.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(w){let T=Mt();for(let _=0;_<w.mutationResults.length;++_)w.mutationResults[_].transformResults.length>0&&(T=T.add(w.batch.mutations[_].key));return T}(e))).next(()=>t.localDocuments.getDocuments(a,c))})}function F_(r){const e=gt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function $I(r,e){const t=gt(r),a=e.snapshotVersion;let c=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const E=t.ds.newChangeBuffer({trackRemovals:!0});c=t.Ts;const w=[];e.targetChanges.forEach((I,M)=>{const V=c.get(M);if(!V)return;w.push(t.Hr.removeMatchingKeys(f,I.removedDocuments,M).next(()=>t.Hr.addMatchingKeys(f,I.addedDocuments,M)));let F=V.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(M)!==null?F=F.withResumeToken(Ni.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):I.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(I.resumeToken,a)),c=c.insert(M,F),function(ie,te,ue){return ie.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=QI?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0}(V,F,I)&&w.push(t.Hr.updateTargetData(f,F))});let T=pa(),_=Mt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&w.push(t.persistence.referenceDelegate.updateLimboDocument(f,I))}),w.push(e8(f,E,e.documentUpdates).next(I=>{T=I.Vs,_=I.fs})),!a.isEqual(ut.min())){const I=t.Hr.getLastRemoteSnapshotVersion(f).next(M=>t.Hr.setTargetsMetadata(f,f.currentSequenceNumber,a));w.push(I)}return ve.waitFor(w).next(()=>E.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,T,_)).next(()=>T)}).then(f=>(t.Ts=c,f))}function e8(r,e,t){let a=Mt(),c=Mt();return t.forEach(f=>a=a.add(f)),e.getEntries(r,a).next(f=>{let E=pa();return t.forEach((w,T)=>{const _=f.get(w);T.isFoundDocument()!==_.isFoundDocument()&&(c=c.add(w)),T.isNoDocument()&&T.version.isEqual(ut.min())?(e.removeEntry(w,T.readTime),E=E.insert(w,T)):!_.isValidDocument()||T.version.compareTo(_.version)>0||T.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(T),E=E.insert(w,T)):qe(dg,"Ignoring outdated watch update for ",w,". Current version:",_.version," Watch version:",T.version)}),{Vs:E,fs:c}})}function t8(r,e){const t=gt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=eg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function n8(r,e){const t=gt(r);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return t.Hr.getTargetData(a,e).next(f=>f?(c=f,ve.resolve(c)):t.Hr.allocateTargetId(a).next(E=>(c=new ao(e,E,"TargetPurposeListen",a.currentSequenceNumber),t.Hr.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=t.Ts.get(a.targetId);return(c===null||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(a.targetId,a),t.Is.set(e,a.targetId)),a})}async function C1(r,e,t){const a=gt(r),c=a.Ts.get(e),f=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",f,E=>a.persistence.referenceDelegate.removeTarget(E,c))}catch(E){if(!oc(E))throw E;qe(dg,`Failed to update sequence numbers for target ${e}: ${E}`)}a.Ts=a.Ts.remove(e),a.Is.delete(c.target)}function Yy(r,e,t){const a=gt(r);let c=ut.min(),f=Mt();return a.persistence.runTransaction("Execute query","readwrite",E=>function(T,_,I){const M=gt(T),V=M.Is.get(I);return V!==void 0?ve.resolve(M.Ts.get(V)):M.Hr.getTargetData(_,I)}(a,E,Ns(e)).next(w=>{if(w)return c=w.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(E,w.targetId).next(T=>{f=T})}).next(()=>a.Ps.getDocumentsMatchingQuery(E,e,t?c:ut.min(),t?f:Mt())).next(w=>(i8(a,z4(e),w),{documents:w,gs:f})))}function i8(r,e,t){let a=r.Es.get(e)||ut.min();t.forEach((c,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)}),r.Es.set(e,a)}class Xy{constructor(){this.activeTargetIds=W4()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r8{constructor(){this.ho=new Xy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,a){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Xy,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="ConnectivityMonitor";class Qy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){qe(Wy,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){qe(Wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;function S1(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="RestConnection",a8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o8{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${a}/databases/${c}`,this.wo=this.databaseId.database===yf?`project_id=${a}`:`project_id=${a}&database_id=${c}`}bo(e,t,a,c,f){const E=S1(),w=this.So(e,t.toUriEncodedString());qe(e1,`Sending RPC '${e}' ${E}:`,w,a);const T={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(T,c,f),this.vo(e,w,T,a).then(_=>(qe(e1,`Received RPC '${e}' ${E}: `,_),_),_=>{throw Yl(e1,`RPC '${e}' ${E} failed with error: `,_,"url: ",w,"request:",a),_})}Co(e,t,a,c,f,E){return this.bo(e,t,a,c,f)}Do(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),a&&a.headers.forEach((c,f)=>e[f]=c)}So(e,t){const a=a8[e];return`${this.po}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="WebChannelConnection";class c8 extends o8{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,a,c){const f=S1();return new Promise((E,w)=>{const T=new qx;T.setWithCredentials(!0),T.listenOnce(Yx.COMPLETE,()=>{try{switch(T.getLastErrorCode()){case ef.NO_ERROR:const I=T.getResponseJson();qe(Ui,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),E(I);break;case ef.TIMEOUT:qe(Ui,`RPC '${e}' ${f} timed out`),w(new Xe(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const M=T.getStatus();if(qe(Ui,`RPC '${e}' ${f} failed with status:`,M,"response text:",T.getResponseText()),M>0){let V=T.getResponseJson();Array.isArray(V)&&(V=V[0]);const F=V==null?void 0:V.error;if(F&&F.status&&F.message){const K=function(te){const ue=te.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(ue)>=0?ue:Ce.UNKNOWN}(F.status);w(new Xe(K,F.message))}else w(new Xe(Ce.UNKNOWN,"Server responded with status "+T.getStatus()))}else w(new Xe(Ce.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{qe(Ui,`RPC '${e}' ${f} completed.`)}});const _=JSON.stringify(c);qe(Ui,`RPC '${e}' ${f} sending request:`,c),T.send(t,"POST",_,a,15)})}Wo(e,t,a){const c=S1(),f=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=Qx(),w=Wx(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(T.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(T.useFetchStreams=!0),this.Do(T.initMessageHeaders,t,a),T.encodeInitMessageHeaders=!0;const I=f.join("");qe(Ui,`Creating RPC '${e}' stream ${c}: ${I}`,T);const M=E.createWebChannel(I,T);let V=!1,F=!1;const K=new l8({Fo:te=>{F?qe(Ui,`Not sending because RPC '${e}' stream ${c} is closed:`,te):(V||(qe(Ui,`Opening RPC '${e}' stream ${c} transport.`),M.open(),V=!0),qe(Ui,`RPC '${e}' stream ${c} sending:`,te),M.send(te))},Mo:()=>M.close()}),ie=(te,ue,ye)=>{te.listen(ue,se=>{try{ye(se)}catch(De){setTimeout(()=>{throw De},0)}})};return ie(M,ru.EventType.OPEN,()=>{F||(qe(Ui,`RPC '${e}' stream ${c} transport opened.`),K.Qo())}),ie(M,ru.EventType.CLOSE,()=>{F||(F=!0,qe(Ui,`RPC '${e}' stream ${c} transport closed`),K.Ko())}),ie(M,ru.EventType.ERROR,te=>{F||(F=!0,Yl(Ui,`RPC '${e}' stream ${c} transport errored:`,te),K.Ko(new Xe(Ce.UNAVAILABLE,"The operation could not be completed")))}),ie(M,ru.EventType.MESSAGE,te=>{var ue;if(!F){const ye=te.data[0];Jt(!!ye);const se=ye,De=(se==null?void 0:se.error)||((ue=se[0])===null||ue===void 0?void 0:ue.error);if(De){qe(Ui,`RPC '${e}' stream ${c} received error:`,De);const Ue=De.status;let Se=function(P){const W=ii[P];if(W!==void 0)return I_(W)}(Ue),z=De.message;Se===void 0&&(Se=Ce.INTERNAL,z="Unknown error status: "+Ue+" with message "+De.message),F=!0,K.Ko(new Xe(Se,z)),M.close()}else qe(Ui,`RPC '${e}' stream ${c} received:`,ye),K.Uo(ye)}}),ie(w,Xx.STAT_EVENT,te=>{te.stat===g1.PROXY?qe(Ui,`RPC '${e}' stream ${c} detected buffering proxy`):te.stat===g1.NOPROXY&&qe(Ui,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{K.$o()},0),K}}function t1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r){return new dI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t,a=1e3,c=1.5,f=6e4){this.Ti=e,this.timerId=t,this.Go=a,this.zo=c,this.jo=f,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),c=Math.max(0,t-a);c>0&&qe("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,c,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="PersistentStream";class H_{constructor(e,t,a,c,f,E,w,T){this.Ti=e,this.n_=a,this.r_=c,this.connection=f,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=w,this.listener=T,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new z_(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(ma(t.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.i_===t&&this.V_(a,c)},a=>{e(()=>{const c=new Xe(Ce.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(c)})})}V_(e,t){const a=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(c=>{a(()=>this.m_(c))}),this.stream.onMessage(c=>{a(()=>++this.__==1?this.g_(c):this.onNext(c))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return qe(Ky,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(qe(Ky,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u8 extends H_{constructor(e,t,a,c,f,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,c,E),this.serializer=f}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=pI(this.serializer,e),a=function(f){if(!("targetChange"in f))return ut.min();const E=f.targetChange;return E.targetIds&&E.targetIds.length?ut.min():E.readTime?Rs(E.readTime):ut.min()}(e);return this.listener.p_(t,a)}y_(e){const t={};t.database=T1(this.serializer),t.addTarget=function(f,E){let w;const T=E.target;if(w=E1(T)?{documents:xI(f,T)}:{query:_I(f,T).ht},w.targetId=E.targetId,E.resumeToken.approximateByteSize()>0){w.resumeToken=D_(f,E.resumeToken);const _=A1(f,E.expectedCount);_!==null&&(w.expectedCount=_)}else if(E.snapshotVersion.compareTo(ut.min())>0){w.readTime=vf(f,E.snapshotVersion.toTimestamp());const _=A1(f,E.expectedCount);_!==null&&(w.expectedCount=_)}return w}(this.serializer,e);const a=wI(this.serializer,e);a&&(t.labels=a),this.I_(t)}w_(e){const t={};t.database=T1(this.serializer),t.removeTarget=e,this.I_(t)}}class h8 extends H_{constructor(e,t,a,c,f,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,c,E),this.serializer=f}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,Jt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=EI(e.writeResults,e.commitTime),a=Rs(e.commitTime);return this.listener.v_(a,t)}C_(){const e={};e.database=T1(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>yI(this.serializer,a))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{}class d8 extends f8{constructor(e,t,a,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=c,this.F_=!1}M_(){if(this.F_)throw new Xe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,a,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,E])=>this.connection.bo(e,w1(t,a),c,f,E)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Xe(Ce.UNKNOWN,f.toString())})}Co(e,t,a,c,f){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([E,w])=>this.connection.Co(e,w1(t,a),c,E,w,f)).catch(E=>{throw E.name==="FirebaseError"?(E.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new Xe(Ce.UNKNOWN,E.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class g8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ma(t),this.N_=!1):qe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class m8{constructor(e,t,a,c,f){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=f,this.z_.To(E=>{a.enqueueAndForget(async()=>{tl(this)&&(qe(Ko,"Restarting streams for network reachability change."),await async function(T){const _=gt(T);_.W_.add(4),await Uu(_),_.j_.set("Unknown"),_.W_.delete(4),await Wf(_)}(this))})}),this.j_=new g8(a,c)}}async function Wf(r){if(tl(r))for(const e of r.G_)await e(!0)}async function Uu(r){for(const e of r.G_)await e(!1)}function G_(r,e){const t=gt(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),yg(t)?pg(t):lc(t).c_()&&mg(t,e))}function gg(r,e){const t=gt(r),a=lc(t);t.U_.delete(e),a.c_()&&q_(t,e),t.U_.size===0&&(a.c_()?a.P_():tl(t)&&t.j_.set("Unknown"))}function mg(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lc(r).y_(e)}function q_(r,e){r.H_.Ne(e),lc(r).w_(e)}function pg(r){r.H_=new cI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),lc(r).start(),r.j_.B_()}function yg(r){return tl(r)&&!lc(r).u_()&&r.U_.size>0}function tl(r){return gt(r).W_.size===0}function Y_(r){r.H_=void 0}async function p8(r){r.j_.set("Online")}async function y8(r){r.U_.forEach((e,t)=>{mg(r,e)})}async function E8(r,e){Y_(r),yg(r)?(r.j_.q_(e),pg(r)):r.j_.set("Unknown")}async function x8(r,e,t){if(r.j_.set("Online"),e instanceof R_&&e.state===2&&e.cause)try{await async function(c,f){const E=f.cause;for(const w of f.targetIds)c.U_.has(w)&&(await c.remoteSyncer.rejectListen(w,E),c.U_.delete(w),c.H_.removeTarget(w))}(r,e)}catch(a){qe(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Cf(r,a)}else if(e instanceof sf?r.H_.We(e):e instanceof N_?r.H_.Ze(e):r.H_.je(e),!t.isEqual(ut.min()))try{const a=await F_(r.localStore);t.compareTo(a)>=0&&await function(f,E){const w=f.H_.ot(E);return w.targetChanges.forEach((T,_)=>{if(T.resumeToken.approximateByteSize()>0){const I=f.U_.get(_);I&&f.U_.set(_,I.withResumeToken(T.resumeToken,E))}}),w.targetMismatches.forEach((T,_)=>{const I=f.U_.get(T);if(!I)return;f.U_.set(T,I.withResumeToken(Ni.EMPTY_BYTE_STRING,I.snapshotVersion)),q_(f,T);const M=new ao(I.target,T,_,I.sequenceNumber);mg(f,M)}),f.remoteSyncer.applyRemoteEvent(w)}(r,t)}catch(a){qe(Ko,"Failed to raise snapshot:",a),await Cf(r,a)}}async function Cf(r,e,t){if(!oc(e))throw e;r.W_.add(1),await Uu(r),r.j_.set("Offline"),t||(t=()=>F_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{qe(Ko,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await Wf(r)})}function X_(r,e){return e().catch(t=>Cf(r,t,e))}async function Qf(r){const e=gt(r),t=xo(e);let a=e.K_.length>0?e.K_[e.K_.length-1].batchId:eg;for(;_8(e);)try{const c=await t8(e.localStore,a);if(c===null){e.K_.length===0&&t.P_();break}a=c.batchId,A8(e,c)}catch(c){await Cf(e,c)}W_(e)&&Q_(e)}function _8(r){return tl(r)&&r.K_.length<10}function A8(r,e){r.K_.push(e);const t=xo(r);t.c_()&&t.b_&&t.S_(e.mutations)}function W_(r){return tl(r)&&!xo(r).u_()&&r.K_.length>0}function Q_(r){xo(r).start()}async function w8(r){xo(r).C_()}async function v8(r){const e=xo(r);for(const t of r.K_)e.S_(t.mutations)}async function T8(r,e,t){const a=r.K_.shift(),c=og.from(a,e,t);await X_(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),await Qf(r)}async function C8(r,e){e&&xo(r).b_&&await async function(a,c){if(function(E){return aI(E)&&E!==Ce.ABORTED}(c.code)){const f=a.K_.shift();xo(a).h_(),await X_(a,()=>a.remoteSyncer.rejectFailedWrite(f.batchId,c)),await Qf(a)}}(r,e),W_(r)&&Q_(r)}async function Zy(r,e){const t=gt(r);t.asyncQueue.verifyOperationInProgress(),qe(Ko,"RemoteStore received new credentials");const a=tl(t);t.W_.add(3),await Uu(t),a&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Wf(t)}async function S8(r,e){const t=gt(r);e?(t.W_.delete(2),await Wf(t)):e||(t.W_.add(2),await Uu(t),t.j_.set("Unknown"))}function lc(r){return r.J_||(r.J_=function(t,a,c){const f=gt(t);return f.M_(),new u8(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(r.datastore,r.asyncQueue,{xo:p8.bind(null,r),No:y8.bind(null,r),Lo:E8.bind(null,r),p_:x8.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),yg(r)?pg(r):r.j_.set("Unknown")):(await r.J_.stop(),Y_(r))})),r.J_}function xo(r){return r.Y_||(r.Y_=function(t,a,c){const f=gt(t);return f.M_(),new h8(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:w8.bind(null,r),Lo:C8.bind(null,r),D_:v8.bind(null,r),v_:T8.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await Qf(r)):(await r.Y_.stop(),r.K_.length>0&&(qe(Ko,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,a,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=c,this.removalCallback=f,this.deferred=new ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,c,f){const E=Date.now()+a,w=new Eg(e,t,E,c,f);return w.start(a),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(r,e){if(ma("AsyncQueue",`${e}: ${r}`),oc(r))return new Xe(Ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||tt.comparator(t.key,a.key):(t,a)=>tt.comparator(t.key,a.key),this.keyedMap=su(),this.sortedSet=new Mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Hl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.Z_=new Mn(tt.comparator)}track(e){const t=e.doc.key,a=this.Z_.get(t);a?e.type!==0&&a.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&a.type!==1?this.Z_=this.Z_.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Z_=this.Z_.remove(t):e.type===1&&a.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):lt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,a)=>{e.push(a)}),e}}class Zl{constructor(e,t,a,c,f,E,w,T,_){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=f,this.fromCache=E,this.syncStateChanged=w,this.excludesMetadataChanges=T,this.hasCachedResults=_}static fromInitialDocuments(e,t,a,c,f){const E=[];return t.forEach(w=>{E.push({type:0,doc:w})}),new Zl(e,t,Hl.emptySet(t),E,a,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==a[c].type||!t[c].doc.isEqual(a[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class I8{constructor(){this.queries=$y(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,a){const c=gt(t),f=c.queries;c.queries=$y(),f.forEach((E,w)=>{for(const T of w.ta)T.onError(a)})})(this,new Xe(Ce.ABORTED,"Firestore shutting down"))}}function $y(){return new $o(r=>m_(r),zf)}async function K_(r,e){const t=gt(r);let a=3;const c=e.query;let f=t.queries.get(c);f?!f.na()&&e.ra()&&(a=2):(f=new b8,a=e.ra()?0:1);try{switch(a){case 0:f.ea=await t.onListen(c,!0);break;case 1:f.ea=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(E){const w=xg(E,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(w)}t.queries.set(c,f),f.ta.push(e),e.sa(t.onlineState),f.ea&&e.oa(f.ea)&&_g(t)}async function Z_(r,e){const t=gt(r),a=e.query;let c=3;const f=t.queries.get(a);if(f){const E=f.ta.indexOf(e);E>=0&&(f.ta.splice(E,1),f.ta.length===0?c=e.ra()?0:1:!f.na()&&e.ra()&&(c=2))}switch(c){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function N8(r,e){const t=gt(r);let a=!1;for(const c of e){const f=c.query,E=t.queries.get(f);if(E){for(const w of E.ta)w.oa(c)&&(a=!0);E.ea=c}}a&&_g(t)}function R8(r,e,t){const a=gt(r),c=a.queries.get(e);if(c)for(const f of c.ta)f.onError(t);a.queries.delete(e)}function _g(r){r.ia.forEach(e=>{e.next()})}var b1,eE;(eE=b1||(b1={}))._a="default",eE.Cache="cache";class J_{constructor(e,t,a){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)c.type!==3&&a.push(c);e=new Zl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const a=t!=="Offline";return(!this.options.Ta||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==b1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this.key=e}}class eA{constructor(e){this.key=e}}class D8{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Mt(),this.mutatedKeys=Mt(),this.ya=p_(e),this.wa=new Hl(this.ya)}get ba(){return this.fa}Sa(e,t){const a=t?t.Da:new Jy,c=t?t.wa:this.wa;let f=t?t.mutatedKeys:this.mutatedKeys,E=c,w=!1;const T=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,_=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((I,M)=>{const V=c.get(I),F=Hf(this.query,M)?M:null,K=!!V&&this.mutatedKeys.has(V.key),ie=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let te=!1;V&&F?V.data.isEqual(F.data)?K!==ie&&(a.track({type:3,doc:F}),te=!0):this.va(V,F)||(a.track({type:2,doc:F}),te=!0,(T&&this.ya(F,T)>0||_&&this.ya(F,_)<0)&&(w=!0)):!V&&F?(a.track({type:0,doc:F}),te=!0):V&&!F&&(a.track({type:1,doc:V}),te=!0,(T||_)&&(w=!0)),te&&(F?(E=E.add(F),f=ie?f.add(I):f.delete(I)):(E=E.delete(I),f=f.delete(I)))}),this.query.limit!==null)for(;E.size>this.query.limit;){const I=this.query.limitType==="F"?E.last():E.first();E=E.delete(I.key),f=f.delete(I.key),a.track({type:1,doc:I})}return{wa:E,Da:a,ls:w,mutatedKeys:f}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,c){const f=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const E=e.Da.X_();E.sort((I,M)=>function(F,K){const ie=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return ie(F)-ie(K)}(I.type,M.type)||this.ya(I.doc,M.doc)),this.Ca(a),c=c!=null&&c;const w=t&&!c?this.Fa():[],T=this.pa.size===0&&this.current&&!c?1:0,_=T!==this.ga;return this.ga=T,E.length!==0||_?{snapshot:new Zl(this.query,e.wa,f,E,e.mutatedKeys,T===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:w}:{Ma:w}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Jy,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Mt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const t=[];return e.forEach(a=>{this.pa.has(a)||t.push(new eA(a))}),this.pa.forEach(a=>{e.has(a)||t.push(new $_(a))}),t}Oa(e){this.fa=e.gs,this.pa=Mt();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Zl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ag="SyncEngine";class O8{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class M8{constructor(e){this.key=e,this.Ba=!1}}class L8{constructor(e,t,a,c,f,E){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=E,this.La={},this.ka=new $o(w=>m_(w),zf),this.qa=new Map,this.Qa=new Set,this.$a=new Mn(tt.comparator),this.Ka=new Map,this.Ua=new ug,this.Wa={},this.Ga=new Map,this.za=Kl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function P8(r,e,t=!0){const a=aA(r);let c;const f=a.ka.get(e);return f?(a.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.Na()):c=await tA(a,e,t,!0),c}async function k8(r,e){const t=aA(r);await tA(t,e,!0,!1)}async function tA(r,e,t,a){const c=await n8(r.localStore,Ns(e)),f=c.targetId,E=r.sharedClientState.addLocalQueryTarget(f,t);let w;return a&&(w=await B8(r,e,f,E==="current",c.resumeToken)),r.isPrimaryClient&&t&&G_(r.remoteStore,c),w}async function B8(r,e,t,a,c){r.Ha=(M,V,F)=>async function(ie,te,ue,ye){let se=te.view.Sa(ue);se.ls&&(se=await Yy(ie.localStore,te.query,!1).then(({documents:z})=>te.view.Sa(z,se)));const De=ye&&ye.targetChanges.get(te.targetId),Ue=ye&&ye.targetMismatches.get(te.targetId)!=null,Se=te.view.applyChanges(se,ie.isPrimaryClient,De,Ue);return nE(ie,te.targetId,Se.Ma),Se.snapshot}(r,M,V,F);const f=await Yy(r.localStore,e,!0),E=new D8(e,f.gs),w=E.Sa(f.documents),T=Bu.createSynthesizedTargetChangeForCurrentChange(t,a&&r.onlineState!=="Offline",c),_=E.applyChanges(w,r.isPrimaryClient,T);nE(r,t,_.Ma);const I=new O8(e,t,E);return r.ka.set(e,I),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),_.snapshot}async function U8(r,e,t){const a=gt(r),c=a.ka.get(e),f=a.qa.get(c.targetId);if(f.length>1)return a.qa.set(c.targetId,f.filter(E=>!zf(E,e))),void a.ka.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(c.targetId),a.sharedClientState.isActiveQueryTarget(c.targetId)||await C1(a.localStore,c.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(c.targetId),t&&gg(a.remoteStore,c.targetId),I1(a,c.targetId)}).catch(ac)):(I1(a,c.targetId),await C1(a.localStore,c.targetId,!0))}async function V8(r,e){const t=gt(r),a=t.ka.get(e),c=t.qa.get(a.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),gg(t.remoteStore,a.targetId))}async function j8(r,e,t){const a=X8(r);try{const c=await function(E,w){const T=gt(E),_=hi.now(),I=w.reduce((F,K)=>F.add(K.key),Mt());let M,V;return T.persistence.runTransaction("Locally write mutations","readwrite",F=>{let K=pa(),ie=Mt();return T.ds.getEntries(F,I).next(te=>{K=te,K.forEach((ue,ye)=>{ye.isValidDocument()||(ie=ie.add(ue))})}).next(()=>T.localDocuments.getOverlayedDocuments(F,K)).next(te=>{M=te;const ue=[];for(const ye of w){const se=tI(ye,M.get(ye.key).overlayedDocument);se!=null&&ue.push(new el(ye.key,se,o_(se.value.mapValue),fa.exists(!0)))}return T.mutationQueue.addMutationBatch(F,_,ue,w)}).next(te=>{V=te;const ue=te.applyToLocalDocumentSet(M,ie);return T.documentOverlayCache.saveOverlays(F,te.batchId,ue)})}).then(()=>({batchId:V.batchId,changes:E_(M)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(E,w,T){let _=E.Wa[E.currentUser.toKey()];_||(_=new Mn(kt)),_=_.insert(w,T),E.Wa[E.currentUser.toKey()]=_}(a,c.batchId,t),await Vu(a,c.changes),await Qf(a.remoteStore)}catch(c){const f=xg(c,"Failed to persist write");t.reject(f)}}async function nA(r,e){const t=gt(r);try{const a=await $I(t.localStore,e);e.targetChanges.forEach((c,f)=>{const E=t.Ka.get(f);E&&(Jt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?E.Ba=!0:c.modifiedDocuments.size>0?Jt(E.Ba):c.removedDocuments.size>0&&(Jt(E.Ba),E.Ba=!1))}),await Vu(t,a,e)}catch(a){await ac(a)}}function tE(r,e,t){const a=gt(r);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const c=[];a.ka.forEach((f,E)=>{const w=E.view.sa(e);w.snapshot&&c.push(w.snapshot)}),function(E,w){const T=gt(E);T.onlineState=w;let _=!1;T.queries.forEach((I,M)=>{for(const V of M.ta)V.sa(w)&&(_=!0)}),_&&_g(T)}(a.eventManager,e),c.length&&a.La.p_(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function F8(r,e,t){const a=gt(r);a.sharedClientState.updateQueryState(e,"rejected",t);const c=a.Ka.get(e),f=c&&c.key;if(f){let E=new Mn(tt.comparator);E=E.insert(f,ji.newNoDocument(f,ut.min()));const w=Mt().add(f),T=new Yf(ut.min(),new Map,new Mn(kt),E,w);await nA(a,T),a.$a=a.$a.remove(f),a.Ka.delete(e),wg(a)}else await C1(a.localStore,e,!1).then(()=>I1(a,e,t)).catch(ac)}async function z8(r,e){const t=gt(r),a=e.batch.batchId;try{const c=await JI(t.localStore,e);rA(t,a,null),iA(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Vu(t,c)}catch(c){await ac(c)}}async function H8(r,e,t){const a=gt(r);try{const c=await function(E,w){const T=gt(E);return T.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return T.mutationQueue.lookupMutationBatch(_,w).next(M=>(Jt(M!==null),I=M.keys(),T.mutationQueue.removeMutationBatch(_,M))).next(()=>T.mutationQueue.performConsistencyCheck(_)).next(()=>T.documentOverlayCache.removeOverlaysForBatchId(_,I,w)).next(()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>T.localDocuments.getDocuments(_,I))})}(a.localStore,e);rA(a,e,t),iA(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Vu(a,c)}catch(c){await ac(c)}}function iA(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function rA(r,e,t){const a=gt(r);let c=a.Wa[a.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),a.Wa[a.currentUser.toKey()]=c}}function I1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.qa.get(e))r.ka.delete(a),t&&r.La.Ja(a,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.Sr(e).forEach(a=>{r.Ua.containsKey(a)||sA(r,a)})}function sA(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(gg(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),wg(r))}function nE(r,e,t){for(const a of t)a instanceof $_?(r.Ua.addReference(a.key,e),G8(r,a)):a instanceof eA?(qe(Ag,"Document no longer in limbo: "+a.key),r.Ua.removeReference(a.key,e),r.Ua.containsKey(a.key)||sA(r,a.key)):lt()}function G8(r,e){const t=e.key,a=t.path.canonicalString();r.$a.get(t)||r.Qa.has(a)||(qe(Ag,"New document in limbo: "+t),r.Qa.add(a),wg(r))}function wg(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new tt(wn.fromString(e)),a=r.za.next();r.Ka.set(a,new M8(t)),r.$a=r.$a.insert(t,a),G_(r.remoteStore,new ao(Ns(sg(t.path)),a,"TargetPurposeLimboResolution",Vf.ae))}}async function Vu(r,e,t){const a=gt(r),c=[],f=[],E=[];a.ka.isEmpty()||(a.ka.forEach((w,T)=>{E.push(a.Ha(T,e,t).then(_=>{var I;if((_||t)&&a.isPrimaryClient){const M=_?!_.fromCache:(I=t==null?void 0:t.targetChanges.get(T.targetId))===null||I===void 0?void 0:I.current;a.sharedClientState.updateQueryState(T.targetId,M?"current":"not-current")}if(_){c.push(_);const M=fg.Yi(T.targetId,_);f.push(M)}}))}),await Promise.all(E),a.La.p_(c),await async function(T,_){const I=gt(T);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ve.forEach(_,V=>ve.forEach(V.Hi,F=>I.persistence.referenceDelegate.addReference(M,V.targetId,F)).next(()=>ve.forEach(V.Ji,F=>I.persistence.referenceDelegate.removeReference(M,V.targetId,F)))))}catch(M){if(!oc(M))throw M;qe(dg,"Failed to update sequence numbers: "+M)}for(const M of _){const V=M.targetId;if(!M.fromCache){const F=I.Ts.get(V),K=F.snapshotVersion,ie=F.withLastLimboFreeSnapshotVersion(K);I.Ts=I.Ts.insert(V,ie)}}}(a.localStore,f))}async function q8(r,e){const t=gt(r);if(!t.currentUser.isEqual(e)){qe(Ag,"User change. New user:",e.toKey());const a=await j_(t.localStore,e);t.currentUser=e,function(f,E){f.Ga.forEach(w=>{w.forEach(T=>{T.reject(new Xe(Ce.CANCELLED,E))})}),f.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Vu(t,a.Rs)}}function Y8(r,e){const t=gt(r),a=t.Ka.get(e);if(a&&a.Ba)return Mt().add(a.key);{let c=Mt();const f=t.qa.get(e);if(!f)return c;for(const E of f){const w=t.ka.get(E);c=c.unionWith(w.view.ba)}return c}}function aA(r){const e=gt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=nA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F8.bind(null,e),e.La.p_=N8.bind(null,e.eventManager),e.La.Ja=R8.bind(null,e.eventManager),e}function X8(r){const e=gt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H8.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ZI(this.persistence,new WI,e.initialUser,this.serializer)}Xa(e){return new V_(hg.ri,this.serializer)}Za(e){return new r8}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class W8 extends Sf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Jt(this.persistence.referenceDelegate instanceof Tf);const a=this.persistence.referenceDelegate.garbageCollector;return new MI(a,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new V_(a=>Tf.ri(a,t),this.serializer)}}class N1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>tE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=q8.bind(null,this.syncEngine),await S8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I8}()}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),a=function(f){return new c8(f)}(e.databaseInfo);return function(f,E,w,T){return new d8(f,E,w,T)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,c,f,E,w){return new m8(a,c,f,E,w)}(this.localStore,this.datastore,e.asyncQueue,t=>tE(this.syncEngine,t,0),function(){return Qy.D()?new Qy:new s8}())}createSyncEngine(e,t){return function(c,f,E,w,T,_,I){const M=new L8(c,f,E,w,T,_);return I&&(M.ja=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(c){const f=gt(c);qe(Ko,"RemoteStore shutting down."),f.W_.add(5),await Uu(f),f.z_.shutdown(),f.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}N1.provider={build:()=>new N1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="FirestoreClient";class Q8{constructor(e,t,a,c,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=c,this.user=Vi.UNAUTHENTICATED,this.clientId=Zx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(a,async E=>{qe(_o,"Received user=",E.uid),await this.authCredentialListener(E),this.user=E}),this.appCheckCredentials.start(a,E=>(qe(_o,"Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=xg(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function n1(r,e){r.asyncQueue.verifyOperationInProgress(),qe(_o,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let a=t.initialUser;r.setCredentialChangeListener(async c=>{a.isEqual(c)||(await j_(e.localStore,c),a=c)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function iE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await K8(r);qe(_o,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(a=>Zy(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,c)=>Zy(e.remoteStore,c)),r._onlineComponents=e}async function K8(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){qe(_o,"Using user provided OfflineComponentProvider");try{await n1(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(c){return c.name==="FirebaseError"?c.code===Ce.FAILED_PRECONDITION||c.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(t))throw t;Yl("Error using user provided cache. Falling back to memory cache: "+t),await n1(r,new Sf)}}else qe(_o,"Using default OfflineComponentProvider"),await n1(r,new W8(void 0));return r._offlineComponents}async function lA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(qe(_o,"Using user provided OnlineComponentProvider"),await iE(r,r._uninitializedComponentsProvider._online)):(qe(_o,"Using default OnlineComponentProvider"),await iE(r,new N1))),r._onlineComponents}function Z8(r){return lA(r).then(e=>e.syncEngine)}async function cA(r){const e=await lA(r),t=e.eventManager;return t.onListen=P8.bind(null,e.syncEngine),t.onUnlisten=U8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=k8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=V8.bind(null,e.syncEngine),t}function J8(r,e,t={}){const a=new ha;return r.asyncQueue.enqueueAndForget(async()=>function(f,E,w,T,_){const I=new oA({next:V=>{I.su(),E.enqueueAndForget(()=>Z_(f,M));const F=V.docs.has(w);!F&&V.fromCache?_.reject(new Xe(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&V.fromCache&&T&&T.source==="server"?_.reject(new Xe(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(V)},error:V=>_.reject(V)}),M=new J_(sg(w.path),I,{includeMetadataChanges:!0,Ta:!0});return K_(f,M)}(await cA(r),r.asyncQueue,e,t,a)),a.promise}function $8(r,e,t={}){const a=new ha;return r.asyncQueue.enqueueAndForget(async()=>function(f,E,w,T,_){const I=new oA({next:V=>{I.su(),E.enqueueAndForget(()=>Z_(f,M)),V.fromCache&&T.source==="server"?_.reject(new Xe(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(V)},error:V=>_.reject(V)}),M=new J_(w,I,{includeMetadataChanges:!0,Ta:!0});return K_(f,M)}(await cA(r),r.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(r,e,t){if(!t)throw new Xe(Ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function e6(r,e,t,a){if(e===!0&&a===!0)throw new Xe(Ce.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function sE(r){if(!tt.isDocumentKey(r))throw new Xe(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function aE(r){if(tt.isDocumentKey(r))throw new Xe(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":lt()}function Zo(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Xe(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kf(r);throw new Xe(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firestore.googleapis.com",oE=!0;class lE{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fA,this.ssl=oE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:oE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new Xe(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uA((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new Xe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new Xe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new Xe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,c){return a.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,a,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new l4;switch(a.type){case"firstParty":return new f4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Xe(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=rE.get(t);a&&(qe("ComponentProvider","Removing Datastore"),rE.delete(t),a.terminate())}(this),Promise.resolve()}}function t6(r,e,t,a={}){var c;const f=(r=Zo(r,Zf))._getSettings(),E=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),w=`${e}:${t}`;f.host!==fA&&f.host!==w&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T=Object.assign(Object.assign({},f),{host:w,ssl:!1,emulatorOptions:a});if(!qo(T,E)&&(r._setSettings(T),a.mockUserToken)){let _,I;if(typeof a.mockUserToken=="string")_=a.mockUserToken,I=Vi.MOCK_USER;else{_=AC(a.mockUserToken,(c=r._app)===null||c===void 0?void 0:c.options.projectId);const M=a.mockUserToken.sub||a.mockUserToken.user_id;if(!M)throw new Xe(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Vi(M)}r._authCredentials=new c4(new Kx(_,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new cc(this.firestore,e,this._query)}}class gr{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class fo extends cc{constructor(e,t,a){super(e,t,sg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new tt(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function Jl(r,e,...t){if(r=$i(r),hA("collection","path",e),r instanceof Zf){const a=wn.fromString(e,...t);return aE(a),new fo(r,null,a)}{if(!(r instanceof gr||r instanceof fo))throw new Xe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(wn.fromString(e,...t));return aE(a),new fo(r.firestore,null,a)}}function Gl(r,e,...t){if(r=$i(r),arguments.length===1&&(e=Zx.newId()),hA("doc","path",e),r instanceof Zf){const a=wn.fromString(e,...t);return sE(a),new gr(r,null,new tt(a))}{if(!(r instanceof gr||r instanceof fo))throw new Xe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(wn.fromString(e,...t));return sE(a),new gr(r.firestore,r instanceof fo?r.converter:null,new tt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new z_(this,"async_queue_retry"),this.bu=()=>{const a=t1();a&&qe(cE,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.Su=e;const t=t1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=t1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ha;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!oc(e))throw e;qe(cE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(a=>{this.gu=a,this.pu=!1;const c=function(E){let w=E.message||"";return E.stack&&(w=E.stack.includes(E.message)?E.stack:E.message+`
`+E.stack),w}(a);throw ma("INTERNAL UNHANDLED ERROR: ",c),a}).then(a=>(this.pu=!1,a))));return this.Su=t,t}enqueueAfterDelay(e,t,a){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const c=Eg.createAndSchedule(this,e,t,a,f=>this.Fu(f));return this.fu.push(c),c}Du(){this.gu&&lt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Jf extends Zf{constructor(e,t,a,c){super(e,t,a,c),this.type="firestore",this._queue=new uE,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function dA(r,e){const t=typeof r=="object"?r:ax(),a=typeof r=="string"?r:yf,c=F1(t,"firestore").getImmediate({identifier:a});if(!c._initialized){const f=xC("firestore");f&&t6(c,...f)}return c}function vg(r){if(r._terminated)throw new Xe(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||n6(r),r._firestoreClient}function n6(r){var e,t,a;const c=r._freezeSettings(),f=function(w,T,_,I){return new S4(w,T,_,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,uA(I.experimentalLongPollingOptions),I.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,c);r._componentsProvider||!((t=c.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=c.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider}),r._firestoreClient=new Q8(r._authCredentials,r._appCheckCredentials,r._queue,f,r._componentsProvider&&function(w){const T=w==null?void 0:w._online.build();return{_offline:w==null?void 0:w._offline.build(T),_online:T}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $l(Ni.fromBase64String(e))}catch(t){throw new Xe(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $l(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xe(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xe(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xe(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,c){if(a.length!==c.length)return!1;for(let f=0;f<a.length;++f)if(a[f]!==c[f])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=/^__.*__$/;class r6{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new el(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}function mA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class bg{constructor(e,t,a,c,f,E){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=c,f===void 0&&this.Bu(),this.fieldTransforms=f||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.$u(e),c}Ku(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),c=this.ku({path:a,Qu:!1});return c.Bu(),c}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return bf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(mA(this.Lu)&&i6.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class s6{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Xf(e)}ju(e,t,a,c=!1){return new bg({Lu:e,methodName:t,zu:a,path:Ii.emptyPath(),Qu:!1,Gu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pA(r){const e=r._freezeSettings(),t=Xf(r._databaseId);return new s6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function a6(r,e,t,a,c,f={}){const E=r.ju(f.merge||f.mergeFields?2:0,e,t,c);xA("Data must be an object, but it was:",E,a);const w=yA(a,E);let T,_;if(f.merge)T=new cs(E.fieldMask),_=E.fieldTransforms;else if(f.mergeFields){const I=[];for(const M of f.mergeFields){const V=l6(e,M,t);if(!E.contains(V))throw new Xe(Ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);u6(I,V)||I.push(V)}T=new cs(I),_=E.fieldTransforms.filter(M=>T.covers(M.field))}else T=null,_=E.fieldTransforms;return new r6(new Qr(w),T,_)}function o6(r,e,t,a=!1){return Ig(t,r.ju(a?4:3,e))}function Ig(r,e){if(EA(r=$i(r)))return xA("Unsupported field value:",e,r),yA(r,e);if(r instanceof gA)return function(a,c){if(!mA(c.Lu))throw c.Wu(`${a._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Wu(`${a._methodName}() is not currently supported inside arrays`);const f=a._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(a,c){const f=[];let E=0;for(const w of a){let T=Ig(w,c.Uu(E));T==null&&(T={nullValue:"NULL_VALUE"}),f.push(T),E++}return{arrayValue:{values:f}}}(r,e)}return function(a,c){if((a=$i(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Q4(c.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const f=hi.fromDate(a);return{timestampValue:vf(c.serializer,f)}}if(a instanceof hi){const f=new hi(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:vf(c.serializer,f)}}if(a instanceof Cg)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof $l)return{bytesValue:D_(c.serializer,a._byteString)};if(a instanceof gr){const f=c.databaseId,E=a.firestore._databaseId;if(!E.isEqual(f))throw c.Wu(`Document reference is for database ${E.projectId}/${E.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:cg(a.firestore._databaseId||c.databaseId,a._key.path)}}if(a instanceof Sg)return function(E,w){return{mapValue:{fields:{[s_]:{stringValue:a_},[Ef]:{arrayValue:{values:E.toArray().map(_=>{if(typeof _!="number")throw w.Wu("VectorValues must only contain numeric values.");return ag(w.serializer,_)})}}}}}}(a,c);throw c.Wu(`Unsupported field value: ${Kf(a)}`)}(r,e)}function yA(r,e){const t={};return $x(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(r,(a,c)=>{const f=Ig(c,e.qu(a));f!=null&&(t[a]=f)}),{mapValue:{fields:t}}}function EA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof hi||r instanceof Cg||r instanceof $l||r instanceof gr||r instanceof gA||r instanceof Sg)}function xA(r,e,t){if(!EA(t)||!function(c){return typeof c=="object"&&c!==null&&(Object.getPrototypeOf(c)===Object.prototype||Object.getPrototypeOf(c)===null)}(t)){const a=Kf(t);throw a==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+a)}}function l6(r,e,t){if((e=$i(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return _A(r,e);throw bf("Field path arguments must be of type string or ",r,!1,void 0,t)}const c6=new RegExp("[~\\*/\\[\\]]");function _A(r,e,t){if(e.search(c6)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Tg(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bf(r,e,t,a,c){const f=a&&!a.isEmpty(),E=c!==void 0;let w=`Function ${e}() called with invalid data`;t&&(w+=" (via `toFirestore()`)"),w+=". ";let T="";return(f||E)&&(T+=" (found",f&&(T+=` in field ${a}`),E&&(T+=` in document ${c}`),T+=")"),new Xe(Ce.INVALID_ARGUMENT,w+r+T)}function u6(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t,a,c,f){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ng("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class h6 extends AA{data(){return super.data()}}function Ng(r,e){return typeof e=="string"?_A(r,e):e instanceof Tg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Xe(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class d6 extends Rg{}function $f(r,e,...t){let a=[];e instanceof Rg&&a.push(e),a=a.concat(t),function(f){const E=f.filter(T=>T instanceof Dg).length,w=f.filter(T=>T instanceof ed).length;if(E>1||E>0&&w>0)throw new Xe(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const c of a)r=c._apply(r);return r}class ed extends d6{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new ed(e,t,a)}_apply(e){const t=this._parse(e);return wA(e._query,t),new cc(e.firestore,e.converter,x1(e._query,t))}_parse(e){const t=pA(e.firestore);return function(f,E,w,T,_,I,M){let V;if(_.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new Xe(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){fE(M,I);const K=[];for(const ie of M)K.push(hE(T,f,ie));V={arrayValue:{values:K}}}else V=hE(T,f,M)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||fE(M,I),V=o6(w,E,M,I==="in"||I==="not-in");return ri.create(_,I,V)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Tu(r,e,t){const a=e,c=Ng("where",r);return ed._create(c,a,t)}class Dg extends Rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dg(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:hs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(c,f){let E=c;const w=f.getFlattenedFilters();for(const T of w)wA(E,T),E=x1(E,T)}(e._query,t),new cc(e.firestore,e.converter,x1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function hE(r,e,t){if(typeof(t=$i(t))=="string"){if(t==="")throw new Xe(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g_(e)&&t.indexOf("/")!==-1)throw new Xe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(wn.fromString(t));if(!tt.isDocumentKey(a))throw new Xe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return by(r,new tt(a))}if(t instanceof gr)return by(r,t._key);throw new Xe(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(t)}.`)}function fE(r,e){if(!Array.isArray(r)||r.length===0)throw new Xe(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wA(r,e){const t=function(c,f){for(const E of c)for(const w of E.getFlattenedFilters())if(f.indexOf(w.op)>=0)return w.op;return null}(r.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Xe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class g6{convertValue(e,t="none"){switch(Eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Jo(e,(c,f)=>{a[c]=this.convertValue(f,t)}),a}convertVectorValue(e){var t,a,c;const f=(c=(a=(t=e.fields)===null||t===void 0?void 0:t[Ef].arrayValue)===null||a===void 0?void 0:a.values)===null||c===void 0?void 0:c.map(E=>Qn(E.doubleValue));return new Sg(f)}convertGeoPoint(e){return new Cg(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Ff(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=po(e);return new hi(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=wn.fromString(e);Jt(B_(a));const c=new _u(a.get(1),a.get(3)),f=new tt(a.popFirst(5));return c.isEqual(t)||ma(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(r,e,t){let a;return a=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vA extends AA{constructor(e,t,a,c,f,E){super(e,t,a,c,E),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Ng("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class af extends vA{data(e={}){return super.data(e)}}class p6{constructor(e,t,a,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new ou(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new af(this._firestore,this._userDataWriter,a.key,a,new ou(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xe(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let E=0;return c._snapshot.docChanges.map(w=>{const T=new af(c._firestore,c._userDataWriter,w.doc.key,w.doc,new ou(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter);return w.doc,{type:"added",doc:T,oldIndex:-1,newIndex:E++}})}{let E=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(w=>f||w.type!==3).map(w=>{const T=new af(c._firestore,c._userDataWriter,w.doc.key,w.doc,new ou(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter);let _=-1,I=-1;return w.type!==0&&(_=E.indexOf(w.doc.key),E=E.delete(w.doc.key)),w.type!==1&&(E=E.add(w.doc),I=E.indexOf(w.doc.key)),{type:y6(w.type),doc:T,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function y6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(r){r=Zo(r,gr);const e=Zo(r.firestore,Jf);return J8(vg(e),r._key).then(t=>x6(e,r,t))}class TA extends g6{constructor(e){super(),this.firestore=e}convertBytes(e){return new $l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}function ju(r){r=Zo(r,cc);const e=Zo(r.firestore,Jf),t=vg(e),a=new TA(e);return f6(r._query),$8(t,r._query).then(c=>new p6(e,a,r,c))}function R1(r,e,t){r=Zo(r,gr);const a=Zo(r.firestore,Jf),c=m6(r.converter,e,t);return E6(a,[a6(pA(a),"setDoc",r._key,c,r.converter!==null,t).toMutation(r._key,fa.none())])}function E6(r,e){return function(a,c){const f=new ha;return a.asyncQueue.enqueueAndForget(async()=>j8(await Z8(a),c,f)),f.promise}(vg(r),e)}function x6(r,e,t){const a=t.docs.get(e._key),c=new TA(r);return new vA(r,c,e._key,a,new ou(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(c){sc=c})(ic),ql(new Yo("firestore",(a,{instanceIdentifier:c,options:f})=>{const E=a.getProvider("app").getImmediate(),w=new Jf(new u4(a.getProvider("auth-internal")),new d4(E,a.getProvider("app-check-internal")),function(_,I){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Xe(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(_.options.projectId,I)}(E,c),E);return f=Object.assign({useFetchStreams:t},f),w._setSettings(f),w},"PUBLIC").setMultipleInstances(!0)),uo(py,yy,e),uo(py,yy,"esm2017")})();var _6="firebase",A6="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo(_6,A6,"app");const w6={apiKey:"AIzaSyAWqY7GcAk8HrraCcz1K0X5BH2nF6J_Np0",authDomain:"bisonsports-3662c.firebaseapp.com",projectId:"bisonsports-3662c",storageBucket:"bisonsports-3662c.firebasestorage.app",messagingSenderId:"911932271804",appId:"1:911932271804:web:467211f18543861028b4b9",measurementId:"G-8W6H01EL54"},CA=sx(w6),Ds=dA(CA);so(CA);new bs;const dE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEkUlEQVR4nO2Zb0wbZRzHn3taesUtRpOJYbo/DoQM5c/GMgryzxkYxbGBiQsbNBCEFGaIY8zCCuaUMSiQAQMGQWAgcSY2GeuNuzpc8NqNvRoCItE3841Dthj3ToNzbX+mVRBI197Zo2VJv8n3XZ+nn89dn6dPrwj5448/HgcoJIWqgGIoxywU4HuQTfwJSsIKBxBAKgJIQzbIJhZBhX+BE/g6VAUU2ccgXwc0UgWU4tvwNmGBJASCqiQsoMa3QRsQ433wOlk4qPEsvCkQ2llTEUAxnoEaFOIdeA3RCumEzWPwtT2IrHCK0K0f+HkUCMX4B9HBk9b0PTwNFJKJC9+NngcVfrDu8En/toJoFw9+EMnhOPGr1+DLCE40eIeAGn/vPXgsMvyHRIfgrbEMT0IlroUmaQpQaAtQKAjOSN6C05hy7Db21zgbW4pN4sI3kyGQQVh5g5+W9PJZfEChZ+ADydAqkVKR4R1vVIHv8IIvwPNwDr0oeP4aFAJ5+P76wJvl22CcfAQaCUCyC/gSPAV6JEEbLWAmdWAmwdHeAIB0wvmV35DweiQBs2x+WcDeURmACv8Hn0lYoAK9hDZiwCSPXwW/VI4E0En/ObuclPSjjRowybROBZY6FPAAyhGJNmrATF5xKWCSdQiZL1gzC2I0XDthO9rUd9e9gImccynAkRm+EAjWzMIbddcW+Qg8dCMQ6iuB3TW3rHwEHrkWQJt9JbCjehKeaoHtVd+C5x+hm7IwXwns1t60Pd2L+JNRHovYTI642UY7fSVwRDc8z0NAduZJ8A+5Z6Geif/jvF4RiEROy3D+puiPvrG4Eii/0DjqXoALVDiDnx0PBhWthENXs6HDGHtJbIGTnfX97u6Arq/iuHsBQBjMsntL4DYzCfRYOGQbDjvg7c2jlZaL11/bJhZ8W496Z2SNyeoK/vVas4XiKH5P88BENtrhfzdthrNMwjL4ylaPJi9wXIrHjwcpjpIeafxswd3VL2lrm+A9KXCBL98df+GvEjrdKfxSP2YTZjyRoDhKmt/SM+d2/6+egsbuylhBkzcwihlX8CvvRP/X4VuFwvfeiNhe1lX3E5/d51hz75zQ+RE9FvZKPq208pHIp5WWzq/2DlCDKXJ38w6PRW1qZ/b15RmU1pyRHDja2uH2FEp9ekrQl+dyutmY1iweAitFGljFdJdxL6VnIw5cGdsVdJkL2zJgjEq8aNxTV8ckTNpfs3JM1kgOFPZQsLXqO6cC77c3dSNPomPjpvkKeNKiwXLYWX1nFfy7TQM/Ik+j10fINHTqfW9IFH5RCJG1Jgd8ev2Xv53o6hJ0cHxiOG7HczVM4oI3JI7pc0HVemGeGq4MEgV+hYT8LBM/K2RN/J+eYxXTRmPo+v3m7jNGNecaMq2iX3lDprWXjWlG3sgwvSe0gY2beseQ5TF4ztXDjqt++caru5C3MzQWGdvM7L9VZDj4WCh4AZ3xuJGJm/icifb+n3xrowck6WeiC1uN+0a1TOLPajptUWVQWu13yH4IzDVk2tSGtMWqa8nzLex+ts8YU2Afg/zxxx/kaf4GzSVnCicBYF0AAAAASUVORK5CYII=",v6="/assets/sports-facility-BY6agW8J.jpg",SA=({isOpen:r,onClose:e,onAuthSuccess:t})=>{const[a,c]=ee.useState("login"),[f,E]=ee.useState(!1),[w,T]=ee.useState({name:"",email:"",password:"",confirmPassword:"",mobileNo:"",rememberMe:!1}),[_,I]=ee.useState(""),[M,V]=ee.useState(!1),[F,K]=ee.useState(!1),[ie,te]=ee.useState(""),[ue,ye]=ee.useState(null),[se,De]=ee.useState(!1),[Ue,Se]=ee.useState(""),[z,H]=ee.useState(!1),P=ee.useRef(null);ee.useEffect(()=>{const Ve=Te=>{P.current&&!P.current.contains(Te.target)&&e()};return r&&document.addEventListener("mousedown",Ve),()=>{document.removeEventListener("mousedown",Ve)}},[r,e]);const W=Ve=>{switch(Ve){case"auth/invalid-credential":return"Invalid email or password";case"auth/wrong-password":return"Invalid password";case"auth/user-not-found":return"Invalid email.";case"auth/email-already-in-use":return"This email is already registered. Please try logging in.";case"auth/weak-password":return"Password should be at least 6 characters long";case"auth/invalid-email":return"Please enter a valid email address";case"auth/network-request-failed":return"Network error. Please check your internet connection";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}};if(!r)return null;const J=Ve=>{Ve!==a&&(c(Ve),I(""))},Q=Ve=>{const{name:Te,value:Y,type:xe,checked:Me}=Ve.target;T(je=>({...je,[Te]:xe==="checkbox"?Me:Y})),_&&I("")},q=async Ve=>{if(Ve.preventDefault(),I(""),V(!0),w.password!==w.confirmPassword){I("Passwords do not match"),V(!1);return}try{const Te=so(),Y=await Y3(Te,w.email,w.password);await R1(Gl(Ds,"users",Y.user.uid),{name:w.name,email:w.email,mobileNo:w.mobileNo,createdAt:new Date().toISOString()});const xe={uid:Y.user.uid,email:Y.user.email,name:w.name,mobileNo:w.mobileNo,lastFetched:new Date().getTime()};localStorage.setItem("userData",JSON.stringify(xe)),typeof t=="function"&&t(Y.user),e()}catch(Te){I(W(Te.code))}finally{V(!1)}},ht=async Ve=>{Ve.preventDefault(),I(""),V(!0);try{const Te=so(),Y=await X3(Te,w.email,w.password),xe={uid:Y.user.uid,email:Y.user.email,lastFetched:new Date().getTime()};localStorage.setItem("userData",JSON.stringify(xe)),typeof t=="function"&&t(Y.user),e()}catch(Te){console.error("Login error:",Te),I(W(Te.code))}finally{V(!1)}},fe=async()=>{if(!ie.trim()){I("Please enter your mobile number");return}try{await R1(Gl(Ds,"users",ue.uid),{name:ue.displayName,email:ue.email,photoURL:ue.photoURL,mobileNo:ie,createdAt:new Date().toISOString()},{merge:!0});const Ve={uid:ue.uid,email:ue.email,name:ue.displayName,mobileNo:ie,lastFetched:new Date().getTime()};localStorage.setItem("userData",JSON.stringify(Ve)),typeof t=="function"&&t(ue),K(!1),e()}catch{I("Failed to save mobile number. Please try again.")}},be=async()=>{I(""),V(!0);try{const Ve=so(),Te=new bs,Y=await pb(Ve,Te),xe=await Og(Gl(Ds,"users",Y.user.uid));if(!xe.exists())ye(Y.user),K(!0);else{const Me=xe.data();if(!Me.mobileNo)ye(Y.user),K(!0);else{const je={uid:Y.user.uid,email:Y.user.email,name:Y.user.displayName||Me.name,mobileNo:Me.mobileNo,lastFetched:new Date().getTime()};localStorage.setItem("userData",JSON.stringify(je)),typeof t=="function"&&t(Y.user),e()}}}catch(Ve){console.error("Google Sign In error:",Ve),I(W(Ve.code))}finally{V(!1)}},ke=async Ve=>{Ve.preventDefault(),I(""),V(!0);try{const Te=so();await q3(Te,Ue),H(!0),setTimeout(()=>{De(!1),Se(""),H(!1)},3e3)}catch(Te){I(W(Te.code))}finally{V(!1)}};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"auth-modal-overlay",children:b.jsxs("div",{className:"auth-modal",ref:P,children:[b.jsx("button",{className:"close-button",onClick:e,children:"×"}),b.jsxs("div",{className:"auth-modal-content",children:[b.jsx("div",{className:"auth-modal-image",children:b.jsx("img",{src:v6,alt:"Sports Facility"})}),b.jsxs("div",{className:"auth-modal-forms",children:[b.jsxs("div",{className:"auth-tabs",children:[b.jsx("button",{className:`tab-button ${a==="login"?"active":""}`,onClick:()=>J("login"),children:"Login"}),b.jsx("button",{className:`tab-button ${a==="signup"?"active":""}`,onClick:()=>J("signup"),children:"Sign Up"})]}),_&&b.jsx("div",{className:"error-message",children:_}),b.jsx("div",{className:"auth-form-container",children:b.jsxs("div",{className:`form-wrapper ${a==="login"?"login-active":"signup-active"}`,children:[b.jsxs("form",{className:"auth-form login-form",onSubmit:ht,autoComplete:"on",children:[b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"email",name:"email",placeholder:"Email",value:w.email,onChange:Q,required:!0,autoComplete:"email"})}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"password",name:"password",placeholder:"Password",value:w.password,onChange:Q,required:!0,autoComplete:"current-password"})}),b.jsx("div",{className:"form-group remember-me",children:b.jsxs("label",{className:"checkbox-label",children:[b.jsx("input",{type:"checkbox",name:"rememberMe",checked:w.rememberMe,onChange:Q}),b.jsx("span",{children:"Remember me"})]})}),b.jsx("button",{type:"submit",className:"submit-button",disabled:M,children:M?"Loading...":"Login"}),b.jsx("div",{className:"form-footer",children:b.jsx("button",{type:"button",className:"forgot-password-link",onClick:()=>De(!0),children:"Forgot Password?"})}),b.jsx("div",{className:"divider",children:b.jsx("span",{children:"or"})}),b.jsxs("button",{type:"button",className:"google-sign-in-button",onClick:be,disabled:M,children:[b.jsx("img",{src:dE,alt:"Google"}),"Continue with Google"]})]}),b.jsxs("form",{className:"auth-form signup-form",onSubmit:q,autoComplete:"on",children:[b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:w.name,onChange:Q,required:!0,autoComplete:"name"})}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"email",name:"email",placeholder:"Email",value:w.email,onChange:Q,required:!0,autoComplete:"email"})}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"tel",name:"mobileNo",placeholder:"Mobile Number",value:w.mobileNo,onChange:Q,required:!0,autoComplete:"tel"})}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"password",name:"password",placeholder:"Password",value:w.password,onChange:Q,required:!0,autoComplete:"new-password"})}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:w.confirmPassword,onChange:Q,required:!0,autoComplete:"new-password"})}),b.jsx("button",{type:"submit",className:"submit-button",disabled:M,children:M?"Loading...":"Sign Up"}),b.jsx("div",{className:"divider",children:b.jsx("span",{children:"or"})}),b.jsxs("button",{type:"button",className:"google-sign-in-button",onClick:be,disabled:M,children:[b.jsx("img",{src:dE,alt:"Google"}),"Continue with Google"]})]})]})})]})]})]})}),F&&b.jsx("div",{className:"auth-modal-overlay",children:b.jsxs("div",{className:"mobile-modal",children:[b.jsx("h2",{children:"Complete Your Profile"}),b.jsx("p",{children:"Please enter your mobile number to continue"}),_&&b.jsx("div",{className:"error-message",children:_}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"tel",placeholder:"Mobile Number",value:ie,onChange:Ve=>te(Ve.target.value),required:!0,autoComplete:"tel",pattern:"[0-9]{10}"})}),b.jsx("button",{className:"submit-button",onClick:fe,children:"Continue"})]})}),se&&b.jsx("div",{className:"auth-modal-overlay",children:b.jsxs("div",{className:"mobile-modal",children:[b.jsx("button",{className:"close-button",onClick:()=>De(!1),children:"×"}),b.jsx("h2",{children:"Reset Password"}),b.jsx("p",{children:"Enter your email address and we'll send you a link to reset your password."}),_&&b.jsx("div",{className:"error-message",children:_}),z&&b.jsx("div",{className:"success-message",children:"Password reset link sent! Please check your email."}),b.jsxs("form",{onSubmit:ke,children:[b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"email",placeholder:"Email Address",value:Ue,onChange:Ve=>Se(Ve.target.value),required:!0,autoComplete:"email"})}),b.jsx("button",{type:"submit",className:"submit-button",disabled:M,children:M?"Sending...":"Send Reset Link"})]})]})})]})},T6=({userData:r,onLogout:e})=>{const[t,a]=ee.useState(!1),[c,f]=ee.useState([]),[E,w]=ee.useState(!1),[T,_]=ee.useState(!1),[I,M]=ee.useState(!0),[V,F]=ee.useState(0),[K,ie]=ee.useState([]),te=ee.useRef(null),ue=5,ye=()=>{F(0),f([]),ie([]),t&&se(!0)};window.refreshProfileBookings=ye;const se=async(Se=!1)=>{if(!(r!=null&&r.uid)){console.error("No UID available");return}try{Se?w(!0):_(!0);let z=[];if(Se||K.length===0){const Q=dA(),q=Jl(Q,"bookings"),ht=$f(q,Tu("userId","==",r.uid));z=(await ju(ht)).docs.map(be=>({id:be.id,...be.data()})),z.sort((be,ke)=>{const Ve=new Date(be.date+" "+be.timeSlot.startTime).getTime();return new Date(ke.date+" "+ke.timeSlot.startTime).getTime()-Ve}),ie(z)}else z=K;Se||await new Promise(Q=>setTimeout(Q,1e3));const H=Se?0:V+1,P=H*ue,W=P+ue,J=z.slice(P,W);M(z.length>W),F(H),f(Se?J:Q=>[...Q,...J])}catch(z){console.error("Error fetching bookings:",z)}finally{Se?w(!1):_(!1)}};ee.useEffect(()=>{t&&(r!=null&&r.uid)&&c.length===0&&se(!0)},[t,r==null?void 0:r.uid]),ee.useEffect(()=>{const Se=z=>{te.current&&!te.current.contains(z.target)&&a(!1)};return document.addEventListener("mousedown",Se),()=>document.removeEventListener("mousedown",Se)},[]),ee.useEffect(()=>()=>{delete window.refreshProfileBookings},[]);const De=()=>{se(!1)},Ue=async()=>{try{const Se=so();await Ox(Se),e&&e(),a(!1)}catch(Se){console.error("Error signing out:",Se)}};return console.log("Current userData:",r),b.jsxs("div",{className:"profile-dropdown",ref:te,children:[b.jsxs("button",{className:"profile-button",onClick:()=>{a(!t),console.log("Profile button clicked, userData:",r)},children:[b.jsx(s1,{className:"profile-icon"}),b.jsx(XT,{className:`chevron-icon ${t?"open":""}`})]}),t&&b.jsxs("div",{className:"dropdown-content",children:[b.jsxs("div",{className:"user-info",children:[b.jsxs("div",{className:"user-header",children:[b.jsx(s1,{className:"user-avatar"}),b.jsxs("div",{className:"user-details",children:[b.jsx("h3",{children:r.name}),b.jsx("p",{children:r.email})]})]}),b.jsxs("button",{className:"logout-button",onClick:Ue,children:[b.jsx(eC,{size:18}),b.jsx("span",{children:"Logout"})]})]}),b.jsxs("div",{className:"booking-history",children:[b.jsx("h4",{children:"Recent Bookings"}),c.length>0?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:`bookings-list ${T?"loading":""}`,children:[c.map(Se=>b.jsxs("div",{className:"booking-item",children:[b.jsx("div",{className:"booking-icon",children:b.jsx(QE,{})}),b.jsxs("div",{className:"booking-details",children:[b.jsxs("h5",{children:["Booking on ",Se.date]}),b.jsxs("div",{className:"booking-time",children:[Se.timeSlot.startTime," - ",Se.timeSlot.endTime]}),b.jsxs("div",{className:"booking-meta",children:[b.jsxs("span",{className:"booking-amount",children:["₹",Se.amount]}),b.jsx("span",{className:`booking-status ${Se.status}`,children:Se.status})]})]})]},Se.id)),T&&b.jsx("div",{className:"load-more-spinner",children:b.jsx(V2,{className:"spinner",size:24})})]}),I&&!T&&b.jsx("button",{className:"load-more-btn",onClick:De,children:"Load More"})]}):E?b.jsxs("div",{className:"initial-loading",children:[b.jsx(V2,{className:"spinner",size:24}),b.jsx("span",{children:"Loading bookings..."})]}):b.jsx("p",{className:"no-bookings",children:"No bookings found"})]})]})]})},C6=()=>{const[r,e]=ee.useState(!1),[t,a]=ee.useState(!1),[c,f]=ee.useState(!1),[E,w]=ee.useState(null),[T,_]=ee.useState(null),[I,M]=ee.useState(!0),[V,F]=ee.useState(!1),K=async se=>{try{F(!0);const De=await Og(Gl(Ds,"users",se));if(De.exists()){const Ue=De.data();_({...Ue,uid:se}),localStorage.setItem("userData",JSON.stringify({uid:se,...Ue,lastFetched:new Date().getTime()}))}else _(null),localStorage.removeItem("userData")}catch(De){console.error("Error fetching user data:",De),_(null),localStorage.removeItem("userData")}finally{F(!1)}};ee.useEffect(()=>{const se=so(),De=K3(se,Ue=>{if(w(Ue),Ue){const Se=localStorage.getItem("userData");if(Se)try{const{lastFetched:z,uid:H,...P}=JSON.parse(Se);!(Date.now()-z>90*24*60*60*1e3)&&H===Ue.uid?(_({...P,uid:H}),F(!1)):K(Ue.uid)}catch(z){console.error("Error parsing cached data:",z),localStorage.removeItem("userData"),K(Ue.uid)}else K(Ue.uid)}else _(null),localStorage.removeItem("userData");M(!1)});return()=>De()},[]),ee.useEffect(()=>{const se=()=>{window.scrollY>50?a(!0):a(!1)};return window.addEventListener("scroll",se),()=>window.removeEventListener("scroll",se)},[]);const ie=()=>{e(!r)},te=()=>{E?ue():(f(!0),e(!1))},ue=async()=>{try{const se=so();await Ox(se),_(null),localStorage.removeItem("userData"),e(!1)}catch(se){console.error("Error signing out:",se)}},ye=se=>{w(se),K(se.uid)};return I?null:b.jsxs(b.Fragment,{children:[b.jsx("nav",{className:`navbar ${t?"scrolled":""}`,children:b.jsxs("div",{className:"container navbar-container",children:[b.jsxs(ro,{to:"/",className:"logo",children:[b.jsx("h1",{children:"PLAYO"}),b.jsx("span",{className:"logo-dot"})]}),E&&T&&b.jsx("div",{className:"welcome-message desktop-only",children:V?b.jsxs("div",{className:"welcome-loading",children:[b.jsxs("div",{className:"loading-dots",children:[b.jsx("span",{}),b.jsx("span",{}),b.jsx("span",{})]}),b.jsx("span",{children:"Loading..."})]}):`Welcome, ${T.name}`}),b.jsx("div",{className:`menu-toggle ${r?"active":""}`,onClick:ie,children:r?b.jsx(KE,{}):b.jsx(rC,{})}),b.jsxs("div",{className:`nav-menu ${r?"active":""}`,children:[E&&T&&b.jsx("div",{className:"welcome-message mobile-only",children:V?b.jsxs("div",{className:"welcome-loading",children:[b.jsxs("div",{className:"loading-dots",children:[b.jsx("span",{}),b.jsx("span",{}),b.jsx("span",{})]}),b.jsx("span",{children:"Loading..."})]}):`Welcome, ${T.name}`}),b.jsxs("div",{className:"nav-links",children:[b.jsxs(ro,{to:"/venues",className:"nav-link",children:[b.jsx(QE,{className:"nav-icon"}),b.jsx("span",{children:"Book"})]}),b.jsxs(ro,{to:"/trainers",className:"nav-link",children:[b.jsx(QT,{className:"nav-icon"}),b.jsx("span",{children:"Train"})]}),b.jsxs(ro,{to:"/rehabilitation",className:"nav-link",children:[b.jsx(ZT,{className:"nav-icon"}),b.jsx("span",{children:"Rehabilitation"})]})]}),b.jsxs("div",{className:"nav-buttons",children:[!E&&b.jsxs("button",{className:"btn btn-secondary login-btn",onClick:te,children:[b.jsx(s1,{className:"btn-icon"}),b.jsx("span",{children:"Login / Signup"})]}),E&&T&&b.jsx(T6,{userData:T,onLogout:ue})]})]})]})}),b.jsx(SA,{isOpen:c,onClose:()=>f(!1),onAuthSuccess:ye})]})};function S6(){const{pathname:r}=Ea();return ee.useEffect(()=>{window.scrollTo(0,0)},[r]),null}var Ye;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var gE=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),mE;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(mE||(mE={}));function b6(r){return Object.values(Ye).includes(r)}var Ao;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ao||(Ao={}));var ls=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Ao.SCAN_TYPE_CAMERA,Ao.SCAN_TYPE_FILE],r}(),bA=function(){function r(e,t){this.format=e,this.formatName=t}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!gE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,gE.get(e))},r}(),pE=function(){function r(){}return r.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r}(),D1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(D1||(D1={}));var IA=function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:D1.UNKWOWN_ERROR}},r}(),NA=function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r}();function Cs(r){return typeof r>"u"||r===null}function I6(r,e,t){return r>t?t:r<e?e:r}var Vl=function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r}(),rn=function(){function r(){}return r.scanningStatus=function(){return"Scanning"},r.idleStatus=function(){return"Idle"},r.errorStatus=function(){return"Error"},r.permissionStatus=function(){return"Permission"},r.noCameraFoundErrorStatus=function(){return"No Cameras"},r.lastMatch=function(e){return"Last Match: ".concat(e)},r.codeScannerTitle=function(){return"Code Scanner"},r.cameraPermissionTitle=function(){return"Request Camera Permissions"},r.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},r.noCameraFound=function(){return"No camera found"},r.scanButtonStopScanningText=function(){return"Stop Scanning"},r.scanButtonStartScanningText=function(){return"Start Scanning"},r.torchOnButton=function(){return"Switch On Torch"},r.torchOffButton=function(){return"Switch Off Torch"},r.torchOnFailedMessage=function(){return"Failed to turn on torch"},r.torchOffFailedMessage=function(){return"Failed to turn off torch"},r.scanButtonScanningStarting=function(){return"Launching Camera..."},r.textIfCameraScanSelected=function(){return"Scan an Image File"},r.textIfFileScanSelected=function(){return"Scan using camera directly"},r.selectCamera=function(){return"Select Camera"},r.fileSelectionChooseImage=function(){return"Choose Image"},r.fileSelectionChooseAnother=function(){return"Choose Another"},r.fileSelectionNoImageSelected=function(){return"No image choosen"},r.anonymousCameraPrefix=function(){return"Anonymous Camera"},r.dragAndDropMessage=function(){return"Or drop an image to scan"},r.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},r.zoom=function(){return"zoom"},r.loadingImage=function(){return"Loading image..."},r.cameraScanAltText=function(){return"Camera based scan"},r.fileScanAltText=function(){return"Fule based scan"},r}(),yE=function(){function r(){}return r.poweredBy=function(){return"Powered by "},r.reportIssues=function(){return"Report issues"},r}(),RA=function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var a=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(c),E=Object.keys(e),w=0,T=E;w<T.length;w++){var _=T[w];if(f.has(_))return t.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},r}(),lu={exports:{}},N6=lu.exports,EE;function R6(){return EE||(EE=1,function(r,e){(function(t,a){a(e)})(N6,function(t){function a(O){return O==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,i){O.__proto__=i}||function(O,i){for(var o in i)i.hasOwnProperty(o)&&(O[o]=i[o])};function f(O,i){c(O,i);function o(){this.constructor=O}O.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function E(O,i){var o=Object.setPrototypeOf;o?o(O,i):O.__proto__=i}function w(O,i){i===void 0&&(i=O.constructor);var o=Error.captureStackTrace;o&&o(O,i)}var T=function(O){f(i,O);function i(o){var l=this.constructor,h=O.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),E(h,l.prototype),w(h),h}return i}(Error);class _ extends T{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}_.kind="Exception";class I extends _{}I.kind="ArgumentException";class M extends _{}M.kind="IllegalArgumentException";class V{constructor(i){if(this.binarizer=i,i===null)throw new M("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,h){const d=this.binarizer.getLuminanceSource().crop(i,o,l,h);return new V(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new V(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new V(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class F extends _{static getChecksumInstance(){return new F}}F.kind="ChecksumException";class K{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ie{static arraycopy(i,o,l,h,d){for(;d--;)l[h++]=i[o++]}static currentTimeMillis(){return Date.now()}}class te extends _{}te.kind="IndexOutOfBoundsException";class ue extends te{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}ue.kind="ArrayIndexOutOfBoundsException";class ye{static fill(i,o){for(let l=0,h=i.length;l<h;l++)i[l]=o}static fillWithin(i,o,l,h){ye.rangeCheck(i.length,o,l);for(let d=o;d<l;d++)i[d]=h}static rangeCheck(i,o,l){if(o>l)throw new M("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new ue(o);if(l>i)throw new ue(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,h=i.length;l<h;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const h=l-o,d=new Int32Array(h);return ie.arraycopy(i,o,d,0,h),d}static binarySearch(i,o,l){l===void 0&&(l=ye.numberComparator);let h=0,d=i.length-1;for(;h<=d;){const m=d+h>>1,p=l(o,i[m]);if(p>0)h=m+1;else if(p<0)d=m-1;else return m}return-h-1}static numberComparator(i,o){return i-o}}class se{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}se.MIN_VALUE_32_BITS=-2147483648,se.MAX_VALUE=Number.MAX_SAFE_INTEGER;class De{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=De.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=De.makeArray(i);ie.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let h=Math.floor(i/32),d=l[h];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const p=h*32+se.numberOfTrailingZeros(d);return p>o?o:p}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let h=Math.floor(i/32),d=~l[h];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const p=h*32+se.numberOfTrailingZeros(d);return p>o?o:p}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new M;if(o===i)return;o--;const l=Math.floor(i/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const p=m>l?0:i&31,C=(2<<(m<h?31:o&31))-(1<<p);d[m]|=C}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new M;if(o===i)return!0;o--;const h=Math.floor(i/32),d=Math.floor(o/32),m=this.bits;for(let p=h;p<=d;p++){const A=p>h?0:i&31,N=(2<<(p<d?31:o&31))-(1<<A)&4294967295;if((m[p]&N)!==(l?N:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new M("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new M("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=i.bits[l]}toBytes(i,o,l,h){for(let d=0;d<h;d++){let m=0;for(let p=0;p<8;p++)this.get(i)&&(m|=1<<7-p),i++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=i[0]>>>d;for(let p=1;p<l;p++){const A=i[p];m|=A<<32-d,i[p-1]=m,m=A>>>d}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof De))return!1;const o=i;return this.size===o.size&&ye.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ye.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new De(this.size,this.bits.slice())}}var Ue;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ue||(Ue={}));var Se=Ue;class z extends _{static getFormatInstance(){return new z}}z.kind="FormatException";var H;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(H||(H={}));class P{constructor(i,o,l,...h){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,P.VALUE_IDENTIFIER_TO_ECI.set(i,this),P.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,p=d.length;m!==p;m++){const A=d[m];P.VALUES_TO_ECI.set(A,this)}for(const m of h)P.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new z("incorect value");const o=P.VALUES_TO_ECI.get(i);if(o===void 0)throw new z("incorect value");return o}static getCharacterSetECIByName(i){const o=P.NAME_TO_ECI.get(i);if(o===void 0)throw new z("incorect value");return o}equals(i){if(!(i instanceof P))return!1;const o=i;return this.getName()===o.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(H.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(H.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(H.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(H.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(H.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(H.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(H.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(H.Big5,28,"Big5"),P.GB18030=new P(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(H.EUC_KR,30,"EUC_KR","EUC-KR");class W extends _{}W.kind="UnsupportedOperationException";class J{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!J.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof P?i:P.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(J.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=i.length;d<m;d++){let p=i[d].toString(16);p.length<2&&(p="0"+p),h+="%"+p}return decodeURIComponent(h)}if(l.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new W(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(P.UTF8)||i.equals(P.ISO8859_1)||i.equals(P.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class Q{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return J.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(Se.CHARACTER_SET)!==void 0)return o.get(Se.CHARACTER_SET).toString();const l=i.length;let h=!0,d=!0,m=!0,p=0,A=0,C=0,N=0,L=0,k=0,G=0,Z=0,$=0,ce=0,pe=0;const Oe=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Pe=0;Pe<l&&(h||d||m);Pe++){const Ne=i[Pe]&255;m&&(p>0?(Ne&128)===0?m=!1:p--:(Ne&128)!==0&&((Ne&64)===0?m=!1:(p++,(Ne&32)===0?A++:(p++,(Ne&16)===0?C++:(p++,(Ne&8)===0?N++:m=!1))))),h&&(Ne>127&&Ne<160?h=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&pe++),d&&(L>0?Ne<64||Ne===127||Ne>252?d=!1:L--:Ne===128||Ne===160||Ne>239?d=!1:Ne>160&&Ne<224?(k++,Z=0,G++,G>$&&($=G)):Ne>127?(L++,G=0,Z++,Z>ce&&(ce=Z)):(G=0,Z=0))}return m&&p>0&&(m=!1),d&&L>0&&(d=!1),m&&(Oe||A+C+N>0)?Q.UTF8:d&&(Q.ASSUME_SHIFT_JIS||$>=3||ce>=3)?Q.SHIFT_JIS:h&&d?$===2&&k===2||pe*10>=l?Q.SHIFT_JIS:Q.ISO88591:h?Q.ISO88591:d?Q.SHIFT_JIS:m?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function h(m,p,A,C,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let k=N?parseInt(N.substr(1)):void 0,G;switch(L){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let Z=parseInt(A),$=A&&A[0]+""=="0"?"0":" ";for(;G.length<Z;)G=p!==void 0?G+$:$+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,h)}static getBytes(i,o){return J.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}Q.SHIFT_JIS=P.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=P.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=P.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class q{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let h=o;o<o+l;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class ht{constructor(i,o,l,h){if(this.width=i,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=i),this.height=o,i<1||o<1)throw new M("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,h=new ht(l,o);for(let d=0;d<o;d++){const m=i[d];for(let p=0;p<l;p++)m[p]&&h.set(p,d)}return h}static parseFromString(i,o,l){if(i===null)throw new M("stringRepresentation cannot be null");const h=new Array(i.length);let d=0,m=0,p=-1,A=0,C=0;for(;C<i.length;)if(i.charAt(C)===`
`||i.charAt(C)==="\r"){if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new M("row lengths do not match");m=d,A++}C++}else if(i.substring(C,C+o.length)===o)C+=o.length,h[d]=!0,d++;else if(i.substring(C,C+l.length)===l)C+=l.length,h[d]=!1,d++;else throw new M("illegal character encountered: "+i.substring(C));if(d>m){if(p===-1)p=d-m;else if(d-m!==p)throw new M("row lengths do not match");A++}const N=new ht(p,A);for(let L=0;L<d;L++)h[L]&&N.set(Math.floor(L%p),Math.floor(L/p));return N}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new M("input matrix dimensions do not match");const o=new De(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const p=d*l,A=i.getRow(d,o).getBitArray();for(let C=0;C<l;C++)h[p+C]^=A[C]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,h){if(o<0||i<0)throw new M("Left and top must be nonnegative");if(h<1||l<1)throw new M("Height and width must be at least 1");const d=i+l,m=o+h;if(m>this.height||d>this.width)throw new M("The region must fit inside the matrix");const p=this.rowSize,A=this.bits;for(let C=o;C<m;C++){const N=C*p;for(let L=i;L<d;L++)A[N+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new De(this.width):o.clear();const l=this.rowSize,h=this.bits,d=i*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(i,o){ie.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new De(i),h=new De(i);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=i,m=o,p=-1,A=-1;for(let C=0;C<o;C++)for(let N=0;N<l;N++){const L=h[C*l+N];if(L!==0){if(C<m&&(m=C),C>A&&(A=C),N*32<d){let k=0;for(;(L<<31-k&4294967295)===0;)k++;N*32+k<d&&(d=N*32+k)}if(N*32+31>p){let k=31;for(;!(L>>>k);)k--;N*32+k>p&&(p=N*32+k)}}}return p<d||A<m?null:Int32Array.from([d,m,p-d+1,A-m+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/i;let d=l%i*32;const m=o[l];let p=0;for(;(m<<31-p&4294967295)===0;)p++;return d+=p,Int32Array.from([d,h])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/i);let d=Math.floor(l%i)*32;const m=o[l];let p=31;for(;!(m>>>p);)p--;return d+=p,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ht))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ye.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ye.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let h=new q;for(let d=0,m=this.height;d<m;d++){for(let p=0,A=this.width;p<A;p++)h.append(this.get(p,d)?i:o);h.append(l)}return h.toString()}clone(){return new ht(this.width,this.height,this.rowSize,this.bits.slice())}}class fe extends _{static getNotFoundInstance(){return new fe}}fe.kind="NotFoundException";class be extends K{constructor(i){super(i),this.luminances=be.EMPTY,this.buckets=new Int32Array(be.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new De(h):o.clear(),this.initArrays(h);const d=l.getRow(i,this.luminances),m=this.buckets;for(let A=0;A<h;A++)m[(d[A]&255)>>be.LUMINANCE_SHIFT]++;const p=be.estimateBlackPoint(m);if(h<3)for(let A=0;A<h;A++)(d[A]&255)<p&&o.set(A);else{let A=d[0]&255,C=d[1]&255;for(let N=1;N<h-1;N++){const L=d[N+1]&255;(C*4-A-L)/2<p&&o.set(N),A=C,C=L}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),h=new ht(o,l);this.initArrays(o);const d=this.buckets;for(let A=1;A<5;A++){const C=Math.floor(l*A/5),N=i.getRow(C,this.luminances),L=Math.floor(o*4/5);for(let k=Math.floor(o/5);k<L;k++){const G=N[k]&255;d[G>>be.LUMINANCE_SHIFT]++}}const m=be.estimateBlackPoint(d),p=i.getMatrix();for(let A=0;A<l;A++){const C=A*o;for(let N=0;N<o;N++)(p[C+N]&255)<m&&h.set(N,A)}return h}createBinarizer(i){return new be(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<be.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,h=0,d=0;for(let N=0;N<o;N++)i[N]>d&&(h=N,d=i[N]),i[N]>l&&(l=i[N]);let m=0,p=0;for(let N=0;N<o;N++){const L=N-h,k=i[N]*L*L;k>p&&(m=N,p=k)}if(h>m){const N=h;h=m,m=N}if(m-h<=o/16)throw new fe;let A=m-1,C=-1;for(let N=m-1;N>h;N--){const L=N-h,k=L*L*(m-N)*(l-i[N]);k>C&&(A=N,C=k)}return A<<be.LUMINANCE_SHIFT}}be.LUMINANCE_BITS=5,be.LUMINANCE_SHIFT=8-be.LUMINANCE_BITS,be.LUMINANCE_BUCKETS=1<<be.LUMINANCE_BITS,be.EMPTY=Uint8ClampedArray.from([0]);class ke extends be{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=ke.MINIMUM_DIMENSION&&l>=ke.MINIMUM_DIMENSION){const h=i.getMatrix();let d=o>>ke.BLOCK_SIZE_POWER;(o&ke.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>ke.BLOCK_SIZE_POWER;(l&ke.BLOCK_SIZE_MASK)!==0&&m++;const p=ke.calculateBlackPoints(h,d,m,o,l),A=new ht(o,l);ke.calculateThresholdForBlock(h,d,m,o,l,p,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ke(i)}static calculateThresholdForBlock(i,o,l,h,d,m,p){const A=d-ke.BLOCK_SIZE,C=h-ke.BLOCK_SIZE;for(let N=0;N<l;N++){let L=N<<ke.BLOCK_SIZE_POWER;L>A&&(L=A);const k=ke.cap(N,2,l-3);for(let G=0;G<o;G++){let Z=G<<ke.BLOCK_SIZE_POWER;Z>C&&(Z=C);const $=ke.cap(G,2,o-3);let ce=0;for(let Oe=-2;Oe<=2;Oe++){const Pe=m[k+Oe];ce+=Pe[$-2]+Pe[$-1]+Pe[$]+Pe[$+1]+Pe[$+2]}const pe=ce/25;ke.thresholdBlock(i,Z,L,pe,h,p)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,h,d,m){for(let p=0,A=l*d+o;p<ke.BLOCK_SIZE;p++,A+=d)for(let C=0;C<ke.BLOCK_SIZE;C++)(i[A+C]&255)<=h&&m.set(o+C,l+p)}static calculateBlackPoints(i,o,l,h,d){const m=d-ke.BLOCK_SIZE,p=h-ke.BLOCK_SIZE,A=new Array(l);for(let C=0;C<l;C++){A[C]=new Int32Array(o);let N=C<<ke.BLOCK_SIZE_POWER;N>m&&(N=m);for(let L=0;L<o;L++){let k=L<<ke.BLOCK_SIZE_POWER;k>p&&(k=p);let G=0,Z=255,$=0;for(let pe=0,Oe=N*h+k;pe<ke.BLOCK_SIZE;pe++,Oe+=h){for(let Pe=0;Pe<ke.BLOCK_SIZE;Pe++){const Ne=i[Oe+Pe]&255;G+=Ne,Ne<Z&&(Z=Ne),Ne>$&&($=Ne)}if($-Z>ke.MIN_DYNAMIC_RANGE)for(pe++,Oe+=h;pe<ke.BLOCK_SIZE;pe++,Oe+=h)for(let Pe=0;Pe<ke.BLOCK_SIZE;Pe++)G+=i[Oe+Pe]&255}let ce=G>>ke.BLOCK_SIZE_POWER*2;if($-Z<=ke.MIN_DYNAMIC_RANGE&&(ce=Z/2,C>0&&L>0)){const pe=(A[C-1][L]+2*A[C][L-1]+A[C-1][L-1])/4;Z<pe&&(ce=pe)}A[C][L]=ce}}return A}}ke.BLOCK_SIZE_POWER=3,ke.BLOCK_SIZE=1<<ke.BLOCK_SIZE_POWER,ke.BLOCK_SIZE_MASK=ke.BLOCK_SIZE-1,ke.MINIMUM_DIMENSION=ke.BLOCK_SIZE*5,ke.MIN_DYNAMIC_RANGE=24;class Ve{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,h){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new q;for(let l=0;l<this.height;l++){const h=this.getRow(l,i);for(let d=0;d<this.width;d++){const m=h[d]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",o.append(p)}o.append(`
`)}return o.toString()}}class Te extends Ve{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(i[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,h){return new Te(this.delegate.crop(i,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class Y extends Ve{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Y.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return Y.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,p=i.length;d<p;d+=4,m++){let A;if(i[d+3]===0)A=255;else{const N=i[d],L=i[d+1],k=i[d+2];A=306*N+601*L+117*k+512>>10}h[m]=A}return h}getRow(i,o){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth(),h=i*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,h){return super.crop(i,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=i*Y.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),A=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=p,o.height=A,l.translate(p/2,A/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=Y.makeBufferFromCanvasImageData(o),this}invert(){return new Te(this)}}Y.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Me=(globalThis||Vh||self||window||void 0)&&(globalThis||Vh||self||window||void 0).__awaiter||function(O,i,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function p(N){try{C(l.next(N))}catch(L){m(L)}}function A(N){try{C(l.throw(N))}catch(L){m(L)}}function C(N){N.done?d(N.value):h(N.value).then(p,A)}C((l=l.apply(O,i||[])).next())})};class je{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Me(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,p=l.groupId,A={deviceId:d,label:m,kind:h,groupId:p};o.push(A)}return o})}getVideoInputDevices(){return Me(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new xe(o.deviceId,o.label))})}findDeviceById(i){return Me(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Me(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Me(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(i,o){return Me(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return Me(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return Me(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return Me(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(i,o,l){return Me(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(i,o,l){return Me(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Me(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Me(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new I(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new I(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new I("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new I("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new I("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new I("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new I("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new I("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new I("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new I("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=i,h}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Me(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Me(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new fe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(i);d(p)}catch(p){const A=o&&p instanceof fe,N=(p instanceof F||p instanceof z)&&l;if(A||N)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(p)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof F||h instanceof z,m=h instanceof fe;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new Y(o),h=new ke(l);return new V(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Be{constructor(i,o,l=o==null?0:8*o.length,h,d,m=ie.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=ie.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);ie.arraycopy(o,0,l,0,o.length),ie.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var it;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var Ie=it,sn;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(sn||(sn={}));var Qe=sn;class Ht{constructor(i,o,l,h,d=-1,m=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class xt{exp(i){return this.expTable[i]}log(i){if(i===0)throw new M;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Bt{constructor(i,o){if(o.length===0)throw new M;this.field=i;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),ie.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let m=0,p=o.length;m!==p;m++){const A=o[m];l=xt.addOrSubtract(l,A)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=xt.addOrSubtract(d.multiply(i,l),o[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;ie.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=xt.addOrSubtract(o[m-d],l[m]);return new Bt(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=i.coefficients,d=h.length,m=new Int32Array(l+d-1),p=this.field;for(let A=0;A<l;A++){const C=o[A];for(let N=0;N<d;N++)m[A+N]=xt.addOrSubtract(m[A+N],p.multiply(C,h[N]))}return new Bt(p,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],i);return new Bt(l,h)}multiplyByMonomial(i,o){if(i<0)throw new M;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+i),m=this.field;for(let p=0;p<h;p++)d[p]=m.multiply(l[p],o);return new Bt(m,d)}divide(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new M("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=i.getCoefficient(i.getDegree()),m=o.inverse(d);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const p=h.getDegree()-i.getDegree(),A=o.multiply(h.getCoefficient(h.getDegree()),m),C=i.multiplyByMonomial(p,A),N=o.buildMonomial(p,A);l=l.addOrSubtract(N),h=h.addOrSubtract(C)}return[l,h]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class xi extends _{}xi.kind="ArithmeticException";class ft extends xt{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let p=0;p<o;p++)h[p]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let p=0;p<o-1;p++)m[h[p]]=p;this.logTable=m,this.zero=new Bt(this,Int32Array.from([0])),this.one=new Bt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new M;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new Bt(this,l)}inverse(i){if(i===0)throw new xi;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+se.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ft.AZTEC_DATA_12=new ft(4201,4096,1),ft.AZTEC_DATA_10=new ft(1033,1024,1),ft.AZTEC_DATA_6=new ft(67,64,1),ft.AZTEC_PARAM=new ft(19,16,1),ft.QR_CODE_FIELD_256=new ft(285,256,0),ft.DATA_MATRIX_FIELD_256=new ft(301,256,1),ft.AZTEC_DATA_8=ft.DATA_MATRIX_FIELD_256,ft.MAXICODE_FIELD_64=ft.AZTEC_DATA_6;class zi extends _{}zi.kind="ReedSolomonException";class si extends _{}si.kind="IllegalStateException";class Hi{constructor(i){this.field=i}decode(i,o){const l=this.field,h=new Bt(l,i),d=new Int32Array(o);let m=!0;for(let G=0;G<o;G++){const Z=h.evaluateAt(l.exp(G+l.getGeneratorBase()));d[d.length-1-G]=Z,Z!==0&&(m=!1)}if(m)return;const p=new Bt(l,d),A=this.runEuclideanAlgorithm(l.buildMonomial(o,1),p,o),C=A[0],N=A[1],L=this.findErrorLocations(C),k=this.findErrorMagnitudes(N,L);for(let G=0;G<L.length;G++){const Z=i.length-1-l.log(L[G]);if(Z<0)throw new zi("Bad error location");i[Z]=ft.addOrSubtract(i[Z],k[G])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const G=i;i=o,o=G}const h=this.field;let d=i,m=o,p=h.getZero(),A=h.getOne();for(;m.getDegree()>=(l/2|0);){let G=d,Z=p;if(d=m,p=A,d.isZero())throw new zi("r_{i-1} was zero");m=G;let $=h.getZero();const ce=d.getCoefficient(d.getDegree()),pe=h.inverse(ce);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Oe=m.getDegree()-d.getDegree(),Pe=h.multiply(m.getCoefficient(m.getDegree()),pe);$=$.addOrSubtract(h.buildMonomial(Oe,Pe)),m=m.addOrSubtract(d.multiplyByMonomial(Oe,Pe))}if(A=$.multiply(p).addOrSubtract(Z),m.getDegree()>=d.getDegree())throw new si("Division algorithm failed to reduce polynomial?")}const C=A.getCoefficient(0);if(C===0)throw new zi("sigmaTilde(0) was zero");const N=h.inverse(C),L=A.multiplyScalar(N),k=m.multiplyScalar(N);return[L,k]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)i.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new zi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const p=d.inverse(o[m]);let A=1;for(let C=0;C<l;C++)if(m!==C){const N=d.multiply(o[C],p),L=(N&1)===0?N|1:N&-2;A=d.multiply(A,L)}h[m]=d.multiply(i.evaluateAt(p),d.inverse(A)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],p))}return h}}var In;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(In||(In={}));class jt{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=jt.convertBoolArrayToByteArray(h),m=jt.getEncodedData(h),p=new Ht(d,m,null,null);return p.setNumBits(h.length),p}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=In.UPPER,h=In.UPPER,d="",m=0;for(;m<o;)if(h===In.BINARY){if(o-m<5)break;let p=jt.readCode(i,m,5);if(m+=5,p===0){if(o-m<11)break;p=jt.readCode(i,m,11)+31,m+=11}for(let A=0;A<p;A++){if(o-m<8){m=o;break}const C=jt.readCode(i,m,8);d+=Q.castAsNonUtf8Char(C),m+=8}h=l}else{let p=h===In.DIGIT?4:5;if(o-m<p)break;let A=jt.readCode(i,m,p);m+=p;let C=jt.getCharacter(h,A);C.startsWith("CTRL_")?(l=h,h=jt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=h)):(d+=C,h=l)}return d}static getTable(i){switch(i){case"L":return In.LOWER;case"P":return In.PUNCT;case"M":return In.MIXED;case"D":return In.DIGIT;case"B":return In.BINARY;case"U":default:return In.UPPER}}static getCharacter(i,o){switch(i){case In.UPPER:return jt.UPPER_TABLE[o];case In.LOWER:return jt.LOWER_TABLE[o];case In.MIXED:return jt.MIXED_TABLE[o];case In.PUNCT:return jt.PUNCT_TABLE[o];case In.DIGIT:return jt.DIGIT_TABLE[o];default:throw new si("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=ft.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=ft.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=ft.AZTEC_DATA_10):(l=12,o=ft.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=i.length/l;if(d<h)throw new z;let m=i.length%l,p=new Int32Array(d);for(let k=0;k<d;k++,m+=l)p[k]=jt.readCode(i,m,l);try{new Hi(o).decode(p,d-h)}catch(k){throw new z(k)}let A=(1<<l)-1,C=0;for(let k=0;k<h;k++){let G=p[k];if(G===0||G===A)throw new z;(G===1||G===A-1)&&C++}let N=new Array(h*l-C),L=0;for(let k=0;k<h;k++){let G=p[k];if(G===1||G===A-1)N.fill(G>1,L,L+l-1),L+=l-1;else for(let Z=l-1;Z>=0;--Z)N[L++]=(G&1<<Z)!==0}return N}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let p=0;p<d.length;p++)d[p]=p;else{let p=h+1+2*se.truncDivision(se.truncDivision(h,2)-1,15),A=h/2,C=se.truncDivision(p,2);for(let N=0;N<A;N++){let L=N+se.truncDivision(N,15);d[A-N-1]=C-L-1,d[A+N]=C+L+1}}for(let p=0,A=0;p<l;p++){let C=(l-p)*4+(o?9:12),N=p*2,L=h-1-N;for(let k=0;k<C;k++){let G=k*2;for(let Z=0;Z<2;Z++)m[A+G+Z]=i.get(d[N+Z],d[N+k]),m[A+2*C+G+Z]=i.get(d[N+k],d[L-Z]),m[A+4*C+G+Z]=i.get(d[L-Z],d[L-k]),m[A+6*C+G+Z]=i.get(d[L-k],d[N+Z])}A+=C*8}return m}static readCode(i,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,i[d]&&(h|=1);return h}static readByte(i,o){let l=i.length-o;return l>=8?jt.readCode(i,o,8):jt.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=jt.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}jt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],jt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],jt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],jt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],jt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class yt{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,h){const d=i-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(i){let o=0;for(let l=0,h=i.length;l!==h;l++){const d=i[l];o+=d}return o}}class Nr{static floatToIntBits(i){return i}}Nr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ge{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ge){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Nr.floatToIntBits(this.x)+Nr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let d,m,p;if(l>=o&&l>=h?(m=i[0],d=i[1],p=i[2]):h>=l&&h>=o?(m=i[1],d=i[0],p=i[2]):(m=i[2],d=i[0],p=i[1]),this.crossProductZ(d,m,p)<0){const A=d;d=p,p=A}i[0]=d,i[1]=m,i[2]=p}static distance(i,o){return yt.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const h=o.x,d=o.y;return(l.x-h)*(i.y-d)-(l.y-d)*(i.x-h)}}class va{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Ta extends va{constructor(i,o,l,h,d){super(i,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class vn{constructor(i,o,l,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=vn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new fe}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,p=!1,A=!1,C=!1,N=!1,L=!1;const k=this.width,G=this.height;for(;m;){m=!1;let Z=!0;for(;(Z||!A)&&o<k;)Z=this.containsBlackPoint(l,h,o,!1),Z?(o++,m=!0,A=!0):A||o++;if(o>=k){d=!0;break}let $=!0;for(;($||!C)&&h<G;)$=this.containsBlackPoint(i,o,h,!0),$?(h++,m=!0,C=!0):C||h++;if(h>=G){d=!0;break}let ce=!0;for(;(ce||!N)&&i>=0;)ce=this.containsBlackPoint(l,h,i,!1),ce?(i--,m=!0,N=!0):N||i--;if(i<0){d=!0;break}let pe=!0;for(;(pe||!L)&&l>=0;)pe=this.containsBlackPoint(i,o,l,!0),pe?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(p=!0)}if(!d&&p){const Z=o-i;let $=null;for(let Pe=1;$===null&&Pe<Z;Pe++)$=this.getBlackPointOnSegment(i,h-Pe,i+Pe,h);if($==null)throw new fe;let ce=null;for(let Pe=1;ce===null&&Pe<Z;Pe++)ce=this.getBlackPointOnSegment(i,l+Pe,i+Pe,l);if(ce==null)throw new fe;let pe=null;for(let Pe=1;pe===null&&Pe<Z;Pe++)pe=this.getBlackPointOnSegment(o,l+Pe,o-Pe,l);if(pe==null)throw new fe;let Oe=null;for(let Pe=1;Oe===null&&Pe<Z;Pe++)Oe=this.getBlackPointOnSegment(o,h-Pe,o-Pe,h);if(Oe==null)throw new fe;return this.centerEdges(Oe,$,pe,ce)}else throw new fe}getBlackPointOnSegment(i,o,l,h){const d=yt.round(yt.distance(i,o,l,h)),m=(l-i)/d,p=(h-o)/d,A=this.image;for(let C=0;C<d;C++){const N=yt.round(i+C*m),L=yt.round(o+C*p);if(A.get(N,L))return new Ge(N,L)}return null}centerEdges(i,o,l,h){const d=i.getX(),m=i.getY(),p=o.getX(),A=o.getY(),C=l.getX(),N=l.getY(),L=h.getX(),k=h.getY(),G=vn.CORR;return d<this.width/2?[new Ge(L-G,k+G),new Ge(p+G,A+G),new Ge(C-G,N-G),new Ge(d+G,m-G)]:[new Ge(L+G,k+G),new Ge(p+G,A-G),new Ge(C-G,N+G),new Ge(d-G,m-G)]}containsBlackPoint(i,o,l,h){const d=this.image;if(h){for(let m=i;m<=o;m++)if(d.get(m,l))return!0}else for(let m=i;m<=o;m++)if(d.get(l,m))return!0;return!1}}vn.INIT_SIZE=10,vn.CORR=1;class Ca{static checkAndNudgePoints(i,o){const l=i.getWidth(),h=i.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const p=Math.floor(o[m]),A=Math.floor(o[m+1]);if(p<-1||p>l||A<-1||A>h)throw new fe;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const p=Math.floor(o[m]),A=Math.floor(o[m+1]);if(p<-1||p>l||A<-1||A>h)throw new fe;d=!1,p===-1?(o[m]=0,d=!0):p===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}}}class Kt{constructor(i,o,l,h,d,m,p,A,C){this.a11=i,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=p,this.a23=A,this.a33=C}static quadrilateralToQuadrilateral(i,o,l,h,d,m,p,A,C,N,L,k,G,Z,$,ce){const pe=Kt.quadrilateralToSquare(i,o,l,h,d,m,p,A);return Kt.squareToQuadrilateral(C,N,L,k,G,Z,$,ce).times(pe)}transformPoints(i){const o=i.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,A=this.a23,C=this.a31,N=this.a32,L=this.a33;for(let k=0;k<o;k+=2){const G=i[k],Z=i[k+1],$=d*G+A*Z+L;i[k]=(l*G+m*Z+C)/$,i[k+1]=(h*G+p*Z+N)/$}}transformPointsWithValues(i,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,p=this.a22,A=this.a23,C=this.a31,N=this.a32,L=this.a33,k=i.length;for(let G=0;G<k;G++){const Z=i[G],$=o[G],ce=d*Z+A*$+L;i[G]=(l*Z+m*$+C)/ce,o[G]=(h*Z+p*$+N)/ce}}static squareToQuadrilateral(i,o,l,h,d,m,p,A){const C=i-l+d-p,N=o-h+m-A;if(C===0&&N===0)return new Kt(l-i,d-l,i,h-o,m-h,o,0,0,1);{const L=l-d,k=p-d,G=h-m,Z=A-m,$=L*Z-k*G,ce=(C*Z-k*N)/$,pe=(L*N-C*G)/$;return new Kt(l-i+ce*l,p-i+pe*p,i,h-o+ce*h,A-o+pe*A,o,ce,pe,1)}}static quadrilateralToSquare(i,o,l,h,d,m,p,A){return Kt.squareToQuadrilateral(i,o,l,h,d,m,p,A).buildAdjoint()}buildAdjoint(){return new Kt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Kt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Hn extends Ca{sampleGrid(i,o,l,h,d,m,p,A,C,N,L,k,G,Z,$,ce,pe,Oe,Pe){const Ne=Kt.quadrilateralToQuadrilateral(h,d,m,p,A,C,N,L,k,G,Z,$,ce,pe,Oe,Pe);return this.sampleGridWithTransform(i,o,l,Ne)}sampleGridWithTransform(i,o,l,h){if(o<=0||l<=0)throw new fe;const d=new ht(o,l),m=new Float32Array(2*o);for(let p=0;p<l;p++){const A=m.length,C=p+.5;for(let N=0;N<A;N+=2)m[N]=N/2+.5,m[N+1]=C;h.transformPoints(m),Ca.checkAndNudgePoints(i,m);try{for(let N=0;N<A;N+=2)i.get(Math.floor(m[N]),Math.floor(m[N+1]))&&d.set(N/2,p)}catch{throw new fe}}return d}}class di{static setGridSampler(i){di.gridSampler=i}static getInstance(){return di.gridSampler}}di.gridSampler=new Hn;class Kn{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new Ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Sa{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Ta(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new fe;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(h<<=7,h+=p>>1&127):(h<<=10,h+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let l=0;i.forEach((h,d,m)=>{let p=(h>>o-2<<1)+(h&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(se.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new fe}getCorrectedParameterData(i,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=i&15,i>>=4;try{new Hi(ft.AZTEC_PARAM).decode(m,d)}catch{throw new fe}let p=0;for(let A=0;A<h;A++)p=(p<<4)+m[A];return p}getBullsEyeCorners(i){let o=i,l=i,h=i,d=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),k=this.getFirstDifferent(l,m,1,1),G=this.getFirstDifferent(h,m,-1,1),Z=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(Z,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(L,k,G,Z))break}o=L,l=k,h=G,d=Z,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new fe;this.compact=this.nbCenterLayers===5;let p=new Ge(o.getX()+.5,o.getY()-.5),A=new Ge(l.getX()+.5,l.getY()+.5),C=new Ge(h.getX()-.5,h.getY()+.5),N=new Ge(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,A,C,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,h;try{let p=new vn(this.image).detect();i=p[0],o=p[1],l=p[2],h=p[3]}catch{let A=this.image.getWidth()/2,C=this.image.getHeight()/2;i=this.getFirstDifferent(new Kn(A+7,C-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kn(A+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(A-7,C+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(A-7,C-7),!1,-1,-1).toResultPoint()}let d=yt.round((i.getX()+h.getX()+o.getX()+l.getX())/4),m=yt.round((i.getY()+h.getY()+o.getY()+l.getY())/4);try{let p=new vn(this.image,15,d,m).detect();i=p[0],o=p[1],l=p[2],h=p[3]}catch{i=this.getFirstDifferent(new Kn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=yt.round((i.getX()+h.getX()+o.getX()+l.getX())/4),m=yt.round((i.getY()+h.getY()+o.getY()+l.getY())/4),new Kn(d,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,h,d){let m=di.getInstance(),p=this.getDimension(),A=p/2-this.nbCenterLayers,C=p/2+this.nbCenterLayers;return m.sampleGrid(i,p,p,A,A,C,A,C,C,A,C,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(i,o,l){let h=0,d=this.distanceResultPoint(i,o),m=d/l,p=i.getX(),A=i.getY(),C=m*(o.getX()-i.getX())/d,N=m*(o.getY()-i.getY())/d;for(let L=0;L<l;L++)this.image.get(yt.round(p+L*C),yt.round(A+L*N))&&(h|=1<<l-L-1);return h}isWhiteOrBlackRectangle(i,o,l,h){let d=3;i=new Kn(i.getX()-d,i.getY()+d),o=new Kn(o.getX()-d,o.getY()-d),l=new Kn(l.getX()+d,l.getY()-d),h=new Kn(h.getX()+d,h.getY()+d);let m=this.getColor(h,i);if(m===0)return!1;let p=this.getColor(i,o);return p!==m||(p=this.getColor(o,l),p!==m)?!1:(p=this.getColor(l,h),p===m)}getColor(i,o){let l=this.distancePoint(i,o),h=(o.getX()-i.getX())/l,d=(o.getY()-i.getY())/l,m=0,p=i.getX(),A=i.getY(),C=this.image.get(i.getX(),i.getY()),N=Math.ceil(l);for(let k=0;k<N;k++)p+=h,A+=d,this.image.get(yt.round(p),yt.round(A))!==C&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===C?1:-1}getFirstDifferent(i,o,l,h){let d=i.getX()+l,m=i.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new Kn(d,m)}expandSquare(i,o,l){let h=l/(2*o),d=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),p=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,C=new Ge(p+h*d,A+h*m),N=new Ge(p-h*d,A-h*m);d=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),p=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let L=new Ge(p+h*d,A+h*m),k=new Ge(p-h*d,A-h*m);return[C,L,N,k]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=yt.round(i.getX()),l=yt.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return yt.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return yt.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(se.truncDivision(this.nbLayers-4,8)+1)+15}}class ba{decode(i,o=null){let l=null,h=new Sa(i.getBlackMatrix()),d=null,m=null;try{let N=h.detectMirror(!1);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new jt().decode(N)}catch(N){l=N}if(m==null)try{let N=h.detectMirror(!0);d=N.getPoints(),this.reportFoundResultPoints(o,d),m=new jt().decode(N)}catch(N){throw l??N}let p=new Be(m.getText(),m.getRawBytes(),m.getNumBits(),d,Ie.AZTEC,ie.currentTimeMillis()),A=m.getByteSegments();A!=null&&p.putMetadata(Qe.BYTE_SEGMENTS,A);let C=m.getECLevel();return C!=null&&p.putMetadata(Qe.ERROR_CORRECTION_LEVEL,C),p}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(Se.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Ps extends je{constructor(i=500){super(new ba,i)}}class $t{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(Se.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),m=this.doDecode(d,o),p=m.getResultMetadata();let A=270;p!==null&&p.get(Qe.ORIENTATION)===!0&&(A=A+p.get(Qe.ORIENTATION)%360),m.putMetadata(Qe.ORIENTATION,A);const C=m.getResultPoints();if(C!==null){const N=d.getHeight();for(let L=0;L<C.length;L++)C[L]=new Ge(N-C[L].getY()-1,C[L].getX())}return m}else throw new fe}}reset(){}doDecode(i,o){const l=i.getWidth(),h=i.getHeight();let d=new De(l);const m=o&&o.get(Se.TRY_HARDER)===!0,p=Math.max(1,h>>(m?8:5));let A;m?A=h:A=15;const C=Math.trunc(h/2);for(let N=0;N<A;N++){const L=Math.trunc((N+1)/2),k=(N&1)===0,G=C+p*(k?L:-L);if(G<0||G>=h)break;try{d=i.getBlackRow(G,d)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(d.reverse(),o&&o.get(Se.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;o.forEach((ce,pe)=>$.set(pe,ce)),$.delete(Se.NEED_RESULT_POINT_CALLBACK),o=$}try{const $=this.decodeRow(G,d,o);if(Z===1){$.putMetadata(Qe.ORIENTATION,180);const ce=$.getResultPoints();ce!==null&&(ce[0]=new Ge(l-ce[0].getX()-1,ce[0].getY()),ce[1]=new Ge(l-ce[1].getX()-1,ce[1].getY()))}return $}catch{}}}throw new fe}static recordPattern(i,o,l){const h=l.length;for(let C=0;C<h;C++)l[C]=0;const d=i.getSize();if(o>=d)throw new fe;let m=!i.get(o),p=0,A=o;for(;A<d;){if(i.get(A)!==m)l[p]++;else{if(++p===h)break;l[p]=1,m=!m}A++}if(!(p===h||p===h-1&&A===d))throw new fe}static recordPatternInReverse(i,o,l){let h=l.length,d=i.get(o);for(;o>0&&h>=0;)i.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new fe;$t.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const h=i.length;let d=0,m=0;for(let C=0;C<h;C++)d+=i[C],m+=o[C];if(d<m)return Number.POSITIVE_INFINITY;const p=d/m;l*=p;let A=0;for(let C=0;C<h;C++){const N=i[C],L=o[C]*p,k=N>L?N-L:L-N;if(k>l)return Number.POSITIVE_INFINITY;A+=k}return A/d}}class Le extends $t{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const A=6;for(let C=l;C<o;C++)if(i.get(C)!==p)d[h]++;else{if(h===A-1){let N=Le.MAX_AVG_VARIANCE,L=-1;for(let k=Le.CODE_START_A;k<=Le.CODE_START_C;k++){const G=$t.patternMatchVariance(d,Le.CODE_PATTERNS[k],Le.MAX_INDIVIDUAL_VARIANCE);G<N&&(N=G,L=k)}if(L>=0&&i.isRange(Math.max(0,m-(C-m)/2),m,!1))return Int32Array.from([m,C,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,p=!p}throw new fe}static decodeCode(i,o,l){$t.recordPattern(i,l,o);let h=Le.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Le.CODE_PATTERNS.length;m++){const p=Le.CODE_PATTERNS[m],A=this.patternMatchVariance(o,p,Le.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,d=m)}if(d>=0)return d;throw new fe}decodeRow(i,o,l){const h=l&&l.get(Se.ASSUME_GS1)===!0,d=Le.findStartPattern(o),m=d[2];let p=0;const A=new Uint8Array(20);A[p++]=m;let C;switch(m){case Le.CODE_START_A:C=Le.CODE_CODE_A;break;case Le.CODE_START_B:C=Le.CODE_CODE_B;break;case Le.CODE_START_C:C=Le.CODE_CODE_C;break;default:throw new z}let N=!1,L=!1,k="",G=d[0],Z=d[1];const $=Int32Array.from([0,0,0,0,0,0]);let ce=0,pe=0,Oe=m,Pe=0,Ne=!0,_t=!1,rt=!1;for(;!N;){const Hs=L;switch(L=!1,ce=pe,pe=Le.decodeCode(o,$,Z),A[p++]=pe,pe!==Le.CODE_STOP&&(Ne=!0),pe!==Le.CODE_STOP&&(Pe++,Oe+=Pe*pe),G=Z,Z+=$.reduce((zu,xr)=>zu+xr,0),pe){case Le.CODE_START_A:case Le.CODE_START_B:case Le.CODE_START_C:throw new z}switch(C){case Le.CODE_CODE_A:if(pe<64)rt===_t?k+=String.fromCharCode(32+pe):k+=String.fromCharCode(32+pe+128),rt=!1;else if(pe<96)rt===_t?k+=String.fromCharCode(pe-64):k+=String.fromCharCode(pe+64),rt=!1;else switch(pe!==Le.CODE_STOP&&(Ne=!1),pe){case Le.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_A:!_t&&rt?(_t=!0,rt=!1):_t&&rt?(_t=!1,rt=!1):rt=!0;break;case Le.CODE_SHIFT:L=!0,C=Le.CODE_CODE_B;break;case Le.CODE_CODE_B:C=Le.CODE_CODE_B;break;case Le.CODE_CODE_C:C=Le.CODE_CODE_C;break;case Le.CODE_STOP:N=!0;break}break;case Le.CODE_CODE_B:if(pe<96)rt===_t?k+=String.fromCharCode(32+pe):k+=String.fromCharCode(32+pe+128),rt=!1;else switch(pe!==Le.CODE_STOP&&(Ne=!1),pe){case Le.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_B:!_t&&rt?(_t=!0,rt=!1):_t&&rt?(_t=!1,rt=!1):rt=!0;break;case Le.CODE_SHIFT:L=!0,C=Le.CODE_CODE_A;break;case Le.CODE_CODE_A:C=Le.CODE_CODE_A;break;case Le.CODE_CODE_C:C=Le.CODE_CODE_C;break;case Le.CODE_STOP:N=!0;break}break;case Le.CODE_CODE_C:if(pe<100)pe<10&&(k+="0"),k+=pe;else switch(pe!==Le.CODE_STOP&&(Ne=!1),pe){case Le.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Le.CODE_CODE_A:C=Le.CODE_CODE_A;break;case Le.CODE_CODE_B:C=Le.CODE_CODE_B;break;case Le.CODE_STOP:N=!0;break}break}Hs&&(C=C===Le.CODE_CODE_A?Le.CODE_CODE_B:Le.CODE_CODE_A)}const wi=Z-G;if(Z=o.getNextUnset(Z),!o.isRange(Z,Math.min(o.getSize(),Z+(Z-G)/2),!1))throw new fe;if(Oe-=Pe*ce,Oe%103!==ce)throw new F;const hr=k.length;if(hr===0)throw new fe;hr>0&&Ne&&(C===Le.CODE_CODE_C?k=k.substring(0,hr-2):k=k.substring(0,hr-1));const vi=(d[1]+d[0])/2,nn=G+wi/2,li=A.length,Ki=new Uint8Array(li);for(let Hs=0;Hs<li;Hs++)Ki[Hs]=A[Hs];const zs=[new Ge(vi,i),new Ge(nn,i)];return new Be(k,Ki,0,zs,Ie.CODE_128,new Date().getTime())}}Le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Le.MAX_AVG_VARIANCE=.25,Le.MAX_INDIVIDUAL_VARIANCE=.7,Le.CODE_SHIFT=98,Le.CODE_CODE_C=99,Le.CODE_CODE_B=100,Le.CODE_CODE_A=101,Le.CODE_FNC_1=102,Le.CODE_FNC_2=97,Le.CODE_FNC_3=96,Le.CODE_FNC_4_A=101,Le.CODE_FNC_4_B=100,Le.CODE_START_A=103,Le.CODE_START_B=104,Le.CODE_START_C=105,Le.CODE_STOP=106;class mn extends $t{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=mn.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),p=o.getSize(),A,C;do{mn.recordPattern(o,m,h);let $=mn.toNarrowWidePattern(h);if($<0)throw new fe;A=mn.patternToChar($),this.decodeRowResult+=A,C=m;for(let ce of h)m+=ce;m=o.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let $ of h)N+=$;let L=m-C-N;if(m!==p&&L*2<N)throw new fe;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,ce=0;for(let pe=0;pe<$;pe++)ce+=mn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt($)!==mn.ALPHABET_STRING.charAt(ce%43))throw new F;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new fe;let k;this.extendedMode?k=mn.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let G=(d[1]+d[0])/2,Z=C+N/2;return new Be(k,null,0,[new Ge(G,i),new Ge(Z,i)],Ie.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),h=i.getNextSet(0),d=0,m=h,p=!1,A=o.length;for(let C=h;C<l;C++)if(i.get(C)!==p)o[d]++;else{if(d===A-1){if(this.toNarrowWidePattern(o)===mn.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((C-m)/2)),m,!1))return[m,C];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,p=!p}throw new fe}static toNarrowWidePattern(i){let o=i.length,l=0,h;do{let d=2147483647;for(let A of i)A<d&&A>l&&(d=A);l=d,h=0;let m=0,p=0;for(let A=0;A<o;A++){let C=i[A];C>l&&(p|=1<<o-1-A,h++,m+=C)}if(h===3){for(let A=0;A<o&&h>0;A++){let C=i[A];if(C>l&&(h--,C*2>=m))return-1}return p}}while(h>3);return-1}static patternToChar(i){for(let o=0;o<mn.CHARACTER_ENCODINGS.length;o++)if(mn.CHARACTER_ENCODINGS[o]===i)return mn.ALPHABET_STRING.charAt(o);if(i===mn.ASTERISK_ENCODING)return"*";throw new fe}static decodeExtended(i){let o=i.length,l="";for(let h=0;h<o;h++){let d=i.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=i.charAt(h+1),p="\0";switch(d){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new z;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new z;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new z;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new z;break}l+=p,h++}else l+=d}return l}}mn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",mn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],mn.ASTERISK_ENCODING=148;class wt extends $t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new q;wt.decodeMiddle(o,h[1],d[0],m);let p=m.toString(),A=null;l!=null&&(A=l.get(Se.ALLOWED_LENGTHS)),A==null&&(A=wt.DEFAULT_ALLOWED_LENGTHS);let C=p.length,N=!1,L=0;for(let Z of A){if(C===Z){N=!0;break}Z>L&&(L=Z)}if(!N&&C>L&&(N=!0),!N)throw new z;const k=[new Ge(h[1],i),new Ge(d[0],i)];return new Be(p,null,0,k,Ie.ITF,new Date().getTime())}static decodeMiddle(i,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),m.fill(0),p.fill(0);o<l;){$t.recordPattern(i,o,d);for(let C=0;C<5;C++){let N=2*C;m[C]=d[N],p[C]=d[N+1]}let A=wt.decodeDigit(m);h.append(A.toString()),A=this.decodeDigit(p),h.append(A.toString()),d.forEach(function(C){o+=C})}}decodeStart(i){let o=wt.skipWhiteSpace(i),l=wt.findGuardPattern(i,o,wt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!i.get(h);h--)l--;if(l!==0)throw new fe}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new fe;return l}decodeEnd(i){i.reverse();try{let o=wt.skipWhiteSpace(i),l;try{l=wt.findGuardPattern(i,o,wt.END_PATTERN_REVERSED[0])}catch(d){d instanceof fe&&(l=wt.findGuardPattern(i,o,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let h=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-h,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let h=l.length,d=new Int32Array(h),m=i.getSize(),p=!1,A=0,C=o;d.fill(0);for(let N=o;N<m;N++)if(i.get(N)!==p)d[A]++;else{if(A===h-1){if($t.patternMatchVariance(d,l,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[C,N];C+=d[0]+d[1],ie.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,p=!p}throw new fe}static decodeDigit(i){let o=wt.MAX_AVG_VARIANCE,l=-1,h=wt.PATTERNS.length;for(let d=0;d<h;d++){let m=wt.PATTERNS[d],p=$t.patternMatchVariance(i,m,wt.MAX_INDIVIDUAL_VARIANCE);p<o?(o=p,l=d):p===o&&(l=-1)}if(l>=0)return l%10;throw new fe}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends $t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=vt.findGuardPattern(i,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let p=m-(h-m);p>=0&&(o=i.isRange(p,m,!1))}return l}static checkChecksum(i){return vt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return vt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let h=o-1;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}static decodeEnd(i,o){return vt.findGuardPattern(i,o,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,h){return this.findGuardPattern(i,o,l,h,new Int32Array(h.length))}static findGuardPattern(i,o,l,h,d){let m=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let p=0,A=o,C=h.length,N=l;for(let L=o;L<m;L++)if(i.get(L)!==N)d[p]++;else{if(p===C-1){if($t.patternMatchVariance(d,h,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([A,L]);A+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let G=0;G<p-1;G++)d[G]=k[G];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,N=!N}throw new fe}static decodeDigit(i,o,l,h){this.recordPattern(i,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,p=h.length;for(let A=0;A<p;A++){let C=h[A],N=$t.patternMatchVariance(o,C,vt.MAX_INDIVIDUAL_VARIANCE);N<d&&(d=N,m=A)}if(m>=0)return m;throw new fe}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Zr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=Zr.parseExtensionString(m),A=[new Ge((l[0]+l[1])/2,i),new Ge(d,i)],C=new Be(m,null,0,A,Ie.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1],p=0;for(let C=0;C<5&&m<d;C++){let N=vt.decodeDigit(i,h,m,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<4-C),C!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new fe;let A=this.determineCheckDigit(p);if(Zr.extensionChecksum(l.toString())!==A)throw new fe;return m}static extensionChecksum(i){let o=i.length,l=0;for(let h=o-2;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new fe}static parseExtensionString(i){if(i.length!==5)return null;let o=Zr.parseExtension5String(i);return o==null?null:new Map([[Qe.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class Ia{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),p=Ia.parseExtensionString(m),A=[new Ge((l[0]+l[1])/2,i),new Ge(d,i)],C=new Be(m,null,0,A,Ie.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1],p=0;for(let A=0;A<2&&m<d;A++){let C=vt.decodeDigit(i,h,m,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let N of h)m+=N;C>=10&&(p|=1<<1-A),A!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new fe;if(parseInt(l.toString())%4!==p)throw new fe;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[Qe.ISSUE_NUMBER,parseInt(i)]])}}class wo{static decodeRow(i,o,l){let h=vt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Zr().decodeRow(i,o,h)}catch{return new Ia().decodeRow(i,o,h)}}}wo.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class mt extends vt{constructor(){super(),this.decodeRowStringBuffer="",mt.L_AND_G_PATTERNS=mt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=mt.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];mt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let h=mt.findStartGuardPattern(o),d=l==null?null:l.get(Se.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Ne=new Ge((h[0]+h[1])/2,i);d.foundPossibleResultPoint(Ne)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),p=m.rowOffset,A=m.resultString;if(d!=null){const Ne=new Ge(p,i);d.foundPossibleResultPoint(Ne)}let C=this.decodeEnd(o,p);if(d!=null){const Ne=new Ge((C[0]+C[1])/2,i);d.foundPossibleResultPoint(Ne)}let N=C[1],L=N+(N-C[0]);if(L>=o.getSize()||!o.isRange(N,L,!1))throw new fe;let k=A.toString();if(k.length<8)throw new z;if(!mt.checkChecksum(k))throw new F;let G=(h[1]+h[0])/2,Z=(C[1]+C[0])/2,$=this.getBarcodeFormat(),ce=[new Ge(G,i),new Ge(Z,i)],pe=new Be(k,null,0,ce,$,new Date().getTime()),Oe=0;try{let Ne=wo.decodeRow(i,o,C[1]);pe.putMetadata(Qe.UPC_EAN_EXTENSION,Ne.getText()),pe.putAllMetadata(Ne.getResultMetadata()),pe.addResultPoints(Ne.getResultPoints()),Oe=Ne.getText().length}catch{}let Pe=l==null?null:l.get(Se.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let Ne=!1;for(let _t in Pe)if(Oe.toString()===_t){Ne=!0;break}if(!Ne)throw new fe}return pe}decodeEnd(i,o){return mt.findGuardPattern(i,o,!1,mt.START_END_PATTERN,new Int32Array(mt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return mt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return mt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let h=o-1;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}}class Ri extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1],p=0;for(let C=0;C<6&&m<d;C++){let N=mt.decodeDigit(i,h,m,mt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-C)}l=Ri.determineFirstDigit(l,p),m=mt.findGuardPattern(i,m,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&m<d;C++){let N=mt.decodeDigit(i,h,m,mt.L_PATTERNS);l+=String.fromCharCode(48+N);for(let L of h)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ie.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new fe}}Ri.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class er extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1];for(let A=0;A<4&&m<d;A++){let C=mt.decodeDigit(i,h,m,mt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let N of h)m+=N}m=mt.findGuardPattern(i,m,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<d;A++){let C=mt.decodeDigit(i,h,m,mt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let N of h)m+=N}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ie.EAN_8}}class Gi extends mt{constructor(){super(...arguments),this.ean13Reader=new Ri}getBarcodeFormat(){return Ie.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new Be(o.substring(1),null,null,i.getResultPoints(),Ie.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new fe}reset(){this.ean13Reader.reset()}}class Zn extends mt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const h=this.decodeMiddleCounters.map(C=>C);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=i.getSize();let m=o[1],p=0;for(let C=0;C<6&&m<d;C++){const N=Zn.decodeDigit(i,h,m,Zn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+N%10);for(let L of h)m+=L;N>=10&&(p|=1<<5-C)}let A=Zn.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:A}}decodeEnd(i,o){return Zn.findGuardPatternWithoutCounters(i,o,!0,Zn.MIDDLE_END_PATTERN)}checkChecksum(i){return mt.checkChecksum(Zn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+i+m}throw fe.getNotFoundInstance()}getBarcodeFormat(){return Ie.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new q;l.append(i.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Zn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fs extends $t{constructor(i){super();let o=i==null?null:i.get(Se.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new Ri),l.push(new Gi),l.push(new er),l.push(new Zn)):(o.indexOf(Ie.EAN_13)>-1&&l.push(new Ri),o.indexOf(Ie.UPC_A)>-1&&l.push(new Gi),o.indexOf(Ie.EAN_8)>-1&&l.push(new er),o.indexOf(Ie.UPC_E)>-1&&l.push(new Zn)),this.readers=l}decodeRow(i,o,l){for(let h of this.readers)try{const d=h.decodeRow(i,o,l),m=d.getBarcodeFormat()===Ie.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(Se.POSSIBLE_FORMATS),A=p==null||p.includes(Ie.UPC_A);if(m&&A){const C=d.getRawBytes(),N=new Be(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),Ie.UPC_A);return N.putAllMetadata(d.getResultMetadata()),N}return d}catch{}throw new fe}reset(){for(let i of this.readers)i.reset()}}class Pn extends $t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if($t.patternMatchVariance(i,o[l],Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return l;throw new fe}static count(i){return yt.sum(new Int32Array(i))}static increment(i,o){let l=0,h=o[0];for(let d=1;d<i.length;d++)o[d]>h&&(h=o[d],l=d);i[l]++}static decrement(i,o){let l=0,h=o[0];for(let d=1;d<i.length;d++)o[d]<h&&(h=o[d],l=d);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],h=o/l;if(h>=Pn.MIN_FINDER_PATTERN_RATIO&&h<=Pn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of i)p>m&&(m=p),p<d&&(d=p);return m<10*d}return!1}}Pn.MAX_AVG_VARIANCE=.2,Pn.MAX_INDIVIDUAL_VARIANCE=.45,Pn.MIN_FINDER_PATTERN_RATIO=9.5/12,Pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class qi{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof qi))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Jr{constructor(i,o,l,h,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ge(l,d)),this.resultPoints.push(new Ge(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Jr))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Gt{constructor(){}static getRSSvalue(i,o,l){let h=0;for(let A of i)h+=A;let d=0,m=0,p=i.length;for(let A=0;A<p-1;A++){let C;for(C=1,m|=1<<A;C<i[A];C++,m&=~(1<<A)){let N=Gt.combins(h-C-1,p-A-2);if(l&&m===0&&h-C-(p-A-1)>=p-A-1&&(N-=Gt.combins(h-C-(p-A),p-A-2)),p-A-1>1){let L=0;for(let k=h-C-(p-A-2);k>o;k--)L+=Gt.combins(h-C-k-1,p-A-3);N-=L*(p-1-A)}else h-C>o&&N--;d+=N}h-=C}return d}static combins(i,o){let l,h;i-o>o?(h=o,l=i-o):(h=i-o,l=o);let d=1,m=1;for(let p=i;p>l;p--)d*=p,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class nl{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new De(l),d=0,p=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)(p&1<<A)!=0&&h.set(d),d++;for(let A=1;A<i.length;++A){let C=i[A],N=C.getLeftChar().getValue();for(let L=11;L>=0;--L)(N&1<<L)!=0&&h.set(d),d++;if(C.getRightChar()!=null){let L=C.getRightChar().getValue();for(let k=11;k>=0;--k)(L&1<<k)!=0&&h.set(d),d++}}return h}}class Di{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Rr{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class ai extends Rr{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ai.FNC1}}ai.FNC1="$";class Dr extends Rr{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Gn extends Rr{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new z;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Gn.FNC1}isAnyFNC1(){return this.firstDigit===Gn.FNC1||this.secondDigit===Gn.FNC1}}Gn.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new fe;let o=i.substring(0,2);for(let d of He.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,d[2],i):He.processFixedAI(2,d[1],i);if(i.length<3)throw new fe;let l=i.substring(0,3);for(let d of He.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,d[2],i):He.processFixedAI(3,d[1],i);for(let d of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,d[2],i):He.processFixedAI(4,d[1],i);if(i.length<4)throw new fe;let h=i.substring(0,4);for(let d of He.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,d[2],i):He.processFixedAI(4,d[1],i);throw new fe}static processFixedAI(i,o,l){if(l.length<i)throw new fe;let h=l.substring(0,i);if(l.length<i+o)throw new fe;let d=l.substring(i,i+o),m=l.substring(i+o),p="("+h+")"+d,A=He.parseFieldsInGeneralPurpose(m);return A==null?p:p+A}static processVariableAI(i,o,l){let h=l.substring(0,i),d;l.length<i+o?d=l.length:d=i+o;let m=l.substring(i,d),p=l.substring(d),A="("+h+")"+m,C=He.parseFieldsInGeneralPurpose(p);return C==null?A:A+C}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class pn{constructor(i){this.buffer=new q,this.information=i}decodeAllCodes(i,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=He.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&i.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new Gn(this.information.getSize(),Gn.FNC1,Gn.FNC1):new Gn(this.information.getSize(),d-1,Gn.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,h=(o-8)%11;return new Gn(i+7,l,h)}extractNumericValueFromBitArray(i,o){return pn.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let h=0;for(let d=0;d<l;++d)i.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Dr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new Dr(this.current.getPosition(),this.buffer.toString()):o=new Dr(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Di(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new Dr(this.current.getPosition(),this.buffer.toString());return new Di(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Di(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Dr(this.current.getPosition(),this.buffer.toString());return new Di(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Di(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Dr(this.current.getPosition(),this.buffer.toString());return new Di(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Di(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new ai(i+5,ai.FNC1);if(o>=5&&o<15)return new ai(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new ai(i+7,""+(l+1));if(l>=90&&l<116)return new ai(i+7,""+(l+7));let h=this.extractNumericValueFromBitArray(i,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new z}return new ai(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new ai(i+5,ai.FNC1);if(o>=5&&o<15)return new ai(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new ai(i+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new si("Decoding invalid alphanumeric value: "+l)}return new ai(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class Nn{constructor(i){this.information=i,this.generalDecoder=new pn(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Tn extends Nn{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}Tn.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let h=0;h<13;h++){let d=i.charAt(h+o).charCodeAt(0)-48;l+=(h&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),i.append(l)}}Tn.GTIN_SIZE=40;class tr extends Tn{constructor(i){super(i)}parseInformation(){let i=new q;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,tr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,tr.HEADER_SIZE+44)}}tr.HEADER_SIZE=4;class $r extends Nn{constructor(i){super(i)}parseInformation(){let i=new q;return this.getGeneralDecoder().decodeAllCodes(i,$r.HEADER_SIZE)}}$r.HEADER_SIZE=5;class Yi extends Tn{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,h);let d=this.checkWeight(h),m=1e5;for(let p=0;p<5;++p)d/m===0&&i.append("0"),m/=10;i.append(d)}}class Oi extends Yi{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Oi.HEADER_SIZE+Yi.GTIN_SIZE+Oi.WEIGHT_SIZE)throw new fe;let i=new q;return this.encodeCompressedGtin(i,Oi.HEADER_SIZE),this.encodeCompressedWeight(i,Oi.HEADER_SIZE+Yi.GTIN_SIZE,Oi.WEIGHT_SIZE),i.toString()}}Oi.HEADER_SIZE=5,Oi.WEIGHT_SIZE=15;class ds extends Oi{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class ks extends Oi{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class kn extends Tn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<kn.HEADER_SIZE+Tn.GTIN_SIZE)throw new fe;let i=new q;this.encodeCompressedGtin(i,kn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+Tn.GTIN_SIZE,kn.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(kn.HEADER_SIZE+Tn.GTIN_SIZE+kn.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}kn.HEADER_SIZE=8,kn.LAST_DIGIT_SIZE=2;class yn extends Tn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+Tn.GTIN_SIZE)throw new fe;let i=new q;this.encodeCompressedGtin(i,yn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Tn.GTIN_SIZE,yn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Tn.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+Tn.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class Ft extends Yi{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE+Ft.DATE_SIZE)throw new fe;let i=new q;return this.encodeCompressedGtin(i,Ft.HEADER_SIZE),this.encodeCompressedWeight(i,Ft.HEADER_SIZE+Ft.GTIN_SIZE,Ft.WEIGHT_SIZE),this.encodeCompressedDate(i,Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Ft.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),d/10==0&&i.append("0"),i.append(d),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Ft.HEADER_SIZE=8,Ft.WEIGHT_SIZE=20,Ft.DATE_SIZE=16;function es(O){try{if(O.get(1))return new tr(O);if(!O.get(2))return new $r(O);switch(pn.extractNumericValueFromBitArray(O,1,4)){case 4:return new ds(O);case 5:return new ks(O)}switch(pn.extractNumericValueFromBitArray(O,1,5)){case 12:return new kn(O);case 13:return new yn(O)}switch(pn.extractNumericValueFromBitArray(O,1,7)){case 56:return new Ft(O,"310","11");case 57:return new Ft(O,"320","11");case 58:return new Ft(O,"310","13");case 59:return new Ft(O,"320","13");case 60:return new Ft(O,"310","15");case 61:return new Ft(O,"320","15");case 62:return new Ft(O,"310","17");case 63:return new Ft(O,"320","17")}}catch(i){throw console.log(i),new si("unknown decoder: "+O)}}class qt{constructor(i,o,l,h){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof qt?qt.equalsOrNull(i.leftchar,o.leftchar)&&qt.equalsOrNull(i.rightchar,o.rightchar)&&qt.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:qt.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Bs{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Bs?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ae extends Pn{constructor(i){super(...arguments),this.pairs=new Array(Ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Ae.constructResult(this.decodeRow2pairs(i,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Ae.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof fe){if(!this.pairs.length)throw new fe;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new fe}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!Ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new fe}static isValidSequence(i){for(let o of Ae.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||Ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Bs(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let h of l.getPairs())for(let d of i)if(qt.equals(h,d))break}}static isPartialRow(i,o){for(let l of o){let h=!0;for(let d of i){let m=!1;for(let p of l.getPairs())if(d.equals(p)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=nl.buildBitArray(i),h=es(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],m[0],m[1]];return new Be(h,null,null,p,Ie.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let A=this.pairs.get(p);h+=A.getLeftChar().getChecksumPortion(),d++;let C=A.getRightChar();C!=null&&(h+=C.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,p=-1;do this.findNextPair(i,o,p),d=this.parseFoundFinderPattern(i,l,h),d==null?p=Ae.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(i,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new fe;let C;try{C=this.decodeDataCharacter(i,d,h,!1)}catch(N){C=null,this.verbose&&console.log(N)}return new qt(A,C,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let p=o.length%2!=0;this.startFromEven&&(p=!p);let A=!1;for(;m<d&&(A=!i.get(m),!!A);)m++;let C=0,N=m;for(let L=m;L<d;L++)if(i.get(L)!=A)h[C]++;else{if(C==3){if(p&&Ae.reverseCounters(h),Ae.isFinderPattern(h)){this.startEnd[0]=N,this.startEnd[1]=L;return}p&&Ae.reverseCounters(h),N+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,C--}else C++;h[C]=1,A=!A}throw new fe}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let h=i[l];i[l]=i[o-l-1],i[o-l-1]=h}}parseFoundFinderPattern(i,o,l){let h,d,m;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!i.get(C);)C--;C++,h=this.startEnd[0]-C,d=C,m=this.startEnd[1]}else d=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let p=this.getDecodeFinderCounters();ie.arraycopy(p,0,p,1,p.length-1),p[0]=h;let A;try{A=this.parseFinderValue(p,Ae.FINDER_PATTERNS)}catch{return null}return new Jr(A,[d,m],d,m,o)}decodeDataCharacter(i,o,l,h){let d=this.getDataCharacterCounters();for(let nn=0;nn<d.length;nn++)d[nn]=0;if(h)Ae.recordPatternInReverse(i,o.getStartEnd()[0],d);else{Ae.recordPattern(i,o.getStartEnd()[1],d);for(let nn=0,li=d.length-1;nn<li;nn++,li--){let Ki=d[nn];d[nn]=d[li],d[li]=Ki}}let m=17,p=yt.sum(new Int32Array(d))/m,A=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(p-A)/A>.3)throw new fe;let C=this.getOddCounts(),N=this.getEvenCounts(),L=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let nn=0;nn<d.length;nn++){let li=1*d[nn]/p,Ki=li+.5;if(Ki<1){if(li<.3)throw new fe;Ki=1}else if(Ki>8){if(li>8.7)throw new fe;Ki=8}let zs=nn/2;(nn&1)==0?(C[zs]=Ki,L[zs]=li-Ki):(N[zs]=Ki,k[zs]=li-Ki)}this.adjustOddEvenCounts(m);let G=4*o.getValue()+(l?0:2)+(h?0:1)-1,Z=0,$=0;for(let nn=C.length-1;nn>=0;nn--){if(Ae.isNotA1left(o,l,h)){let li=Ae.WEIGHTS[G][2*nn];$+=C[nn]*li}Z+=C[nn]}let ce=0;for(let nn=N.length-1;nn>=0;nn--)if(Ae.isNotA1left(o,l,h)){let li=Ae.WEIGHTS[G][2*nn+1];ce+=N[nn]*li}let pe=$+ce;if((Z&1)!=0||Z>13||Z<4)throw new fe;let Oe=(13-Z)/2,Pe=Ae.SYMBOL_WIDEST[Oe],Ne=9-Pe,_t=Gt.getRSSvalue(C,Pe,!0),rt=Gt.getRSSvalue(N,Ne,!1),wi=Ae.EVEN_TOTAL_SUBSET[Oe],hr=Ae.GSUM[Oe],vi=_t*wi+rt+hr;return new qi(vi,pe)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=yt.sum(new Int32Array(this.getOddCounts())),l=yt.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let A=o+l-i,C=(o&1)==1,N=(l&1)==0;if(A==1)if(C){if(N)throw new fe;d=!0}else{if(!N)throw new fe;p=!0}else if(A==-1)if(C){if(N)throw new fe;h=!0}else{if(!N)throw new fe;m=!0}else if(A==0){if(C){if(!N)throw new fe;o<l?(h=!0,p=!0):(d=!0,m=!0)}else if(N)throw new fe}else throw new fe;if(h){if(d)throw new fe;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new fe;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ae.SYMBOL_WIDEST=[7,5,4,3,1],Ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ae.GSUM=[0,348,1388,2948,3988],Ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ae.FINDER_PAT_A=0,Ae.FINDER_PAT_B=1,Ae.FINDER_PAT_C=2,Ae.FINDER_PAT_D=3,Ae.FINDER_PAT_E=4,Ae.FINDER_PAT_F=5,Ae.FINDER_PATTERN_SEQUENCES=[[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_C,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_C],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F]],Ae.MAX_PAIRS=11;class Xi extends qi{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends Pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const h=this.decodePair(o,!1,i,l);Ct.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,i,l);Ct.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Ct.checkChecksum(m,p))return Ct.constructResult(m,p)}throw new fe}static addOrTally(i,o){if(o==null)return;let l=!1;for(let h of i)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),h=new String(l).toString(),d=new q;for(let C=13-h.length;C>0;C--)d.append("0");d.append(h);let m=0;for(let C=0;C<13;C++){let N=d.charAt(C).charCodeAt(0)-48;m+=(C&1)===0?3*N:N}m=10-m%10,m===10&&(m=0),d.append(m.toString());let p=i.getFinderPattern().getResultPoints(),A=o.getFinderPattern().getResultPoints();return new Be(d.toString(),null,0,[p[0],p[1],A[0],A[1]],Ie.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(i,o,l,h){try{let d=this.findFinderPattern(i,o),m=this.parseFoundFinderPattern(i,l,o,d),p=h==null?null:h.get(Se.NEED_RESULT_POINT_CALLBACK);if(p!=null){let N=(d[0]+d[1])/2;o&&(N=i.getSize()-1-N),p.foundPossibleResultPoint(new Ge(N,l))}let A=this.decodeDataCharacter(i,m,!0),C=this.decodeDataCharacter(i,m,!1);return new Xi(1597*A.getValue()+C.getValue(),A.getChecksumPortion()+4*C.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,o,l){let h=this.getDataCharacterCounters();for(let ce=0;ce<h.length;ce++)h[ce]=0;if(l)$t.recordPatternInReverse(i,o.getStartEnd()[0],h);else{$t.recordPattern(i,o.getStartEnd()[1]+1,h);for(let ce=0,pe=h.length-1;ce<pe;ce++,pe--){let Oe=h[ce];h[ce]=h[pe],h[pe]=Oe}}let d=l?16:15,m=yt.sum(new Int32Array(h))/d,p=this.getOddCounts(),A=this.getEvenCounts(),C=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let ce=0;ce<h.length;ce++){let pe=h[ce]/m,Oe=Math.floor(pe+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let Pe=Math.floor(ce/2);(ce&1)===0?(p[Pe]=Oe,C[Pe]=pe-Oe):(A[Pe]=Oe,N[Pe]=pe-Oe)}this.adjustOddEvenCounts(l,d);let L=0,k=0;for(let ce=p.length-1;ce>=0;ce--)k*=9,k+=p[ce],L+=p[ce];let G=0,Z=0;for(let ce=A.length-1;ce>=0;ce--)G*=9,G+=A[ce],Z+=A[ce];let $=k+3*G;if(l){if((L&1)!==0||L>12||L<4)throw new fe;let ce=(12-L)/2,pe=Ct.OUTSIDE_ODD_WIDEST[ce],Oe=9-pe,Pe=Gt.getRSSvalue(p,pe,!1),Ne=Gt.getRSSvalue(A,Oe,!0),_t=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[ce],rt=Ct.OUTSIDE_GSUM[ce];return new qi(Pe*_t+Ne+rt,$)}else{if((Z&1)!==0||Z>10||Z<4)throw new fe;let ce=(10-Z)/2,pe=Ct.INSIDE_ODD_WIDEST[ce],Oe=9-pe,Pe=Gt.getRSSvalue(p,pe,!0),Ne=Gt.getRSSvalue(A,Oe,!1),_t=Ct.INSIDE_ODD_TOTAL_SUBSET[ce],rt=Ct.INSIDE_GSUM[ce];return new qi(Ne*_t+Pe+rt,$)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=i.getSize(),d=!1,m=0;for(;m<h&&(d=!i.get(m),o!==d);)m++;let p=0,A=m;for(let C=m;C<h;C++)if(i.get(C)!==d)l[p]++;else{if(p===3){if(Pn.isFinderPattern(l))return[A,C];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new fe}parseFoundFinderPattern(i,o,l,h){let d=i.get(h[0]),m=h[0]-1;for(;m>=0&&d!==i.get(m);)m--;m++;const p=h[0]-m,A=this.getDecodeFinderCounters(),C=new Int32Array(A.length);ie.arraycopy(A,0,C,1,A.length-1),C[0]=p;const N=this.parseFinderValue(C,Ct.FINDER_PATTERNS);let L=m,k=h[1];return l&&(L=i.getSize()-1-L,k=i.getSize()-1-k),new Jr(N,[m,h[1]],L,k,o)}adjustOddEvenCounts(i,o){let l=yt.sum(new Int32Array(this.getOddCounts())),h=yt.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,p=!1,A=!1;i?(l>12?m=!0:l<4&&(d=!0),h>12?A=!0:h<4&&(p=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?A=!0:h<4&&(p=!0));let C=l+h-o,N=(l&1)===(i?1:0),L=(h&1)===1;if(C===1)if(N){if(L)throw new fe;m=!0}else{if(!L)throw new fe;A=!0}else if(C===-1)if(N){if(L)throw new fe;d=!0}else{if(!L)throw new fe;p=!0}else if(C===0){if(N){if(!L)throw new fe;l<h?(d=!0,A=!0):(m=!0,p=!0)}else if(L)throw new fe}else throw new fe;if(d){if(m)throw new fe;Pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(A)throw new fe;Pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Jn extends $t{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(Se.POSSIBLE_FORMATS):null,h=i&&i.get(Se.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ie.EAN_13)||l.includes(Ie.UPC_A)||l.includes(Ie.EAN_8)||l.includes(Ie.UPC_E))&&this.readers.push(new fs(i)),l.includes(Ie.CODE_39)&&this.readers.push(new mn(h)),l.includes(Ie.CODE_128)&&this.readers.push(new Le),l.includes(Ie.ITF)&&this.readers.push(new wt),l.includes(Ie.RSS_14)&&this.readers.push(new Ct),l.includes(Ie.RSS_EXPANDED)&&this.readers.push(new Ae(this.verbose))):(this.readers.push(new fs(i)),this.readers.push(new mn),this.readers.push(new fs(i)),this.readers.push(new Le),this.readers.push(new wt),this.readers.push(new Ct),this.readers.push(new Ae(this.verbose)))}decodeRow(i,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,o,l)}catch{}throw new fe}reset(){this.readers.forEach(i=>i.reset())}}class uc extends je{constructor(i=500,o){super(new Jn(o),i,o)}}class It{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class St{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(i,o,l,h,d,m){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let p=0;const A=m.getECCodewords(),C=m.getECBlocks();for(let N of C)p+=N.getCount()*(N.getDataCodewords()+A);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new z;for(let l of Et.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new It(5,new St(1,3))),new Et(2,12,12,10,10,new It(7,new St(1,5))),new Et(3,14,14,12,12,new It(10,new St(1,8))),new Et(4,16,16,14,14,new It(12,new St(1,12))),new Et(5,18,18,16,16,new It(14,new St(1,18))),new Et(6,20,20,18,18,new It(18,new St(1,22))),new Et(7,22,22,20,20,new It(20,new St(1,30))),new Et(8,24,24,22,22,new It(24,new St(1,36))),new Et(9,26,26,24,24,new It(28,new St(1,44))),new Et(10,32,32,14,14,new It(36,new St(1,62))),new Et(11,36,36,16,16,new It(42,new St(1,86))),new Et(12,40,40,18,18,new It(48,new St(1,114))),new Et(13,44,44,20,20,new It(56,new St(1,144))),new Et(14,48,48,22,22,new It(68,new St(1,174))),new Et(15,52,52,24,24,new It(42,new St(2,102))),new Et(16,64,64,14,14,new It(56,new St(2,140))),new Et(17,72,72,16,16,new It(36,new St(4,92))),new Et(18,80,80,18,18,new It(48,new St(4,114))),new Et(19,88,88,20,20,new It(56,new St(4,144))),new Et(20,96,96,22,22,new It(68,new St(4,174))),new Et(21,104,104,24,24,new It(56,new St(6,136))),new Et(22,120,120,18,18,new It(68,new St(6,175))),new Et(23,132,132,20,20,new It(62,new St(8,163))),new Et(24,144,144,22,22,new It(62,new St(8,156),new St(2,155))),new Et(25,8,18,6,16,new It(7,new St(1,5))),new Et(26,8,32,6,14,new It(11,new St(1,10))),new Et(27,12,26,10,24,new It(14,new St(1,16))),new Et(28,12,36,10,16,new It(18,new St(1,22))),new Et(29,16,36,14,16,new It(24,new St(1,32))),new Et(30,16,48,14,22,new It(28,new St(1,49)))]}}Et.VERSIONS=Et.buildVersions();class Or{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new z;this.version=Or.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ht(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return Et.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,A=!1,C=!1,N=!1;do if(l===d&&h===0&&!p)i[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,p=!0;else if(l===d-2&&h===0&&(m&3)!==0&&!A)i[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,A=!0;else if(l===d+4&&h===2&&(m&7)===0&&!C)i[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,C=!0;else if(l===d-2&&h===0&&(m&7)===4&&!N)i[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,N=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(i[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(i[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new z;return i}readModule(i,o,l,h){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,h){let d=0;return this.readModule(i-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(i-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(i-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(i-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(i-1,o,l,h)&&(d|=1),d<<=1,this.readModule(i,o-2,l,h)&&(d|=1),d<<=1,this.readModule(i,o-1,l,h)&&(d|=1),d<<=1,this.readModule(i,o,l,h)&&(d|=1),d}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new M("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,p=l/d|0,A=m*h,C=p*d,N=new ht(C,A);for(let L=0;L<m;++L){const k=L*h;for(let G=0;G<p;++G){const Z=G*d;for(let $=0;$<h;++$){const ce=L*(h+2)+1+$,pe=k+$;for(let Oe=0;Oe<d;++Oe){const Pe=G*(d+2)+1+Oe;if(i.get(Pe,ce)){const Ne=Z+Oe;N.set(Ne,pe)}}}}}return N}}class Mr{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let $ of d)h+=$.getCount();const m=new Array(h);let p=0;for(let $ of d)for(let ce=0;ce<$.getCount();ce++){const pe=$.getDataCodewords(),Oe=l.getECCodewords()+pe;m[p++]=new Mr(pe,new Uint8Array(Oe))}const C=m[0].codewords.length-l.getECCodewords(),N=C-1;let L=0;for(let $=0;$<N;$++)for(let ce=0;ce<p;ce++)m[ce].codewords[$]=i[L++];const k=o.getVersionNumber()===24,G=k?8:p;for(let $=0;$<G;$++)m[$].codewords[C-1]=i[L++];const Z=m[0].codewords.length;for(let $=C;$<Z;$++)for(let ce=0;ce<p;ce++){const pe=k?(ce+8)%p:ce,Oe=k&&pe>7?$-1:$;m[pe].codewords[Oe]=i[L++]}if(L!==i.length)throw new M;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Mi{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new M(""+i);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,p=i<m?i:m,A=m-p,C=255>>8-p<<A;o=(d[h]&C)>>A,i-=p,l+=p,l===8&&(l=0,h++)}if(i>0){for(;i>=8;)o=o<<8|d[h]&255,h++,i-=8;if(i>0){const m=8-i,p=255>>m<<m;o=o<<i|(d[h]&p)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lt||(Lt={}));class mr{static decode(i){const o=new Mi(i),l=new q,h=new q,d=new Array;let m=Lt.ASCII_ENCODE;do if(m===Lt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case Lt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Lt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Lt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Lt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new z}m=Lt.ASCII_ENCODE}while(m!==Lt.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new Ht(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,l){let h=!1;do{let d=i.readBits(8);if(d===0)throw new z;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),Lt.ASCII_ENCODE;if(d===129)return Lt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Lt.C40_ENCODE;case 231:return Lt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Lt.ANSIX12_ENCODE;case 239:return Lt.TEXT_ENCODE;case 240:return Lt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new z;break}}while(i.available()>0);return Lt.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const h=[];let d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let p=0;p<3;p++){const A=h[p];switch(d){case 0:if(A<3)d=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:l?(o.append(String.fromCharCode(A+224)),l=!1):o.append(String.fromCharCode(A+96)),d=0;break;default:throw new z}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,h=[],d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let p=0;p<3;p++){const A=h[p];switch(d){case 0:if(A<3)d=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else throw new z;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[A];l?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):o.append(C),d=0}else throw new z;break;default:throw new z}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new z;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let h=(i<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let h=i.readBits(6);if(h===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}(h&32)===0&&(h|=64),o.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let h=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),h++);let m;if(d===0?m=i.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(i.readBits(8),h++),m<0)throw new z;const p=new Uint8Array(m);for(let A=0;A<m;A++){if(i.available()<8)throw new z;p[A]=this.unrandomize255State(i.readBits(8),h++)}l.push(p);try{o.append(J.decode(p,Q.ISO88591))}catch(A){throw new si("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,o){const l=149*o%255+1,h=i-l;return h>=0?h:h+256}}mr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mr.TEXT_SHIFT2_SET_CHARS=mr.C40_SHIFT2_SET_CHARS,mr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class hc{constructor(){this.rsDecoder=new Hi(ft.DATA_MATRIX_FIELD_256)}decode(i){const o=new Or(i),l=o.getVersion(),h=o.readCodewords(),d=Mr.getDataBlocks(h,l);let m=0;for(let C of d)m+=C.getNumDataCodewords();const p=new Uint8Array(m),A=d.length;for(let C=0;C<A;C++){const N=d[C],L=N.getCodewords(),k=N.getNumDataCodewords();this.correctErrors(L,k);for(let G=0;G<k;G++)p[G*A+C]=L[G]}return mr.decode(p)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new F}for(let h=0;h<o;h++)i[h]=l[h]}}class en{constructor(i){this.image=i,this.rectangleDetector=new vn(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new fe;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let p=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(d,m)+1;(p&1)===1&&(p+=1),(A&1)===1&&(A+=1),4*p<7*A&&4*A<7*p&&(p=A=Math.max(p,A));let C=en.sampleGrid(this.image,l,h,d,m,p,A);return new va(C,[l,h,d,m])}static shiftPoint(i,o,l){let h=(o.getX()-i.getX())/(l+1),d=(o.getY()-i.getY())/(l+1);return new Ge(i.getX()+h,i.getY()+d)}static moveAway(i,o,l){let h=i.getX(),d=i.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new Ge(h,d)}detectSolid1(i){let o=i[0],l=i[1],h=i[3],d=i[2],m=this.transitionsBetween(o,l),p=this.transitionsBetween(l,h),A=this.transitionsBetween(h,d),C=this.transitionsBetween(d,o),N=m,L=[d,o,l,h];return N>p&&(N=p,L[0]=o,L[1]=l,L[2]=h,L[3]=d),N>A&&(N=A,L[0]=l,L[1]=h,L[2]=d,L[3]=o),N>C&&(L[0]=h,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(i){let o=i[0],l=i[1],h=i[2],d=i[3],m=this.transitionsBetween(o,d),p=en.shiftPoint(l,h,(m+1)*4),A=en.shiftPoint(h,l,(m+1)*4),C=this.transitionsBetween(p,o),N=this.transitionsBetween(A,d);return C<N?(i[0]=o,i[1]=l,i[2]=h,i[3]=d):(i[0]=l,i[1]=h,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],h=i[2],d=i[3],m=this.transitionsBetween(o,d),p=this.transitionsBetween(l,d),A=en.shiftPoint(o,l,(p+1)*4),C=en.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(A,d),p=this.transitionsBetween(C,d);let N=new Ge(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),L=new Ge(d.getX()+(o.getX()-l.getX())/(p+1),d.getY()+(o.getY()-l.getY())/(p+1));if(!this.isValid(N))return this.isValid(L)?L:null;if(!this.isValid(L))return N;let k=this.transitionsBetween(A,N)+this.transitionsBetween(C,N),G=this.transitionsBetween(A,L)+this.transitionsBetween(C,L);return k>G?N:L}shiftToModuleCenter(i){let o=i[0],l=i[1],h=i[2],d=i[3],m=this.transitionsBetween(o,d)+1,p=this.transitionsBetween(h,d)+1,A=en.shiftPoint(o,l,p*4),C=en.shiftPoint(h,l,m*4);m=this.transitionsBetween(A,d)+1,p=this.transitionsBetween(C,d)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let N=(o.getX()+l.getX()+h.getX()+d.getX())/4,L=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=en.moveAway(o,N,L),l=en.moveAway(l,N,L),h=en.moveAway(h,N,L),d=en.moveAway(d,N,L);let k,G;return A=en.shiftPoint(o,l,p*4),A=en.shiftPoint(A,d,m*4),k=en.shiftPoint(l,o,p*4),k=en.shiftPoint(k,h,m*4),C=en.shiftPoint(h,d,p*4),C=en.shiftPoint(C,l,m*4),G=en.shiftPoint(d,h,p*4),G=en.shiftPoint(G,o,m*4),[A,k,C,G]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,h,d,m,p){return di.getInstance().sampleGrid(i,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),h=Math.trunc(i.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),p=Math.abs(m-h)>Math.abs(d-l);if(p){let $=l;l=h,h=$,$=d,d=m,m=$}let A=Math.abs(d-l),C=Math.abs(m-h),N=-A/2,L=h<m?1:-1,k=l<d?1:-1,G=0,Z=this.image.get(p?h:l,p?l:h);for(let $=l,ce=h;$!==d;$+=k){let pe=this.image.get(p?ce:$,p?$:ce);if(pe!==Z&&(G++,Z=pe),N+=C,N>0){if(ce===m)break;ce+=L,N-=A}}return G}}class nr{constructor(){this.decoder=new hc}decode(i,o=null){let l,h;if(o!=null&&o.has(Se.PURE_BARCODE)){const C=nr.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(C),h=nr.NO_POINTS}else{const C=new en(i.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),h=C.getPoints()}const d=l.getRawBytes(),m=new Be(l.getText(),d,8*d.length,h,Ie.DATA_MATRIX,ie.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(Qe.BYTE_SEGMENTS,p);const A=l.getECLevel();return A!=null&&m.putMetadata(Qe.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new fe;const h=this.moduleSize(o,i);let d=o[1];const m=l[1];let p=o[0];const C=(l[0]-p+1)/h,N=(m-d+1)/h;if(C<=0||N<=0)throw new fe;const L=h/2;d+=L,p+=L;const k=new ht(C,N);for(let G=0;G<N;G++){const Z=d+G*h;for(let $=0;$<C;$++)i.get(p+$*h,Z)&&k.set($,G)}return k}static moduleSize(i,o){const l=o.getWidth();let h=i[0];const d=i[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new fe;const m=h-i[0];if(m===0)throw new fe;return m}}nr.NO_POINTS=[];class Na extends je{constructor(i=500){super(new nr,i)}}var Li;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Li||(Li={}));class at{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,at.FOR_BITS.set(l,this),at.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return at.L;case"M":return at.M;case"Q":return at.Q;case"H":return at.H;default:throw new I(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof at))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=at.FOR_BITS.size)throw new M;return at.FOR_BITS.get(i)}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.L=new at(Li.L,"L",1),at.M=new at(Li.M,"M",0),at.Q=new at(Li.Q,"Q",3),at.H=new at(Li.H,"H",2);class En{constructor(i){this.errorCorrectionLevel=at.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return se.bitCount(i^o)}static decodeFormatInformation(i,o){const l=En.doDecodeFormatInformation(i,o);return l!==null?l:En.doDecodeFormatInformation(i^En.FORMAT_INFO_MASK_QR,o^En.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of En.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===i||m===o)return new En(d[1]);let p=En.numBitsDiffering(i,m);p<l&&(h=d[1],l=p),i!==o&&(p=En.numBitsDiffering(o,m),p<l&&(h=d[1],l=p))}return l<=3?new En(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof En))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}En.FORMAT_INFO_MASK_QR=21522,En.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class j{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)h+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new z;try{return this.getVersionForNumber((i-17)/4)}catch{throw new z}}static getVersionForNumber(i){if(i<1||i>40)throw new M;return Fe.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Fe.VERSION_DECODE_INFO.length;h++){const d=Fe.VERSION_DECODE_INFO[h];if(d===i)return Fe.getVersionForNumber(h+7);const m=En.numBitsDiffering(i,d);m<o&&(l=h+7,o=m)}return o<=3?Fe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new ht(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}Fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Fe.VERSIONS=[new Fe(1,new Int32Array(0),new le(7,new j(1,19)),new le(10,new j(1,16)),new le(13,new j(1,13)),new le(17,new j(1,9))),new Fe(2,Int32Array.from([6,18]),new le(10,new j(1,34)),new le(16,new j(1,28)),new le(22,new j(1,22)),new le(28,new j(1,16))),new Fe(3,Int32Array.from([6,22]),new le(15,new j(1,55)),new le(26,new j(1,44)),new le(18,new j(2,17)),new le(22,new j(2,13))),new Fe(4,Int32Array.from([6,26]),new le(20,new j(1,80)),new le(18,new j(2,32)),new le(26,new j(2,24)),new le(16,new j(4,9))),new Fe(5,Int32Array.from([6,30]),new le(26,new j(1,108)),new le(24,new j(2,43)),new le(18,new j(2,15),new j(2,16)),new le(22,new j(2,11),new j(2,12))),new Fe(6,Int32Array.from([6,34]),new le(18,new j(2,68)),new le(16,new j(4,27)),new le(24,new j(4,19)),new le(28,new j(4,15))),new Fe(7,Int32Array.from([6,22,38]),new le(20,new j(2,78)),new le(18,new j(4,31)),new le(18,new j(2,14),new j(4,15)),new le(26,new j(4,13),new j(1,14))),new Fe(8,Int32Array.from([6,24,42]),new le(24,new j(2,97)),new le(22,new j(2,38),new j(2,39)),new le(22,new j(4,18),new j(2,19)),new le(26,new j(4,14),new j(2,15))),new Fe(9,Int32Array.from([6,26,46]),new le(30,new j(2,116)),new le(22,new j(3,36),new j(2,37)),new le(20,new j(4,16),new j(4,17)),new le(24,new j(4,12),new j(4,13))),new Fe(10,Int32Array.from([6,28,50]),new le(18,new j(2,68),new j(2,69)),new le(26,new j(4,43),new j(1,44)),new le(24,new j(6,19),new j(2,20)),new le(28,new j(6,15),new j(2,16))),new Fe(11,Int32Array.from([6,30,54]),new le(20,new j(4,81)),new le(30,new j(1,50),new j(4,51)),new le(28,new j(4,22),new j(4,23)),new le(24,new j(3,12),new j(8,13))),new Fe(12,Int32Array.from([6,32,58]),new le(24,new j(2,92),new j(2,93)),new le(22,new j(6,36),new j(2,37)),new le(26,new j(4,20),new j(6,21)),new le(28,new j(7,14),new j(4,15))),new Fe(13,Int32Array.from([6,34,62]),new le(26,new j(4,107)),new le(22,new j(8,37),new j(1,38)),new le(24,new j(8,20),new j(4,21)),new le(22,new j(12,11),new j(4,12))),new Fe(14,Int32Array.from([6,26,46,66]),new le(30,new j(3,115),new j(1,116)),new le(24,new j(4,40),new j(5,41)),new le(20,new j(11,16),new j(5,17)),new le(24,new j(11,12),new j(5,13))),new Fe(15,Int32Array.from([6,26,48,70]),new le(22,new j(5,87),new j(1,88)),new le(24,new j(5,41),new j(5,42)),new le(30,new j(5,24),new j(7,25)),new le(24,new j(11,12),new j(7,13))),new Fe(16,Int32Array.from([6,26,50,74]),new le(24,new j(5,98),new j(1,99)),new le(28,new j(7,45),new j(3,46)),new le(24,new j(15,19),new j(2,20)),new le(30,new j(3,15),new j(13,16))),new Fe(17,Int32Array.from([6,30,54,78]),new le(28,new j(1,107),new j(5,108)),new le(28,new j(10,46),new j(1,47)),new le(28,new j(1,22),new j(15,23)),new le(28,new j(2,14),new j(17,15))),new Fe(18,Int32Array.from([6,30,56,82]),new le(30,new j(5,120),new j(1,121)),new le(26,new j(9,43),new j(4,44)),new le(28,new j(17,22),new j(1,23)),new le(28,new j(2,14),new j(19,15))),new Fe(19,Int32Array.from([6,30,58,86]),new le(28,new j(3,113),new j(4,114)),new le(26,new j(3,44),new j(11,45)),new le(26,new j(17,21),new j(4,22)),new le(26,new j(9,13),new j(16,14))),new Fe(20,Int32Array.from([6,34,62,90]),new le(28,new j(3,107),new j(5,108)),new le(26,new j(3,41),new j(13,42)),new le(30,new j(15,24),new j(5,25)),new le(28,new j(15,15),new j(10,16))),new Fe(21,Int32Array.from([6,28,50,72,94]),new le(28,new j(4,116),new j(4,117)),new le(26,new j(17,42)),new le(28,new j(17,22),new j(6,23)),new le(30,new j(19,16),new j(6,17))),new Fe(22,Int32Array.from([6,26,50,74,98]),new le(28,new j(2,111),new j(7,112)),new le(28,new j(17,46)),new le(30,new j(7,24),new j(16,25)),new le(24,new j(34,13))),new Fe(23,Int32Array.from([6,30,54,78,102]),new le(30,new j(4,121),new j(5,122)),new le(28,new j(4,47),new j(14,48)),new le(30,new j(11,24),new j(14,25)),new le(30,new j(16,15),new j(14,16))),new Fe(24,Int32Array.from([6,28,54,80,106]),new le(30,new j(6,117),new j(4,118)),new le(28,new j(6,45),new j(14,46)),new le(30,new j(11,24),new j(16,25)),new le(30,new j(30,16),new j(2,17))),new Fe(25,Int32Array.from([6,32,58,84,110]),new le(26,new j(8,106),new j(4,107)),new le(28,new j(8,47),new j(13,48)),new le(30,new j(7,24),new j(22,25)),new le(30,new j(22,15),new j(13,16))),new Fe(26,Int32Array.from([6,30,58,86,114]),new le(28,new j(10,114),new j(2,115)),new le(28,new j(19,46),new j(4,47)),new le(28,new j(28,22),new j(6,23)),new le(30,new j(33,16),new j(4,17))),new Fe(27,Int32Array.from([6,34,62,90,118]),new le(30,new j(8,122),new j(4,123)),new le(28,new j(22,45),new j(3,46)),new le(30,new j(8,23),new j(26,24)),new le(30,new j(12,15),new j(28,16))),new Fe(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new j(3,117),new j(10,118)),new le(28,new j(3,45),new j(23,46)),new le(30,new j(4,24),new j(31,25)),new le(30,new j(11,15),new j(31,16))),new Fe(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new j(7,116),new j(7,117)),new le(28,new j(21,45),new j(7,46)),new le(30,new j(1,23),new j(37,24)),new le(30,new j(19,15),new j(26,16))),new Fe(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new j(5,115),new j(10,116)),new le(28,new j(19,47),new j(10,48)),new le(30,new j(15,24),new j(25,25)),new le(30,new j(23,15),new j(25,16))),new Fe(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new j(13,115),new j(3,116)),new le(28,new j(2,46),new j(29,47)),new le(30,new j(42,24),new j(1,25)),new le(30,new j(23,15),new j(28,16))),new Fe(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new j(17,115)),new le(28,new j(10,46),new j(23,47)),new le(30,new j(10,24),new j(35,25)),new le(30,new j(19,15),new j(35,16))),new Fe(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new j(17,115),new j(1,116)),new le(28,new j(14,46),new j(21,47)),new le(30,new j(29,24),new j(19,25)),new le(30,new j(11,15),new j(46,16))),new Fe(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new j(13,115),new j(6,116)),new le(28,new j(14,46),new j(23,47)),new le(30,new j(44,24),new j(7,25)),new le(30,new j(59,16),new j(1,17))),new Fe(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new j(12,121),new j(7,122)),new le(28,new j(12,47),new j(26,48)),new le(30,new j(39,24),new j(14,25)),new le(30,new j(22,15),new j(41,16))),new Fe(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new j(6,121),new j(14,122)),new le(28,new j(6,47),new j(34,48)),new le(30,new j(46,24),new j(10,25)),new le(30,new j(2,15),new j(64,16))),new Fe(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new j(17,122),new j(4,123)),new le(28,new j(29,46),new j(14,47)),new le(30,new j(49,24),new j(10,25)),new le(30,new j(24,15),new j(46,16))),new Fe(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new j(4,122),new j(18,123)),new le(28,new j(13,46),new j(32,47)),new le(30,new j(48,24),new j(14,25)),new le(30,new j(42,15),new j(32,16))),new Fe(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new j(20,117),new j(4,118)),new le(28,new j(40,47),new j(7,48)),new le(30,new j(43,24),new j(22,25)),new le(30,new j(10,15),new j(67,16))),new Fe(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new j(19,118),new j(6,119)),new le(28,new j(18,47),new j(31,48)),new le(30,new j(34,24),new j(34,25)),new le(30,new j(20,15),new j(61,16)))];var fn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(fn||(fn={}));class qn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&i.flip(h,l)}}qn.values=new Map([[fn.DATA_MASK_000,new qn(fn.DATA_MASK_000,(O,i)=>(O+i&1)===0)],[fn.DATA_MASK_001,new qn(fn.DATA_MASK_001,(O,i)=>(O&1)===0)],[fn.DATA_MASK_010,new qn(fn.DATA_MASK_010,(O,i)=>i%3===0)],[fn.DATA_MASK_011,new qn(fn.DATA_MASK_011,(O,i)=>(O+i)%3===0)],[fn.DATA_MASK_100,new qn(fn.DATA_MASK_100,(O,i)=>(Math.floor(O/2)+Math.floor(i/3)&1)===0)],[fn.DATA_MASK_101,new qn(fn.DATA_MASK_101,(O,i)=>O*i%6===0)],[fn.DATA_MASK_110,new qn(fn.DATA_MASK_110,(O,i)=>O*i%6<3)],[fn.DATA_MASK_111,new qn(fn.DATA_MASK_111,(O,i)=>(O+i+O*i%3&1)===0)]]);class ir{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new z;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=En.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return Fe.getVersionForNumber(o);let l=0;const h=i-11;for(let m=5;m>=0;m--)for(let p=i-9;p>=h;p--)l=this.copyBit(p,m,l);let d=Fe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let p=i-9;p>=h;p--)l=this.copyBit(m,p,l);if(d=Fe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new z}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=qn.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const p=new Uint8Array(o.getTotalCodewords());let A=0,C=0,N=0;for(let L=h-1;L>0;L-=2){L===6&&L--;for(let k=0;k<h;k++){const G=m?h-1-k:k;for(let Z=0;Z<2;Z++)d.get(L-Z,G)||(N++,C<<=1,this.bitMatrix.get(L-Z,G)&&(C|=1),N===8&&(p[A++]=C,N=0,C=0))}m=!m}if(A!==o.getTotalCodewords())throw new z;return p}remask(){if(this.parsedFormatInfo===null)return;const i=qn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let h=o+1,d=i.getHeight();h<d;h++)i.get(o,h)!==i.get(h,o)&&(i.flip(h,o),i.flip(o,h))}}class vo{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new M;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const Z of m)d+=Z.getCount();const p=new Array(d);let A=0;for(const Z of m)for(let $=0;$<Z.getCount();$++){const ce=Z.getDataCodewords(),pe=h.getECCodewordsPerBlock()+ce;p[A++]=new vo(ce,new Uint8Array(pe))}const C=p[0].codewords.length;let N=p.length-1;for(;N>=0&&p[N].codewords.length!==C;)N--;N++;const L=C-h.getECCodewordsPerBlock();let k=0;for(let Z=0;Z<L;Z++)for(let $=0;$<A;$++)p[$].codewords[Z]=i[k++];for(let Z=N;Z<A;Z++)p[Z].codewords[L]=i[k++];const G=p[0].codewords.length;for(let Z=L;Z<G;Z++)for(let $=0;$<A;$++){const ce=$<N?Z:Z+1;p[$].codewords[ce]=i[k++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var gi;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(gi||(gi={}));class Ze{constructor(i,o,l,h){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,Ze.FOR_BITS.set(h,this),Ze.FOR_VALUE.set(i,this)}static forBits(i){const o=Ze.FOR_BITS.get(i);if(o===void 0)throw new M;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ze))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze(gi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze(gi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze(gi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze(gi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze(gi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze(gi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze(gi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze(gi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze(gi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze(gi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tn{static decode(i,o,l,h){const d=new Mi(i);let m=new q;const p=new Array;let A=-1,C=-1;try{let N=null,L=!1,k;do{if(d.available()<4)k=Ze.TERMINATOR;else{const G=d.readBits(4);k=Ze.forBits(G)}switch(k){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:L=!0;break;case Ze.STRUCTURED_APPEND:if(d.available()<16)throw new z;A=d.readBits(8),C=d.readBits(8);break;case Ze.ECI:const G=tn.parseECIValue(d);if(N=P.getCharacterSetECIByValue(G),N===null)throw new z;break;case Ze.HANZI:const Z=d.readBits(4),$=d.readBits(k.getCharacterCountBits(o));Z===tn.GB2312_SUBSET&&tn.decodeHanziSegment(d,m,$);break;default:const ce=d.readBits(k.getCharacterCountBits(o));switch(k){case Ze.NUMERIC:tn.decodeNumericSegment(d,m,ce);break;case Ze.ALPHANUMERIC:tn.decodeAlphanumericSegment(d,m,ce,L);break;case Ze.BYTE:tn.decodeByteSegment(d,m,ce,N,p,h);break;case Ze.KANJI:tn.decodeKanjiSegment(d,m,ce);break;default:throw new z}break}}while(k!==Ze.TERMINATOR)}catch{throw new z}return new Ht(i,m.toString(),p.length===0?null:p,l===null?null:l.toString(),A,C)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new z;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,h[d]=p>>8&255,h[d+1]=p&255,d+=2,l--}try{o.append(J.decode(h,Q.GB2312))}catch(m){throw new z(m)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new z;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,h[d]=p>>8,h[d+1]=p,d+=2,l--}try{o.append(J.decode(h,Q.SHIFT_JIS))}catch(m){throw new z(m)}}static decodeByteSegment(i,o,l,h,d,m){if(8*l>i.available())throw new z;const p=new Uint8Array(l);for(let C=0;C<l;C++)p[C]=i.readBits(8);let A;h===null?A=Q.guessEncoding(p,m):A=h.getName();try{o.append(J.decode(p,A))}catch(C){throw new z(C)}d.push(p)}static toAlphaNumericChar(i){if(i>=tn.ALPHANUMERIC_CHARS.length)throw new z;return tn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,h){const d=o.length();for(;l>1;){if(i.available()<11)throw new z;const m=i.readBits(11);o.append(tn.toAlphaNumericChar(Math.floor(m/45))),o.append(tn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new z;o.append(tn.toAlphaNumericChar(i.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new z;const h=i.readBits(10);if(h>=1e3)throw new z;o.append(tn.toAlphaNumericChar(Math.floor(h/100))),o.append(tn.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(tn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(i.available()<7)throw new z;const h=i.readBits(7);if(h>=100)throw new z;o.append(tn.toAlphaNumericChar(Math.floor(h/10))),o.append(tn.toAlphaNumericChar(h%10))}else if(l===1){if(i.available()<4)throw new z;const h=i.readBits(4);if(h>=10)throw new z;o.append(tn.toAlphaNumericChar(h))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new z}}tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tn.GB2312_SUBSET=1;class il{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class fc{constructor(){this.rsDecoder=new Hi(ft.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(ht.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new ir(i);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new il(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(i,o){const l=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),m=vo.getDataBlocks(d,l,h);let p=0;for(const N of m)p+=N.getNumDataCodewords();const A=new Uint8Array(p);let C=0;for(const N of m){const L=N.getCodewords(),k=N.getNumDataCodewords();this.correctErrors(L,k);for(let G=0;G<k;G++)A[C++]=L[G]}return tn.decode(A,l,h,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new F}for(let h=0;h<o;h++)i[h]=l[h]}}class rr extends Ge{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const h=(this.getX()+o)/2,d=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new rr(h,d,m)}}class _i{constructor(i,o,l,h,d,m,p){this.image=i,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,h=i+l,d=this.startY+o/2,m=new Int32Array(3),p=this.image;for(let A=0;A<o;A++){const C=d+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let N=i;for(;N<h&&!p.get(N,C);)N++;let L=0;for(;N<h;){if(p.get(N,C))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,C,N);if(k!==null)return k}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;N++}if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,C,h);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new fe}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-i[h])>=l)return!1;return!0}crossCheckVertical(i,o,l,h){const d=this.image,m=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let A=i;for(;A>=0&&d.get(o,A)&&p[1]<=l;)p[1]++,A--;if(A<0||p[1]>l)return NaN;for(;A>=0&&!d.get(o,A)&&p[0]<=l;)p[0]++,A--;if(p[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A)&&p[1]<=l;)p[1]++,A++;if(A===m||p[1]>l)return NaN;for(;A<m&&!d.get(o,A)&&p[2]<=l;)p[2]++,A++;if(p[2]>l)return NaN;const C=p[0]+p[1]+p[2];return 5*Math.abs(C-h)>=2*h?NaN:this.foundPatternCross(p)?_i.centerFromEnd(p,A):NaN}handlePossibleCenter(i,o,l){const h=i[0]+i[1]+i[2],d=_i.centerFromEnd(i,l),m=this.crossCheckVertical(o,d,2*i[1],h);if(!isNaN(m)){const p=(i[0]+i[1]+i[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(p,m,d))return C.combineEstimate(m,d,p);const A=new rr(d,m,p);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class gs extends Ge{constructor(i,o,l,h){super(i,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+i)/h,p=(this.count*this.estimatedModuleSize+l)/h;return new gs(d,m,p,h)}}class ts{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class an{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(Se.TRY_HARDER)!==void 0,l=i!=null&&i.get(Se.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let p=Math.floor(3*d/(4*an.MAX_MODULES));(p<an.MIN_SKIP||o)&&(p=an.MIN_SKIP);let A=!1;const C=new Int32Array(5);for(let L=p-1;L<d&&!A;L+=p){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let k=0;for(let G=0;G<m;G++)if(h.get(G,L))(k&1)===1&&k++,C[k]++;else if((k&1)===0)if(k===4)if(an.foundPatternCross(C)){if(this.handlePossibleCenter(C,L,G,l)===!0)if(p=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>C[2]&&(L+=$-C[2]-p,G=m-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,k=3;continue}k=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,k=3;else C[++k]++;else C[k]++;an.foundPatternCross(C)&&this.handlePossibleCenter(C,L,m,l)===!0&&(p=C[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return Ge.orderBestPatterns(N),new ts(N)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const m=i[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-i[0])<h&&Math.abs(l-i[1])<h&&Math.abs(3*l-i[2])<3*h&&Math.abs(l-i[3])<h&&Math.abs(l-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;i>=m&&o>=m&&p.get(o-m,i-m);)d[2]++,m++;if(i<m||o<m)return!1;for(;i>=m&&o>=m&&!p.get(o-m,i-m)&&d[1]<=l;)d[1]++,m++;if(i<m||o<m||d[1]>l)return!1;for(;i>=m&&o>=m&&p.get(o-m,i-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const A=p.getHeight(),C=p.getWidth();for(m=1;i+m<A&&o+m<C&&p.get(o+m,i+m);)d[2]++,m++;if(i+m>=A||o+m>=C)return!1;for(;i+m<A&&o+m<C&&!p.get(o+m,i+m)&&d[3]<l;)d[3]++,m++;if(i+m>=A||o+m>=C||d[3]>=l)return!1;for(;i+m<A&&o+m<C&&p.get(o+m,i+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const N=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(N-h)<2*h&&an.foundPatternCross(d)}crossCheckVertical(i,o,l,h){const d=this.image,m=d.getHeight(),p=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(o,A);)p[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(o,A)&&p[1]<=l;)p[1]++,A--;if(A<0||p[1]>l)return NaN;for(;A>=0&&d.get(o,A)&&p[0]<=l;)p[0]++,A--;if(p[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A);)p[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(o,A)&&p[3]<l;)p[3]++,A++;if(A===m||p[3]>=l)return NaN;for(;A<m&&d.get(o,A)&&p[4]<l;)p[4]++,A++;if(p[4]>=l)return NaN;const C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-h)>=2*h?NaN:an.foundPatternCross(p)?an.centerFromEnd(p,A):NaN}crossCheckHorizontal(i,o,l,h){const d=this.image,m=d.getWidth(),p=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(A,o);)p[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(A,o)&&p[1]<=l;)p[1]++,A--;if(A<0||p[1]>l)return NaN;for(;A>=0&&d.get(A,o)&&p[0]<=l;)p[0]++,A--;if(p[0]>l)return NaN;for(A=i+1;A<m&&d.get(A,o);)p[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(A,o)&&p[3]<l;)p[3]++,A++;if(A===m||p[3]>=l)return NaN;for(;A<m&&d.get(A,o)&&p[4]<l;)p[4]++,A++;if(p[4]>=l)return NaN;const C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-h)>=h?NaN:an.foundPatternCross(p)?an.centerFromEnd(p,A):NaN}handlePossibleCenter(i,o,l,h){const d=i[0]+i[1]+i[2]+i[3]+i[4];let m=an.centerFromEnd(i,l),p=this.crossCheckVertical(o,Math.floor(m),i[2],d);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),i[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),i[2],d)))){const A=d/7;let C=!1;const N=this.possibleCenters;for(let L=0,k=N.length;L<k;L++){const G=N[L];if(G.aboutEquals(A,p,m)){N[L]=G.combineEstimate(p,m,A),C=!0;break}}if(!C){const L=new gs(m,p,A);N.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=an.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=an.CENTER_QUORUM&&(i++,o+=m.getEstimatedModuleSize());if(i<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new fe;const o=this.possibleCenters;let l;if(i>3){let h=0,d=0;for(const A of this.possibleCenters){const C=A.getEstimatedModuleSize();h+=C,d+=C*C}l=h/i;let m=Math.sqrt(d/i-l*l);o.sort((A,C)=>{const N=Math.abs(C.getEstimatedModuleSize()-l),L=Math.abs(A.getEstimatedModuleSize()-l);return N<L?-1:N>L?1:0});const p=Math.max(.2*l,m);for(let A=0;A<o.length&&o.length>3;A++){const C=o[A];Math.abs(C.getEstimatedModuleSize()-l)>p&&(o.splice(A,1),A--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(d.getEstimatedModuleSize()-l);return p<A?1:p>A?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}an.CENTER_QUORUM=2,an.MIN_SKIP=3,an.MAX_MODULES=57;class Wi{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Se.NEED_RESULT_POINT_CALLBACK);const l=new an(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),h=i.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new fe("No pattern found in proccess finder.");const m=Wi.computeDimension(o,l,h,d),p=Fe.getProvisionalVersionForDimension(m),A=p.getDimensionForVersion()-7;let C=null;if(p.getAlignmentPatternCenters().length>0){const G=l.getX()-o.getX()+h.getX(),Z=l.getY()-o.getY()+h.getY(),$=1-3/A,ce=Math.floor(o.getX()+$*(G-o.getX())),pe=Math.floor(o.getY()+$*(Z-o.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{C=this.findAlignmentInRegion(d,ce,pe,Oe);break}catch(Pe){if(!(Pe instanceof fe))throw Pe}}const N=Wi.createTransform(o,l,h,C,m),L=Wi.sampleGrid(this.image,N,m);let k;return C===null?k=[h,o,l]:k=[h,o,l,C],new va(L,k)}static createTransform(i,o,l,h,d){const m=d-3.5;let p,A,C,N;return h!==null?(p=h.getX(),A=h.getY(),C=m-3,N=C):(p=o.getX()-i.getX()+l.getX(),A=o.getY()-i.getY()+l.getY(),C=m,N=m),Kt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,C,N,3.5,m,i.getX(),i.getY(),o.getX(),o.getY(),p,A,l.getX(),l.getY())}static sampleGrid(i,o,l){return di.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,h){const d=yt.round(Ge.distance(i,o)/h),m=yt.round(Ge.distance(i,l)/h);let p=Math.floor((d+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new fe("Dimensions could be not found.")}return p}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(i,o,l,h),m=1,p=i-(l-i);p<0?(m=i/(i-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(p-i),p=this.image.getWidth()-1);let A=Math.floor(o-(h-o)*m);return m=1,A<0?(m=o/(o-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(A-o),A=this.image.getHeight()-1),p=Math.floor(i+(p-i)*m),d+=this.sizeOfBlackWhiteBlackRun(i,o,p,A),d-1}sizeOfBlackWhiteBlackRun(i,o,l,h){const d=Math.abs(h-o)>Math.abs(l-i);if(d){let G=i;i=o,o=G,G=l,l=h,h=G}const m=Math.abs(l-i),p=Math.abs(h-o);let A=-m/2;const C=i<l?1:-1,N=o<h?1:-1;let L=0;const k=l+C;for(let G=i,Z=o;G!==k;G+=C){const $=d?Z:G,ce=d?G:Z;if(L===1===this.image.get($,ce)){if(L===2)return yt.distance(G,Z,i,o);L++}if(A+=p,A>0){if(Z===h)break;Z+=N,A-=m}}return L===2?yt.distance(l+C,h,i,o):NaN}findAlignmentInRegion(i,o,l,h){const d=Math.floor(h*i),m=Math.max(0,o-d),p=Math.min(this.image.getWidth()-1,o+d);if(p-m<i*3)throw new fe("Alignment top exceeds estimated module size.");const A=Math.max(0,l-d),C=Math.min(this.image.getHeight()-1,l+d);if(C-A<i*3)throw new fe("Alignment bottom exceeds estimated module size.");return new _i(this.image,m,A,p-m,C-A,i,this.resultPointCallback).find()}}class sr{constructor(){this.decoder=new fc}getDecoder(){return this.decoder}decode(i,o){let l,h;if(o!=null&&o.get(Se.PURE_BARCODE)!==void 0){const A=sr.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,o),h=sr.NO_POINTS}else{const A=new Wi(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(A.getBits(),o),h=A.getPoints()}l.getOther()instanceof il&&l.getOther().applyMirroredCorrection(h);const d=new Be(l.getText(),l.getRawBytes(),void 0,h,Ie.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(Qe.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&d.putMetadata(Qe.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(Qe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Qe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new fe;const h=this.moduleSize(o,i);let d=o[1],m=l[1],p=o[0],A=l[0];if(p>=A||d>=m)throw new fe;if(m-d!==A-p&&(A=p+(m-d),A>=i.getWidth()))throw new fe;const C=Math.round((A-p+1)/h),N=Math.round((m-d+1)/h);if(C<=0||N<=0)throw new fe;if(N!==C)throw new fe;const L=Math.floor(h/2);d+=L,p+=L;const k=p+Math.floor((C-1)*h)-A;if(k>0){if(k>L)throw new fe;p-=k}const G=d+Math.floor((N-1)*h)-m;if(G>0){if(G>L)throw new fe;d-=G}const Z=new ht(C,N);for(let $=0;$<N;$++){const ce=d+Math.floor($*h);for(let pe=0;pe<C;pe++)i.get(p+Math.floor(pe*h),ce)&&Z.set(pe,$)}return Z}static moduleSize(i,o){const l=o.getHeight(),h=o.getWidth();let d=i[0],m=i[1],p=!0,A=0;for(;d<h&&m<l;){if(p!==o.get(d,m)){if(++A===5)break;p=!p}d++,m++}if(d===h||m===l)throw new fe;return(d-i[0])/7}}sr.NO_POINTS=new Array;class et{PDF417Common(){}static getBitCountSum(i){return yt.sum(i)}static toIntArray(i){if(i==null||!i.length)return et.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const h of i)o[l++]=h;return o}static getCodeword(i){const o=ye.binarySearch(et.SYMBOL_TABLE,i&262143);return o<0?-1:(et.CODEWORD_TABLE[o]-1)%et.NUMBER_OF_CODEWORDS}}et.NUMBER_OF_CODEWORDS=929,et.MAX_CODEWORDS_IN_BARCODE=et.NUMBER_OF_CODEWORDS-1,et.MIN_ROWS_IN_BARCODE=3,et.MAX_ROWS_IN_BARCODE=90,et.MODULES_IN_CODEWORD=17,et.MODULES_IN_STOP_PATTERN=18,et.BARS_IN_MODULE=8,et.EMPTY_INT_ARRAY=new Int32Array([]),et.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),et.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Us{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class nt{static detectMultiple(i,o,l){let h=i.getBlackMatrix(),d=nt.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=nt.detect(l,h)),new Us(h,d)}static detect(i,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const p=nt.findVertices(o,h,d);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,d=0;for(const A of l)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=nt.ROW_STEP;continue}if(m=!0,l.push(p),!i)break;p[2]!=null?(d=Math.trunc(p[2].getX()),h=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),h=Math.trunc(p[4].getY()))}return l}static findVertices(i,o,l){const h=i.getHeight(),d=i.getWidth(),m=new Array(8);return nt.copyToResult(m,nt.findRowsWithPattern(i,h,d,o,l,nt.START_PATTERN),nt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),nt.copyToResult(m,nt.findRowsWithPattern(i,h,d,o,l,nt.STOP_PATTERN),nt.INDEXES_STOP_PATTERN),m}static copyToResult(i,o,l){for(let h=0;h<l.length;h++)i[l[h]]=o[h]}static findRowsWithPattern(i,o,l,h,d,m){const p=new Array(4);let A=!1;const C=new Int32Array(m.length);for(;h<o;h+=nt.ROW_STEP){let L=nt.findGuardPattern(i,d,h,l,!1,m,C);if(L!=null){for(;h>0;){const k=nt.findGuardPattern(i,d,--h,l,!1,m,C);if(k!=null)L=k;else{h++;break}}p[0]=new Ge(L[0],h),p[1]=new Ge(L[1],h),A=!0;break}}let N=h+1;if(A){let L=0,k=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;N<o;N++){const G=nt.findGuardPattern(i,k[0],N,l,!1,m,C);if(G!=null&&Math.abs(k[0]-G[0])<nt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-G[1])<nt.MAX_PATTERN_DRIFT)k=G,L=0;else{if(L>nt.SKIPPED_ROW_COUNT_MAX)break;L++}}N-=L+1,p[2]=new Ge(k[0],N),p[3]=new Ge(k[1],N)}return N-h<nt.BARCODE_MIN_HEIGHT&&ye.fill(p,null),p}static findGuardPattern(i,o,l,h,d,m,p){ye.fillWithin(p,0,p.length,0);let A=o,C=0;for(;i.get(A,l)&&A>0&&C++<nt.MAX_PIXEL_DRIFT;)A--;let N=A,L=0,k=m.length;for(let G=d;N<h;N++)if(i.get(N,l)!==G)p[L]++;else{if(L===k-1){if(nt.patternMatchVariance(p,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return new Int32Array([A,N]);A+=p[0]+p[1],ie.arraycopy(p,2,p,0,L-1),p[L-1]=0,p[L]=0,L--}else L++;p[L]=1,G=!G}return L===k-1&&nt.patternMatchVariance(p,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE?new Int32Array([A,N-1]):null}static patternMatchVariance(i,o,l){let h=i.length,d=0,m=0;for(let C=0;C<h;C++)d+=i[C],m+=o[C];if(d<m)return 1/0;let p=d/m;l*=p;let A=0;for(let C=0;C<h;C++){let N=i[C],L=o[C]*p,k=N>L?N-L:L-N;if(k>l)return 1/0;A+=k}return A/d}}nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),nt.MAX_AVG_VARIANCE=.42,nt.MAX_INDIVIDUAL_VARIANCE=.8,nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),nt.MAX_PIXEL_DRIFT=3,nt.MAX_PATTERN_DRIFT=5,nt.SKIPPED_ROW_COUNT_MAX=25,nt.ROW_STEP=5,nt.BARCODE_MIN_HEIGHT=10;class xn{constructor(i,o){if(o.length===0)throw new M;this.field=i;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),ie.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(i,o),this.coefficients[h]);return o}add(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;ie.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new xn(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof xn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new xn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=i.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let p=0;p<l;p++){let A=o[p];for(let C=0;C<d;C++)m[p+C]=this.field.add(m[p+C],this.field.multiply(A,h[C]))}return new xn(this.field,m)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new xn(this.field,o)}multiplyScalar(i){if(i===0)return new xn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],i);return new xn(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new M;if(o===0)return new xn(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+i);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new xn(this.field,h)}toString(){let i=new q;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class Lr{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new M;return this.logTable[i]}inverse(i){if(i===0)throw new xi;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Pr extends Lr{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let h=0;h<i;h++)this.expTable[h]=l,l=l*o%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new xn(this,new Int32Array([0])),this.one=new xn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new M;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new xn(this,l)}}Pr.PDF417_GF=new Pr(et.NUMBER_OF_CODEWORDS,3);class kr{constructor(){this.field=Pr.PDF417_GF}decode(i,o,l){let h=new xn(this.field,i),d=new Int32Array(o),m=!1;for(let Z=o;Z>0;Z--){let $=h.evaluateAt(this.field.exp(Z));d[o-Z]=$,$!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const Z of l){let $=this.field.exp(i.length-1-Z),ce=new xn(this.field,new Int32Array([this.field.subtract(0,$),1]));p=p.multiply(ce)}let A=new xn(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),A,o),N=C[0],L=C[1],k=this.findErrorLocations(N),G=this.findErrorMagnitudes(L,N,k);for(let Z=0;Z<k.length;Z++){let $=i.length-1-this.field.log(k[Z]);if($<0)throw F.getChecksumInstance();i[$]=this.field.subtract(i[$],G[Z])}return k.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let k=i;i=o,o=k}let h=i,d=o,m=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=h,G=m;if(h=d,m=p,h.isZero())throw F.getChecksumInstance();d=k;let Z=this.field.getZero(),$=h.getCoefficient(h.getDegree()),ce=this.field.inverse($);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let pe=d.getDegree()-h.getDegree(),Oe=this.field.multiply(d.getCoefficient(d.getDegree()),ce);Z=Z.add(this.field.buildMonomial(pe,Oe)),d=d.subtract(h.multiplyByMonomial(pe,Oe))}p=Z.multiply(m).subtract(G).negative()}let A=p.getCoefficient(0);if(A===0)throw F.getChecksumInstance();let C=this.field.inverse(A),N=p.multiply(C),L=d.multiply(C);return[N,L]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)i.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw F.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let C=1;C<=h;C++)d[h-C]=this.field.multiply(C,o.getCoefficient(C));let m=new xn(this.field,d),p=l.length,A=new Int32Array(p);for(let C=0;C<p;C++){let N=this.field.inverse(l[C]),L=this.field.subtract(0,i.evaluateAt(N)),k=this.field.inverse(m.evaluateAt(N));A[C]=this.field.multiply(L,k)}return A}}class pr{constructor(i,o,l,h,d){i instanceof pr?this.constructor_2(i):this.constructor_1(i,o,l,h,d)}constructor_1(i,o,l,h,d){const m=o==null||l==null,p=h==null||d==null;if(m&&p)throw new fe;m?(o=new Ge(0,h.getY()),l=new Ge(0,d.getY())):p&&(h=new Ge(i.getWidth()-1,o.getY()),d=new Ge(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new pr(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(i>0){let A=l?this.topLeft:this.topRight,C=Math.trunc(A.getY()-i);C<0&&(C=0);let N=new Ge(A.getX(),C);l?h=N:m=N}if(o>0){let A=l?this.bottomLeft:this.bottomRight,C=Math.trunc(A.getY()+o);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let N=new Ge(A.getX(),C);l?d=N:p=N}return new pr(this.image,h,d,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Br{constructor(i,o,l,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Pi{constructor(){this.buffer=""}static form(i,o){let l=-1;function h(m,p,A,C,N,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let k=N?parseInt(N.substr(1)):void 0,G;switch(L){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let Z=parseInt(A),$=A&&A[0]+""=="0"?"0":" ";for(;G.length<Z;)G=p!==void 0?G+$:$+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,h)}format(i,...o){this.buffer+=Pi.form(i,o)}toString(){return this.buffer}}class ns{constructor(i){this.boundingBox=new pr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<ns.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(i)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(i)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Pi;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}ns.MAX_NEARBY_DISTANCE=5;class Cn{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return et.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class zt extends ns{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),A=-1,C=1,N=0;for(let L=m;L<p;L++){if(o[L]==null)continue;let k=o[L],G=k.getRowNumber()-A;if(G===0)N++;else if(G===1)C=Math.max(C,N),N=1,A=k.getRowNumber();else if(G<0||k.getRowNumber()>=i.getRowCount()||G>L)o[L]=null;else{let Z;C>2?Z=(C-2)*G:Z=G;let $=Z>=L;for(let ce=1;ce<=Z&&!$;ce++)$=o[L-ce]!=null;$?o[L]=null:(A=k.getRowNumber(),N=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),p=this.getCodewords(),A=-1;for(let C=d;C<m;C++){if(p[C]==null)continue;let N=p[C];N.setRowNumberAsRowIndicatorColumn();let L=N.getRowNumber()-A;L===0||(L===1?A=N.getRowNumber():N.getRowNumber()>=i.getRowCount()?p[C]=null:A=N.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new Cn,l=new Cn,h=new Cn,d=new Cn;for(let p of i){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let A=p.getValue()%30,C=p.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(A*3+1);break;case 1:d.setValue(A/3),h.setValue(A%3);break;case 2:o.setValue(A+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<et.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>et.MAX_ROWS_IN_BARCODE)return null;let m=new Br(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let h=i[l];if(i[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ur{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=et.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=Ur.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(d=Ur.adjustRowNumberIfValid(h,d,p),p.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let h=l[o],d=this.detectionResultColumns[i-1].getCodewords(),m=d;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let p=new Array(14);p[2]=d[o],p[3]=m[o],o>0&&(p[0]=l[o-1],p[4]=d[o-1],p[5]=m[o-1]),o>1&&(p[8]=l[o-2],p[10]=d[o-2],p[11]=m[o-2]),o<l.length-1&&(p[1]=l[o+1],p[6]=d[o+1],p[7]=m[o+1]),o<l.length-2&&(p[9]=l[o+2],p[12]=d[o+2],p[13]=m[o+2]);for(let A of p)if(Ur.adjustRowNumber(h,A))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Pi;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class yr{constructor(i,o,l,h){this.rowNumber=yr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==yr.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}yr.BARCODE_ROW_UNKNOWN=-1;class oi{static initialize(){for(let i=0;i<et.SYMBOL_TABLE.length;i++){let o=et.SYMBOL_TABLE[i],l=o&1;for(let h=0;h<et.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,oi.RATIOS_TABLE[i]||(oi.RATIOS_TABLE[i]=new Array(et.BARS_IN_MODULE)),oi.RATIOS_TABLE[i][et.BARS_IN_MODULE-h-1]=Math.fround(d/et.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=oi.getDecodedCodewordValue(oi.sampleBitCounts(i));return o!==-1?o:oi.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=yt.sum(i),l=new Int32Array(et.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<et.MODULES_IN_CODEWORD;m++){let p=o/(2*et.MODULES_IN_CODEWORD)+m*o/et.MODULES_IN_CODEWORD;d+i[h]<=p&&(d+=i[h],h++),l[h]++}return l}static getDecodedCodewordValue(i){let o=oi.getBitValue(i);return et.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let h=0;h<i[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=yt.sum(i),l=new Array(et.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/o);let h=Nr.MAX_VALUE,d=-1;this.bSymbolTableReady||oi.initialize();for(let m=0;m<oi.RATIOS_TABLE.length;m++){let p=0,A=oi.RATIOS_TABLE[m];for(let C=0;C<et.BARS_IN_MODULE;C++){let N=Math.fround(A[C]-l[C]);if(p+=Math.fround(N*N),p>=h)break}p<h&&(h=p,d=et.SYMBOL_TABLE[m])}return d}}oi.bSymbolTableReady=!1,oi.RATIOS_TABLE=new Array(et.SYMBOL_TABLE.length).map(O=>new Array(et.BARS_IN_MODULE));class Vs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class js{static parseLong(i,o=void 0){return parseInt(i,o)}}class Er extends _{}Er.kind="NullPointerException";class Fs{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new Er;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new te;if(l===0)return;for(let h=0;h<l;h++)this.write(i[o+h])}flush(){}close(){}}class ar extends _{}class rl extends Fs{constructor(i=32){if(super(),this.count=0,i<0)throw new M("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new ar;l=se.MAX_VALUE}this.buf=ye.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new te;this.ensureCapacity(this.count+l),ie.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ye.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Yt;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Yt||(Yt={}));function ms(){if(typeof window<"u")return window.BigInt||null;if(typeof Vh<"u")return Vh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let is;function or(O){if(typeof is>"u"&&(is=ms()),is===null)throw new Error("BigInt is not supported!");return is(O)}function Ra(){let O=[];O[0]=or(1);let i=or(900);O[1]=i;for(let o=2;o<16;o++)O[o]=O[o-1]*i;return O}class ge{static decode(i,o){let l=new q(""),h=P.ISO8859_1;l.enableDecoding(h);let d=1,m=i[d++],p=new Vs;for(;d<i[0];){switch(m){case ge.TEXT_COMPACTION_MODE_LATCH:d=ge.textCompaction(i,d,l);break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:d=ge.byteCompaction(m,i,h,d,l);break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case ge.NUMERIC_COMPACTION_MODE_LATCH:d=ge.numericCompaction(i,d,l);break;case ge.ECI_CHARSET:P.getCharacterSetECIByValue(i[d++]);break;case ge.ECI_GENERAL_PURPOSE:d+=2;break;case ge.ECI_USER_DEFINED:d++;break;case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=ge.decodeMacroBlock(i,d,p);break;case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:throw new z;default:d--,d=ge.textCompaction(i,d,l);break}if(d<i.length)m=i[d++];else throw z.getFormatInstance()}if(l.length()===0)throw z.getFormatInstance();let A=new Ht(null,l.toString(),null,o);return A.setOther(p),A}static decodeMacroBlock(i,o,l){if(o+ge.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw z.getFormatInstance();let h=new Int32Array(ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ge.NUMBER_OF_SEQUENCE_CODEWORDS;p++,o++)h[p]=i[o];l.setSegmentIndex(se.parseInt(ge.decodeBase900toBase10(h,ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new q;o=ge.textCompaction(i,o,d),l.setFileId(d.toString());let m=-1;for(i[o]===ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<i[0];)switch(i[o]){case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new q;o=ge.textCompaction(i,o+1,p),l.setFileName(p.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new q;o=ge.textCompaction(i,o+1,A),l.setSender(A.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new q;o=ge.textCompaction(i,o+1,C),l.setAddressee(C.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new q;o=ge.numericCompaction(i,o+1,N),l.setSegmentCount(se.parseInt(N.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new q;o=ge.numericCompaction(i,o+1,L),l.setTimestamp(js.parseLong(L.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new q;o=ge.numericCompaction(i,o+1,k),l.setChecksum(se.parseInt(k.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new q;o=ge.numericCompaction(i,o+1,G),l.setFileSize(js.parseLong(G.toString()));break;default:throw z.getFormatInstance()}break;case ge.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(m!==-1){let p=o-m;l.isLastSegment()&&p--,l.setOptionalData(ye.copyOfRange(i,m,m+p))}return o}static textCompaction(i,o,l){let h=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),m=0,p=!1;for(;o<i[0]&&!p;){let A=i[o++];if(A<ge.TEXT_COMPACTION_MODE_LATCH)h[m]=A/30,h[m+1]=A%30,m+=2;else switch(A){case ge.TEXT_COMPACTION_MODE_LATCH:h[m++]=ge.TEXT_COMPACTION_MODE_LATCH;break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:o--,p=!0;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[o++],d[m]=A,m++;break}}return ge.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(i,o,l,h){let d=Yt.ALPHA,m=Yt.ALPHA,p=0;for(;p<l;){let A=i[p],C="";switch(d){case Yt.ALPHA:if(A<26)C=String.fromCharCode(65+A);else switch(A){case 26:C=" ";break;case ge.LL:d=Yt.LOWER;break;case ge.ML:d=Yt.MIXED;break;case ge.PS:m=d,d=Yt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=Yt.ALPHA;break}break;case Yt.LOWER:if(A<26)C=String.fromCharCode(97+A);else switch(A){case 26:C=" ";break;case ge.AS:m=d,d=Yt.ALPHA_SHIFT;break;case ge.ML:d=Yt.MIXED;break;case ge.PS:m=d,d=Yt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=Yt.ALPHA;break}break;case Yt.MIXED:if(A<ge.PL)C=ge.MIXED_CHARS[A];else switch(A){case ge.PL:d=Yt.PUNCT;break;case 26:C=" ";break;case ge.LL:d=Yt.LOWER;break;case ge.AL:d=Yt.ALPHA;break;case ge.PS:m=d,d=Yt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=Yt.ALPHA;break}break;case Yt.PUNCT:if(A<ge.PAL)C=ge.PUNCT_CHARS[A];else switch(A){case ge.PAL:d=Yt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=Yt.ALPHA;break}break;case Yt.ALPHA_SHIFT:if(d=m,A<26)C=String.fromCharCode(65+A);else switch(A){case 26:C=" ";break;case ge.TEXT_COMPACTION_MODE_LATCH:d=Yt.ALPHA;break}break;case Yt.PUNCT_SHIFT:if(d=m,A<ge.PAL)C=ge.PUNCT_CHARS[A];else switch(A){case ge.PAL:d=Yt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[p]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=Yt.ALPHA;break}break}C!==""&&h.append(C),p++}}static byteCompaction(i,o,l,h,d){let m=new rl,p=0,A=0,C=!1;switch(i){case ge.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),L=o[h++];for(;h<o[0]&&!C;)switch(N[p++]=L,A=900*A+L,L=o[h++],L){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:h--,C=!0;break;default:if(p%5===0&&p>0){for(let k=0;k<6;++k)m.write(Number(or(A)>>or(8*(5-k))));A=0,p=0}break}h===o[0]&&L<ge.TEXT_COMPACTION_MODE_LATCH&&(N[p++]=L);for(let k=0;k<p;k++)m.write(N[k]);break;case ge.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!C;){let k=o[h++];if(k<ge.TEXT_COMPACTION_MODE_LATCH)p++,A=900*A+k;else switch(k){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:h--,C=!0;break}if(p%5===0&&p>0){for(let G=0;G<6;++G)m.write(Number(or(A)>>or(8*(5-G))));A=0,p=0}}break}return d.append(J.decode(m.toByteArray(),l)),h}static numericCompaction(i,o,l){let h=0,d=!1,m=new Int32Array(ge.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let p=i[o++];if(o===i[0]&&(d=!0),p<ge.TEXT_COMPACTION_MODE_LATCH)m[h]=p,h++;else switch(p){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%ge.MAX_NUMERIC_CODEWORDS===0||p===ge.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(ge.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(i,o){let l=or(0);for(let d=0;d<o;d++)l+=ge.EXP900[o-d-1]*or(i[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new z;return h.substring(1)}}ge.TEXT_COMPACTION_MODE_LATCH=900,ge.BYTE_COMPACTION_MODE_LATCH=901,ge.NUMERIC_COMPACTION_MODE_LATCH=902,ge.BYTE_COMPACTION_MODE_LATCH_6=924,ge.ECI_USER_DEFINED=925,ge.ECI_GENERAL_PURPOSE=926,ge.ECI_CHARSET=927,ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ge.MACRO_PDF417_TERMINATOR=922,ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ge.MAX_NUMERIC_CODEWORDS=15,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ge.PL=25,ge.LL=27,ge.AS=27,ge.ML=28,ge.AL=28,ge.PS=29,ge.PAL=29,ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ge.EXP900=ms()?Ra():[],ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ct{constructor(){}static decode(i,o,l,h,d,m,p){let A=new pr(i,o,l,h,d),C=null,N=null,L;for(let Z=!0;;Z=!1){if(o!=null&&(C=ct.getRowIndicatorColumn(i,A,o,!0,m,p)),h!=null&&(N=ct.getRowIndicatorColumn(i,A,h,!1,m,p)),L=ct.merge(C,N),L==null)throw fe.getNotFoundInstance();let $=L.getBoundingBox();if(Z&&$!=null&&($.getMinY()<A.getMinY()||$.getMaxY()>A.getMaxY()))A=$;else break}L.setBoundingBox(A);let k=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,C),L.setDetectionResultColumn(k,N);let G=C!=null;for(let Z=1;Z<=k;Z++){let $=G?Z:k-Z;if(L.getDetectionResultColumn($)!==void 0)continue;let ce;$===0||$===k?ce=new zt(A,$===0):ce=new ns(A),L.setDetectionResultColumn($,ce);let pe=-1,Oe=pe;for(let Pe=A.getMinY();Pe<=A.getMaxY();Pe++){if(pe=ct.getStartColumn(L,$,Pe,G),pe<0||pe>A.getMaxX()){if(Oe===-1)continue;pe=Oe}let Ne=ct.detectCodeword(i,A.getMinX(),A.getMaxX(),G,pe,Pe,m,p);Ne!=null&&(ce.setCodeword(Pe,Ne),Oe=pe,m=Math.min(m,Ne.getWidth()),p=Math.max(p,Ne.getWidth()))}}return ct.createDecoderResult(L)}static merge(i,o){if(i==null&&o==null)return null;let l=ct.getBarcodeMetadata(i,o);if(l==null)return null;let h=pr.merge(ct.adjustBoundingBox(i),ct.adjustBoundingBox(o));return new Ur(l,h)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=ct.getMax(o),h=0;for(let p of o)if(h+=l-p,p>0)break;let d=i.getCodewords();for(let p=0;h>0&&d[p]==null;p++)h--;let m=0;for(let p=o.length-1;p>=0&&(m+=l-o[p],!(o[p]>0));p--);for(let p=d.length-1;m>0&&d[p]==null;p--)m--;return i.getBoundingBox().addMissingRows(h,m,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,h,d,m){let p=new zt(o,h);for(let A=0;A<2;A++){let C=A===0?1:-1,N=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=C){let k=ct.detectCodeword(i,0,i.getWidth(),h,N,L,d,m);k!=null&&(p.setCodeword(L,k),h?N=k.getStartX():N=k.getEndX())}}return p}static adjustCodewordCount(i,o){let l=o[0][1],h=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ct.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(d<1||d>et.MAX_CODEWORDS_IN_BARCODE)throw fe.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(i){let o=ct.createBarcodeMatrix(i);ct.adjustCodewordCount(i,o);let l=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],m=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let C=0;C<i.getBarcodeColumnCount();C++){let N=o[A][C+1].getValue(),L=A*i.getBarcodeColumnCount()+C;N.length===0?l.push(L):N.length===1?h[L]=N[0]:(m.push(L),d.push(N))}let p=new Array(d.length);for(let A=0;A<p.length;A++)p[A]=d[A];return ct.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,et.toIntArray(l),et.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(i,o,l,h,d){let m=new Int32Array(h.length),p=100;for(;p-- >0;){for(let A=0;A<m.length;A++)o[h[A]]=d[A][m[A]];try{return ct.decodeCodewords(o,i,l)}catch(A){if(!(A instanceof F))throw A}if(m.length===0)throw F.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<d[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw F.getChecksumInstance()}throw F.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new Cn;let l=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,h){let d=h?1:-1,m=null;if(ct.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(ct.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let p=0;for(;ct.isValidBarcodeColumn(i,o-d);){o-=d;for(let A of i.getDetectionResultColumn(o).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+d*p*(A.getEndX()-A.getStartX());p++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,h,d,m,p,A){d=ct.adjustCodewordStartColumn(i,o,l,h,d,m);let C=ct.getModuleBitCount(i,o,l,h,d,m);if(C==null)return null;let N,L=yt.sum(C);if(h)N=d+L;else{for(let Z=0;Z<C.length/2;Z++){let $=C[Z];C[Z]=C[C.length-1-Z],C[C.length-1-Z]=$}N=d,d=N-L}if(!ct.checkCodewordSkew(L,p,A))return null;let k=oi.getDecodedValue(C),G=et.getCodeword(k);return G===-1?null:new yr(d,N,ct.getCodewordBucketNumber(k),G)}static getModuleBitCount(i,o,l,h,d,m){let p=d,A=new Int32Array(8),C=0,N=h?1:-1,L=h;for(;(h?p<l:p>=o)&&C<A.length;)i.get(p,m)===L?(A[C]++,p+=N):(C++,L=!L);return C===A.length||p===(h?l:o)&&C===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,h,d,m){let p=d,A=h?-1:1;for(let C=0;C<2;C++){for(;(h?p>=o:p<l)&&h===i.get(p,m);){if(Math.abs(d-p)>ct.CODEWORD_SKEW_SIZE)return d;p+=A}A=-A,h=!h}return p}static checkCodewordSkew(i,o,l){return o-ct.CODEWORD_SKEW_SIZE<=i&&i<=l+ct.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw z.getFormatInstance();let h=1<<o+1,d=ct.correctErrors(i,l,h);ct.verifyCodewordCount(i,h);let m=ge.decode(i,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+ct.MAX_ERRORS||l<0||l>ct.MAX_EC_CODEWORDS)throw F.getChecksumInstance();return ct.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw z.getFormatInstance();let l=i[0];if(l>i.length)throw z.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw z.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((i&1)!==l&&(l=i&1,h--,h<0));)o[h]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ct.getCodewordBucketNumber(ct.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new Pi;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let h=0;h<i[l].length;h++){let d=i[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}ct.CODEWORD_SKEW_SIZE=2,ct.MAX_ERRORS=3,ct.MAX_EC_CODEWORDS=512,ct.errorCorrection=new kr;class Yn{decode(i,o=null){let l=Yn.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw fe.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return Yn.decode(i,o,!0)}catch(l){throw l instanceof z||l instanceof F?fe.getNotFoundInstance():l}}static decode(i,o,l){const h=new Array,d=nt.detectMultiple(i,o,l);for(const m of d.getPoints()){const p=ct.decode(d.getBits(),m[4],m[5],m[6],m[7],Yn.getMinCodewordWidth(m),Yn.getMaxCodewordWidth(m)),A=new Be(p.getText(),p.getRawBytes(),void 0,m,Ie.PDF_417);A.putMetadata(Qe.ERROR_CORRECTION_LEVEL,p.getECLevel());const C=p.getOther();C!=null&&A.putMetadata(Qe.PDF417_EXTRA_METADATA,C),h.push(A)}return h.map(m=>m)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?se.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Yn.getMaxWidth(i[0],i[4]),Yn.getMaxWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.max(Yn.getMaxWidth(i[1],i[5]),Yn.getMaxWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Yn.getMinWidth(i[0],i[4]),Yn.getMinWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.min(Yn.getMinWidth(i[1],i[5]),Yn.getMinWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}reset(){}}class ps extends _{}ps.kind="ReaderException";class ys{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!a(i)&&i.get(Se.TRY_HARDER)===!0,l=a(i)?null:i.get(Se.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const d=l.some(m=>m===Ie.UPC_A||m===Ie.UPC_E||m===Ie.EAN_13||m===Ie.EAN_8||m===Ie.CODABAR||m===Ie.CODE_39||m===Ie.CODE_93||m===Ie.CODE_128||m===Ie.ITF||m===Ie.RSS_14||m===Ie.RSS_EXPANDED);d&&!o&&h.push(new Jn(i,this.verbose)),l.includes(Ie.QR_CODE)&&h.push(new sr),l.includes(Ie.DATA_MATRIX)&&h.push(new nr),l.includes(Ie.AZTEC)&&h.push(new ba),l.includes(Ie.PDF_417)&&h.push(new Yn),d&&o&&h.push(new Jn(i,this.verbose))}h.length===0&&(o||h.push(new Jn(i,this.verbose)),h.push(new sr),h.push(new nr),h.push(new ba),h.push(new Yn),o&&h.push(new Jn(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ps("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof ps)continue}throw new fe("No MultiFormat Readers were able to detect the code.")}}class sl extends je{constructor(i=null,o=500){const l=new ys;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class al extends je{constructor(i=500){super(new Yn,i)}}class To extends je{constructor(i=500){super(new sr,i)}}var rs;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(rs||(rs={}));var Sn=rs;class Es{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Bt(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=i;d++){const m=l.multiply(new Bt(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[i]}encode(i,o){if(o===0)throw new M("No error correction bytes");const l=i.length-o;if(l<=0)throw new M("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);ie.arraycopy(i,0,d,0,l);let m=new Bt(this.field,d);m=m.multiplyByMonomial(o,1);const A=m.divide(h)[1].getCoefficients(),C=o-A.length;for(let N=0;N<C;N++)i[l+N]=0;ie.arraycopy(A,0,i,l+C,A.length)}}class cn{constructor(){}static applyMaskPenaltyRule1(i){return cn.applyMaskPenaltyRule1Internal(i,!0)+cn.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),h=i.getWidth(),d=i.getHeight();for(let m=0;m<d-1;m++){const p=l[m];for(let A=0;A<h-1;A++){const C=p[A];C===p[A+1]&&C===l[m+1][A]&&C===l[m+1][A+1]&&o++}}return cn.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),h=i.getWidth(),d=i.getHeight();for(let m=0;m<d;m++)for(let p=0;p<h;p++){const A=l[m];p+6<h&&A[p]===1&&A[p+1]===0&&A[p+2]===1&&A[p+3]===1&&A[p+4]===1&&A[p+5]===0&&A[p+6]===1&&(cn.isWhiteHorizontal(A,p-4,p)||cn.isWhiteHorizontal(A,p+7,p+11))&&o++,m+6<d&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(cn.isWhiteVertical(l,p,m-4,m)||cn.isWhiteVertical(l,p,m+7,m+11))&&o++}return o*cn.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let h=o;h<l;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,o,l,h){l=Math.max(l,0),h=Math.min(h,i.length);for(let d=l;d<h;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),h=i.getWidth(),d=i.getHeight();for(let A=0;A<d;A++){const C=l[A];for(let N=0;N<h;N++)C[N]===1&&o++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*cn.N4}static getDataMaskBit(i,o,l){let h,d;switch(i){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new M("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const h=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),m=i.getArray();for(let p=0;p<h;p++){let A=0,C=-1;for(let N=0;N<d;N++){const L=o?m[p][N]:m[N][p];L===C?A++:(A>=5&&(l+=cn.N1+(A-5)),A=1,C=L)}A>=5&&(l+=cn.N1+(A-5))}return l}}cn.N1=3,cn.N2=3,cn.N3=40,cn.N4=10;class xs{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)ye.fill(o,i)}equals(i){if(!(i instanceof xs))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let p=0,A=this.width;p<A;++p)if(d[p]!==m[p])return!1}return!0}toString(){const i=new q;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Ai{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new q;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Ai.NUM_MASK_PATTERNS}}Ai.NUM_MASK_PATTERNS=8;class Xt extends _{}Xt.kind="WriterException";class Je{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,h,d){Je.clearMatrix(d),Je.embedBasicPatterns(l,d),Je.embedTypeInfo(o,h,d),Je.maybeEmbedVersionInfo(l,d),Je.embedDataBits(i,h,d)}static embedBasicPatterns(i,o){Je.embedPositionDetectionPatternsAndSeparators(o),Je.embedDarkDotAtLeftBottomCorner(o),Je.maybeEmbedPositionAdjustmentPatterns(i,o),Je.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const h=new De;Je.makeTypeInfoBits(i,o,h);for(let d=0,m=h.getSize();d<m;++d){const p=h.get(h.getSize()-1-d),A=Je.TYPE_INFO_COORDINATES[d],C=A[0],N=A[1];if(l.setBoolean(C,N,p),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,p)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,p)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new De;Je.makeVersionInfoBits(i,l);let h=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const p=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,p),o.setBoolean(o.getHeight()-11+m,d,p)}}static embedDataBits(i,o,l){let h=0,d=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let A=0;A<2;++A){const C=m-A;if(!Je.isEmpty(l.get(C,p)))continue;let N;h<i.getSize()?(N=i.get(h),++h):N=!1,o!==255&&cn.getDataMaskBit(o,C,p)&&(N=!N),l.setBoolean(C,p,N)}p+=d}d=-d,p+=d,m-=2}if(h!==i.getSize())throw new Xt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-se.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new M("0 polynomial");const l=Je.findMSBSet(o);for(i<<=l-1;Je.findMSBSet(i)>=l;)i^=o<<Je.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!Ai.isValidMaskPattern(o))throw new Xt("Invalid mask pattern");const h=i.getBits()<<3|o;l.appendBits(h,5);const d=Je.calculateBCHCode(h,Je.TYPE_INFO_POLY);l.appendBits(d,10);const m=new De;if(m.appendBits(Je.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Xt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=Je.calculateBCHCode(i.getVersionNumber(),Je.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Xt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;Je.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),Je.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Xt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let h=0;h<8;++h){if(!Je.isEmpty(l.get(i+h,o)))throw new Xt;l.setNumber(i+h,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let h=0;h<7;++h){if(!Je.isEmpty(l.get(i,o+h)))throw new Xt;l.setNumber(i,o+h,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let h=0;h<5;++h){const d=Je.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(i+m,o+h,d[m])}}static embedPositionDetectionPattern(i,o,l){for(let h=0;h<7;++h){const d=Je.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(i+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(i){const o=Je.POSITION_DETECTION_PATTERN[0].length;Je.embedPositionDetectionPattern(0,0,i),Je.embedPositionDetectionPattern(i.getWidth()-o,0,i),Je.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;Je.embedHorizontalSeparationPattern(0,l-1,i),Je.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),Je.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const h=7;Je.embedVerticalSeparationPattern(h,0,i),Je.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),Je.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,h=Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const p=h[d];if(p>=0)for(let A=0;A!==m;A++){const C=h[A];C>=0&&Je.isEmpty(o.get(C,p))&&Je.embedPositionAdjustmentPattern(C-2,p-2,o)}}}}Je.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Je.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Je.VERSION_INFO_POLY=7973,Je.TYPE_INFO_POLY=1335,Je.TYPE_INFO_MASK_PATTERN=21522;class ol{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Zt{constructor(){}static calculateMaskPenalty(i){return cn.applyMaskPenaltyRule1(i)+cn.applyMaskPenaltyRule2(i)+cn.applyMaskPenaltyRule3(i)+cn.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let h=Zt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Sn.CHARACTER_SET)!==void 0;d&&(h=l.get(Sn.CHARACTER_SET).toString());const m=this.chooseMode(i,h),p=new De;if(m===Ze.BYTE&&(d||Zt.DEFAULT_BYTE_MODE_ENCODING!==h)){const Pe=P.getCharacterSetECIByName(h);Pe!==void 0&&this.appendECI(Pe,p)}this.appendModeInfo(m,p);const A=new De;this.appendBytes(i,m,A,h);let C;if(l!==null&&l.get(Sn.QR_VERSION)!==void 0){const Pe=Number.parseInt(l.get(Sn.QR_VERSION).toString(),10);C=Fe.getVersionForNumber(Pe);const Ne=this.calculateBitsNeeded(m,p,A,C);if(!this.willFit(Ne,C,o))throw new Xt("Data too big for requested version")}else C=this.recommendVersion(o,m,p,A);const N=new De;N.appendBitArray(p);const L=m===Ze.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(L,C,m,N),N.appendBitArray(A);const k=C.getECBlocksForLevel(o),G=C.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(G,N);const Z=this.interleaveWithECBytes(N,C.getTotalCodewords(),G,k.getNumBlocks()),$=new Ai;$.setECLevel(o),$.setMode(m),$.setVersion(C);const ce=C.getDimensionForVersion(),pe=new xs(ce,ce),Oe=this.chooseMaskPattern(Z,o,C,pe);return $.setMaskPattern(Oe),Je.buildMatrix(Z,o,C,Oe,pe),$.setMatrix(pe),$}static recommendVersion(i,o,l,h){const d=this.calculateBitsNeeded(o,l,h,Fe.getVersionForNumber(1)),m=this.chooseVersion(d,i),p=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(p,i)}static calculateBitsNeeded(i,o,l,h){return o.getSize()+i.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(i){return i<Zt.ALPHANUMERIC_TABLE.length?Zt.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(P.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Ze.KANJI;let l=!1,h=!1;for(let d=0,m=i.length;d<m;++d){const p=i.charAt(d);if(Zt.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)h=!0;else return Ze.BYTE}return h?Ze.ALPHANUMERIC:l?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=J.encode(i,P.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<Ai.NUM_MASK_PATTERNS;p++){Je.buildMatrix(i,o,l,p,h);let A=this.calculateMaskPenalty(h);A<d&&(d=A,m=p)}return m}static chooseVersion(i,o){for(let l=1;l<=40;l++){const h=Fe.getVersionForNumber(l);if(Zt.willFit(i,h,o))return h}throw new Xt("Data too big")}static willFit(i,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),p=h-m,A=(i+7)/8;return p>=A}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Xt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,h,d,m){if(h>=l)throw new Xt("Block ID too large");const p=i%l,A=l-p,C=Math.floor(i/l),N=C+1,L=Math.floor(o/l),k=L+1,G=C-L,Z=N-k;if(G!==Z)throw new Xt("EC bytes mismatch");if(l!==A+p)throw new Xt("RS blocks mismatch");if(i!==(L+G)*A+(k+Z)*p)throw new Xt("Total bytes mismatch");h<A?(d[0]=L,m[0]=G):(d[0]=k,m[0]=Z)}static interleaveWithECBytes(i,o,l,h){if(i.getSizeInBytes()!==l)throw new Xt("Number of bits and data bytes does not match");let d=0,m=0,p=0;const A=new Array;for(let N=0;N<h;++N){const L=new Int32Array(1),k=new Int32Array(1);Zt.getNumDataBytesAndNumECBytesForBlockID(o,l,h,N,L,k);const G=L[0],Z=new Uint8Array(G);i.toBytes(8*d,Z,0,G);const $=Zt.generateECBytes(Z,k[0]);A.push(new ol(Z,$)),m=Math.max(m,G),p=Math.max(p,$.length),d+=L[0]}if(l!==d)throw new Xt("Data bytes does not match offset");const C=new De;for(let N=0;N<m;++N)for(const L of A){const k=L.getDataBytes();N<k.length&&C.appendBits(k[N],8)}for(let N=0;N<p;++N)for(const L of A){const k=L.getErrorCorrectionBytes();N<k.length&&C.appendBits(k[N],8)}if(o!==C.getSizeInBytes())throw new Xt("Interleaving error: "+o+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(i,o){const l=i.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=i[m]&255;new Es(ft.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,h){const d=l.getCharacterCountBits(o);if(i>=1<<d)throw new Xt(i+" is bigger than "+((1<<d)-1));h.appendBits(i,d)}static appendBytes(i,o,l,h){switch(o){case Ze.NUMERIC:Zt.appendNumericBytes(i,l);break;case Ze.ALPHANUMERIC:Zt.appendAlphanumericBytes(i,l);break;case Ze.BYTE:Zt.append8BitBytes(i,l,h);break;case Ze.KANJI:Zt.appendKanjiBytes(i,l);break;default:throw new Xt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=Zt.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let h=0;for(;h<l;){const d=Zt.getDigit(i.charAt(h));if(h+2<l){const m=Zt.getDigit(i.charAt(h+1)),p=Zt.getDigit(i.charAt(h+2));o.appendBits(d*100+m*10+p,10),h+=3}else if(h+1<l){const m=Zt.getDigit(i.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(i,o){const l=i.length;let h=0;for(;h<l;){const d=Zt.getAlphanumericCode(i.charCodeAt(h));if(d===-1)throw new Xt;if(h+1<l){const m=Zt.getAlphanumericCode(i.charCodeAt(h+1));if(m===-1)throw new Xt;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(i,o,l){let h;try{h=J.encode(i,l)}catch(d){throw new Xt(d)}for(let d=0,m=h.length;d!==m;d++){const p=h[d];o.appendBits(p,8)}}static appendKanjiBytes(i,o){let l;try{l=J.encode(i,P.SJIS)}catch(d){throw new Xt(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,p=l[d+1]&255,A=m<<8&4294967295|p;let C=-1;if(A>=33088&&A<=40956?C=A-33088:A>=57408&&A<=60351&&(C=A-49472),C===-1)throw new Xt("Invalid byte sequence");const N=(C>>8)*192+(C&255);o.appendBits(N,13)}}static appendECI(i,o){o.appendBits(Ze.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}Zt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Zt.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class lr{write(i,o,l,h=null){if(i.length===0)throw new M("Found empty contents");if(o<0||l<0)throw new M("Requested dimensions are too small: "+o+"x"+l);let d=at.L,m=lr.QUIET_ZONE_SIZE;h!==null&&(h.get(Sn.ERROR_CORRECTION)!==void 0&&(d=at.fromString(h.get(Sn.ERROR_CORRECTION).toString())),h.get(Sn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Sn.MARGIN).toString(),10)));const p=Zt.encode(i,d,h);return this.renderResult(p,o,l,m)}writeToDom(i,o,l,h,d=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(o,l,h,d);i&&i.appendChild(m)}renderResult(i,o,l,h){const d=i.getMatrix();if(d===null)throw new si;const m=d.getWidth(),p=d.getHeight(),A=m+h*2,C=p+h*2,N=Math.max(o,A),L=Math.max(l,C),k=Math.min(Math.floor(N/A),Math.floor(L/C)),G=Math.floor((N-m*k)/2),Z=Math.floor((L-p*k)/2),$=this.createSVGElement(N,L);for(let ce=0,pe=Z;ce<p;ce++,pe+=k)for(let Oe=0,Pe=G;Oe<m;Oe++,Pe+=k)if(d.get(Oe,ce)===1){const Ne=this.createSvgRectElement(Pe,pe,k,k);$.appendChild(Ne)}return $}createSVGElement(i,o){const l=document.createElementNS(lr.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,h){const d=document.createElementNS(lr.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}lr.QUIET_ZONE_SIZE=4,lr.SVG_NS="http://www.w3.org/2000/svg";class Bn{encode(i,o,l,h,d){if(i.length===0)throw new M("Found empty contents");if(o!==Ie.QR_CODE)throw new M("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new M(`Requested dimensions are too small: ${l}x${h}`);let m=at.L,p=Bn.QUIET_ZONE_SIZE;d!==null&&(d.get(Sn.ERROR_CORRECTION)!==void 0&&(m=at.fromString(d.get(Sn.ERROR_CORRECTION).toString())),d.get(Sn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Sn.MARGIN).toString(),10)));const A=Zt.encode(i,m,d);return Bn.renderResult(A,l,h,p)}static renderResult(i,o,l,h){const d=i.getMatrix();if(d===null)throw new si;const m=d.getWidth(),p=d.getHeight(),A=m+h*2,C=p+h*2,N=Math.max(o,A),L=Math.max(l,C),k=Math.min(Math.floor(N/A),Math.floor(L/C)),G=Math.floor((N-m*k)/2),Z=Math.floor((L-p*k)/2),$=new ht(N,L);for(let ce=0,pe=Z;ce<p;ce++,pe+=k)for(let Oe=0,Pe=G;Oe<m;Oe++,Pe+=k)d.get(Oe,ce)===1&&$.setRegion(Pe,pe,k,k);return $}}Bn.QUIET_ZONE_SIZE=4;class ll{encode(i,o,l,h,d){let m;switch(o){case Ie.QR_CODE:m=new Bn;break;default:throw new M("No encoder available for format "+o)}return m.encode(i,o,l,h,d)}}class Qi extends Ve{constructor(i,o,l,h,d,m,p,A){if(super(m,p),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+p>l)throw new M("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,p)}getRow(i,o){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return ie.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*i;ie.arraycopy(this.yuvData,d,h,p,i),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,o,l,h){return new Qi(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,h,!1)}renderThumbnail(){const i=this.getWidth()/Qi.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Qi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const p=m*i;for(let A=0;A<i;A++){const C=h[d+A*Qi.THUMBNAIL_SCALE_FACTOR]&255;l[p+A]=4278190080|C*65793}d+=this.dataWidth*Qi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Qi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Qi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+i/2;for(let p=d,A=d+i-1;p<m;p++,A--){const C=l[p];l[p]=l[A],l[A]=C}}}invert(){return new Te(this)}}Qi.THUMBNAIL_SCALE_FACTOR=2;class cr extends Ve{constructor(i,o,l,h,d,m,p){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=p,i.BYTES_PER_ELEMENT===4){const A=o*l,C=new Uint8ClampedArray(A);for(let N=0;N<A;N++){const L=i[N],k=L>>16&255,G=L>>7&510,Z=L&255;C[N]=(k+G+Z)/4&255}this.luminances=C}else this.luminances=i;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new M("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return ie.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const p=m*i;ie.arraycopy(this.luminances,d,h,p,i),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,o,l,h){return new cr(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new Te(this)}}class y extends P{static forName(i){return this.getCharacterSetECIByName(i)}}class S{}S.ISO_8859_1=P.ISO8859_1;class R{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class U{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class oe{constructor(i){this.previous=i}getPrevious(){return this.previous}}class me extends oe{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new me(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new me(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+se.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class ze extends me{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new ze(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Nt(O,i,o){return new ze(O,i,o)}function _n(O,i,o){return new me(O,i,o)}const Rt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],un=0,bn=1,Un=2,$n=3,Xn=4,Co=new me(null,0,0),Da=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Fu(O){for(let i of O)ye.fill(i,-1);return O[un][Xn]=0,O[bn][Xn]=0,O[bn][un]=28,O[$n][Xn]=0,O[Un][Xn]=0,O[Un][un]=15,O}const dc=Fu(ye.createInt32Array(6,6));class ur{constructor(i,o,l,h){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,h=this.token;if(i!==this.mode){let m=Da[this.mode][i];h=_n(h,m&65535,m>>16),l+=m>>16}let d=i===Un?4:5;return h=_n(h,o,d),new ur(h,i,0,l+d)}shiftAndAppend(i,o){let l=this.token,h=this.mode===Un?4:5;return l=_n(l,dc[this.mode][i],h),l=_n(l,o,5),new ur(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===Xn||this.mode===Un){let p=Da[l][un];o=_n(o,p&65535,p>>16),h+=p>>16,l=un}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new ur(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Nt(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ur(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(Da[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=ur.calculateBinaryShiftCost(i)-ur.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new De;for(const h of o)h.appendTo(l,i);return l}toString(){return Q.format("%s bits=%d bytes=%d",Rt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ur.INITIAL_STATE=new ur(Co,un,0,0);function gc(O){const i=Q.getCharCode(" "),o=Q.getCharCode("."),l=Q.getCharCode(",");O[un][i]=1;const h=Q.getCharCode("Z"),d=Q.getCharCode("A");for(let k=d;k<=h;k++)O[un][k]=k-d+2;O[bn][i]=1;const m=Q.getCharCode("z"),p=Q.getCharCode("a");for(let k=p;k<=m;k++)O[bn][k]=k-p+2;O[Un][i]=1;const A=Q.getCharCode("9"),C=Q.getCharCode("0");for(let k=C;k<=A;k++)O[Un][k]=k-C+2;O[Un][l]=12,O[Un][o]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<N.length;k++)O[$n][Q.getCharCode(N[k])]=k;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<L.length;k++)Q.getCharCode(L[k])>0&&(O[Xn][Q.getCharCode(L[k])]=k);return O}const cl=gc(ye.createInt32Array(5,256));class Oa{constructor(i){this.text=i}encode(){const i=Q.getCharCode(" "),o=Q.getCharCode(`
`);let l=U.singletonList(ur.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Q.getCharCode("\r"):m=p===o?2:0;break;case Q.getCharCode("."):m=p===i?3:0;break;case Q.getCharCode(","):m=p===i?4:0;break;case Q.getCharCode(":"):m=p===i?5:0;break;default:m=0}m>0?(l=Oa.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return U.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let h of i)this.updateStateForChar(h,o,l);return Oa.simplifyStates(l)}updateStateForChar(i,o,l){let h=this.text[o]&255,d=cl[i.getMode()][h]>0,m=null;for(let p=0;p<=Xn;p++){let A=cl[p][h];if(A>0){if(m==null&&(m=i.endBinaryShift(o)),!d||p===i.getMode()||p===Un){const C=m.latchAndAppend(p,A);l.push(C)}if(!d&&dc[i.getMode()][p]>=0){const C=m.shiftAndAppend(p,A);l.push(C)}}}if(i.getBinaryShiftByteCount()>0||cl[i.getMode()][h]===0){let p=i.addBinaryShiftChar(o);l.push(p)}}static updateStateListForPair(i,o,l){const h=[];for(let d of i)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(i,o,l,h){let d=i.endBinaryShift(o);if(h.push(d.latchAndAppend(Xn,l)),i.getMode()!==Xn&&h.push(d.shiftAndAppend(Xn,l)),l===3||l===4){let m=d.latchAndAppend(Un,16-l).latchAndAppend(Un,1);h.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(i){let o=[];for(const l of i){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class Dt{constructor(){}static encodeBytes(i){return Dt.encode(i,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let h=new Oa(i).encode(),d=se.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,p,A,C,N,L;if(l!==Dt.DEFAULT_AZTEC_LAYERS){if(p=l<0,A=Math.abs(l),A>(p?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new M(Q.format("Illegal value %s for layers",l));C=Dt.totalBitsInLayer(A,p),N=Dt.WORD_SIZE[A];let Ne=C-C%N;if(L=Dt.stuffBits(h,N),L.getSize()+d>Ne)throw new M("Data to large for user specified layer");if(p&&L.getSize()>N*64)throw new M("Data to large for user specified layer")}else{N=0,L=null;for(let Ne=0;;Ne++){if(Ne>Dt.MAX_NB_BITS)throw new M("Data too large for an Aztec code");if(p=Ne<=3,A=p?Ne+1:Ne,C=Dt.totalBitsInLayer(A,p),m>C)continue;(L==null||N!==Dt.WORD_SIZE[A])&&(N=Dt.WORD_SIZE[A],L=Dt.stuffBits(h,N));let _t=C-C%N;if(!(p&&L.getSize()>N*64)&&L.getSize()+d<=_t)break}}let k=Dt.generateCheckWords(L,C,N),G=L.getSize()/N,Z=Dt.generateModeMessage(p,A,G),$=(p?11:14)+A*4,ce=new Int32Array($),pe;if(p){pe=$;for(let Ne=0;Ne<ce.length;Ne++)ce[Ne]=Ne}else{pe=$+1+2*se.truncDivision(se.truncDivision($,2)-1,15);let Ne=se.truncDivision($,2),_t=se.truncDivision(pe,2);for(let rt=0;rt<Ne;rt++){let wi=rt+se.truncDivision(rt,15);ce[Ne-rt-1]=_t-wi-1,ce[Ne+rt]=_t+wi+1}}let Oe=new ht(pe);for(let Ne=0,_t=0;Ne<A;Ne++){let rt=(A-Ne)*4+(p?9:12);for(let wi=0;wi<rt;wi++){let hr=wi*2;for(let vi=0;vi<2;vi++)k.get(_t+hr+vi)&&Oe.set(ce[Ne*2+vi],ce[Ne*2+wi]),k.get(_t+rt*2+hr+vi)&&Oe.set(ce[Ne*2+wi],ce[$-1-Ne*2-vi]),k.get(_t+rt*4+hr+vi)&&Oe.set(ce[$-1-Ne*2-vi],ce[$-1-Ne*2-wi]),k.get(_t+rt*6+hr+vi)&&Oe.set(ce[$-1-Ne*2-wi],ce[Ne*2+vi])}_t+=rt*8}if(Dt.drawModeMessage(Oe,p,pe,Z),p)Dt.drawBullsEye(Oe,se.truncDivision(pe,2),5);else{Dt.drawBullsEye(Oe,se.truncDivision(pe,2),7);for(let Ne=0,_t=0;Ne<se.truncDivision($,2)-1;Ne+=15,_t+=16)for(let rt=se.truncDivision(pe,2)&1;rt<pe;rt+=2)Oe.set(se.truncDivision(pe,2)-_t,rt),Oe.set(se.truncDivision(pe,2)+_t,rt),Oe.set(rt,se.truncDivision(pe,2)-_t),Oe.set(rt,se.truncDivision(pe,2)+_t)}let Pe=new R;return Pe.setCompact(p),Pe.setSize(pe),Pe.setLayers(A),Pe.setCodeWords(G),Pe.setMatrix(Oe),Pe}static drawBullsEye(i,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)i.set(d,o-h),i.set(d,o+h),i.set(o-h,d),i.set(o+h,d);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let h=new De;return i?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Dt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Dt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,o,l,h){let d=se.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let p=d-3+m;h.get(m)&&i.set(p,d-5),h.get(m+7)&&i.set(d+5,p),h.get(20-m)&&i.set(p,d+5),h.get(27-m)&&i.set(d-5,p)}else for(let m=0;m<10;m++){let p=d-5+m+se.truncDivision(m,5);h.get(m)&&i.set(p,d-7),h.get(m+10)&&i.set(d+7,p),h.get(29-m)&&i.set(p,d+7),h.get(39-m)&&i.set(d-7,p)}}static generateCheckWords(i,o,l){let h=i.getSize()/l,d=new Es(Dt.getGF(l)),m=se.truncDivision(o,l),p=Dt.bitsToWords(i,l,m);d.encode(p,m-h);let A=o%l,C=new De;C.appendBits(0,A);for(const N of Array.from(p))C.appendBits(N,l);return C}static bitsToWords(i,o,l){let h=new Int32Array(l),d,m;for(d=0,m=i.getSize()/o;d<m;d++){let p=0;for(let A=0;A<o;A++)p|=i.get(d*o+A)?1<<o-A-1:0;h[d]=p}return h}static getGF(i){switch(i){case 4:return ft.AZTEC_PARAM;case 6:return ft.AZTEC_DATA_6;case 8:return ft.AZTEC_DATA_8;case 10:return ft.AZTEC_DATA_10;case 12:return ft.AZTEC_DATA_12;default:throw new M("Unsupported word size "+i)}}static stuffBits(i,o){let l=new De,h=i.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let p=0;for(let A=0;A<o;A++)(m+A>=h||i.get(m+A))&&(p|=1<<o-1-A);(p&d)===d?(l.appendBits(p&d,o),m--):(p&d)===0?(l.appendBits(p|1,o),m--):l.appendBits(p,o)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ul{encode(i,o,l,h){return this.encodeWithHints(i,o,l,h,null)}encodeWithHints(i,o,l,h,d){let m=S.ISO_8859_1,p=Dt.DEFAULT_EC_PERCENT,A=Dt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Sn.CHARACTER_SET)&&(m=y.forName(d.get(Sn.CHARACTER_SET).toString())),d.has(Sn.ERROR_CORRECTION)&&(p=se.parseInt(d.get(Sn.ERROR_CORRECTION).toString())),d.has(Sn.AZTEC_LAYERS)&&(A=se.parseInt(d.get(Sn.AZTEC_LAYERS).toString()))),ul.encodeLayers(i,o,l,h,m,p,A)}static encodeLayers(i,o,l,h,d,m,p){if(o!==Ie.AZTEC)throw new M("Can only encode AZTEC, but got "+o);let A=Dt.encode(Q.getBytes(i,d),m,p);return ul.renderResult(A,l,h)}static renderResult(i,o,l){let h=i.getMatrix();if(h==null)throw new si;let d=h.getWidth(),m=h.getHeight(),p=Math.max(o,d),A=Math.max(l,m),C=Math.min(p/d,A/m),N=(p-d*C)/2,L=(A-m*C)/2,k=new ht(p,A);for(let G=0,Z=L;G<m;G++,Z+=C)for(let $=0,ce=N;$<d;$++,ce+=C)h.get($,G)&&k.setRegion(ce,Z,C,C);return k}}t.AbstractExpandedDecoder=Nn,t.ArgumentException=I,t.ArithmeticException=xi,t.AztecCode=R,t.AztecCodeReader=ba,t.AztecCodeWriter=ul,t.AztecDecoder=jt,t.AztecDetector=Sa,t.AztecDetectorResult=Ta,t.AztecEncoder=Dt,t.AztecHighLevelEncoder=Oa,t.AztecPoint=Kn,t.BarcodeFormat=Ie,t.Binarizer=K,t.BinaryBitmap=V,t.BitArray=De,t.BitMatrix=ht,t.BitSource=Mi,t.BrowserAztecCodeReader=Ps,t.BrowserBarcodeReader=uc,t.BrowserCodeReader=je,t.BrowserDatamatrixCodeReader=Na,t.BrowserMultiFormatReader=sl,t.BrowserPDF417Reader=al,t.BrowserQRCodeReader=To,t.BrowserQRCodeSvgWriter=lr,t.CharacterSetECI=P,t.ChecksumException=F,t.Code128Reader=Le,t.Code39Reader=mn,t.DataMatrixDecodedBitStreamParser=mr,t.DataMatrixReader=nr,t.DecodeHintType=Se,t.DecoderResult=Ht,t.DefaultGridSampler=Hn,t.DetectorResult=va,t.EAN13Reader=Ri,t.EncodeHintType=Sn,t.Exception=_,t.FormatException=z,t.GenericGF=ft,t.GenericGFPoly=Bt,t.GlobalHistogramBinarizer=be,t.GridSampler=Ca,t.GridSamplerInstance=di,t.HTMLCanvasElementLuminanceSource=Y,t.HybridBinarizer=ke,t.ITFReader=wt,t.IllegalArgumentException=M,t.IllegalStateException=si,t.InvertedLuminanceSource=Te,t.LuminanceSource=Ve,t.MathUtils=yt,t.MultiFormatOneDReader=Jn,t.MultiFormatReader=ys,t.MultiFormatWriter=ll,t.NotFoundException=fe,t.OneDReader=$t,t.PDF417DecodedBitStreamParser=ge,t.PDF417DecoderErrorCorrection=kr,t.PDF417Reader=Yn,t.PDF417ResultMetadata=Vs,t.PerspectiveTransform=Kt,t.PlanarYUVLuminanceSource=Qi,t.QRCodeByteMatrix=xs,t.QRCodeDataMask=qn,t.QRCodeDecodedBitStreamParser=tn,t.QRCodeDecoderErrorCorrectionLevel=at,t.QRCodeDecoderFormatInformation=En,t.QRCodeEncoder=Zt,t.QRCodeEncoderQRCode=Ai,t.QRCodeMaskUtil=cn,t.QRCodeMatrixUtil=Je,t.QRCodeMode=Ze,t.QRCodeReader=sr,t.QRCodeVersion=Fe,t.QRCodeWriter=Bn,t.RGBLuminanceSource=cr,t.RSS14Reader=Ct,t.RSSExpandedReader=Ae,t.ReaderException=ps,t.ReedSolomonDecoder=Hi,t.ReedSolomonEncoder=Es,t.ReedSolomonException=zi,t.Result=Be,t.ResultMetadataType=Qe,t.ResultPoint=Ge,t.StringUtils=Q,t.UnsupportedOperationException=W,t.VideoInputDevice=xe,t.WhiteRectangleDetector=vn,t.WriterException=Xt,t.ZXingArrays=ye,t.ZXingCharset=y,t.ZXingInteger=se,t.ZXingStandardCharsets=S,t.ZXingStringBuilder=q,t.ZXingStringEncoding=J,t.ZXingSystem=ie,t.createAbstractExpandedDecoder=es,Object.defineProperty(t,"__esModule",{value:!0})})}(lu,lu.exports)),lu.exports}var An=R6();const D6=O1(An),O6=sv({__proto__:null,default:D6},[An]);var xE=function(){function r(e,t,a){if(this.formatMap=new Map([[Ye.QR_CODE,An.BarcodeFormat.QR_CODE],[Ye.AZTEC,An.BarcodeFormat.AZTEC],[Ye.CODABAR,An.BarcodeFormat.CODABAR],[Ye.CODE_39,An.BarcodeFormat.CODE_39],[Ye.CODE_93,An.BarcodeFormat.CODE_93],[Ye.CODE_128,An.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,An.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,An.BarcodeFormat.MAXICODE],[Ye.ITF,An.BarcodeFormat.ITF],[Ye.EAN_13,An.BarcodeFormat.EAN_13],[Ye.EAN_8,An.BarcodeFormat.EAN_8],[Ye.PDF_417,An.BarcodeFormat.PDF_417],[Ye.RSS_14,An.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,An.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,An.BarcodeFormat.UPC_A],[Ye.UPC_E,An.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,An.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!O6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=a;var c=this.createZXingFormats(e),f=new Map;f.set(An.DecodeHintType.POSSIBLE_FORMATS,c),f.set(An.DecodeHintType.TRY_HARDER,!1),this.hints=f}return r.prototype.decodeAsync=function(e){var t=this;return new Promise(function(a,c){try{a(t.decode(e))}catch(f){c(f)}})},r.prototype.decode=function(e){var t=new An.MultiFormatReader(this.verbose,this.hints),a=new An.HTMLCanvasElementLuminanceSource(e),c=new An.BinaryBitmap(new An.HybridBinarizer(a)),f=t.decode(c);return{text:f.text,format:bA.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r}(),M6=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},L6=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},_E=function(){function r(e,t,a){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=a;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return M6(this,void 0,void 0,function(){var t,a;return L6(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(t),[2,{text:a.rawValue,format:bA.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var t=null,a=0,c=0,f=e;c<f.length;c++){var E=f[c],w=E.boundingBox.width*E.boundingBox.height;w>a&&(a=w,t=E)}if(!t)throw"No largest barcode found";return t},r.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],a=0,c=e;a<c.length;a++){var f=c[a];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,c){e.set(t,a)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r}(),AE=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},wE=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},P6=function(){function r(e,t,a,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,t&&_E.isSupported()?(this.primaryDecoder=new _E(e,a,c),this.secondaryDecoder=new xE(e,a,c)):this.primaryDecoder=new xE(e,a,c)}return r.prototype.decodeAsync=function(e){return AE(this,void 0,void 0,function(){var t;return wE(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return AE(this,void 0,void 0,function(){var t,a;return wE(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(a=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,a=this.executionResults;t<a.length;t++){var c=a[t];e+=c}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r}(),Mg=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),If=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},Nf=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},DA=function(){function r(e,t){this.name=e,this.track=t}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var t={};t[this.name]=e;var a={advanced:[t]};return this.track.applyConstraints(a)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},r}(),k6=function(r){Mg(e,r);function e(t,a){return r.call(this,t,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var a={};a[this.name]=t;var c={advanced:[a]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),a=t[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(DA),B6=function(r){Mg(e,r);function e(t){return r.call(this,"zoom",t)||this}return e}(k6),U6=function(r){Mg(e,r);function e(t){return r.call(this,"torch",t)||this}return e}(DA),V6=function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new B6(this.track)},r.prototype.torchFeature=function(){return new U6(this.track)},r}(),j6=function(){function r(e,t,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var a=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,t,a,c){return If(this,void 0,void 0,function(){var f,E;return Nf(this,function(w){switch(w.label){case 0:return f=new r(e,t,c),a.aspectRatio?(E={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:w.sent(),w.label=2;case 2:return f.setupSurface(),[2,f]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var t=this,a=function(){setTimeout(e,200),t.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return If(this,void 0,void 0,function(){return Nf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,a){var c=e.mediaStream.getVideoTracks(),f=c.length,E=0;e.mediaStream.getVideoTracks().forEach(function(w){e.mediaStream.removeTrack(w),w.stop(),++E,E>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},r.prototype.getCapabilities=function(){return new V6(this.getFirstTrackOrFail())},r}(),F6=function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,t,a){return If(this,void 0,void 0,function(){return Nf(this,function(c){return[2,j6.create(e,this.mediaStream,t,a)]})})},r.create=function(e){return If(this,void 0,void 0,function(){var t,a;return Nf(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=c.sent(),[2,new r(a)]}})})},r}(),vE=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},TE=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},z6=function(){function r(){}return r.failIfNotSupported=function(){return vE(this,void 0,void 0,function(){return TE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return vE(this,void 0,void 0,function(){return TE(this,function(t){return[2,F6.create(e)]})})},r}(),H6=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},G6=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},q6=function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=Vl.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=Vl.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return H6(this,void 0,void 0,function(){var e,t,a,c,f,E,w;return G6(this,function(T){switch(T.label){case 0:return e=function(_){for(var I=_.getVideoTracks(),M=0,V=I;M<V.length;M++){var F=V[M];F.enabled=!1,F.stop(),_.removeTrack(F)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=T.sent(),c=[],f=0,E=a;f<E.length;f++)w=E[f],w.kind==="videoinput"&&c.push({id:w.deviceId,label:w.label});return e(t),[2,c]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var a=function(f){for(var E=[],w=0,T=f;w<T.length;w++){var _=T[w];_.kind==="video"&&E.push({id:_.id,label:_.label})}e(E)},c=MediaStreamTrack;c.getSources(a)})},r}(),zn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(zn||(zn={}));var Y6=function(){function r(){this.state=zn.NOT_STARTED,this.onGoingTransactionNewState=zn.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===zn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=zn.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===zn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=zn.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==zn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case zn.UNKNOWN:throw"Transition from unknown is not allowed";case zn.NOT_STARTED:this.failIfNewStateIs(e,[zn.PAUSED]);break;case zn.SCANNING:break;case zn.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,t){for(var a=0,c=t;a<c.length;a++){var f=c[a];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r}(),X6=function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===zn.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==zn.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===zn.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===zn.PAUSED},r}(),W6=function(){function r(){}return r.create=function(){return new X6(new Y6)},r}(),Q6=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),Tr=function(r){Q6(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(ls),K6=function(){function r(e,t){this.logger=t,this.fps=Tr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Tr.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?RA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!Cs(this.qrbox)},r.create=function(e,t){return new r(e,t)},r}(),CE=function(){function r(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof t=="boolean"?this.verbose=t===!0:t&&(a=t,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new NA(this.verbose),this.qrcode=new P6(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=W6.create()}return r.prototype.start=function(e,t,a,c){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;c?E=c:E=this.verbose?this.logger.log:function(){};var w=K6.create(t,this.logger);this.clearElement();var T=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=T,I=document.getElementById(this.elementId);I.clientWidth?I.clientWidth:Tr.DEFAULT_WIDTH,I.style.position="relative",this.shouldScan=!0,this.element=I;var M=this,V=this.stateManagerProxy.startTransition(zn.SCANNING);return new Promise(function(F,K){var ie=_?w.videoConstraints:M.createVideoConstraints(e);if(!ie){V.cancel(),K("videoConstraints should be defined");return}var te={};(!_||w.aspectRatio)&&(te.aspectRatio=w.aspectRatio);var ue={onRenderSurfaceReady:function(ye,se){M.setupUi(ye,se,w),M.isScanning=!0,M.foreverScan(w,a,E)}};z6.failIfNotSupported().then(function(ye){ye.create(ie).then(function(se){return se.render(f.element,te,ue).then(function(De){M.renderedCamera=De,V.execute(),F(null)}).catch(function(De){V.cancel(),K(De)})}).catch(function(se){V.cancel(),K(Vl.errorGettingUserMedia(se))})}).catch(function(ye){V.cancel(),K(Vl.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(zn.PAUSED),this.showPausedState(),(Cs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(zn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(zn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var f=document.getElementById(Tr.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),a(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(a){return a.decodedText})},r.prototype.scanFileV2=function(e,t){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cs(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var E=new Image;E.onload=function(){var w=E.width,T=E.height,_=document.getElementById(a.elementId),I=_.clientWidth?_.clientWidth:Tr.DEFAULT_WIDTH,M=Math.max(_.clientHeight?_.clientHeight:T,Tr.FILE_SCAN_MIN_HEIGHT),V=a.computeCanvasDrawConfig(w,T,I,M);if(t){var F=a.createCanvasElement(I,M,"qr-canvas-visible");F.style.display="inline-block",_.appendChild(F);var K=F.getContext("2d");if(!K)throw"Unable to get 2d context from canvas";K.canvas.width=I,K.canvas.height=M,K.drawImage(E,0,0,w,T,V.x,V.y,V.width,V.height)}var ie=Tr.FILE_SCAN_HIDDEN_CANVAS_PADDING,te=Math.max(E.width,V.width),ue=Math.max(E.height,V.height),ye=te+2*ie,se=ue+2*ie,De=a.createCanvasElement(ye,se);_.appendChild(De);var Ue=De.getContext("2d");if(!Ue)throw"Unable to get 2d context from canvas";Ue.canvas.width=ye,Ue.canvas.height=se,Ue.drawImage(E,0,0,w,T,ie,ie,te,ue);try{a.qrcode.decodeRobustlyAsync(De).then(function(Se){c(pE.createFromQrcodeResult(Se))}).catch(f)}catch(Se){f("QR code parse error, error = ".concat(Se))}},E.onerror=f,E.onabort=f,E.onstalled=f,E.onsuspend=f,E.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return q6.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!RA.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var t=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],c=0,f=e.formatsToSupport;c<f.length;c++){var E=f[c];b6(E)?a.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Cs(e))return!0;if(!Cs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Cs(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Cs(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,t,a){var c=this,f=a.qrbox;this.validateQrboxConfig(f);var E=this.toQrdimensions(e,t,f),w=function(_){if(_<Tr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Tr.MIN_QR_BOX_SIZE,"px.")},T=function(_){return _>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};w(E.width),w(E.height),E.width=T(E.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,t,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return a},r.prototype.setupUi=function(e,t,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,a);var c=Cs(a.qrbox)?{width:e,height:t}:a.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,t,c);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=a.isShadedBoxEnabled()&&f.height<=t,w={x:0,y:0,width:e,height:t},T=E?this.getShadedRegionBounds(e,t,f):w,_=this.createCanvasElement(T.width,T.height),I={willReadFrequently:!0},M=_.getContext("2d",I);M.canvas.width=T.width,M.canvas.height=T.height,this.element.append(_),E&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=M,this.canvasElement=_},r.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Vl.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},r.prototype.scanContext=function(e,t){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,pE.createFromQrcodeResult(c)),a.possiblyUpdateShaders(!0),!0}).catch(function(c){a.possiblyUpdateShaders(!1);var f=Vl.codeParseError(c);return t(f,IA.createFrom(f)),!1})},r.prototype.foreverScan=function(e,t,a){var c=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),E=f.videoWidth/f.clientWidth,w=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*E,_=this.qrRegion.height*w,I=this.qrRegion.x*E,M=this.qrRegion.y*w;this.context.drawImage(f,I,M,T,_,0,0,this.qrRegion.width,this.qrRegion.height);var V=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,a)},c.getTimeoutFps(e.fps))};this.scanContext(t,a).then(function(F){!F&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,a).finally(function(){V()})):V()}).catch(function(F){c.logger.logError("Error happend while scanning context",F),V()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",a="deviceId",c={user:!0,environment:!0},f="exact",E=function(K){if(K in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(K,"'")},w=Object.keys(e);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var T=Object.keys(e)[0];if(T!==t&&T!==a)throw"Only '".concat(t,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(T===t){var _=e.facingMode;if(typeof _=="string"){if(E(_))return{facingMode:_}}else if(typeof _=="object")if(f in _){if(E(_["".concat(f)]))return{facingMode:{exact:_["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var I=typeof _;throw"Invalid type of 'facingMode' = ".concat(I)}}else{var M=e.deviceId;if(typeof M=="string")return{deviceId:M};if(typeof M=="object"){if(f in M)return{deviceId:{exact:M["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var V=typeof M;throw"Invalid type of 'deviceId' = ".concat(V)}}}var F=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(F)},r.prototype.computeCanvasDrawConfig=function(e,t,a,c){if(e<=a&&t<=c){var f=(a-e)/2,E=(c-t)/2;return{x:f,y:E,width:e,height:t}}else{var w=e,T=t;return e>a&&(t=a/e*t,e=a),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(T)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,a,c)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Tr.BORDER_SHADER_MATCH_COLOR:Tr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,t,a){var c=e,f=t,E=document.createElement("canvas");return E.style.width="".concat(c,"px"),E.style.height="".concat(f,"px"),E.style.display="none",E.id=Cs(a)?"qr-canvas":a,E},r.prototype.getShadedRegionBounds=function(e,t,a){if(a.width>e||a.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(t-a.height)/2,width:a.width,height:a.height}},r.prototype.possiblyInsertShadingElement=function(e,t,a,c){if(!(t-c.width<1||a-c.height<1)){var f=document.createElement("div");f.style.position="absolute";var E=(t-c.width)/2,w=(a-c.height)/2;if(f.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Tr.SHADED_REGION_ELEMENT_ID),t-c.width<11||a-c.height<11)this.hasBorderShaders=!1;else{var T=5,_=40;this.insertShaderBorders(f,_,T,-T,null,0,!0),this.insertShaderBorders(f,_,T,-T,null,0,!1),this.insertShaderBorders(f,_,T,null,-T,0,!0),this.insertShaderBorders(f,_,T,null,-T,0,!1),this.insertShaderBorders(f,T,_+T,-T,null,-T,!0),this.insertShaderBorders(f,T,_+T,null,-T,-T,!0),this.insertShaderBorders(f,T,_+T,-T,null,-T,!1),this.insertShaderBorders(f,T,_+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(f)}},r.prototype.insertShaderBorders=function(e,t,a,c,f,E,w){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Tr.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(t,"px"),T.style.height="".concat(a,"px"),c!==null&&(T.style.top="".concat(c,"px")),f!==null&&(T.style.bottom="".concat(f,"px")),w?T.style.left="".concat(E,"px"):T.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r}(),Lg="data:image/svg+xml;base64,",Z6=Lg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",J6=Lg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",SE=Lg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",$6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",bE=function(){function r(){}return r.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},r}(),eN=function(){function r(){this.data=bE.createDefault();var e=localStorage.getItem(r.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return r.prototype.hasCameraPermissions=function(){return this.data.hasPermission},r.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},r.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},r.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},r.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},r.prototype.reset=function(){this.data=bE.createDefault(),this.flush()},r.prototype.flush=function(){localStorage.setItem(r.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},r.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",r}(),tN=function(){function r(){this.infoDiv=document.createElement("div")}return r.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=yE.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var a=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(c);var f=document.createElement("a");f.innerText=yE.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},r.prototype.show=function(){this.infoDiv.style.display="block"},r.prototype.hide=function(){this.infoDiv.style.display="none"},r}(),nN=function(){function r(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return r.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=SE,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return t.onHoverIn()},this.infoIcon.onmouseout=function(a){return t.onHoverOut()},this.infoIcon.onclick=function(a){return t.onClick()},e.appendChild(this.infoIcon)},r.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},r.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},r.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=$6,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=SE,this.infoIcon.style.opacity="0.6")},r}(),iN=function(){function r(){var e=this;this.infoDiv=new tN,this.infoIcon=new nN(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return r.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},r}(),rN=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},sN=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},IE=function(){function r(){}return r.hasPermissions=function(){return rN(this,void 0,void 0,function(){var e,t,a,c;return sN(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),t=0,a=e;t<a.length;t++)if(c=a[t],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},r}(),eo=function(){function r(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return r.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},r.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},r.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var a=t[e];if(r.isCameraScanType(a))return!0}return!1},r.isCameraScanType=function(e){return e===Ao.SCAN_TYPE_CAMERA},r.isFileScanType=function(e){return e===Ao.SCAN_TYPE_FILE},r.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return ls.DEFAULT_SUPPORTED_SCAN_TYPE;var t=ls.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var a=0,c=e;a<c.length;a++){var f=c[a];if(!ls.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},r}(),br=function(){function r(){}return r.ALL_ELEMENT_CLASS="html5-qrcode-element",r.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",r.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",r.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",r.TORCH_BUTTON_ID="html5-qrcode-button-torch",r.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",r.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",r.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",r.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",r.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",r.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",r}(),la=function(){function r(){}return r.createElement=function(e,t){var a=document.createElement(e);return a.id=t,a.classList.add(br.ALL_ELEMENT_CLASS),e==="button"&&a.setAttribute("type","button"),a},r}(),OA=function(r,e,t,a){function c(f){return f instanceof t?f:new t(function(E){E(f)})}return new(t||(t=Promise))(function(f,E){function w(I){try{_(a.next(I))}catch(M){E(M)}}function T(I){try{_(a.throw(I))}catch(M){E(M)}}function _(I){I.done?f(I.value):c(I.value).then(w,T)}_((a=a.apply(r,e||[])).next())})},MA=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,E;return E={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function w(_){return function(I){return T([_,I])}}function T(_){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,_[0]&&(t=0)),t;)try{if(a=1,c&&(f=_[0]&2?c.return:_[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,_[1])).done)return f;switch(c=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(I){_=[6,I],c=0}finally{a=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},NE=function(){function r(e,t,a){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=a}return r.prototype.isTorchEnabled=function(){return this.isTorchOn},r.prototype.flipState=function(){return OA(this,void 0,void 0,function(){var e,t;return MA(this,function(a){switch(a.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=a.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},r.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?rn.torchOffButton():rn.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},r.prototype.propagateFailure=function(e,t){var a=e?rn.torchOnFailedMessage():rn.torchOffFailedMessage();t&&(a+="; Error = "+t),this.onTorchActionFailureCallback(a)},r.prototype.reset=function(){this.isTorchOn=!1},r}(),aN=function(){function r(e,t){this.onTorchActionFailureCallback=t,this.torchButton=la.createElement("button",br.TORCH_BUTTON_ID),this.torchController=new NE(e,this,t)}return r.prototype.render=function(e,t){var a=this;this.torchButton.innerText=rn.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var c=this;this.torchButton.addEventListener("click",function(f){return OA(a,void 0,void 0,function(){return MA(this,function(E){switch(E.label){case 0:return[4,c.torchController.flipState()];case 1:return E.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove(br.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add(br.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove(br.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add(br.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},r.prototype.updateTorchCapability=function(e){this.torchController=new NE(e,this,this.onTorchActionFailureCallback)},r.prototype.getTorchButton=function(){return this.torchButton},r.prototype.hide=function(){this.torchButton.style.display="none"},r.prototype.show=function(){this.torchButton.style.display="inline-block"},r.prototype.disable=function(){this.torchButton.disabled=!0},r.prototype.enable=function(){this.torchButton.disabled=!1},r.prototype.setText=function(e){this.torchButton.innerText=e},r.prototype.reset=function(){this.torchButton.innerText=rn.torchOnButton(),this.torchController.reset()},r.create=function(e,t,a,c){var f=new r(t,c);return f.render(e,a),f},r}(),oN=function(){function r(e,t,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=la.createElement("button",br.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(w){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=la.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(w){if(!(w==null||w.target==null)){var T=w.target;if(!(T.files&&T.files.length===0)){var _=T.files,I=_[0],M=I.name;f.setImageNameToButton(M),a(I)}}});var E=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(E),this.fileBasedScanRegion.addEventListener("dragenter",function(w){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(w){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(w){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(w){w.stopPropagation(),w.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var T=w.dataTransfer;if(T){var _=T.files;if(!_||_.length===0)return;for(var I=!1,M=0;M<_.length;++M){var V=_.item(M);if(V){var F=/image.*/;if(V.type.match(F)){I=!0;var K=V.name;f.setImageNameToButton(K),a(V),E.innerText=rn.dragAndDropMessage();break}}}I||(E.innerText=rn.dragAndDropMessageOnlyImages())}})}return r.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},r.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},r.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},r.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},r.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},r.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},r.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},r.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=rn.dragAndDropMessage(),e.style.fontWeight="400",e},r.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var a=e.substring(0,8),c=e.length,f=e.substring(c-8,c);e="".concat(a,"....").concat(f)}var E=rn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=E},r.prototype.setInitialValueToButton=function(){var e=rn.fileSelectionChooseImage()+" - "+rn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},r.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},r.create=function(e,t,a){var c=new r(e,t,a);return c},r}(),lN=function(){function r(e){this.selectElement=la.createElement("select",br.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return r.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)t.style.display="none";else{var c=rn.selectCamera();t.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var f=1,E=0,w=this.cameras;E<w.length;E++){var T=w[E],_=T.id,I=T.label==null?_:T.label;(!I||I==="")&&(I=[rn.anonymousCameraPrefix(),f++].join(" "));var M=document.createElement("option");M.value=_,M.innerText=I,this.options.push(M),this.selectElement.appendChild(M)}t.appendChild(this.selectElement),e.appendChild(t)},r.prototype.disable=function(){this.selectElement.disabled=!0},r.prototype.isDisabled=function(){return this.selectElement.disabled===!0},r.prototype.enable=function(){this.selectElement.disabled=!1},r.prototype.getValue=function(){return this.selectElement.value},r.prototype.hasValue=function(e){for(var t=0,a=this.options;t<a.length;t++){var c=a[t];if(c.value===e)return!0}return!1},r.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},r.prototype.hasSingleItem=function(){return this.cameras.length===1},r.prototype.numCameras=function(){return this.cameras.length},r.create=function(e,t){var a=new r(t);return a.render(e),a},r}(),cN=function(){function r(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=la.createElement("input",br.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return r.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},r.prototype.onValueChange=function(){var e=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},r.prototype.setValues=function(e,t,a,c){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},r.prototype.show=function(){this.zoomElementContainer.style.display="block"},r.prototype.hide=function(){this.zoomElementContainer.style.display="none"},r.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},r.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},r.create=function(e,t){var a=new r;return a.render(e,t),a},r}(),Cr;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Cr||(Cr={}));function uN(r){return{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}}function hN(r,e){return{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:e}}var fN=function(){function r(e,t,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=a===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new eo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new NA(this.verbose),this.persistedDataManager=new eN,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return r.prototype.render=function(e,t){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,E){if(e)e(f,E);else{if(a.lastMatchFound===f)return;a.lastMatchFound=f,a.setHeaderMessage(rn.lastMatch(f),Cr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,E){t&&t(f,E)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new CE(this.getScanRegionId(),hN(this.config,this.verbose))},r.prototype.pause=function(e){(Cs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},r.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},r.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},r.prototype.clear=function(){var e=this,t=function(){var a=document.getElementById(e.elementId);a&&(a.innerHTML="",e.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,c){if(!e.html5Qrcode){a();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){a();return}e.html5Qrcode.clear(),t(),a()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),c(f)}):(e.html5Qrcode.clear(),t(),a())}):Promise.resolve()},r.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},r.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},r.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},r.prototype.createConfig=function(e){return e?(e.fps||(e.fps=ls.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!ls.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=ls.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=ls.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:ls.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ls.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ls.DEFAULT_SUPPORTED_SCAN_TYPE}},r.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),a=this.getScanRegionId();t.id=a,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),eo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),f=this.getDashboardId();c.id=f,c.style.width="100%",e.appendChild(c),this.setupInitialDashboard(c)},r.prototype.resetBasicLayout=function(e){e.style.border="none"},r.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},r.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var a=new iN;a.renderInto(t);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",t.appendChild(c)},r.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},r.prototype.createCameraListUi=function(e,t,a){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(rn.cameraPermissionRequesting());var f=function(){a||c.createPermissionButton(e,t)};CE.getCameras().then(function(E){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),E&&E.length>0?(e.removeChild(t),c.renderCameraSelection(E)):(c.setHeaderMessage(rn.noCameraFound(),Cr.STATUS_WARNING),f())}).catch(function(E){c.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:f(),c.setHeaderMessage(E,Cr.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},r.prototype.createPermissionButton=function(e,t){var a=this,c=la.createElement("button",this.getCameraPermissionButtonId());c.innerText=rn.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,a.createCameraListUi(e,t,c)}),t.appendChild(c)},r.prototype.createPermissionsUi=function(e,t){var a=this;if(eo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){IE.hasPermissions().then(function(c){c?a.createCameraListUi(e,t):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t))}).catch(function(c){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},r.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=eo.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(a);var c=document.createElement("div");c.style.textAlign="center",a.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,c),this.renderFileScanUi(t)},r.prototype.renderFileScanUi=function(e){var t=eo.isFileScanType(this.currentScanType),a=this,c=function(f){if(!a.html5Qrcode)throw"html5Qrcode not defined";eo.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(rn.loadingImage()),a.html5Qrcode.scanFileV2(f,!0).then(function(E){a.resetHeaderMessage(),a.qrCodeSuccessCallback(E.decodedText,E)}).catch(function(E){a.setHeaderMessage(E,Cr.STATUS_WARNING),a.qrCodeErrorCallback(E,IA.createFrom(E))}))};this.fileSelectionUi=oN.create(e,t,c)},r.prototype.renderCameraSelection=function(e){var t=this,a=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var f=cN.create(c,!1),E=function(ie){var te=ie.zoomFeature();if(te.isSupported()){f.setOnCameraZoomValueChangeCallback(function(ye){te.apply(ye)});var ue=1;t.config.defaultZoomValueIfSupported&&(ue=t.config.defaultZoomValueIfSupported),ue=I6(ue,te.min(),te.max()),f.setValues(te.min(),te.max(),ue,te.step()),f.show()}},w=lN.create(c,e),T=document.createElement("span"),_=la.createElement("button",br.CAMERA_START_BUTTON_ID);_.innerText=rn.scanButtonStartScanningText(),T.appendChild(_);var I=la.createElement("button",br.CAMERA_STOP_BUTTON_ID);I.innerText=rn.scanButtonStopScanningText(),I.style.display="none",I.disabled=!0,T.appendChild(I);var M,V=function(ie){if(!ie.torchFeature().isSupported()){M&&M.hide();return}M?M.updateTorchCapability(ie.torchFeature()):M=aN.create(T,ie.torchFeature(),{display:"none",marginLeft:"5px"},function(te){a.setHeaderMessage(te,Cr.STATUS_WARNING)}),M.show()};c.appendChild(T);var F=function(ie){ie||(_.style.display="none"),_.innerText=rn.scanButtonStartScanningText(),_.style.opacity="1",_.disabled=!1,ie&&(_.style.display="inline-block")};if(_.addEventListener("click",function(ie){_.innerText=rn.scanButtonScanningStarting(),w.disable(),_.disabled=!0,_.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var te=w.getValue();a.persistedDataManager.setLastUsedCameraId(te),a.html5Qrcode.start(te,uN(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(ue){I.disabled=!1,I.style.display="inline-block",F(!1);var ye=a.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&V(ye),t.config.showZoomSliderIfSupported===!0&&E(ye)}).catch(function(ue){a.showHideScanTypeSwapLink(!0),w.enable(),F(!0),a.setHeaderMessage(ue,Cr.STATUS_WARNING)})}),w.hasSingleItem()&&_.click(),I.addEventListener("click",function(ie){if(!a.html5Qrcode)throw"html5Qrcode not defined";I.disabled=!0,a.html5Qrcode.stop().then(function(te){t.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),w.enable(),_.disabled=!1,I.style.display="none",_.style.display="inline-block",M&&(M.reset(),M.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(te){I.disabled=!1,a.setHeaderMessage(te,Cr.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var K=a.persistedDataManager.getLastUsedCameraId();w.hasValue(K)?(w.setValue(K),_.click()):a.persistedDataManager.resetLastUsedCameraId()}},r.prototype.createSectionSwap=function(){var e=this,t=rn.textIfCameraScanSelected(),a=rn.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var E=la.createElement("span",this.getDashboardSectionSwapLinkId());E.style.textDecoration="underline",E.style.cursor="pointer",E.innerText=eo.isCameraScanType(this.currentScanType)?t:a,E.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,eo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),E.innerText=a,e.currentScanType=Ao.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),E.innerText=t,e.currentScanType=Ao.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(E),c.appendChild(f)},r.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){IE.hasPermissions().then(function(a){if(a){var c=document.getElementById(t.getCameraPermissionButtonId());if(!c)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(a){t.persistedDataManager.setHasPermission(!1)});return}},r.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},r.prototype.setHeaderMessage=function(e,t){t||(t=Cr.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=e,a.style.display="block",t){case Cr.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case Cr.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case Cr.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},r.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},r.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Z6,this.cameraScanImage.alt=rn.cameraScanAltText()},r.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=J6,this.fileScanImage.alt=rn.fileScanAltText()},r.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},r.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},r.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},r.prototype.getDashboardSectionSwapLinkId=function(){return br.SCAN_TYPE_CHANGE_ANCHOR_ID},r.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},r.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},r.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},r.prototype.getCameraPermissionButtonId=function(){return br.CAMERA_PERMISSION_BUTTON_ID},r.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},r.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},r.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},r}();const dN=({isOpen:r,onClose:e,onScanSuccess:t})=>{const[a,c]=ee.useState(null);return ee.useEffect(()=>{if(r){const f=new fN("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1});f.render(E=>{t&&t(E),f.clear(),e()},E=>{console.debug("QR Scan error:",E)}),c(f)}return()=>{a&&a.clear()}},[r]),r?b.jsx("div",{className:"scan-modal-overlay",children:b.jsxs("div",{className:"scan-modal",children:[b.jsx("button",{className:"close-button",onClick:e,children:b.jsx(KE,{size:24})}),b.jsx("h2",{children:"Scan QR Code"}),b.jsx("div",{id:"qr-reader"}),b.jsx("p",{className:"scan-instructions",children:"Position the QR code within the frame to scan"})]})}):null},gN=()=>{const[r,e]=ee.useState(0),[t,a]=ee.useState(""),[c,f]=ee.useState(!0),E=[{id:1,image:"/placeholder.svg?height=600&width=800",title:"DISCOVER VENUES",subtitle:"Book the best facilities",description:"Find and book premium sports facilities in your area"},{id:2,image:"/placeholder.svg?height=600&width=800",title:"CONNECT WITH PLAYERS",subtitle:"Join the community",description:"Meet sports enthusiasts and join exciting games"},{id:3,image:"/placeholder.svg?height=600&width=800",title:"TRAIN WITH EXPERTS",subtitle:"Level up your game",description:"Get coached by professional trainers and improve your skills"}];ee.useEffect(()=>{const _=setInterval(()=>{f(!1),setTimeout(()=>{e(I=>I===E.length-1?0:I+1),f(!0)},500)},5e3);return()=>clearInterval(_)},[]);const w=_=>{a(_.target.value)},T=_=>{_.preventDefault(),console.log("Searching for:",t)};return b.jsxs("section",{className:"hero",children:[b.jsx("div",{className:"hero-slider",children:E.map((_,I)=>b.jsx("div",{className:`hero-slide ${I===r?"active":""}`,style:{backgroundImage:`url(${_.image})`},children:b.jsx("div",{className:"slide-overlay"})},_.id))}),b.jsx("div",{className:"hero-content",children:b.jsxs("div",{className:"container",children:[b.jsxs("div",{className:`text-content ${c?"visible":""}`,children:[b.jsx("h1",{className:"hero-title",children:E[r].title}),b.jsx("h2",{className:"hero-subtitle",children:E[r].subtitle}),b.jsx("p",{className:"hero-description",children:E[r].description})]}),b.jsxs("form",{className:"search-form",onSubmit:T,children:[b.jsxs("div",{className:"search-input-container",children:[b.jsx(nC,{className:"search-icon"}),b.jsx("input",{type:"text",placeholder:"Enter your location",value:t,onChange:w,className:"search-input1"})]}),b.jsxs("button",{type:"submit",className:"search-button",children:[b.jsx(lC,{className:"search-button-icon"}),b.jsx("span",{children:"Search"})]})]}),b.jsxs("button",{className:"explore-button",children:[b.jsx("span",{children:"Explore Now"}),b.jsx(GT,{className:"explore-icon"})]}),b.jsx("div",{className:"slider-indicators",children:E.map((_,I)=>b.jsx("span",{className:`indicator ${I===r?"active":""}`,onClick:()=>{f(!1),setTimeout(()=>{e(I),f(!0)},500)}},I))})]})})]})};var LA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},RE=oo.createContext&&oo.createContext(LA),mN=["attr","size","title"];function pN(r,e){if(r==null)return{};var t=yN(r,e),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);for(c=0;c<f.length;c++)a=f[c],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(t[a]=r[a])}return t}function yN(r,e){if(r==null)return{};var t={};for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){if(e.indexOf(a)>=0)continue;t[a]=r[a]}return t}function Rf(){return Rf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},Rf.apply(this,arguments)}function DE(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),t.push.apply(t,a)}return t}function Df(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DE(Object(t),!0).forEach(function(a){EN(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):DE(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function EN(r,e,t){return e=xN(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xN(r){var e=_N(r,"string");return typeof e=="symbol"?e:e+""}function _N(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var a=t.call(r,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function PA(r){return r&&r.map((e,t)=>oo.createElement(e.tag,Df({key:t},e.attr),PA(e.child)))}function Ln(r){return e=>oo.createElement(AN,Rf({attr:Df({},r.attr)},e),PA(r.child))}function AN(r){var e=t=>{var{attr:a,size:c,title:f}=r,E=pN(r,mN),w=c||t.size||"1em",T;return t.className&&(T=t.className),r.className&&(T=(T?T+" ":"")+r.className),oo.createElement("svg",Rf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,E,{className:T,style:Df(Df({color:r.color||t.color},t.style),r.style),height:w,width:w,xmlns:"http://www.w3.org/2000/svg"}),f&&oo.createElement("title",null,f),r.children)};return RE!==void 0?oo.createElement(RE.Consumer,null,t=>e(t)):e(LA)}function Of(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(r)}function Xh(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(r)}function kA(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(r)}function BA(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(r)}function UA(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(r)}function wN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"},child:[]}]})(r)}function vN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(r)}function TN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"},child:[]},{tag:"path",attr:{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"},child:[]},{tag:"line",attr:{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"},child:[]}]})(r)}function CN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(r)}function Pg(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(r)}function SN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(r)}function VA(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(r)}function bN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(r)}function jA(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}function IN(r){return Ln({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"},child:[]},{tag:"polygon",attr:{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"},child:[]}]})(r)}function FA(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M122.06 122.06c-44.37 44.37-66.71 100.61-78 145.28l200.6 200.56c44.67-11.25 100.91-33.59 145.28-78s66.71-100.61 78-145.28L267.34 44.1c-44.67 11.25-100.91 33.59-145.28 77.96zm256.73 256.72zM300.65 189 323 166.71A15.78 15.78 0 0 1 345.29 189L323 211.35l11.16 11.17a15.78 15.78 0 0 1-22.32 22.32l-11.16-11.16L278.32 256l11.16 11.16a15.78 15.78 0 1 1-22.32 22.32L256 278.32l-22.32 22.33 11.16 11.16a15.78 15.78 0 1 1-22.32 22.32L211.35 323 189 345.29A15.78 15.78 0 0 1 166.71 323L189 300.65l-11.16-11.17a15.78 15.78 0 0 1 22.32-22.32l11.16 11.16L233.68 256l-11.16-11.16a15.78 15.78 0 1 1 22.32-22.32L256 233.68l22.32-22.33-11.16-11.16a15.78 15.78 0 0 1 22.32-22.32zm175.92 10.63c7.31-54.53 4-120.26-20-144.21s-89.68-27.3-144.21-20c-2.51.34-5.16.72-7.91 1.15l171 171c.4-2.78.78-5.43 1.12-7.94zM35.43 312.37c-7.31 54.53-4 120.26 20 144.21C72.17 473.33 109.34 480 148.84 480a387 387 0 0 0 50.79-3.43c2.51-.34 5.16-.72 7.91-1.15l-171-171c-.39 2.79-.77 5.44-1.11 7.95z"},child:[]}]})(r)}function kg(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m444 295.67-.47-26.07a205.42 205.42 0 0 1-39.27-4.73l-5 17.35a14 14 0 1 1-26.88-7.81l5-17.38a206.47 206.47 0 0 1-36.05-17.35l-10.44 14.77a14 14 0 0 1-22.87-16.16l10.41-14.73a204.8 204.8 0 0 1-30-30L273.71 204a14 14 0 0 1-16.16-22.87l14.74-10.42a205.3 205.3 0 0 1-17.38-36.06l-17.32 5a14 14 0 1 1-7.81-26.89l17.3-5a205.88 205.88 0 0 1-4.43-32.59q-.17-3-.24-6l-18.22-.33a14 14 0 0 1-13.74-14A208 208 0 0 0 55 202.42a16 16 0 0 1 15 15.66l.44 24.43c1.58.05 3.16.11 4.73.2a205.88 205.88 0 0 1 32.59 4.43l5-17.3a14 14 0 0 1 26.89 7.81l-5 17.32a205.21 205.21 0 0 1 36 17.38L181 257.61a14 14 0 0 1 22.87 16.16l-10.39 14.73a205.65 205.65 0 0 1 15.79 14.23 203.79 203.79 0 0 1 14.23 15.79l14.73-10.41A14 14 0 0 1 254.39 331l-14.76 10.43A206.86 206.86 0 0 1 257 377.47l17.38-5.05a14 14 0 0 1 7.81 26.89l-17.35 5a205.89 205.89 0 0 1 4.7 38.28l18.27.33a16 16 0 0 1 15.71 16.28 11.69 11.69 0 0 1-.08 1.19 208 208 0 0 0 153.39-151.03A14 14 0 0 1 444 295.67z"},child:[]},{tag:"path",attr:{d:"M301.49 56.2A14 14 0 0 1 287.5 70h-.25l-16.81-.3c.05 1.31.1 2.62.17 3.93a178.83 178.83 0 0 0 3.44 26.31l16.29-4.74a14 14 0 0 1 7.81 26.8l-16.27 4.73a178.06 178.06 0 0 0 13.33 27.69l13.84-9.78a14 14 0 1 1 16.16 22.87l-13.86 9.79q5.25 6.33 11.12 12.19c3.9 3.91 8 7.6 12.2 11.1l9.78-13.84A14 14 0 1 1 367.32 203l-9.76 13.8a178.83 178.83 0 0 0 27.68 13.33l4.76-16.28a14 14 0 0 1 26.89 7.81l-4.73 16.26a177.72 177.72 0 0 0 30.95 3.65l-.16-9a14 14 0 0 1 13.75-14.24h.25a14.67 14.67 0 0 1 2.59.25 208 208 0 0 0-158-163.51c-.06.4-.04.76-.05 1.13zm-93.05 401.35a16 16 0 0 1 16.28-15.71l16.76.29a178.49 178.49 0 0 0-3.62-29.95l-16.26 4.72a14 14 0 1 1-7.81-26.9l16.21-4.7a177.92 177.92 0 0 0-13.33-27.68l-13.8 9.76a14 14 0 1 1-16.16-22.87l13.84-9.78c-3.5-4.22-7.19-8.3-11.1-12.2s-8-7.62-12.19-11.12l-9.79 13.86a14 14 0 1 1-22.87-16.16l9.78-13.84a177.16 177.16 0 0 0-27.69-13.33L122 298.21a14 14 0 1 1-26.9-7.81l4.73-16.29a177.32 177.32 0 0 0-26.31-3.44c-.89-.05-1.79-.08-2.68-.12l.16 10.59a16 16 0 0 1-15.71 16.28H55a16 16 0 0 1-3.94-.51 208 208 0 0 0 157.65 163.87 15.72 15.72 0 0 1-.27-3.23z"},child:[]}]})(r)}function Bg(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m256 233.37 34.45-34.45a207.08 207.08 0 0 1-50.12-135.25c0-5 .19-10.05.54-15A207.09 207.09 0 0 0 120.67 98zm57.14-57.14L391.33 98A207.07 207.07 0 0 0 273 48.8c-.41 4.9-.64 9.86-.64 14.87a175.25 175.25 0 0 0 40.78 112.56zm22.63 22.63a175.25 175.25 0 0 0 112.56 40.81c5 0 10-.23 14.87-.64A207.07 207.07 0 0 0 414 120.67zM176.23 313.14a175.23 175.23 0 0 0-112.56-40.81q-7.52 0-14.87.64A207.07 207.07 0 0 0 98 391.33zM256 278.63l-34.45 34.45a207.08 207.08 0 0 1 50.12 135.25c0 5-.19 10.05-.54 15A207.06 207.06 0 0 0 391.33 414zm192.33-6.96a207.08 207.08 0 0 1-135.25-50.12L278.63 256 414 391.33a207.09 207.09 0 0 0 49.39-120.2c-5.01.35-10.02.54-15.06.54zM233.37 256 98 120.67a207.06 207.06 0 0 0-49.39 120.2c5-.35 10-.54 15-.54a207.08 207.08 0 0 1 135.25 50.12zm-112.7 158A207.07 207.07 0 0 0 239 463.2q.63-7.35.64-14.87a175.23 175.23 0 0 0-40.81-112.56z"},child:[]}]})(r)}function zA(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M388 448a92 92 0 1 1 92-92 92.1 92.1 0 0 1-92 92zm0-152a60 60 0 1 0 60 60 60.07 60.07 0 0 0-60-60zM124 448a92 92 0 1 1 92-92 92.1 92.1 0 0 1-92 92zm0-152a60 60 0 1 0 60 60 60.07 60.07 0 0 0-60-60zm196-168a31.89 31.89 0 0 0 32-32.1A31.55 31.55 0 0 0 320.2 64a32 32 0 1 0-.2 64z"},child:[]},{tag:"path",attr:{d:"M367.55 192h-43.76a4 4 0 0 1-3.51-2.08l-31.74-58.17a31 31 0 0 0-49.38-7.75l-69.86 70.4a32.56 32.56 0 0 0-9.3 22.4c0 17.4 12.6 23.6 18.5 27.1 28.5 16.42 48.57 28.43 59.58 35.1a4 4 0 0 1 1.92 3.41v69.12c0 8.61 6.62 16 15.23 16.43A16 16 0 0 0 272 352v-86a16 16 0 0 0-6.66-13l-37-26.61a4 4 0 0 1-.58-6l42-44.79a4 4 0 0 1 6.42.79L298 215.77a16 16 0 0 0 14 8.23h56a16 16 0 0 0 16-16.77c-.42-8.61-7.84-15.23-16.45-15.23z"},child:[]}]})(r)}function Cu(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M193.69 152.84a16 16 0 0 1 29.64 2.56l36.4 121.36 30-59.92a16 16 0 0 1 28.62 0L345.89 272h96.76A213.08 213.08 0 0 0 464 176.65C463.37 114.54 413.54 64 352.92 64c-48.09 0-80 29.54-96.92 51-16.88-21.49-48.83-51-96.92-51C98.46 64 48.63 114.54 48 176.65A211.13 211.13 0 0 0 56.93 240h93.18z"},child:[]},{tag:"path",attr:{d:"M321.69 295.16 304 259.78l-33.69 67.38A16 16 0 0 1 256 336q-.67 0-1.38-.06a16 16 0 0 1-14-11.34l-36.4-121.36-30 59.92A16 16 0 0 1 160 272H69.35q14 29.29 37.27 57.66c18.77 22.88 52.8 59.46 131.39 112.81a31.84 31.84 0 0 0 36 0c78.59-53.35 112.62-89.93 131.39-112.81a316.79 316.79 0 0 0 19-25.66H336a16 16 0 0 1-14.31-8.84zM464 272h-21.35a260.11 260.11 0 0 1-18.25 32H464a16 16 0 0 0 0-32zM48 240a16 16 0 0 0 0 32h21.35a225.22 225.22 0 0 1-12.42-32z"},child:[]}]})(r)}function Ug(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm143 304h-45.22a8 8 0 0 1-6.91-4l-16.14-27.68a8 8 0 0 1-.86-6l14.86-59.92a8 8 0 0 1 4.65-5.45l28.1-11.9a8 8 0 0 1 8.34 1.3l41.63 35.82a8 8 0 0 1 2.69 7.26 174.75 174.75 0 0 1-24.28 66.68A8 8 0 0 1 399 352zM134.52 237.13l28.1 11.9a8 8 0 0 1 4.65 5.45l14.86 59.92a8 8 0 0 1-.86 6L165.13 348a8 8 0 0 1-6.91 4H113a8 8 0 0 1-6.82-3.81 174.75 174.75 0 0 1-24.28-66.68 8 8 0 0 1 2.69-7.26l41.63-35.82a8 8 0 0 1 8.3-1.3zm256.94-87.24-18.07 51.38A8 8 0 0 1 369 206l-29.58 12.53a8 8 0 0 1-8.26-1.24L274.9 170.1a8 8 0 0 1-2.9-6.1v-33.58a8 8 0 0 1 3.56-6.65l42.83-28.54a8 8 0 0 1 7.66-.67A176.92 176.92 0 0 1 390 142a8 8 0 0 1 1.46 7.89zM193.6 95.23l42.84 28.54a8 8 0 0 1 3.56 6.65V164a8 8 0 0 1-2.86 6.13l-56.26 47.19a8 8 0 0 1-8.26 1.24L143 206a8 8 0 0 1-4.43-4.72L120.5 149.9a8 8 0 0 1 1.5-7.9 176.92 176.92 0 0 1 64-47.48 8 8 0 0 1 7.6.71zm17.31 327.46L191.18 373a8 8 0 0 1 .52-7l15.17-26a8 8 0 0 1 6.91-4h84.44a8 8 0 0 1 6.91 4l15.18 26a8 8 0 0 1 .53 7l-19.59 49.67a8 8 0 0 1-5.69 4.87 176.58 176.58 0 0 1-79 0 8 8 0 0 1-5.65-4.85z"},child:[]}]})(r)}function HA(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M272 320.46V202.3l166.62-75.73a16 16 0 0 0 0-29.14l-176-80A16 16 0 0 0 240 32v288.46q8-.45 16-.46t16 .46z"},child:[]},{tag:"path",attr:{d:"M463.33 457.5c-8.56-42.85-35.11-78.74-76.78-103.8-32.5-19.55-72.67-31.3-114.55-33.7v79.75a16 16 0 1 1-32 0V320c-41.88 2.4-82.05 14.15-114.55 33.7-41.67 25.06-68.22 60.95-76.78 103.8a32.49 32.49 0 0 0 6.44 27.08C61.13 492 70 496 80 496h352c10 0 18.88-4.05 24.9-11.42a32.49 32.49 0 0 0 6.43-27.08z"},child:[]}]})(r)}function ec(r){return Ln({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 256a192.55 192.55 0 0 0 32-2.68A224 224 0 0 0 258.68 32 192.55 192.55 0 0 0 256 64c0 105.87 86.13 192 192 192zM253.35 480c.94-5.67 1.65-11.4 2.09-17.18.37-4.88.56-9.86.56-14.79 0-105.87-86.13-192-192-192a192.55 192.55 0 0 0-32 2.68A224 224 0 0 0 253.35 480z"},child:[]},{tag:"path",attr:{d:"M289.61 222.39A222.53 222.53 0 0 1 224 64a226.07 226.07 0 0 1 2-30A224.1 224.1 0 0 0 34 226a226.07 226.07 0 0 1 30-2 222.53 222.53 0 0 1 158.39 65.61A222.53 222.53 0 0 1 288 448c0 5.74-.22 11.53-.65 17.22q-.5 6.42-1.36 12.79A224.12 224.12 0 0 0 478 286a226.07 226.07 0 0 1-30 2 222.53 222.53 0 0 1-158.39-65.61z"},child:[]}]})(r)}const NN=()=>{const[r,e]=ee.useState(!1),t=ee.useRef(null),a=FE(),c=[{id:1,title:"Football",icon:b.jsx(Ug,{}),image:"https://images.unsplash.com/photo-1517649763962-0c623066013b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",rating:4.8,price:"₹500/hr",featured:!0,sport:"football"},{id:2,title:"Basketball",icon:b.jsx(Bg,{}),image:"https://images.unsplash.com/photo-1546519638-68e109498ffc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",rating:4.6,price:"₹400/hr",featured:!1,sport:"basketball"},{id:3,title:"Tennis",icon:b.jsx(ec,{}),image:"https://images.unsplash.com/photo-1622279457486-62dcc4a431d6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",rating:4.9,price:"₹600/hr",featured:!0,sport:"tennis"},{id:4,title:"Badminton",icon:b.jsx(ec,{}),image:"https://images.unsplash.com/photo-1613918431703-aa508cbffb03?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",rating:4.7,price:"₹300/hr",featured:!1,sport:"badminton"},{id:5,title:"Cricket",icon:b.jsx(kg,{}),image:"https://images.unsplash.com/photo-1531415074968-036ba1b575da?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",rating:4.8,price:"₹800/hr",featured:!0,sport:"cricket"},{id:6,title:"Fitness",icon:b.jsx(Cu,{}),image:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",rating:4.5,price:"₹200/hr",featured:!1,sport:"fitness"}];ee.useEffect(()=>{const E=new IntersectionObserver(([w])=>{w.isIntersecting&&(e(!0),E.unobserve(w.target))},{threshold:.1});return t.current&&E.observe(t.current),()=>{t.current&&E.unobserve(t.current)}},[]);const f=E=>{a("/venues",{state:{selectedSport:E}})};return b.jsx("section",{className:"sports-cards",ref:t,children:b.jsxs("div",{className:"container",children:[b.jsxs("div",{className:`section-header ${r?"visible":""}`,children:[b.jsx("h2",{className:"section-title",children:"Book Venues"}),b.jsxs(ro,{to:"/venues",className:"view-all",children:[b.jsx("span",{children:"See All Venues"}),b.jsx(Of,{})]})]}),b.jsx("div",{className:"cards-container",children:c.map((E,w)=>b.jsxs("div",{className:`card ${r?"visible":""}`,style:{animationDelay:`${w*.1}s`},onClick:()=>f(E.sport),children:[b.jsxs("div",{className:"card-image",children:[b.jsx("img",{src:E.image,alt:E.title}),E.featured&&b.jsx("span",{className:"featured-badge",children:"FEATURED"})]}),b.jsxs("div",{className:"card-content",children:[b.jsx("div",{className:"card-icon",children:E.icon}),b.jsx("h3",{className:"card-title",children:E.title}),b.jsxs("div",{className:"card-details",children:[b.jsxs("div",{className:"card-rating",children:[b.jsx(VA,{}),b.jsx("span",{children:E.rating})]}),b.jsx("div",{className:"card-price",children:E.price})]})]})]},E.id))}),b.jsx("div",{className:`cta-button ${r?"visible":""}`,children:b.jsxs("button",{className:"btn btn-primary",children:[b.jsx("span",{children:"Explore All Sports"}),b.jsx(Of,{})]})})]})})},RN=()=>{const[r,e]=ee.useState(!1),t=ee.useRef(null),a=[{id:1,title:"Find Sports Venues",description:"Discover the best sports venues near you with real-time availability.",icon:b.jsx(Xh,{})},{id:2,title:"Connect with Players",description:"Join games or find teammates who share your passion for sports.",icon:b.jsx(Xh,{})},{id:3,title:"Book Instantly",description:"Secure your spot with our easy booking system and instant confirmations.",icon:b.jsx(Xh,{})},{id:4,title:"Train with Experts",description:"Improve your skills with professional coaches and training programs.",icon:b.jsx(Xh,{})}];return ee.useEffect(()=>{const c=new IntersectionObserver(([f])=>{f.isIntersecting&&(e(!0),c.unobserve(f.target))},{threshold:.1});return t.current&&c.observe(t.current),()=>{t.current&&c.unobserve(t.current)}},[]),b.jsx("section",{className:"about",ref:t,children:b.jsxs("div",{className:"container",children:[b.jsx("h2",{className:`section-title ${r?"visible":""}`,children:"How SPORTZ Works"}),b.jsxs("div",{className:"about-content",children:[b.jsx("div",{className:`about-image ${r?"visible":""}`,children:b.jsx("img",{src:"/placeholder.svg?height=500&width=600",alt:"About SPORTZ"})}),b.jsx("div",{className:"about-features",children:a.map((c,f)=>b.jsxs("div",{className:`feature-item ${r?"visible":""}`,style:{animationDelay:`${f*.2}s`},children:[b.jsx("div",{className:"feature-icon",children:c.icon}),b.jsxs("div",{className:"feature-text",children:[b.jsx("h3",{className:"feature-title",children:c.title}),b.jsx("p",{className:"feature-description",children:c.description})]})]},c.id))})]})]})})},DN=()=>{const[r,e]=ee.useState(0),[t,a]=ee.useState(!1),c=ee.useRef(null),f=[{id:1,name:"John Smith",role:"Football Enthusiast",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIf4R5qPKHPNMyAqV-FjS_OTBB8pfUV29Phg&s",rating:5,text:"SPORTZ has completely changed how I find places to play. The app is intuitive, and I've met so many great players through the platform!"},{id:2,name:"Sarah Johnson",role:"Tennis Player",image:"https://cdn-icons-png.flaticon.com/512/4128/4128335.png",rating:5,text:"Booking tennis courts used to be such a hassle. Now with SPORTZ, I can find and book courts in seconds. Absolutely love it!"},{id:3,name:"Michael Brown",role:"Basketball Coach",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIf4R5qPKHPNMyAqV-FjS_OTBB8pfUV29Phg&s",rating:4,text:"As a coach, I need reliable venues for my training sessions. SPORTZ has made it so easy to find and book courts for my team practices."}];ee.useEffect(()=>{const T=new IntersectionObserver(([_])=>{_.isIntersecting&&(a(!0),T.unobserve(_.target))},{threshold:.1});return c.current&&T.observe(c.current),()=>{c.current&&T.unobserve(c.current)}},[]);const E=()=>{e(T=>T===f.length-1?0:T+1)},w=()=>{e(T=>T===0?f.length-1:T-1)};return b.jsx("section",{className:"testimonials",ref:c,children:b.jsxs("div",{className:"container",children:[b.jsx("h2",{className:`section-title ${t?"visible":""}`,children:"What Our Users Say"}),b.jsxs("div",{className:`testimonials-slider ${t?"visible":""}`,children:[b.jsx("button",{className:"slider-arrow prev",onClick:w,children:b.jsx(kA,{})}),b.jsx("div",{className:"testimonials-container",children:f.map((T,_)=>b.jsxs("div",{className:`testimonial-card ${_===r?"active":""}`,children:[b.jsxs("div",{className:"testimonial-content",children:[b.jsx("div",{className:"testimonial-rating",children:[...Array(5)].map((I,M)=>b.jsx(VA,{className:M<T.rating?"filled":""},M))}),b.jsx("p",{className:"testimonial-text",children:T.text})]}),b.jsxs("div",{className:"testimonial-author",children:[b.jsx("div",{className:"author-image",children:b.jsx("img",{src:T.image||"/placeholder.svg",alt:T.name})}),b.jsxs("div",{className:"author-info",children:[b.jsx("h4",{className:"author-name",children:T.name}),b.jsx("p",{className:"author-role",children:T.role})]})]})]},T.id))}),b.jsx("button",{className:"slider-arrow next",onClick:E,children:b.jsx(BA,{})})]}),b.jsx("div",{className:"testimonial-indicators",children:f.map((T,_)=>b.jsx("span",{className:`indicator ${_===r?"active":""}`,onClick:()=>e(_)},_))})]})})},GA=()=>{const r=new Date().getFullYear();return b.jsxs("footer",{className:"footer",children:[b.jsx("div",{className:"footer-top",children:b.jsx("div",{className:"container",children:b.jsxs("div",{className:"footer-grid",children:[b.jsxs("div",{className:"footer-column",children:[b.jsx("div",{className:"footer-logo",children:b.jsx("h2",{children:"SPORTZ"})}),b.jsx("p",{className:"footer-description",children:"Find sports venues, connect with players, and book your next game instantly."}),b.jsxs("div",{className:"footer-social",children:[b.jsx("a",{href:"#",className:"social-icon",children:b.jsx(TN,{})}),b.jsx("a",{href:"#",className:"social-icon",children:b.jsx(wN,{})}),b.jsx("a",{href:"#",className:"social-icon",children:b.jsx(bN,{})}),b.jsx("a",{href:"#",className:"social-icon",children:b.jsx(IN,{})})]})]}),b.jsxs("div",{className:"footer-column",children:[b.jsx("h3",{className:"footer-title",children:"Quick Links"}),b.jsxs("ul",{className:"footer-links",children:[b.jsx("li",{children:b.jsx("a",{href:"#",children:"Home"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"About Us"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Sports"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Venues"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Pricing"})})]})]}),b.jsxs("div",{className:"footer-column",children:[b.jsx("h3",{className:"footer-title",children:"Sports"}),b.jsxs("ul",{className:"footer-links",children:[b.jsx("li",{children:b.jsx("a",{href:"#",children:"Football"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Basketball"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Tennis"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Golf"})}),b.jsx("li",{children:b.jsx("a",{href:"#",children:"Cycling"})})]})]}),b.jsxs("div",{className:"footer-column",children:[b.jsx("h3",{className:"footer-title",children:"Contact Us"}),b.jsxs("ul",{className:"footer-contact",children:[b.jsxs("li",{children:[b.jsx(Pg,{}),b.jsx("span",{children:"123 Sports Street, City, Country"})]}),b.jsxs("li",{children:[b.jsx(SN,{}),b.jsx("span",{children:"+1 234 567 890"})]}),b.jsxs("li",{children:[b.jsx(CN,{}),b.jsx("span",{children:"info@sportz.com"})]})]})]})]})})}),b.jsx("div",{className:"footer-bottom",children:b.jsxs("div",{className:"container",children:[b.jsxs("p",{className:"copyright",children:["© ",r," SPORTZ. All rights reserved."]}),b.jsxs("div",{className:"footer-bottom-links",children:[b.jsx("a",{href:"#",children:"Privacy Policy"}),b.jsx("a",{href:"#",children:"Terms of Service"}),b.jsx("a",{href:"#",children:"Cookie Policy"})]})]})}),b.jsx("div",{className:"app-download",children:b.jsxs("div",{className:"app-download-content",children:[b.jsx("div",{className:"qr-code",children:b.jsx("img",{src:"/placeholder.svg?height=120&width=120",alt:"QR Code"})}),b.jsxs("div",{className:"download-text",children:[b.jsx("h3",{children:"DOWNLOAD THE APP"}),b.jsx("p",{children:"Scan the QR code to download our mobile app"})]})]})})]})},ON=()=>{const[r,e]=ee.useState(!1),t=a=>{console.log("Scanned QR Code:",a)};return b.jsxs("div",{className:"home",children:[b.jsx(gN,{}),b.jsx(NN,{}),b.jsx(RN,{}),b.jsx(DN,{}),b.jsx(GA,{}),b.jsx(ro,{to:"/venues",className:"see-all-venues-btn",children:"See All Venues"}),b.jsx("button",{className:"scan-button",onClick:()=>e(!0),"aria-label":"Scan QR Code",children:b.jsx(aC,{size:24})}),b.jsx(dN,{isOpen:r,onClose:()=>e(!1),onScanSuccess:t})]})},MN=({isOpen:r,onClose:e,court:t,venue:a})=>{const[c,f]=ee.useState({date:"",duration:0}),[E,w]=ee.useState(!1),[T,_]=ee.useState(""),[I,M]=ee.useState([]),[V,F]=ee.useState([]),[K,ie]=ee.useState(null),[te,ue]=ee.useState(!1),[ye,se]=ee.useState(!1),[De,Ue]=ee.useState(!1),Se=ee.useRef(null);ee.useEffect(()=>{if(r){const Te=new Date().toISOString().split("T")[0];f({date:Te,duration:t.minimumBookingDuration||60}),_(""),ie(null),ue(!1)}},[r,t]);const z=async()=>{if(!(!c.date||!t.id))try{const Te=Jl(Ds,"bookings"),Y=$f(Te,Tu("courtId","==",t.id),Tu("date","==",c.date)),Me=(await ju(Y)).docs.map(je=>({...je.data()}));M(Me)}catch(Te){console.error("Error fetching booked slots:",Te)}};ee.useEffect(()=>{c.date&&t.id&&z()},[c.date,t.id]);const H=Te=>{if(!Te)return 0;const[Y,xe]=Te.split(" ");let[Me,je]=Y.split(":").map(Number);return Me=Me%12,xe==="PM"&&(Me+=12),Me*60+je},P=(Te,Y)=>{if(!Te||!Y)return!1;const xe=H(Te),Me=H(Y);return!I.some(je=>{const Be=H(je.timeSlot.startTime),it=H(je.timeSlot.endTime);return xe<it&&Me>Be})},W=Te=>{if(!Te)return!0;const Y=new Date,xe=new Date(Y.toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),[Me,je]=Te.split(" ");let[Be,it]=Me.split(":").map(Number);Be=Be%12,je==="PM"&&(Be+=12);const Ie=new Date(c.date);if(Ie.setHours(Be,it,0),Ie.toDateString()===xe.toDateString()){const sn=new Date(xe.getTime()+18e5);return Ie<xe&&Ie<sn}return Ie<xe},J=()=>{if(!(t!=null&&t.openingTime)||!(t!=null&&t.closingTime)||!c.date||!c.duration){F([]);return}try{const Te=[],[Y,xe]=t.openingTime.split(" ");let[Me,je]=Y.split(":").map(Number);Me=Me%12,xe==="PM"&&(Me+=12);const[Be,it]=t.closingTime.split(" ");let[Ie,sn]=Be.split(":").map(Number);Ie=Ie%12,it==="PM"&&(Ie+=12);let Qe=new Date(c.date);Qe.setHours(Me,je,0);const Ht=new Date(c.date);for(Ht.setHours(Ie,sn,0);Qe<Ht;){const xt=Qe.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"}),Bt=new Date(Qe);if(Bt.setMinutes(Qe.getMinutes()+c.duration),Bt<=Ht){const xi=Bt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"});P(xt,xi)&&!W(xt)&&Te.push({startTime:xt,endTime:xi})}Qe.setMinutes(Qe.getMinutes()+30)}F(Te)}catch{_("Error generating time slots. Please try again."),F([])}};ee.useEffect(()=>{J()},[c.date,c.duration,t,I]);const Q=()=>{if(!t||!c.duration)return 0;const Te=c.duration/60;return Math.round(Te*t.pricePerHour)},q=async()=>{if(!K){_("Please select a time slot");return}const Te=JSON.parse(localStorage.getItem("userData"));if(!Te||!Te.uid){Ue(!0);return}se(!0)},ht=Te=>{Ue(!1);const Y=JSON.parse(localStorage.getItem("userData"));(!Y||Y.uid!==Te.uid)&&localStorage.setItem("userData",JSON.stringify({uid:Te.uid,email:Te.email,lastFetched:new Date().getTime()})),se(!0)},fe=()=>{se(!1)},be=async()=>{try{w(!0);const Te=JSON.parse(localStorage.getItem("userData"));if(!Te||!Te.uid){_("Please login to book a court");return}const Y={userId:Te.uid,courtId:t.id,stadiumId:a.stadiumId,date:c.date,timeSlot:K,amount:Q(),status:"confirmed",coachId:null,createdAt:Date.now()},xe=`${Te.uid}_${Date.now()}`,Me=Gl(Jl(Ds,"bookings"),xe);await R1(Me,Y),ue(!0),setTimeout(()=>{e(),window.refreshProfileBookings&&window.refreshProfileBookings()},1e3)}catch(Te){console.error("Error confirming payment:",Te),_("Failed to process payment. Please try again.")}finally{w(!1)}},ke=()=>{Se.current&&Se.current.scrollBy({left:-200,behavior:"smooth"})},Ve=()=>{Se.current&&Se.current.scrollBy({left:200,behavior:"smooth"})};return r?b.jsxs("div",{className:"modal-overlay",children:[b.jsxs("div",{className:"booking-modal",children:[b.jsx("button",{className:"close-button",onClick:e,children:b.jsx(jA,{})}),b.jsxs("div",{className:"modal-header",children:[b.jsxs("h2",{children:["Book ",a.title]}),b.jsxs("p",{children:["Court ",t.courtNumber," - ",t.courtType]})]}),te?b.jsxs("div",{className:"success-message",children:[b.jsx("h3",{children:"Booking Successful!"}),b.jsx("p",{children:"Your court has been booked successfully."})]}):ye?b.jsxs("div",{className:"payment-confirmation",children:[b.jsx("img",{src:"https://images.unsplash.com/photo-1563013544-824ae1b704d3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",alt:"Payment Confirmation",className:"payment-image"}),b.jsxs("div",{className:"payment-buttons",children:[b.jsx("button",{className:"payment-button cancel-payment",onClick:fe,children:"Cancel"}),b.jsx("button",{className:"payment-button confirm-payment",onClick:be,disabled:E,children:E?"Processing...":"Payment Successful"})]})]}):b.jsxs("div",{className:"modal-content",children:[b.jsx("div",{className:"form-group",children:b.jsxs("div",{className:"date-duration-container",children:[b.jsxs("div",{className:"date-input-container",children:[b.jsx("label",{children:"Select Date"}),b.jsx("input",{type:"date",value:c.date,onChange:Te=>f(Y=>({...Y,date:Te.target.value})),min:new Date().toISOString().split("T")[0]})]}),b.jsxs("div",{className:"duration-container",children:[b.jsx("label",{children:"Duration (minutes)"}),b.jsxs("div",{className:"duration-buttons",children:[b.jsx("button",{type:"button",className:"duration-button",onClick:()=>f(Te=>({...Te,duration:Math.max(t.minimumBookingDuration||60,Te.duration-30)})),disabled:c.duration<=(t.minimumBookingDuration||60),children:"-"}),b.jsx("input",{type:"number",className:"duration-input",value:c.duration,onChange:Te=>{const Y=Math.min(180,Math.max(t.minimumBookingDuration||60,Number(Te.target.value)));f(xe=>({...xe,duration:Y}))},min:t.minimumBookingDuration||60,max:180,step:30}),b.jsx("button",{type:"button",className:"duration-button",onClick:()=>f(Te=>({...Te,duration:Math.min(180,Te.duration+30)})),disabled:c.duration>=180,children:"+"})]})]})]})}),b.jsxs("div",{className:"time-slots",children:[b.jsx("h3",{children:"Available Time Slots"}),b.jsxs("div",{className:"slots-container",children:[b.jsx("div",{className:"slots-grid",ref:Se,children:V.map((Te,Y)=>b.jsxs("button",{className:`slot-button ${(K==null?void 0:K.startTime)===Te.startTime?"selected":""}`,onClick:()=>ie(Te),children:[b.jsx(UA,{}),b.jsxs("span",{children:[Te.startTime," - ",Te.endTime]})]},Y))}),V.length>0&&b.jsxs("div",{className:"scroll-buttons",children:[b.jsx("button",{className:"scroll-button",onClick:ke,"aria-label":"Scroll left",children:b.jsx(kA,{})}),b.jsx("button",{className:"scroll-button",onClick:Ve,"aria-label":"Scroll right",children:b.jsx(BA,{})})]})]}),V.length===0&&b.jsx("p",{className:"no-slots",children:"No available slots for selected date"})]}),K&&b.jsxs("div",{className:"booking-summary",children:[b.jsx("h3",{children:"Booking Summary"}),b.jsxs("div",{className:"summary-item",children:[b.jsx("span",{children:"Date:"}),b.jsx("span",{children:c.date})]}),b.jsxs("div",{className:"summary-item",children:[b.jsx("span",{children:"Time:"}),b.jsxs("span",{children:[K.startTime," - ",K.endTime]})]}),b.jsxs("div",{className:"summary-item",children:[b.jsx("span",{children:"Duration:"}),b.jsxs("span",{children:[c.duration," minutes"]})]}),b.jsxs("div",{className:"summary-item",children:[b.jsx("span",{children:"Price:"}),b.jsxs("span",{children:["₹",Q()]})]})]}),T&&b.jsx("div",{className:"error-message",children:T}),b.jsx("button",{className:"book-button",onClick:q,disabled:E||!K,children:E?"Booking...":"Confirm Booking"})]})]}),De&&b.jsx(SA,{isOpen:De,onClose:()=>Ue(!1),onSuccess:ht})]}):null},LN=({venue:r,onClose:e})=>{const[t,a]=ee.useState([]),[c,f]=ee.useState(null),[E,w]=ee.useState(!0),[T,_]=ee.useState(!1),I=F=>{switch(F.toLowerCase()){case"football":return Ug;case"basketball":return Bg;case"tennis":return ec;case"golf":return HA;case"cycling":return zA;case"rugby":return FA;case"badminton":return ec;case"cricket":return kg;case"fitness":return Cu;default:return Cu}};ee.useEffect(()=>{(async()=>{try{if(!r||!r.stadiumId||!r.sport){w(!1);return}const K=$f(Jl(Ds,"courts"),Tu("stadiumId","==",r.stadiumId)),te=(await ju(K)).docs.map(ue=>({id:ue.id,...ue.data()})).filter(ue=>ue.sport.toLowerCase()===r.sport.toLowerCase());a(te),te.length>0&&f(te[0])}catch(K){console.error("Error fetching courts:",K)}finally{w(!1)}})()},[r]);const M=I(r.sport),V=()=>{c||f(t[0]),_(!0)};return E?b.jsx("div",{className:"popup-overlay",children:b.jsx("div",{className:"popup-content venue-details-popup",children:b.jsxs("div",{className:"loading-state",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Loading court details..."})]})})}):b.jsxs("div",{className:"popup-overlay",children:[b.jsxs("div",{className:"popup-content",children:[b.jsx("button",{className:"close-button",onClick:e,children:b.jsx(jA,{})}),b.jsxs("div",{className:"venue-details-header",children:[b.jsx("div",{className:"venue-icon",children:b.jsx(M,{})}),b.jsxs("div",{className:"venue-title-section",children:[b.jsx("h2",{children:r.title}),b.jsx("span",{className:"sport-badge",children:r.sport.charAt(0).toUpperCase()+r.sport.slice(1)})]})]}),b.jsxs("div",{className:"venue-details-body",children:[b.jsxs("div",{className:"amenities-section",children:[b.jsx("h3",{children:"Amenities"}),b.jsx("div",{className:"amenities",children:r.amenities.map((F,K)=>b.jsx("span",{className:"amenity-tag",children:F},K))})]}),t.length>0?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"courts-section",children:[b.jsx("h3",{children:"Available Courts"}),b.jsx("div",{className:"courts-grid",children:t.map(F=>b.jsxs("button",{className:`court-button ${(c==null?void 0:c.id)===F.id?"selected":""}`,onClick:()=>f(F),children:["Court ",F.courtNumber]},F.id))})]}),c&&b.jsxs("div",{className:"court-details",children:[b.jsx("h3",{children:"Court Details"}),b.jsxs("div",{className:"court-info-grid",children:[b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:"Court Type"}),b.jsx("span",{className:"value",children:c.courtType})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:"Price per Hour"}),b.jsxs("span",{className:"value",children:["₹",c.pricePerHour]})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:"Minimum Duration"}),b.jsxs("span",{className:"value",children:[c.minimumBookingDuration," minutes"]})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:"Opening Time"}),b.jsx("span",{className:"value",children:c.openingTime})]}),b.jsxs("div",{className:"info-item",children:[b.jsx("span",{className:"label",children:"Closing Time"}),b.jsx("span",{className:"value",children:c.closingTime})]})]})]})]}):b.jsx("div",{className:"no-courts-message",children:b.jsx("p",{children:"No courts available for this venue."})}),b.jsxs("div",{className:"venue-footer",children:[b.jsxs("div",{className:"address-section",children:[b.jsx(Pg,{className:"map-icon"}),b.jsx("a",{href:r.addressLink,target:"_blank",rel:"noopener noreferrer",className:"address-link",children:r.address})]}),b.jsxs("button",{className:"book-now-btn",onClick:V,disabled:t.length===0,children:["Book Now",b.jsx(Of,{})]})]})]})]}),T&&c&&b.jsx(MN,{isOpen:T,onClose:()=>_(!1),court:c,venue:r})]})},PN=({selectedFilters:r=[],searchText:e=""})=>{const[t,a]=ee.useState([]),[c,f]=ee.useState(!0),[E,w]=ee.useState(null),T=F=>{switch(F.toLowerCase()){case"football":return Ug;case"basketball":return Bg;case"tennis":return ec;case"golf":return HA;case"cycling":return zA;case"rugby":return FA;case"badminton":return ec;case"cricket":return kg;case"fitness":return Cu;default:return Cu}},_=F=>{console.log("Opening details for venue:",F),w(F)},I=async()=>{try{const F=localStorage.getItem("venuesData");if(F){const{lastFetched:ue,data:ye}=JSON.parse(F);if(!(Date.now()-ue>5*60*1e3)){console.log("Using cached venues data:",ye),a(ye),f(!1);return}}const K=await ju(Jl(Ds,"courts")),ie={};for(const ue of K.docs){const ye=ue.data();console.log("Processing court data:",ye);const se=`${ye.stadiumId}-${ye.sport.toLowerCase()}`;if(ie[se])ie[se].prices.push(ye.pricePerHour);else{const Ue=(await Og(Gl(Ds,"stadiums",ye.stadiumId))).data();ie[se]={id:ue.id,stadiumId:ye.stadiumId,title:Ue.name,sport:ye.sport.toLowerCase(),amenities:[ye.sport,...Ue.amenities],address:Ue.address,addressLink:Ue.addressLink,prices:[ye.pricePerHour]}}}const te=Object.values(ie).map(ue=>{const ye=ue.prices[0],se=ue.prices.length===1?`₹${ye}/hr`:`₹${Math.min(...ue.prices)} - ₹${Math.max(...ue.prices)}/hr`;return{...ue,price:se,courtCount:ue.prices.length,isSingleCourt:ue.prices.length===1}});console.log("Final venues data:",te),localStorage.setItem("venuesData",JSON.stringify({data:te,lastFetched:Date.now()})),a(te)}catch(F){console.error("Error fetching venues data:",F)}finally{f(!1)}};ee.useEffect(()=>{I()},[]);const M=t.filter(F=>{const K=r.length===0||r.some(te=>F.sport.toLowerCase()===te.toLowerCase()),ie=e===""||F.title.toLowerCase().includes(e.toLowerCase())||F.sport.toLowerCase().includes(e.toLowerCase());return K&&ie});console.log("Filtered venues:",M),console.log("Selected filters:",r);const V=()=>{w(null)};return c?b.jsx("div",{className:"venues-list",children:b.jsxs("div",{className:"loading-state",children:[b.jsx("div",{className:"loading-spinner"}),b.jsx("p",{children:"Loading venues..."})]})}):M.length===0?b.jsx("div",{className:"venues-list",children:b.jsx("div",{className:"no-results",children:b.jsx("p",{children:"No venues found matching your criteria."})})}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"venues-list",children:M.map(F=>{const K=T(F.sport);return b.jsxs("div",{className:"venue-card",children:[b.jsxs("div",{className:"venue-image",children:[b.jsx("img",{src:"/placeholder.svg?height=300&width=400",alt:F.title}),b.jsx("div",{className:"venue-overlay",children:b.jsx("span",{className:"sport-badge",children:F.sport.charAt(0).toUpperCase()+F.sport.slice(1)})})]}),b.jsxs("div",{className:"venue-details",children:[b.jsxs("div",{className:"venue-header",children:[b.jsx("div",{className:"venue-icon",children:b.jsx(K,{})}),b.jsxs("div",{className:"venue-title-section",children:[b.jsx("h3",{children:F.title}),b.jsxs("span",{className:"court-count",children:[F.courtCount," ",F.sport.charAt(0).toUpperCase()+F.sport.slice(1)," ",F.courtCount>1?"Courts":"Court"]})]})]}),b.jsx("div",{className:"amenities",children:F.amenities.map((ie,te)=>b.jsx("span",{className:"amenity-tag",children:ie},te))}),b.jsxs("div",{className:"venue-footer",children:[b.jsxs("div",{className:"price-section",children:[b.jsx(UA,{className:"price-icon"}),b.jsx("span",{className:"price-label",children:F.isSingleCourt?"Price:":"Price Range:"}),b.jsx("span",{className:"price",children:F.price})]}),b.jsxs("div",{className:"address-section",children:[b.jsx(Pg,{className:"map-icon"}),b.jsx("a",{href:F.addressLink,target:"_blank",rel:"noopener noreferrer",className:"address-link",children:F.address})]}),b.jsxs("button",{onClick:()=>_(F),className:"view-details-btn",children:["View Details",b.jsx(Of,{})]})]})]})]},F.id)})}),E&&b.jsx(LN,{venue:E,onClose:V})]})},kN=()=>{const r=Ea(),[e,t]=ee.useState([]),[a,c]=ee.useState(!1),[f,E]=ee.useState(""),[w,T]=ee.useState([]),_=ee.useRef(null);ee.useEffect(()=>{const V=F=>{_.current&&!_.current.contains(F.target)&&c(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),ee.useEffect(()=>{var F;const V=localStorage.getItem("venuesData");if(V){const{data:K}=JSON.parse(V),ie=[...new Set(K.map(te=>te.sport.toLowerCase()))];T(ie),console.log("Available sports:",ie)}if((F=r.state)!=null&&F.selectedSport){const K=r.state.selectedSport.toLowerCase();console.log("Selected sport from home:",K),t([K])}},[r.state]);const I=V=>{t(F=>F.includes(V)?F.filter(K=>K!==V):[...F,V])},M=V=>{E(V.target.value)};return b.jsxs("div",{className:"venue-listing-page",children:[b.jsx("div",{className:"venue-hero",children:b.jsx("h1",{children:b.jsx("span",{className:"typing-text",children:"Let's get the best venue for you!"})})}),b.jsxs("div",{className:"search-filter-container",children:[b.jsxs("div",{className:"search-section",children:[b.jsx("input",{type:"text",placeholder:"Search venues...",className:"search-input",value:f,onChange:M}),b.jsx("button",{className:"search-button",children:"Search"})]}),b.jsxs("div",{className:"filter-dropdown",ref:_,children:[b.jsxs("button",{className:"filter-button",onClick:()=>c(!a),children:[b.jsx(vN,{}),e.length>0&&b.jsx("span",{className:"filter-count",children:e.length})]}),a&&b.jsx("div",{className:"filter-options",children:w.map(V=>b.jsxs("label",{className:"filter-checkbox",children:[b.jsx("input",{type:"checkbox",checked:e.includes(V.toLowerCase()),onChange:()=>I(V.toLowerCase())}),V.charAt(0).toUpperCase()+V.slice(1)]},V))})]})]}),b.jsx(PN,{selectedFilters:e,searchText:f}),b.jsx(GA,{})]})},BN=[{id:1,name:"John Smith",sports:["Cricket","Baseball"],stadium:"Sports Complex Alpha",experience:"10 years",timings:"6:00 AM - 8:00 PM",specialization:"Performance Training",image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?ixlib=rb-4.0.3",rating:4.8,price:"₹1000/session"},{id:2,name:"Sarah Johnson",sports:["Tennis","Badminton"],stadium:"Elite Sports Center",experience:"8 years",timings:"7:00 AM - 9:00 PM",specialization:"Youth Training",image:"https://images.unsplash.com/photo-1574680096145-d05b474e2155?ixlib=rb-4.0.3",rating:4.9,price:"₹1200/session"},{id:3,name:"Mike Wilson",sports:["Football","Athletics"],stadium:"Victory Arena",experience:"12 years",timings:"5:00 AM - 7:00 PM",specialization:"Strength & Conditioning",image:"https://images.unsplash.com/photo-1546483875-ad9014c88eba?ixlib=rb-4.0.3",rating:4.7,price:"₹1500/session"}],UN=()=>b.jsxs("div",{className:"trainers-page",children:[b.jsxs("div",{className:"trainers-header",children:[b.jsx("h1",{children:"Expert Trainers"}),b.jsx("p",{children:"Find the perfect trainer to help you achieve your fitness goals"})]}),b.jsx("div",{className:"trainers-grid",children:BN.map(r=>b.jsxs("div",{className:"trainer-card",children:[b.jsxs("div",{className:"trainer-image",children:[b.jsx("img",{src:r.image,alt:r.name}),b.jsxs("div",{className:"trainer-rating",children:[b.jsx("span",{children:"★"})," ",r.rating]})]}),b.jsxs("div",{className:"trainer-info",children:[b.jsx("h2",{children:r.name}),b.jsx("div",{className:"trainer-sports",children:r.sports.map((e,t)=>b.jsx("span",{className:"sport-tag",children:e},t))}),b.jsxs("div",{className:"trainer-details",children:[b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Stadium:"})," ",r.stadium]}),b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Experience:"})," ",r.experience]}),b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Timings:"})," ",r.timings]}),b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Specialization:"})," ",r.specialization]}),b.jsxs("div",{className:"detail-item price",children:[b.jsx("strong",{children:"Price:"})," ",r.price]})]}),b.jsx("button",{className:"book-trainer-btn",children:"Book Session"})]})]},r.id))})]}),VN=[{id:1,name:"Dr. Emily Parker",type:"Sports Physiotherapist",specialization:["Joint Rehabilitation","Post-Surgery Recovery"],experience:"15 years",clinic:"HealthCare Plus",timings:"9:00 AM - 5:00 PM",image:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?ixlib=rb-4.0.3",rating:4.9,price:"₹1500/session"},{id:2,name:"Dr. James Wilson",type:"Sports Nutritionist",specialization:["Performance Nutrition","Weight Management"],experience:"12 years",clinic:"Elite Wellness Center",timings:"10:00 AM - 6:00 PM",image:"https://images.unsplash.com/photo-1622253692010-333f2da6031d?ixlib=rb-4.0.3",rating:4.8,price:"₹1200/session"},{id:3,name:"Dr. Sarah Thompson",type:"Sports Physician",specialization:["Injury Prevention","Performance Enhancement"],experience:"18 years",clinic:"Sports Medicine Institute",timings:"8:00 AM - 4:00 PM",image:"https://images.unsplash.com/photo-1594824476967-48c8b964273f?ixlib=rb-4.0.3",rating:5,price:"₹2000/session"}],jN=()=>b.jsxs("div",{className:"rehab-page",children:[b.jsxs("div",{className:"rehab-header",children:[b.jsx("h1",{children:"Sports Rehabilitation Specialists"}),b.jsx("p",{children:"Expert care for your recovery and performance enhancement"})]}),b.jsx("div",{className:"specialists-grid",children:VN.map(r=>b.jsxs("div",{className:"specialist-card",children:[b.jsxs("div",{className:"specialist-image",children:[b.jsx("img",{src:r.image,alt:r.name}),b.jsxs("div",{className:"specialist-rating",children:[b.jsx("span",{children:"★"})," ",r.rating]}),b.jsx("div",{className:"specialist-type",children:r.type})]}),b.jsxs("div",{className:"specialist-info",children:[b.jsx("h2",{children:r.name}),b.jsx("div",{className:"specialization-tags",children:r.specialization.map((e,t)=>b.jsx("span",{className:"spec-tag",children:e},t))}),b.jsxs("div",{className:"specialist-details",children:[b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Clinic:"})," ",r.clinic]}),b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Experience:"})," ",r.experience]}),b.jsxs("div",{className:"detail-item",children:[b.jsx("strong",{children:"Timings:"})," ",r.timings]}),b.jsxs("div",{className:"detail-item price",children:[b.jsx("strong",{children:"Consultation Fee:"})," ",r.price]})]}),b.jsx("button",{className:"book-specialist-btn",children:"Book Consultation"})]})]},r.id))})]});function FN(){const r=async()=>{try{const a=JSON.parse(localStorage.getItem("userData"));if(!a||!a.uid)return;const c=$f(Jl(Ds,"users"),Tu("uid","==",a.uid)),E=(await ju(c)).docs.map(w=>({name:w.data().name,age:w.data().age}));console.log("All Users:",E)}catch(a){console.error("Error fetching user data:",a)}};ee.useEffect(()=>{r()},[]);const[e,t]=ee.useState(!0);return ee.useEffect(()=>{const a=setTimeout(()=>{t(!1)},1e3);return()=>clearTimeout(a)},[]),e?b.jsx("div",{className:"loading-screen",children:b.jsxs("div",{className:"logo-container",children:[b.jsx("h1",{className:"logo-text",children:"SPORTZ"}),b.jsx("div",{className:"loading-spinner"})]})}):b.jsx(RT,{basename:"/",children:b.jsxs("div",{className:"App",children:[b.jsx(S6,{}),b.jsx(C6,{}),b.jsxs(aT,{children:[b.jsx(tu,{path:"/",element:b.jsx(ON,{})}),b.jsx(tu,{path:"/venues",element:b.jsx(kN,{})}),b.jsx(tu,{path:"/trainers",element:b.jsx(UN,{})}),b.jsx(tu,{path:"/rehabilitation",element:b.jsx(jN,{})})]})]})})}pv.createRoot(document.getElementById("root")).render(b.jsx(oo.StrictMode,{children:b.jsx(FN,{})}));
